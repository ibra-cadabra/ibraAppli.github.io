"use strict";(self.webpackChunktechFibreApplication=self.webpackChunktechFibreApplication||[]).push([[179],{2011:(dt,Ie,V)=>{V.d(Ie,{Dh:()=>ge,GT:()=>ye,cc:()=>Re,hO:()=>Qe,on:()=>W,pX:()=>re,xv:()=>he});var l=V(5e3),ee=V(127),U=V(5813);dt=V.hmd(dt);const ue=["ngOnDestroy"],re=(De,ot,Je,Me={})=>new Proxy(De,{get:(Ee,xe)=>Je.runOutsideAngular(()=>{var Ze;if(De[xe])return(null===(Ze=null==Me?void 0:Me.spy)||void 0===Ze?void 0:Ze.get)&&Me.spy.get(xe,De[xe]),De[xe];if(ue.indexOf(xe)>-1)return()=>{};const qe=ot.toPromise().then(se=>{const X=se&&se[xe];return"function"==typeof X?X.bind(se):X&&X.then?X.then(ae=>Je.run(()=>ae)):Je.run(()=>X)});return new Proxy(()=>{},{get:(se,X)=>qe[X],apply:(se,X,ae)=>qe.then(we=>{var le;const Ne=we&&we(...ae);return(null===(le=null==Me?void 0:Me.spy)||void 0===le?void 0:le.apply)&&Me.spy.apply(xe,ae,Ne),Ne})})})}),ye=(De,ot)=>{ot.forEach(Je=>{Object.getOwnPropertyNames(Je.prototype||Je).forEach(Me=>{Object.defineProperty(De.prototype,Me,Object.getOwnPropertyDescriptor(Je.prototype||Je,Me))})})};class ie{constructor(ot){return ot}}const ge=new l.OlP("angularfire2.app.options"),he=new l.OlP("angularfire2.app.name");function W(De,ot,Je){const Ee="object"==typeof Je&&Je||{};Ee.name=Ee.name||"string"==typeof Je&&Je||"[DEFAULT]";const Ze=ee.Z.apps.filter(qe=>qe&&qe.name===Ee.name)[0]||ot.runOutsideAngular(()=>ee.Z.initializeApp(De,Ee));try{JSON.stringify(De)!==JSON.stringify(Ze.options)&&z("error",`${Ze.name} Firebase App already initialized with different options${dt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(qe){}return new ie(Ze)}const z=(De,...ot)=>{(0,l.X6Q)()&&"undefined"!=typeof console&&console[De](...ot)},ne={provide:ie,useFactory:W,deps:[ge,l.R0b,[new l.FiY,he]]};let Qe=(()=>{class De{constructor(Je){ee.Z.registerVersion("angularfire",U.q4.full,"core"),ee.Z.registerVersion("angularfire",U.q4.full,"app-compat"),ee.Z.registerVersion("angular",l.q4F.full,Je.toString())}static initializeApp(Je,Me){return{ngModule:De,providers:[{provide:ge,useValue:Je},{provide:he,useValue:Me}]}}}return De.\u0275fac=function(Je){return new(Je||De)(l.LFG(l.Lbi))},De.\u0275mod=l.oAB({type:De}),De.\u0275inj=l.cJS({providers:[ne]}),De})();function Re(De,ot,Je,Me,Ee){const[,xe,Ze]=globalThis.\u0275AngularfireInstanceCache.find(qe=>qe[0]===De)||[];if(xe)return function Fe(De,ot){try{return De.toString()===ot.toString()}catch(Je){return De===ot}}(Ee,Ze)||(_e("error",`${ot} was already initialized on the ${Je} Firebase App with different settings.${je?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:Ee,was:Ze})),xe;{const qe=Me();return globalThis.\u0275AngularfireInstanceCache.push([De,qe,Ee]),qe}}const je=!!dt.hot,_e=(De,...ot)=>{(0,l.X6Q)()&&"undefined"!=typeof console&&console[De](...ot)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(dt,Ie,V)=>{V.d(Ie,{q4:()=>to,iC:()=>ba,fc:()=>bi,HU:()=>zc,vb:()=>js,JM:()=>Yl});var l=V(5e3),ee=V(5867),U=V(5861),ue=V(9681),re=V(2090),ye=V(4859),ie=V(1877);const ge="@firebase/installations",z="w:0.5.8",ne="FIS_v2",De=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ot(S){return S instanceof re.ZR&&S.code.includes("request-failed")}function Je({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function Me(S){return{token:S.token,requestStatus:2,expiresIn:ae(S.expiresIn),creationTime:Date.now()}}function Ee(S,T){return xe.apply(this,arguments)}function xe(){return(xe=(0,U.Z)(function*(S,T){const H=(yield T.json()).error;return De.create("request-failed",{requestName:S,serverCode:H.code,serverMessage:H.message,serverStatus:H.status})})).apply(this,arguments)}function Ze({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function qe(S,{refreshToken:T}){const P=Ze(S);return P.append("Authorization",function we(S){return`${ne} ${S}`}(T)),P}function se(S){return X.apply(this,arguments)}function X(){return(X=(0,U.Z)(function*(S){const T=yield S();return T.status>=500&&T.status<600?S():T})).apply(this,arguments)}function ae(S){return Number(S.replace("s","000"))}function le(S,T){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,U.Z)(function*({appConfig:S,heartbeatServiceProvider:T},{fid:P}){const H=Je(S),Q=Ze(S),oe=T.getImmediate({optional:!0});if(oe){const at=yield oe.getHeartbeatsHeader();at&&Q.append("x-firebase-client",at)}const Oe={method:"POST",headers:Q,body:JSON.stringify({fid:P,authVersion:ne,appId:S.appId,sdkVersion:z})},Dt=yield se(()=>fetch(H,Oe));if(Dt.ok){const at=yield Dt.json();return{fid:at.fid||P,registrationStatus:2,refreshToken:at.refreshToken,authToken:Me(at.authToken)}}throw yield Ee("Create Installation",Dt)})).apply(this,arguments)}function de(S){return new Promise(T=>{setTimeout(T,S)})}const on=/^[cdef][\w-]{21}$/;function ht(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const P=function vt(S){return function At(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return on.test(P)?P:""}catch(S){return""}}function bn(S){return`${S.appName}!${S.appId}`}const yn=new Map;function Wr(S,T){const P=bn(S);sn(P,T),function Wt(S,T){const P=function pr(){return!Oi&&"BroadcastChannel"in self&&(Oi=new BroadcastChannel("[Firebase] FID Change"),Oi.onmessage=S=>{sn(S.data.key,S.data.fid)}),Oi}();P&&P.postMessage({key:S,fid:T}),function ws(){0===yn.size&&Oi&&(Oi.close(),Oi=null)}()}(P,T)}function sn(S,T){const P=yn.get(S);if(P)for(const H of P)H(T)}let Oi=null;const Ji="firebase-installations-store";let Wo=null;function Do(){return Wo||(Wo=(0,re.X3)("firebase-installations-database",1,(S,T)=>{0===T&&S.createObjectStore(Ji)})),Wo}function gt(S,T){return mr.apply(this,arguments)}function mr(){return(mr=(0,U.Z)(function*(S,T){const P=bn(S),Q=(yield Do()).transaction(Ji,"readwrite"),oe=Q.objectStore(Ji),ke=yield oe.get(P);return yield oe.put(T,P),yield Q.complete,(!ke||ke.fid!==T.fid)&&Wr(S,T.fid),T})).apply(this,arguments)}function Ei(S){return pi.apply(this,arguments)}function pi(){return(pi=(0,U.Z)(function*(S){const T=bn(S),H=(yield Do()).transaction(Ji,"readwrite");yield H.objectStore(Ji).delete(T),yield H.complete})).apply(this,arguments)}function Sr(S,T){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,U.Z)(function*(S,T){const P=bn(S),Q=(yield Do()).transaction(Ji,"readwrite"),oe=Q.objectStore(Ji),ke=yield oe.get(P),Oe=T(ke);return void 0===Oe?yield oe.delete(P):yield oe.put(Oe,P),yield Q.complete,Oe&&(!ke||ke.fid!==Oe.fid)&&Wr(S,Oe.fid),Oe})).apply(this,arguments)}function Sn(S){return xi.apply(this,arguments)}function xi(){return(xi=(0,U.Z)(function*(S){let T;const P=yield Sr(S.appConfig,H=>{const Q=Yo(H),oe=Za(S,Q);return T=oe.registrationPromise,oe.installationEntry});return""===P.fid?{installationEntry:yield T}:{installationEntry:P,registrationPromise:T}})).apply(this,arguments)}function Yo(S){return Zt(S||{fid:ht(),registrationStatus:0})}function Za(S,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(De.create("app-offline"))};const P={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},H=function Yt(S,T){return ct.apply(this,arguments)}(S,P);return{installationEntry:P,registrationPromise:H}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:It(S)}:{installationEntry:T}}function ct(){return(ct=(0,U.Z)(function*(S,T){try{const P=yield le(S,T);return gt(S.appConfig,P)}catch(P){throw ot(P)&&409===P.customData.serverCode?yield Ei(S.appConfig):yield gt(S.appConfig,{fid:T.fid,registrationStatus:0}),P}})).apply(this,arguments)}function It(S){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,U.Z)(function*(S){let T=yield Io(S.appConfig);for(;1===T.registrationStatus;)yield de(100),T=yield Io(S.appConfig);if(0===T.registrationStatus){const{installationEntry:P,registrationPromise:H}=yield Sn(S);return H||P}return T})).apply(this,arguments)}function Io(S){return Sr(S,T=>{if(!T)throw De.create("installation-not-found");return Zt(T)})}function Zt(S){return function na(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function ji(S,T){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,U.Z)(function*({appConfig:S,heartbeatServiceProvider:T},P){const H=bt(S,P),Q=qe(S,P),oe=T.getImmediate({optional:!0});if(oe){const at=yield oe.getHeartbeatsHeader();at&&Q.append("x-firebase-client",at)}const Oe={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:z,appId:S.appId}})},Dt=yield se(()=>fetch(H,Oe));if(Dt.ok)return Me(yield Dt.json());throw yield Ee("Generate Auth Token",Dt)})).apply(this,arguments)}function bt(S,{fid:T}){return`${Je(S)}/${T}/authTokens:generate`}function Hi(S){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,U.Z)(function*(S,T=!1){let P;const H=yield Sr(S.appConfig,oe=>{if(!$t(oe))throw De.create("not-registered");const ke=oe.authToken;if(!T&&q(ke))return oe;if(1===ke.requestStatus)return P=tt(S,T),oe;{if(!navigator.onLine)throw De.create("app-offline");const Oe=Y(oe);return P=yt(S,Oe),Oe}});return P?yield P:H.authToken})).apply(this,arguments)}function tt(S,T){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,U.Z)(function*(S,T){let P=yield nt(S.appConfig);for(;1===P.authToken.requestStatus;)yield de(100),P=yield nt(S.appConfig);const H=P.authToken;return 0===H.requestStatus?Hi(S,T):H})).apply(this,arguments)}function nt(S){return Sr(S,T=>{if(!$t(T))throw De.create("not-registered");return function pe(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function yt(S,T){return qt.apply(this,arguments)}function qt(){return(qt=(0,U.Z)(function*(S,T){try{const P=yield ji(S,T),H=Object.assign(Object.assign({},T),{authToken:P});return yield gt(S.appConfig,H),P}catch(P){if(!ot(P)||401!==P.customData.serverCode&&404!==P.customData.serverCode){const H=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield gt(S.appConfig,H)}else yield Ei(S.appConfig);throw P}})).apply(this,arguments)}function $t(S){return void 0!==S&&2===S.registrationStatus}function q(S){return 2===S.requestStatus&&!function $(S){const T=Date.now();return T<S.creationTime||S.creationTime+S.expiresIn<T+36e5}(S)}function Y(S){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:T})}function $e(){return($e=(0,U.Z)(function*(S){const T=S,{installationEntry:P,registrationPromise:H}=yield Sn(T);return H?H.catch(console.error):Hi(T).catch(console.error),P.fid})).apply(this,arguments)}function rn(){return(rn=(0,U.Z)(function*(S,T=!1){const P=S;return yield $i(P),(yield Hi(P,T)).token})).apply(this,arguments)}function $i(S){return en.apply(this,arguments)}function en(){return(en=(0,U.Z)(function*(S){const{registrationPromise:T}=yield Sn(S);T&&(yield T)})).apply(this,arguments)}function mi(S){return De.create("missing-app-config-values",{valueName:S})}const Rl="installations",Le=S=>{const T=S.getProvider("app").getImmediate(),P=function Zo(S){if(!S||!S.options)throw mi("App Configuration");if(!S.name)throw mi("App Name");const T=["projectId","apiKey","appId"];for(const P of T)if(!S.options[P])throw mi(P);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(T);return{app:T,appConfig:P,heartbeatServiceProvider:(0,ue._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Ut=S=>{const T=S.getProvider("app").getImmediate(),P=(0,ue._getProvider)(T,Rl).getImmediate();return{getId:()=>function te(S){return $e.apply(this,arguments)}(P),getToken:Q=>function xt(S){return rn.apply(this,arguments)}(P,Q)}};(function xn(){(0,ue._registerComponent)(new ye.wA(Rl,Le,"PUBLIC")),(0,ue._registerComponent)(new ye.wA("installations-internal",Ut,"PRIVATE"))})(),(0,ue.registerVersion)(ge,"0.5.8"),(0,ue.registerVersion)(ge,"0.5.8","esm2017");const Fi="@firebase/remote-config",ei=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Pl{constructor(T,P,H,Q){this.client=T,this.storage=P,this.storageCache=H,this.logger=Q}isCachedDataFresh(T,P){if(!P)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const H=Date.now()-P,Q=H<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${H}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Q}.`),Q}fetch(T){var P=this;return(0,U.Z)(function*(){const[H,Q]=yield Promise.all([P.storage.getLastSuccessfulFetchTimestampMillis(),P.storage.getLastSuccessfulFetchResponse()]);if(Q&&P.isCachedDataFresh(T.cacheMaxAgeMillis,H))return Q;T.eTag=Q&&Q.eTag;const oe=yield P.client.fetch(T),ke=[P.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===oe.status&&ke.push(P.storage.setLastSuccessfulFetchResponse(oe)),yield Promise.all(ke),oe})()}}function Wd(S=navigator){return S.languages&&S.languages[0]||S.language}class yc{constructor(T,P,H,Q,oe,ke){this.firebaseInstallations=T,this.sdkVersion=P,this.namespace=H,this.projectId=Q,this.apiKey=oe,this.appId=ke}fetch(T){var P=this;return(0,U.Z)(function*(){const[H,Q]=yield Promise.all([P.firebaseInstallations.getId(),P.firebaseInstallations.getToken()]),ke=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${P.projectId}/namespaces/${P.namespace}:fetch?key=${P.apiKey}`,Oe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Dt={sdk_version:P.sdkVersion,app_instance_id:H,app_instance_id_token:Q,app_id:P.appId,language_code:Wd()},at={method:"POST",headers:Oe,body:JSON.stringify(Dt)},Ft=fetch(ke,at),Rt=new Promise((ro,nr)=>{T.signal.addEventListener(()=>{const Wc=new Error("The operation was aborted.");Wc.name="AbortError",nr(Wc)})});let Mi;try{yield Promise.race([Ft,Rt]),Mi=yield Ft}catch(ro){let nr="fetch-client-network";throw"AbortError"===ro.name&&(nr="fetch-timeout"),ei.create(nr,{originalErrorMessage:ro.message})}let Mn=Mi.status;const dl=Mi.headers.get("ETag")||void 0;let ya,io;if(200===Mi.status){let ro;try{ro=yield Mi.json()}catch(nr){throw ei.create("fetch-client-parse",{originalErrorMessage:nr.message})}ya=ro.entries,io=ro.state}if("INSTANCE_STATE_UNSPECIFIED"===io?Mn=500:"NO_CHANGE"===io?Mn=304:("NO_TEMPLATE"===io||"EMPTY_CONFIG"===io)&&(ya={}),304!==Mn&&200!==Mn)throw ei.create("fetch-status",{httpStatus:Mn});return{status:Mn,eTag:dl,config:ya}})()}}class kg{constructor(T,P){this.client=T,this.storage=P}fetch(T){var P=this;return(0,U.Z)(function*(){const H=(yield P.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return P.attemptFetch(T,H)})()}attemptFetch(T,{throttleEndTimeMillis:P,backoffCount:H}){var Q=this;return(0,U.Z)(function*(){yield function si(S,T){return new Promise((P,H)=>{const Q=Math.max(T-Date.now(),0),oe=setTimeout(P,Q);S.addEventListener(()=>{clearTimeout(oe),H(ei.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,P);try{const oe=yield Q.client.fetch(T);return yield Q.storage.deleteThrottleMetadata(),oe}catch(oe){if(!function Yd(S){if(!(S instanceof re.ZR&&S.customData))return!1;const T=Number(S.customData.httpStatus);return 429===T||500===T||503===T||504===T}(oe))throw oe;const ke={throttleEndTimeMillis:Date.now()+(0,re.$s)(H),backoffCount:H+1};return yield Q.storage.setThrottleMetadata(ke),Q.attemptFetch(T,ke)}})()}}class Zd{constructor(T,P,H,Q,oe){this.app=T,this._client=P,this._storageCache=H,this._storage=Q,this._logger=oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Au(S,T){const P=S.target.error||void 0;return ei.create(T,{originalErrorMessage:P&&P.message})}const Ss="app_namespace_store";class Nl{constructor(T,P,H,Q=function Pg(){return new Promise((S,T)=>{try{const P=indexedDB.open("firebase_remote_config",1);P.onerror=H=>{T(Au(H,"storage-open"))},P.onsuccess=H=>{S(H.target.result)},P.onupgradeneeded=H=>{0===H.oldVersion&&H.target.result.createObjectStore(Ss,{keyPath:"compositeKey"})}}catch(P){T(ei.create("storage-open",{originalErrorMessage:P}))}})}()){this.appId=T,this.appName=P,this.namespace=H,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var P=this;return(0,U.Z)(function*(){const H=yield P.openDbPromise;return new Promise((Q,oe)=>{const Oe=H.transaction([Ss],"readonly").objectStore(Ss),Dt=P.createCompositeKey(T);try{const at=Oe.get(Dt);at.onerror=Ft=>{oe(Au(Ft,"storage-get"))},at.onsuccess=Ft=>{const Rt=Ft.target.result;Q(Rt?Rt.value:void 0)}}catch(at){oe(ei.create("storage-get",{originalErrorMessage:at&&at.message}))}})})()}set(T,P){var H=this;return(0,U.Z)(function*(){const Q=yield H.openDbPromise;return new Promise((oe,ke)=>{const Dt=Q.transaction([Ss],"readwrite").objectStore(Ss),at=H.createCompositeKey(T);try{const Ft=Dt.put({compositeKey:at,value:P});Ft.onerror=Rt=>{ke(Au(Rt,"storage-set"))},Ft.onsuccess=()=>{oe()}}catch(Ft){ke(ei.create("storage-set",{originalErrorMessage:Ft&&Ft.message}))}})})()}delete(T){var P=this;return(0,U.Z)(function*(){const H=yield P.openDbPromise;return new Promise((Q,oe)=>{const Oe=H.transaction([Ss],"readwrite").objectStore(Ss),Dt=P.createCompositeKey(T);try{const at=Oe.delete(Dt);at.onerror=Ft=>{oe(Au(Ft,"storage-delete"))},at.onsuccess=()=>{Q()}}catch(at){oe(ei.create("storage-delete",{originalErrorMessage:at&&at.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Qd{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,U.Z)(function*(){const P=T.storage.getLastFetchStatus(),H=T.storage.getLastSuccessfulFetchTimestampMillis(),Q=T.storage.getActiveConfig(),oe=yield P;oe&&(T.lastFetchStatus=oe);const ke=yield H;ke&&(T.lastSuccessfulFetchTimestampMillis=ke);const Oe=yield Q;Oe&&(T.activeConfig=Oe)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function ra(){return Xf.apply(this,arguments)}function Xf(){return(Xf=(0,U.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(S){return!1}})).apply(this,arguments)}!function Qa(){(0,ue._registerComponent)(new ye.wA("remote-config",function S(T,{instanceIdentifier:P}){const H=T.getProvider("app").getImmediate(),Q=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ei.create("registration-window");if(!(0,re.hl)())throw ei.create("indexed-db-unavailable");const{projectId:oe,apiKey:ke,appId:Oe}=H.options;if(!oe)throw ei.create("registration-project-id");if(!ke)throw ei.create("registration-api-key");if(!Oe)throw ei.create("registration-app-id");const Dt=new Nl(Oe,H.name,P=P||"firebase"),at=new Qd(Dt),Ft=new ie.Yd(Fi);Ft.logLevel=ie.in.ERROR;const Rt=new yc(Q,ue.SDK_VERSION,P,oe,ke,Oe),Mi=new kg(Rt,Dt),Mn=new Pl(Mi,Dt,at,Ft),dl=new Zd(H,Mn,at,Dt,Ft);return function ti(S){const T=(0,re.m9)(S);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(dl),dl},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(Fi,"0.3.7"),(0,ue.registerVersion)(Fi,"0.3.7","esm2017")}();const ku="/firebase-messaging-sw.js",Ts="/firebase-cloud-messaging-push-scope",vr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",oa="google.c.a.c_id",Fl="google.c.a.c_l",Xd="google.c.a.ts",Ng="google.c.a.e";var Ms=(()=>{return(S=Ms||(Ms={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",Ms;var S})();function kr(S){const T=new Uint8Array(S);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Cc(S){const P=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),H=atob(P),Q=new Uint8Array(H.length);for(let oe=0;oe<H.length;++oe)Q[oe]=H.charCodeAt(oe);return Q}const Ec="fcm_token_details_db",Li="fcm_token_object_Store";function Jf(S){return xc.apply(this,arguments)}function xc(){return xc=(0,U.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(oe=>oe.name).includes(Ec))return null;let T=null;return(yield(0,re.X3)(Ec,5,function(){var H=(0,U.Z)(function*(Q,oe,ke,Oe){var Dt;if(oe<2||!Q.objectStoreNames.contains(Li))return;const at=Oe.objectStore(Li),Ft=yield at.index("fcmSenderId").get(S);if(yield at.clear(),Ft)if(2===oe){const Rt=Ft;if(!Rt.auth||!Rt.p256dh||!Rt.endpoint)return;T={token:Rt.fcmToken,createTime:null!==(Dt=Rt.createTime)&&void 0!==Dt?Dt:Date.now(),subscriptionOptions:{auth:Rt.auth,p256dh:Rt.p256dh,endpoint:Rt.endpoint,swScope:Rt.swScope,vapidKey:"string"==typeof Rt.vapidKey?Rt.vapidKey:kr(Rt.vapidKey)}}}else if(3===oe){const Rt=Ft;T={token:Rt.fcmToken,createTime:Rt.createTime,subscriptionOptions:{auth:kr(Rt.auth),p256dh:kr(Rt.p256dh),endpoint:Rt.endpoint,swScope:Rt.swScope,vapidKey:kr(Rt.vapidKey)}}}else if(4===oe){const Rt=Ft;T={token:Rt.fcmToken,createTime:Rt.createTime,subscriptionOptions:{auth:kr(Rt.auth),p256dh:kr(Rt.p256dh),endpoint:Rt.endpoint,swScope:Rt.swScope,vapidKey:kr(Rt.vapidKey)}}}});return function(Q,oe,ke,Oe){return H.apply(this,arguments)}}())).close(),yield(0,re.Lj)(Ec),yield(0,re.Lj)("fcm_vapid_details_db"),yield(0,re.Lj)("undefined"),Jd(T)?T:null}),xc.apply(this,arguments)}function Jd(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:T}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Jo="firebase-messaging-store";let Ll=null;function Ru(){return Ll||(Ll=(0,re.X3)("firebase-messaging-database",1,(S,T)=>{0===T&&S.createObjectStore(Jo)})),Ll}function Tn(S){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,U.Z)(function*(S){const T=aa(S),H=yield(yield Ru()).transaction(Jo).objectStore(Jo).get(T);if(H)return H;{const Q=yield Jf(S.appConfig.senderId);if(Q)return yield As(S,Q),Q}})).apply(this,arguments)}function As(S,T){return pn.apply(this,arguments)}function pn(){return(pn=(0,U.Z)(function*(S,T){const P=aa(S),Q=(yield Ru()).transaction(Jo,"readwrite");return yield Q.objectStore(Jo).put(T,P),yield Q.complete,T})).apply(this,arguments)}function eh(S){return sa.apply(this,arguments)}function sa(){return(sa=(0,U.Z)(function*(S){const T=aa(S),H=(yield Ru()).transaction(Jo,"readwrite");yield H.objectStore(Jo).delete(T),yield H.complete})).apply(this,arguments)}function aa({appConfig:S}){return S.appId}const ni=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Bl(S,T){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,U.Z)(function*(S,T){const P=yield Rs(S),H=Et(T),Q={method:"POST",headers:P,body:JSON.stringify(H)};let oe;try{oe=yield(yield fetch(br(S.appConfig),Q)).json()}catch(ke){throw ni.create("token-subscribe-failed",{errorInfo:ke})}if(oe.error)throw ni.create("token-subscribe-failed",{errorInfo:oe.error.message});if(!oe.token)throw ni.create("token-subscribe-no-token");return oe.token})).apply(this,arguments)}function qi(S,T){return ks.apply(this,arguments)}function ks(){return(ks=(0,U.Z)(function*(S,T){const P=yield Rs(S),H=Et(T.subscriptionOptions),Q={method:"PATCH",headers:P,body:JSON.stringify(H)};let oe;try{oe=yield(yield fetch(`${br(S.appConfig)}/${T.token}`,Q)).json()}catch(ke){throw ni.create("token-update-failed",{errorInfo:ke})}if(oe.error)throw ni.create("token-update-failed",{errorInfo:oe.error.message});if(!oe.token)throw ni.create("token-update-no-token");return oe.token})).apply(this,arguments)}function es(S,T){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,U.Z)(function*(S,T){const H={method:"DELETE",headers:yield Rs(S)};try{const oe=yield(yield fetch(`${br(S.appConfig)}/${T}`,H)).json();if(oe.error)throw ni.create("token-unsubscribe-failed",{errorInfo:oe.error.message})}catch(Q){throw ni.create("token-unsubscribe-failed",{errorInfo:Q})}})).apply(this,arguments)}function br({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function Rs(S){return Os.apply(this,arguments)}function Os(){return(Os=(0,U.Z)(function*({appConfig:S,installations:T}){const P=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${P}`})})).apply(this,arguments)}function Et({p256dh:S,auth:T,endpoint:P,vapidKey:H}){const Q={web:{endpoint:P,auth:T,p256dh:S}};return H!==vr&&(Q.web.applicationPubKey=H),Q}const el=6048e5;function Tc(S){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,U.Z)(function*(S){const T=yield Kt(S.swRegistration,S.vapidKey),P={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:T.endpoint,auth:kr(T.getKey("auth")),p256dh:kr(T.getKey("p256dh"))},H=yield Tn(S.firebaseDependencies);if(H){if(Rn(H.subscriptionOptions,P))return Date.now()>=H.createTime+el?kc(S,{token:H.token,createTime:Date.now(),subscriptionOptions:P}):H.token;try{yield es(S.firebaseDependencies,H.token)}catch(Q){console.warn(Q)}return la(S.firebaseDependencies,P)}return la(S.firebaseDependencies,P)})).apply(this,arguments)}function Ac(S){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,U.Z)(function*(S){const T=yield Tn(S.firebaseDependencies);T&&(yield es(S.firebaseDependencies,T.token),yield eh(S.firebaseDependencies));const P=yield S.swRegistration.pushManager.getSubscription();return!P||P.unsubscribe()})).apply(this,arguments)}function kc(S,T){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,U.Z)(function*(S,T){try{const P=yield qi(S.firebaseDependencies,T),H=Object.assign(Object.assign({},T),{token:P,createTime:Date.now()});return yield As(S.firebaseDependencies,H),P}catch(P){throw yield Ac(S),P}})).apply(this,arguments)}function la(S,T){return Te.apply(this,arguments)}function Te(){return(Te=(0,U.Z)(function*(S,T){const H={token:yield Bl(S,T),createTime:Date.now(),subscriptionOptions:T};return yield As(S,H),H.token})).apply(this,arguments)}function Kt(S,T){return ca.apply(this,arguments)}function ca(){return(ca=(0,U.Z)(function*(S,T){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Cc(T)})})).apply(this,arguments)}function Rn(S,T){return T.vapidKey===S.vapidKey&&T.endpoint===S.endpoint&&T.auth===S.auth&&T.p256dh===S.p256dh}function Nu(S){const T={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function Ps(S,T){if(!T.notification)return;S.notification={};const P=T.notification.title;P&&(S.notification.title=P);const H=T.notification.body;H&&(S.notification.body=H);const Q=T.notification.image;Q&&(S.notification.image=Q)}(T,S),function To(S,T){!T.data||(S.data=T.data)}(T,S),function Fu(S,T){if(!T.fcmOptions)return;S.fcmOptions={};const P=T.fcmOptions.link;P&&(S.fcmOptions.link=P);const H=T.fcmOptions.analytics_label;H&&(S.fcmOptions.analyticsLabel=H)}(T,S),T}function Vl(S){return"object"==typeof S&&!!S&&oa in S}function th(S,T){const P=[];for(let H=0;H<S.length;H++)P.push(S.charAt(H)),H<T.length&&P.push(T.charAt(H));return P.join("")}function Rc(S){return ni.create("missing-app-config-values",{valueName:S})}th("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),th("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ul{constructor(T,P,H){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function ep(S){if(!S||!S.options)throw Rc("App Configuration Object");if(!S.name)throw Rc("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:P}=S;for(const H of T)if(!P[H])throw Rc(H);return{appName:S.name,projectId:P.projectId,apiKey:P.apiKey,appId:P.appId,senderId:P.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Q,installations:P,analyticsProvider:H}}_delete(){return Promise.resolve()}}function _i(S){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,U.Z)(function*(S){try{S.swRegistration=yield navigator.serviceWorker.register(ku,{scope:Ts}),S.swRegistration.update().catch(()=>{})}catch(T){throw ni.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function Oc(S,T){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,U.Z)(function*(S,T){if(!T&&!S.swRegistration&&(yield _i(S)),T||!S.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw ni.create("invalid-sw-registration");S.swRegistration=T}})).apply(this,arguments)}function Kr(S,T){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,U.Z)(function*(S,T){T?S.vapidKey=T:S.vapidKey||(S.vapidKey=vr)})).apply(this,arguments)}function Bu(){return(Bu=(0,U.Z)(function*(S,T){if(!navigator)throw ni.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ni.create("permission-blocked");return yield Kr(S,null==T?void 0:T.vapidKey),yield Oc(S,null==T?void 0:T.serviceWorkerRegistration),Tc(S)})).apply(this,arguments)}function Vu(S,T,P){return tl.apply(this,arguments)}function tl(){return(tl=(0,U.Z)(function*(S,T,P){const H=Pc(T);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(H,{message_id:P[oa],message_name:P[Fl],message_time:P[Xd],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Pc(S){switch(S){case Ms.NOTIFICATION_CLICKED:return"notification_open";case Ms.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Nc(){return(Nc=(0,U.Z)(function*(S,T){const P=T.data;if(!P.isFirebaseMessaging)return;S.onMessageHandler&&P.messageType===Ms.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(Nu(P)):S.onMessageHandler.next(Nu(P)));const H=P.data;Vl(H)&&"1"===H[Ng]&&(yield Vu(S,P.messageType,H))})).apply(this,arguments)}const ih="@firebase/messaging",Fc=S=>{const T=new Ul(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",P=>function nh(S,T){return Nc.apply(this,arguments)}(T,P)),T},ua=S=>{const T=S.getProvider("messaging").getImmediate();return{getToken:H=>function jl(S,T){return Bu.apply(this,arguments)}(T,H)}};function oh(){return $l.apply(this,arguments)}function $l(){return($l=(0,U.Z)(function*(){try{yield(0,re.eu)()}catch(S){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function rh(){(0,ue._registerComponent)(new ye.wA("messaging",Fc,"PUBLIC")),(0,ue._registerComponent)(new ye.wA("messaging-internal",ua,"PRIVATE")),(0,ue.registerVersion)(ih,"0.9.12"),(0,ue.registerVersion)(ih,"0.9.12","esm2017")}();const Lc="analytics",uy="firebase_id",Gl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Bc="https://www.googletagmanager.com/gtag/js",ii=new ie.Yd("@firebase/analytics");function Hu(S){return Promise.all(S.map(T=>T.catch(P=>P)))}function np(S,T){const P=document.createElement("script");P.src=`${Bc}?l=${S}&id=${T}`,P.async=!0,document.head.appendChild(P)}function ts(S,T,P,H,Q,oe){return il.apply(this,arguments)}function il(){return(il=(0,U.Z)(function*(S,T,P,H,Q,oe){const ke=H[Q];try{if(ke)yield T[ke];else{const Dt=(yield Hu(P)).find(at=>at.measurementId===Q);Dt&&(yield T[Dt.appId])}}catch(Oe){ii.error(Oe)}S("config",Q,oe)})).apply(this,arguments)}function $u(S,T,P,H,Q){return rl.apply(this,arguments)}function rl(){return(rl=(0,U.Z)(function*(S,T,P,H,Q){try{let oe=[];if(Q&&Q.send_to){let ke=Q.send_to;Array.isArray(ke)||(ke=[ke]);const Oe=yield Hu(P);for(const Dt of ke){const at=Oe.find(Rt=>Rt.measurementId===Dt),Ft=at&&T[at.appId];if(!Ft){oe=[];break}oe.push(Ft)}}0===oe.length&&(oe=Object.values(T)),yield Promise.all(oe),S("event",H,Q||{})}catch(oe){ii.error(oe)}})).apply(this,arguments)}function Fg(){const S=window.document.getElementsByTagName("script");for(const T of Object.values(S))if(T.src&&T.src.includes(Bc))return T;return null}const qn=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),zn=new class er{constructor(T={},P=1e3){this.throttleMetadata=T,this.intervalMillis=P}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,P){this.throttleMetadata[T]=P}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Fs(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function ah(S){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,U.Z)(function*(S){var T;const{appId:P,apiKey:H}=S,Q={method:"GET",headers:Fs(H)},oe=Gl.replace("{app-id}",P),ke=yield fetch(oe,Q);if(200!==ke.status&&304!==ke.status){let Oe="";try{const Dt=yield ke.json();(null===(T=Dt.error)||void 0===T?void 0:T.message)&&(Oe=Dt.error.message)}catch(Dt){}throw qn.create("config-fetch-failed",{httpStatus:ke.status,responseMessage:Oe})}return ke.json()})).apply(this,arguments)}function ol(S){return sl.apply(this,arguments)}function sl(){return(sl=(0,U.Z)(function*(S,T=zn,P){const{appId:H,apiKey:Q,measurementId:oe}=S.options;if(!H)throw qn.create("no-app-id");if(!Q){if(oe)return{measurementId:oe,appId:H};throw qn.create("no-api-key")}const ke=T.getThrottleMetadata(H)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Oe=new Gu;return setTimeout((0,U.Z)(function*(){Oe.abort()}),void 0!==P?P:6e4),ha({appId:H,apiKey:Q,measurementId:oe},ke,Oe,T)})).apply(this,arguments)}function ha(S,T,P){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,U.Z)(function*(S,{throttleEndTimeMillis:T,backoffCount:P},H,Q=zn){const{appId:oe,measurementId:ke}=S;try{yield et(H,T)}catch(Oe){if(ke)return ii.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ke} provided in the "measurementId" field in the local Firebase config. [${Oe.message}]`),{appId:oe,measurementId:ke};throw Oe}try{const Oe=yield ah(S);return Q.deleteThrottleMetadata(oe),Oe}catch(Oe){if(!Lg(Oe)){if(Q.deleteThrottleMetadata(oe),ke)return ii.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ke} provided in the "measurementId" field in the local Firebase config. [${Oe.message}]`),{appId:oe,measurementId:ke};throw Oe}const Dt=503===Number(Oe.customData.httpStatus)?(0,re.$s)(P,Q.intervalMillis,30):(0,re.$s)(P,Q.intervalMillis),at={throttleEndTimeMillis:Date.now()+Dt,backoffCount:P+1};return Q.setThrottleMetadata(oe,at),ii.debug(`Calling attemptFetch again in ${Dt} millis`),ha(S,at,H,Q)}})).apply(this,arguments)}function et(S,T){return new Promise((P,H)=>{const Q=Math.max(T-Date.now(),0),oe=setTimeout(P,Q);S.addEventListener(()=>{clearTimeout(oe),H(qn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Lg(S){if(!(S instanceof re.ZR&&S.customData))return!1;const T=Number(S.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Gu{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function Uc(){return fa.apply(this,arguments)}function fa(){return(fa=(0,U.Z)(function*(){if(!(0,re.hl)())return ii.warn(qn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(S){return ii.warn(qn.create("indexeddb-unavailable",{errorInfo:S}).message),!1}return!0})).apply(this,arguments)}function Xr(){return(Xr=(0,U.Z)(function*(S,T,P,H,Q,oe,ke){var Oe;const Dt=ol(S);Dt.then(Mn=>{P[Mn.measurementId]=Mn.appId,S.options.measurementId&&Mn.measurementId!==S.options.measurementId&&ii.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${Mn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Mn=>ii.error(Mn)),T.push(Dt);const at=Uc().then(Mn=>{if(Mn)return H.getId()}),[Ft,Rt]=yield Promise.all([Dt,at]);Fg()||np(oe,Ft.measurementId),Q("js",new Date);const Mi=null!==(Oe=null==ke?void 0:ke.config)&&void 0!==Oe?Oe:{};return Mi.origin="firebase",Mi.update=!0,null!=Rt&&(Mi[uy]=Rt),Q("config",Ft.measurementId,Mi),Ft.measurementId})).apply(this,arguments)}class al{constructor(T){this.app=T}_delete(){return delete Jr[this.app.options.appId],Promise.resolve()}}let Jr={},Ls=[];const Si={};let Bs,Mo,eo="dataLayer",jc=!1;function Or(S,T,P){!function pa(){const S=[];if((0,re.ru)()&&S.push("This is a browser extension environment."),(0,re.zI)()||S.push("Cookies are not available."),S.length>0){const T=S.map((H,Q)=>`(${Q+1}) ${H}`).join(" "),P=qn.create("invalid-analytics-context",{errorInfo:T});ii.warn(P.message)}}();const H=S.options.appId;if(!H)throw qn.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw qn.create("no-api-key");ii.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Jr[H])throw qn.create("already-exists",{id:H});if(!jc){!function sh(S){let T=[];Array.isArray(window[S])?T=window[S]:window[S]=T}(eo);const{wrappedGtag:oe,gtagCore:ke}=function Vc(S,T,P,H,Q){let oe=function(...ke){window[H].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(oe=window[Q]),window[Q]=function ql(S,T,P,H){function oe(){return(oe=(0,U.Z)(function*(ke,Oe,Dt){try{"event"===ke?yield $u(S,T,P,Oe,Dt):"config"===ke?yield ts(S,T,P,H,Oe,Dt):S("set",Oe)}catch(at){ii.error(at)}})).apply(this,arguments)}return function Q(ke,Oe,Dt){return oe.apply(this,arguments)}}(oe,S,T,P),{gtagCore:oe,wrappedGtag:window[Q]}}(Jr,Ls,Si,eo,"gtag");Mo=oe,Bs=ke,jc=!0}return Jr[H]=function On(S,T,P,H,Q,oe,ke){return Xr.apply(this,arguments)}(S,Ls,Si,T,Bs,eo,P),new al(S)}function Wn(){return(Wn=(0,U.Z)(function*(S,T,P,H,Q){if(Q&&Q.global)S("event",P,H);else{const oe=yield T;S("event",P,Object.assign(Object.assign({},H),{send_to:oe}))}})).apply(this,arguments)}function ri(){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,U.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(S){return!1}})).apply(this,arguments)}const Vs="@firebase/analytics";!function cl(){(0,ue._registerComponent)(new ye.wA(Lc,(T,{options:P})=>Or(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),P),"PUBLIC")),(0,ue._registerComponent)(new ye.wA("analytics-internal",function S(T){try{const P=T.getProvider(Lc).getImmediate();return{logEvent:(H,Q,oe)=>function Bg(S,T,P,H){S=(0,re.m9)(S),function Ao(S,T,P,H,Q){return Wn.apply(this,arguments)}(Mo,Jr[S.app.options.appId],T,P,H).catch(Q=>ii.error(Q))}(P,H,Q,oe)}}catch(P){throw qn.create("interop-component-reg-failed",{reason:P})}},"PRIVATE")),(0,ue.registerVersion)(Vs,"0.7.8"),(0,ue.registerVersion)(Vs,"0.7.8","esm2017")}();var Us=V(4408),ns=V(7565);const ai=new class zu extends ns.v{}(class $c extends Us.o{constructor(T,P){super(T,P),this.scheduler=T,this.work=P}schedule(T,P=0){return P>0?super.schedule(T,P):(this.delay=P,this.state=T,this.scheduler.flush(this),this)}execute(T,P){return P>0||this.closed?super.execute(T,P):this._execute(T,P)}requestAsyncId(T,P,H=0){return null!=H&&H>0||null==H&&this.delay>0?super.requestAsyncId(T,P,H):T.flush(this)}});var zl=V(4986),lh=V(8505),Wl=V(5363),tr=V(9468);const to=new l.GfV("7.3.0"),_a="__angularfire_symbol__analyticsIsSupportedValue",Ro="__angularfire_symbol__analyticsIsSupported",yr="__angularfire_symbol__remoteConfigIsSupportedValue",ul="__angularfire_symbol__remoteConfigIsSupported",Wu="__angularfire_symbol__messagingIsSupportedValue",qc="__angularfire_symbol__messagingIsSupported";function Yl(S,T,P){if(T){if(1===T.length)return T[0];const oe=T.filter(ke=>ke.app===P);if(1===oe.length)return oe[0]}return P.container.getProvider(S).getImmediate({optional:!0})}globalThis[Ro]||(globalThis[Ro]=ri().then(S=>globalThis[_a]=S).catch(()=>globalThis[_a]=!1)),globalThis[qc]||(globalThis[qc]=oh().then(S=>globalThis[Wu]=S).catch(()=>globalThis[Wu]=!1)),globalThis[ul]||(globalThis[ul]=ra().then(S=>globalThis[yr]=S).catch(()=>globalThis[yr]=!1));const js=(S,T)=>{const P=T?[T]:(0,ee.C6)(),H=[];return P.forEach(Q=>{Q.container.getProvider(S).instances.forEach(ke=>{H.includes(ke)||H.push(ke)})}),H};function Zl(){}class Kl{constructor(T,P=ai){this.zone=T,this.delegate=P}now(){return this.delegate.now()}schedule(T,P,H){const Q=this.zone;return this.delegate.schedule(function(ke){Q.runGuarded(()=>{T.apply(this,[ke])})},P,H)}}class Oo{constructor(T){this.zone=T,this.task=null}call(T,P){const H=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zl,{},Zl,Zl)),P.pipe((0,lh.b)({next:H,complete:H,error:H})).subscribe(T).add(H)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let zc=(()=>{class S{constructor(P){this.ngZone=P,this.outsideAngular=P.runOutsideAngular(()=>new Kl(Zone.current)),this.insideAngular=P.run(()=>new Kl(Zone.current,zl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(P){return new(P||S)(l.LFG(l.R0b))},S.\u0275prov=l.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function Po(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function bi(S){return S.pipe((0,Wl.Q)(Po().outsideAngular))}function ba(S){return Po(),function uh(S){return function(P){return(P=P.lift(new Oo(S.ngZone))).pipe((0,tr.R)(S.outsideAngular),(0,Wl.Q)(S.insideAngular))}}(Po())(S)}},2090:(dt,Ie,V)=>{V.d(Ie,{$s:()=>na,BH:()=>Re,DV:()=>Wt,Dv:()=>Cs,G6:()=>se,GJ:()=>Eo,L:()=>he,LL:()=>At,Lj:()=>qt,Mn:()=>Ze,Pz:()=>vt,Sg:()=>Fe,UG:()=>De,UI:()=>pr,US:()=>ie,Wj:()=>Yo,X3:()=>yt,Yr:()=>qe,ZB:()=>ne,ZR:()=>de,b$:()=>Me,cI:()=>ht,d:()=>Ee,dS:()=>Yt,eu:()=>ae,g5:()=>ue,gK:()=>Sn,gQ:()=>Do,h$:()=>ge,hl:()=>X,hu:()=>U,jU:()=>ot,lb:()=>Za,m9:()=>bt,ne:()=>gt,p$:()=>z,pd:()=>Wo,r3:()=>sn,ru:()=>Je,tV:()=>W,uI:()=>_e,ug:()=>ct,vZ:()=>ws,w1:()=>xe,w9:()=>un,xO:()=>xo,xb:()=>Oi,z$:()=>je,zI:()=>we,zd:()=>Ji});var l=V(5861);const U=function(q,$){if(!q)throw ue($)},ue=function(q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+q)},re=function(q){const $=[];let Y=0;for(let pe=0;pe<q.length;pe++){let te=q.charCodeAt(pe);te<128?$[Y++]=te:te<2048?($[Y++]=te>>6|192,$[Y++]=63&te|128):55296==(64512&te)&&pe+1<q.length&&56320==(64512&q.charCodeAt(pe+1))?(te=65536+((1023&te)<<10)+(1023&q.charCodeAt(++pe)),$[Y++]=te>>18|240,$[Y++]=te>>12&63|128,$[Y++]=te>>6&63|128,$[Y++]=63&te|128):($[Y++]=te>>12|224,$[Y++]=te>>6&63|128,$[Y++]=63&te|128)}return $},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,$){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,pe=[];for(let te=0;te<q.length;te+=3){const $e=q[te],xt=te+1<q.length,rn=xt?q[te+1]:0,$i=te+2<q.length,en=$i?q[te+2]:0;let En=(15&rn)<<2|en>>6,Di=63&en;$i||(Di=64,xt||(En=64)),pe.push(Y[$e>>2],Y[(3&$e)<<4|rn>>4],Y[En],Y[Di])}return pe.join("")},encodeString(q,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(q):this.encodeByteArray(re(q),$)},decodeString(q,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(q):function(q){const $=[];let Y=0,pe=0;for(;Y<q.length;){const te=q[Y++];if(te<128)$[pe++]=String.fromCharCode(te);else if(te>191&&te<224){const $e=q[Y++];$[pe++]=String.fromCharCode((31&te)<<6|63&$e)}else if(te>239&&te<365){const $i=((7&te)<<18|(63&q[Y++])<<12|(63&q[Y++])<<6|63&q[Y++])-65536;$[pe++]=String.fromCharCode(55296+($i>>10)),$[pe++]=String.fromCharCode(56320+(1023&$i))}else{const $e=q[Y++],xt=q[Y++];$[pe++]=String.fromCharCode((15&te)<<12|(63&$e)<<6|63&xt)}}return $.join("")}(this.decodeStringToByteArray(q,$))},decodeStringToByteArray(q,$){this.init_();const Y=$?this.charToByteMapWebSafe_:this.charToByteMap_,pe=[];for(let te=0;te<q.length;){const $e=Y[q.charAt(te++)],rn=te<q.length?Y[q.charAt(te)]:0;++te;const en=te<q.length?Y[q.charAt(te)]:64;++te;const Bt=te<q.length?Y[q.charAt(te)]:64;if(++te,null==$e||null==rn||null==en||null==Bt)throw Error();pe.push($e<<2|rn>>4),64!==en&&(pe.push(rn<<4&240|en>>2),64!==Bt&&pe.push(en<<6&192|Bt))}return pe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},ge=function(q){const $=re(q);return ie.encodeByteArray($,!0)},he=function(q){return ge(q).replace(/\./g,"")},W=function(q){try{return ie.decodeString(q,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function z(q){return ne(void 0,q)}function ne(q,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return $}for(const Y in $)!$.hasOwnProperty(Y)||!Qe(Y)||(q[Y]=ne(q[Y],$[Y]));return q}function Qe(q){return"__proto__"!==q}class Re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,Y)=>{this.resolve=$,this.reject=Y})}wrapCallback($){return(Y,pe)=>{Y?this.reject(Y):this.resolve(pe),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(Y):$(Y,pe))}}}function Fe(q,$){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const pe=$||"demo-project",te=q.iat||0,$e=q.sub||q.user_id;if(!$e)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xt=Object.assign({iss:`https://securetoken.google.com/${pe}`,aud:pe,iat:te,exp:te+3600,auth_time:te,sub:$e,user_id:$e,firebase:{sign_in_provider:"custom",identities:{}}},q);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(xt)),""].join(".")}function je(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function _e(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function De(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(q){return!1}}function ot(){return"object"==typeof self&&self.self===self}function Je(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function Me(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ee(){return je().indexOf("Electron/")>=0}function xe(){const q=je();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function Ze(){return je().indexOf("MSAppHost/")>=0}function qe(){return!1}function se(){return!De()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X(){return"object"==typeof indexedDB}function ae(){return new Promise((q,$)=>{try{let Y=!0;const pe="validate-browser-context-for-indexeddb-analytics-module",te=self.indexedDB.open(pe);te.onsuccess=()=>{te.result.close(),Y||self.indexedDB.deleteDatabase(pe),q(!0)},te.onupgradeneeded=()=>{Y=!1},te.onerror=()=>{var $e;$((null===($e=te.error)||void 0===$e?void 0:$e.message)||"")}}catch(Y){$(Y)}})}function we(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class de extends Error{constructor($,Y,pe){super(Y),this.code=$,this.customData=pe,this.name="FirebaseError",Object.setPrototypeOf(this,de.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,At.prototype.create)}}class At{constructor($,Y,pe){this.service=$,this.serviceName=Y,this.errors=pe}create($,...Y){const pe=Y[0]||{},te=`${this.service}/${$}`,$e=this.errors[$],xt=$e?function on(q,$){return q.replace(Jn,(Y,pe)=>{const te=$[pe];return null!=te?String(te):`<${pe}?>`})}($e,pe):"Error";return new de(te,`${this.serviceName}: ${xt} (${te}).`,pe)}}const Jn=/\{\$([^}]+)}/g;function ht(q){return JSON.parse(q)}function vt(q){return JSON.stringify(q)}const bn=function(q){let $={},Y={},pe={},te="";try{const $e=q.split(".");$=ht(W($e[0])||""),Y=ht(W($e[1])||""),te=$e[2],pe=Y.d||{},delete Y.d}catch($e){}return{header:$,claims:Y,data:pe,signature:te}},un=function(q){const Y=bn(q).claims;return!!Y&&"object"==typeof Y&&Y.hasOwnProperty("iat")},Eo=function(q){const $=bn(q).claims;return"object"==typeof $&&!0===$.admin};function sn(q,$){return Object.prototype.hasOwnProperty.call(q,$)}function Wt(q,$){if(Object.prototype.hasOwnProperty.call(q,$))return q[$]}function Oi(q){for(const $ in q)if(Object.prototype.hasOwnProperty.call(q,$))return!1;return!0}function pr(q,$,Y){const pe={};for(const te in q)Object.prototype.hasOwnProperty.call(q,te)&&(pe[te]=$.call(Y,q[te],te,q));return pe}function ws(q,$){if(q===$)return!0;const Y=Object.keys(q),pe=Object.keys($);for(const te of Y){if(!pe.includes(te))return!1;const $e=q[te],xt=$[te];if(Xi($e)&&Xi(xt)){if(!ws($e,xt))return!1}else if($e!==xt)return!1}for(const te of pe)if(!Y.includes(te))return!1;return!0}function Xi(q){return null!==q&&"object"==typeof q}function xo(q){const $=[];for(const[Y,pe]of Object.entries(q))Array.isArray(pe)?pe.forEach(te=>{$.push(encodeURIComponent(Y)+"="+encodeURIComponent(te))}):$.push(encodeURIComponent(Y)+"="+encodeURIComponent(pe));return $.length?"&"+$.join("&"):""}function Ji(q){const $={};return q.replace(/^\?/,"").split("&").forEach(pe=>{if(pe){const[te,$e]=pe.split("=");$[decodeURIComponent(te)]=decodeURIComponent($e)}}),$}function Wo(q){const $=q.indexOf("?");if(!$)return"";const Y=q.indexOf("#",$);return q.substring($,Y>0?Y:void 0)}class Do{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,Y){Y||(Y=0);const pe=this.W_;if("string"==typeof $)for(let Bt=0;Bt<16;Bt++)pe[Bt]=$.charCodeAt(Y)<<24|$.charCodeAt(Y+1)<<16|$.charCodeAt(Y+2)<<8|$.charCodeAt(Y+3),Y+=4;else for(let Bt=0;Bt<16;Bt++)pe[Bt]=$[Y]<<24|$[Y+1]<<16|$[Y+2]<<8|$[Y+3],Y+=4;for(let Bt=16;Bt<80;Bt++){const En=pe[Bt-3]^pe[Bt-8]^pe[Bt-14]^pe[Bt-16];pe[Bt]=4294967295&(En<<1|En>>>31)}let en,Gn,te=this.chain_[0],$e=this.chain_[1],xt=this.chain_[2],rn=this.chain_[3],$i=this.chain_[4];for(let Bt=0;Bt<80;Bt++){Bt<40?Bt<20?(en=rn^$e&(xt^rn),Gn=1518500249):(en=$e^xt^rn,Gn=1859775393):Bt<60?(en=$e&xt|rn&($e|xt),Gn=2400959708):(en=$e^xt^rn,Gn=3395469782);const En=(te<<5|te>>>27)+en+$i+Gn+pe[Bt]&4294967295;$i=rn,rn=xt,xt=4294967295&($e<<30|$e>>>2),$e=te,te=En}this.chain_[0]=this.chain_[0]+te&4294967295,this.chain_[1]=this.chain_[1]+$e&4294967295,this.chain_[2]=this.chain_[2]+xt&4294967295,this.chain_[3]=this.chain_[3]+rn&4294967295,this.chain_[4]=this.chain_[4]+$i&4294967295}update($,Y){if(null==$)return;void 0===Y&&(Y=$.length);const pe=Y-this.blockSize;let te=0;const $e=this.buf_;let xt=this.inbuf_;for(;te<Y;){if(0===xt)for(;te<=pe;)this.compress_($,te),te+=this.blockSize;if("string"==typeof $){for(;te<Y;)if($e[xt]=$.charCodeAt(te),++xt,++te,xt===this.blockSize){this.compress_($e),xt=0;break}}else for(;te<Y;)if($e[xt]=$[te],++xt,++te,xt===this.blockSize){this.compress_($e),xt=0;break}}this.inbuf_=xt,this.total_+=Y}digest(){const $=[];let Y=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let te=this.blockSize-1;te>=56;te--)this.buf_[te]=255&Y,Y/=256;this.compress_(this.buf_);let pe=0;for(let te=0;te<5;te++)for(let $e=24;$e>=0;$e-=8)$[pe]=this.chain_[te]>>$e&255,++pe;return $}}function gt(q,$){const Y=new mr(q,$);return Y.subscribe.bind(Y)}class mr{constructor($,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{$(this)}).catch(pe=>{this.error(pe)})}next($){this.forEachObserver(Y=>{Y.next($)})}error($){this.forEachObserver(Y=>{Y.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,Y,pe){let te;if(void 0===$&&void 0===Y&&void 0===pe)throw new Error("Missing Observer.");te=function pi(q,$){if("object"!=typeof q||null===q)return!1;for(const Y of $)if(Y in q&&"function"==typeof q[Y])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:Y,complete:pe},void 0===te.next&&(te.next=Sr),void 0===te.error&&(te.error=Sr),void 0===te.complete&&(te.complete=Sr);const $e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?te.error(this.finalError):te.complete()}catch(xt){}}),this.observers.push(te),$e}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,$)}sendOne($,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{Y(this.observers[$])}catch(pe){"undefined"!=typeof console&&console.error&&console.error(pe)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Sr(){}const Cs=function(q,$,Y,pe){let te;if(pe<$?te="at least "+$:pe>Y&&(te=0===Y?"none":"no more than "+Y),te)throw new Error(q+" failed: Was called with "+pe+(1===pe?" argument.":" arguments.")+" Expects "+te+".")};function Sn(q,$){return`${q} failed: ${$} argument `}function Yo(q,$,Y,pe){if((!pe||Y)&&"function"!=typeof Y)throw new Error(Sn(q,$)+"must be a valid function.")}function Za(q,$,Y,pe){if((!pe||Y)&&("object"!=typeof Y||null===Y))throw new Error(Sn(q,$)+"must be a valid context object.")}const Yt=function(q){const $=[];let Y=0;for(let pe=0;pe<q.length;pe++){let te=q.charCodeAt(pe);if(te>=55296&&te<=56319){const $e=te-55296;pe++,U(pe<q.length,"Surrogate pair missing trail surrogate."),te=65536+($e<<10)+(q.charCodeAt(pe)-56320)}te<128?$[Y++]=te:te<2048?($[Y++]=te>>6|192,$[Y++]=63&te|128):te<65536?($[Y++]=te>>12|224,$[Y++]=te>>6&63|128,$[Y++]=63&te|128):($[Y++]=te>>18|240,$[Y++]=te>>12&63|128,$[Y++]=te>>6&63|128,$[Y++]=63&te|128)}return $},ct=function(q){let $=0;for(let Y=0;Y<q.length;Y++){const pe=q.charCodeAt(Y);pe<128?$++:pe<2048?$+=2:pe>=55296&&pe<=56319?($+=4,Y++):$+=3}return $};function na(q,$=1e3,Y=2){const pe=$*Math.pow(Y,q),te=Math.round(.5*pe*(Math.random()-.5)*2);return Math.min(144e5,pe+te)}function bt(q){return q&&q._delegate?q._delegate:q}function Hi(q,$){return new Promise((Y,pe)=>{q.onsuccess=te=>{Y(te.target.result)},q.onerror=te=>{var $e;pe(`${$}: ${null===($e=te.target.error)||void 0===$e?void 0:$e.message}`)}})}class Gt{constructor($){this._db=$,this.objectStoreNames=this._db.objectStoreNames}transaction($,Y="readonly"){return new tt(this._db.transaction.call(this._db,$,Y))}createObjectStore($,Y){return new Ae(this._db.createObjectStore($,Y))}close(){this._db.close()}}class tt{constructor($){this._transaction=$,this.complete=new Promise((Y,pe)=>{this._transaction.oncomplete=function(){Y()},this._transaction.onerror=()=>{pe(this._transaction.error)},this._transaction.onabort=()=>{pe(this._transaction.error)}})}objectStore($){return new Ae(this._transaction.objectStore($))}}class Ae{constructor($){this._store=$}index($){return new nt(this._store.index($))}createIndex($,Y,pe){return new nt(this._store.createIndex($,Y,pe))}get($){return Hi(this._store.get($),"Error reading from IndexedDB")}put($,Y){return Hi(this._store.put($,Y),"Error writing to IndexedDB")}delete($){return Hi(this._store.delete($),"Error deleting from IndexedDB")}clear(){return Hi(this._store.clear(),"Error clearing IndexedDB object store")}}class nt{constructor($){this._index=$}get($){return Hi(this._index.get($),"Error reading from IndexedDB")}}function yt(q,$,Y){return new Promise((pe,te)=>{try{const $e=indexedDB.open(q,$);$e.onsuccess=xt=>{pe(new Gt(xt.target.result))},$e.onerror=xt=>{var rn;te(`Error opening indexedDB: ${null===(rn=xt.target.error)||void 0===rn?void 0:rn.message}`)},$e.onupgradeneeded=xt=>{Y(new Gt($e.result),xt.oldVersion,xt.newVersion,new tt($e.transaction))}}catch($e){te(`Error opening indexedDB: ${$e.message}`)}})}function qt(q){return $t.apply(this,arguments)}function $t(){return($t=(0,l.Z)(function*(q){return new Promise(($,Y)=>{try{const pe=indexedDB.deleteDatabase(q);pe.onsuccess=()=>{$()},pe.onerror=te=>{var $e;Y(`Error deleting indexedDB database "${q}": ${null===($e=te.target.error)||void 0===$e?void 0:$e.message}`)}}catch(pe){Y(`Error deleting indexedDB database "${q}": ${pe.message}`)}})})).apply(this,arguments)}},7133:(dt,Ie,V)=>{var l=V(5e3);let ee=null;function U(){return ee}const ie=new l.OlP("DocumentToken");let ge=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function he(){return(0,l.LFG)(z)}()},providedIn:"platform"}),n})();const W=new l.OlP("Location Initialized");let z=(()=>{class n extends ge{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return U().getBaseHref(this._doc)}onPopState(e){const i=U().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=U().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){ne()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){ne()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ie))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Qe(){return new z((0,l.LFG)(ie))}()},providedIn:"platform"}),n})();function ne(){return!!window.history.pushState}function Re(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Fe(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function je(n){return n&&"?"!==n[0]?"?"+n:n}let _e=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function De(n){const t=(0,l.LFG)(ie).location;return new Je((0,l.LFG)(ge),t&&t.origin||"")}()},providedIn:"root"}),n})();const ot=new l.OlP("appBaseHref");let Je=(()=>{class n extends _e{constructor(e,i){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Re(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+je(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,o){const c=this.prepareExternalUrl(r+je(o));this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,o){const c=this.prepareExternalUrl(r+je(o));this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ge),l.LFG(ot,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n extends _e{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Re(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,o){let c=this.prepareExternalUrl(r+je(o));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,o){let c=this.prepareExternalUrl(r+je(o));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ge),l.LFG(ot,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Ee=(()=>{class n{constructor(e,i){this._subject=new l.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=Fe(qe(r)),this._platformStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+je(i))}normalize(e){return n.stripTrailingSlash(function Ze(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,qe(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._platformStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+je(i)),r)}replaceState(e,i="",r=null){this._platformStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+je(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=je,n.joinWithSlash=Re,n.stripTrailingSlash=Fe,n.\u0275fac=function(e){return new(e||n)(l.LFG(_e),l.LFG(ge))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function xe(){return new Ee((0,l.LFG)(_e),(0,l.LFG)(ge))}()},providedIn:"root"}),n})();function qe(n){return n.replace(/\/index.html$/,"")}var we=(()=>((we=we||{})[we.Format=0]="Format",we[we.Standalone=1]="Standalone",we))(),le=(()=>((le=le||{})[le.Narrow=0]="Narrow",le[le.Abbreviated=1]="Abbreviated",le[le.Wide=2]="Wide",le[le.Short=3]="Short",le))(),Ne=(()=>((Ne=Ne||{})[Ne.Short=0]="Short",Ne[Ne.Medium=1]="Medium",Ne[Ne.Long=2]="Long",Ne[Ne.Full=3]="Full",Ne))(),de=(()=>((de=de||{})[de.Decimal=0]="Decimal",de[de.Group=1]="Group",de[de.List=2]="List",de[de.PercentSign=3]="PercentSign",de[de.PlusSign=4]="PlusSign",de[de.MinusSign=5]="MinusSign",de[de.Exponential=6]="Exponential",de[de.SuperscriptingExponent=7]="SuperscriptingExponent",de[de.PerMille=8]="PerMille",de[de.Infinity=9]="Infinity",de[de.NaN=10]="NaN",de[de.TimeSeparator=11]="TimeSeparator",de[de.CurrencyDecimal=12]="CurrencyDecimal",de[de.CurrencyGroup=13]="CurrencyGroup",de))();function un(n,t){return Ei((0,l.cg1)(n)[l.wAp.DateFormat],t)}function Eo(n,t){return Ei((0,l.cg1)(n)[l.wAp.TimeFormat],t)}function sn(n,t){return Ei((0,l.cg1)(n)[l.wAp.DateTimeFormat],t)}function Wt(n,t){const e=(0,l.cg1)(n),i=e[l.wAp.NumberSymbols][t];if(void 0===i){if(t===de.CurrencyDecimal)return e[l.wAp.NumberSymbols][de.Decimal];if(t===de.CurrencyGroup)return e[l.wAp.NumberSymbols][de.Group]}return i}function Wo(n){if(!n[l.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[l.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Ei(n,t){for(let e=t;e>-1;e--)if(void 0!==n[e])return n[e];throw new Error("Locale data API: locale data undefined")}function pi(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const xi=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Yo={},Za=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Yt=(()=>((Yt=Yt||{})[Yt.Short=0]="Short",Yt[Yt.ShortGMT=1]="ShortGMT",Yt[Yt.Long=2]="Long",Yt[Yt.Extended=3]="Extended",Yt))(),ct=(()=>((ct=ct||{})[ct.FullYear=0]="FullYear",ct[ct.Month=1]="Month",ct[ct.Date=2]="Date",ct[ct.Hours=3]="Hours",ct[ct.Minutes=4]="Minutes",ct[ct.Seconds=5]="Seconds",ct[ct.FractionalSeconds=6]="FractionalSeconds",ct[ct.Day=7]="Day",ct))(),It=(()=>((It=It||{})[It.DayPeriods=0]="DayPeriods",It[It.Days=1]="Days",It[It.Months=2]="Months",It[It.Eras=3]="Eras",It))();function Pi(n,t,e,i){let r=function rn(n){if(en(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,o=1,c=1]=n.split("-").map(d=>+d);return Io(r,o-1,c)}const e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(xi))return function $i(n){const t=new Date(0);let e=0,i=0;const r=n[8]?t.setUTCFullYear:t.setFullYear,o=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-e,d=Number(n[5]||0)-i,p=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return o.call(t,c,d,p,b),t}(i)}const t=new Date(n);if(!en(t))throw new Error(`Unable to convert "${n}" into a date`);return t}(n);t=Zt(e,t)||t;let d,c=[];for(;t;){if(d=Za.exec(t),!d){c.push(t);break}{c=c.concat(d.slice(1));const E=c.pop();if(!E)break;t=E}}let p=r.getTimezoneOffset();i&&(p=te(i,p),r=function xt(n,t,e){const i=e?-1:1,r=n.getTimezoneOffset();return function $e(n,t){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+t),n}(n,i*(te(t,r)-r))}(r,i,!0));let b="";return c.forEach(E=>{const D=function pe(n){if(Y[n])return Y[n];let t;switch(n){case"G":case"GG":case"GGG":t=Gt(It.Eras,le.Abbreviated);break;case"GGGG":t=Gt(It.Eras,le.Wide);break;case"GGGGG":t=Gt(It.Eras,le.Narrow);break;case"y":t=bt(ct.FullYear,1,0,!1,!0);break;case"yy":t=bt(ct.FullYear,2,0,!0,!0);break;case"yyy":t=bt(ct.FullYear,3,0,!1,!0);break;case"yyyy":t=bt(ct.FullYear,4,0,!1,!0);break;case"Y":t=$(1);break;case"YY":t=$(2,!0);break;case"YYY":t=$(3);break;case"YYYY":t=$(4);break;case"M":case"L":t=bt(ct.Month,1,1);break;case"MM":case"LL":t=bt(ct.Month,2,1);break;case"MMM":t=Gt(It.Months,le.Abbreviated);break;case"MMMM":t=Gt(It.Months,le.Wide);break;case"MMMMM":t=Gt(It.Months,le.Narrow);break;case"LLL":t=Gt(It.Months,le.Abbreviated,we.Standalone);break;case"LLLL":t=Gt(It.Months,le.Wide,we.Standalone);break;case"LLLLL":t=Gt(It.Months,le.Narrow,we.Standalone);break;case"w":t=q(1);break;case"ww":t=q(2);break;case"W":t=q(1,!0);break;case"d":t=bt(ct.Date,1);break;case"dd":t=bt(ct.Date,2);break;case"c":case"cc":t=bt(ct.Day,1);break;case"ccc":t=Gt(It.Days,le.Abbreviated,we.Standalone);break;case"cccc":t=Gt(It.Days,le.Wide,we.Standalone);break;case"ccccc":t=Gt(It.Days,le.Narrow,we.Standalone);break;case"cccccc":t=Gt(It.Days,le.Short,we.Standalone);break;case"E":case"EE":case"EEE":t=Gt(It.Days,le.Abbreviated);break;case"EEEE":t=Gt(It.Days,le.Wide);break;case"EEEEE":t=Gt(It.Days,le.Narrow);break;case"EEEEEE":t=Gt(It.Days,le.Short);break;case"a":case"aa":case"aaa":t=Gt(It.DayPeriods,le.Abbreviated);break;case"aaaa":t=Gt(It.DayPeriods,le.Wide);break;case"aaaaa":t=Gt(It.DayPeriods,le.Narrow);break;case"b":case"bb":case"bbb":t=Gt(It.DayPeriods,le.Abbreviated,we.Standalone,!0);break;case"bbbb":t=Gt(It.DayPeriods,le.Wide,we.Standalone,!0);break;case"bbbbb":t=Gt(It.DayPeriods,le.Narrow,we.Standalone,!0);break;case"B":case"BB":case"BBB":t=Gt(It.DayPeriods,le.Abbreviated,we.Format,!0);break;case"BBBB":t=Gt(It.DayPeriods,le.Wide,we.Format,!0);break;case"BBBBB":t=Gt(It.DayPeriods,le.Narrow,we.Format,!0);break;case"h":t=bt(ct.Hours,1,-12);break;case"hh":t=bt(ct.Hours,2,-12);break;case"H":t=bt(ct.Hours,1);break;case"HH":t=bt(ct.Hours,2);break;case"m":t=bt(ct.Minutes,1);break;case"mm":t=bt(ct.Minutes,2);break;case"s":t=bt(ct.Seconds,1);break;case"ss":t=bt(ct.Seconds,2);break;case"S":t=bt(ct.FractionalSeconds,1);break;case"SS":t=bt(ct.FractionalSeconds,2);break;case"SSS":t=bt(ct.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=Ae(Yt.Short);break;case"ZZZZZ":t=Ae(Yt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Ae(Yt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=Ae(Yt.Long);break;default:return null}return Y[n]=t,t}(E);b+=D?D(r,e,p):"''"===E?"'":E.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function Io(n,t,e){const i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function Zt(n,t){const e=function on(n){return(0,l.cg1)(n)[l.wAp.LocaleId]}(n);if(Yo[e]=Yo[e]||{},Yo[e][t])return Yo[e][t];let i="";switch(t){case"shortDate":i=un(n,Ne.Short);break;case"mediumDate":i=un(n,Ne.Medium);break;case"longDate":i=un(n,Ne.Long);break;case"fullDate":i=un(n,Ne.Full);break;case"shortTime":i=Eo(n,Ne.Short);break;case"mediumTime":i=Eo(n,Ne.Medium);break;case"longTime":i=Eo(n,Ne.Long);break;case"fullTime":i=Eo(n,Ne.Full);break;case"short":const r=Zt(n,"shortTime"),o=Zt(n,"shortDate");i=na(sn(n,Ne.Short),[r,o]);break;case"medium":const c=Zt(n,"mediumTime"),d=Zt(n,"mediumDate");i=na(sn(n,Ne.Medium),[c,d]);break;case"long":const p=Zt(n,"longTime"),b=Zt(n,"longDate");i=na(sn(n,Ne.Long),[p,b]);break;case"full":const E=Zt(n,"fullTime"),D=Zt(n,"fullDate");i=na(sn(n,Ne.Full),[E,D])}return i&&(Yo[e][t]=i),i}function na(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return null!=t&&i in t?t[i]:e})),n}function ji(n,t,e="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,o=e));let c=String(n);for(;c.length<t;)c="0"+c;return i&&(c=c.substr(c.length-t)),o+c}function bt(n,t,e=0,i=!1,r=!1){return function(o,c){let d=function Hi(n,t){switch(n){case ct.FullYear:return t.getFullYear();case ct.Month:return t.getMonth();case ct.Date:return t.getDate();case ct.Hours:return t.getHours();case ct.Minutes:return t.getMinutes();case ct.Seconds:return t.getSeconds();case ct.FractionalSeconds:return t.getMilliseconds();case ct.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,o);if((e>0||d>-e)&&(d+=e),n===ct.Hours)0===d&&-12===e&&(d=12);else if(n===ct.FractionalSeconds)return function Ni(n,t){return ji(n,3).substr(0,t)}(d,t);const p=Wt(c,de.MinusSign);return ji(d,t,p,i,r)}}function Gt(n,t,e=we.Format,i=!1){return function(r,o){return function tt(n,t,e,i,r,o){switch(e){case It.Months:return function vt(n,t,e){const i=(0,l.cg1)(n),o=Ei([i[l.wAp.MonthsFormat],i[l.wAp.MonthsStandalone]],t);return Ei(o,e)}(t,r,i)[n.getMonth()];case It.Days:return function ht(n,t,e){const i=(0,l.cg1)(n),o=Ei([i[l.wAp.DaysFormat],i[l.wAp.DaysStandalone]],t);return Ei(o,e)}(t,r,i)[n.getDay()];case It.DayPeriods:const c=n.getHours(),d=n.getMinutes();if(o){const b=function Do(n){const t=(0,l.cg1)(n);return Wo(t),(t[l.wAp.ExtraData][2]||[]).map(i=>"string"==typeof i?pi(i):[pi(i[0]),pi(i[1])])}(t),E=function gt(n,t,e){const i=(0,l.cg1)(n);Wo(i);const o=Ei([i[l.wAp.ExtraData][0],i[l.wAp.ExtraData][1]],t)||[];return Ei(o,e)||[]}(t,r,i),D=b.findIndex(R=>{if(Array.isArray(R)){const[N,B]=R,K=c>=N.hours&&d>=N.minutes,ce=c<B.hours||c===B.hours&&d<B.minutes;if(N.hours<B.hours){if(K&&ce)return!0}else if(K||ce)return!0}else if(R.hours===c&&R.minutes===d)return!0;return!1});if(-1!==D)return E[D]}return function Jn(n,t,e){const i=(0,l.cg1)(n),o=Ei([i[l.wAp.DayPeriodsFormat],i[l.wAp.DayPeriodsStandalone]],t);return Ei(o,e)}(t,r,i)[c<12?0:1];case It.Eras:return function bn(n,t){return Ei((0,l.cg1)(n)[l.wAp.Eras],t)}(t,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(r,o,n,t,e,i)}}function Ae(n){return function(t,e,i){const r=-1*i,o=Wt(e,de.MinusSign),c=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case Yt.Short:return(r>=0?"+":"")+ji(c,2,o)+ji(Math.abs(r%60),2,o);case Yt.ShortGMT:return"GMT"+(r>=0?"+":"")+ji(c,1,o);case Yt.Long:return"GMT"+(r>=0?"+":"")+ji(c,2,o)+":"+ji(Math.abs(r%60),2,o);case Yt.Extended:return 0===i?"Z":(r>=0?"+":"")+ji(c,2,o)+":"+ji(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}function $t(n){return Io(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function q(n,t=!1){return function(e,i){let r;if(t){const o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,c=e.getDate();r=1+Math.floor((c+o)/7)}else{const o=$t(e),c=function qt(n){const t=Io(n,0,1).getDay();return Io(n,0,1+(t<=4?4:11)-t)}(o.getFullYear()),d=o.getTime()-c.getTime();r=1+Math.round(d/6048e5)}return ji(r,n,Wt(i,de.MinusSign))}}function $(n,t=!1){return function(e,i){return ji($t(e).getFullYear(),n,Wt(i,de.MinusSign),t)}}const Y={};function te(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function en(n){return n instanceof Date&&!isNaN(n.valueOf())}let Mr=(()=>{class n{constructor(e,i,r,o){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,l.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,l.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.ZZ4),l.Y36(l.aQg),l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Ds{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let gi=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,o,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Ds(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===o?void 0:o);else if(null!==o){const d=i.get(o);i.move(d,c),Ko(d,r)}});for(let r=0,o=i.length;r<o;r++){const d=i.get(r).context;d.index=r,d.count=o,d.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{Ko(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Ko(n,t){n.context.$implicit=t.item}let ti=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new fn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){_c("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){_c("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class fn{constructor(){this.$implicit=null,this.ngIf=null}}function _c(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(t)}'.`)}class vc{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Ar=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),gr=(()=>{class n{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new vc(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(Ar,9))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),Pl=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[r,o]=e.split(".");null!=(i=null!=i&&o?`${i}${o}`:i)?this._renderer.setStyle(this._ngEl.nativeElement,r,i):this._renderer.removeStyle(this._ngEl.nativeElement,r)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.aQg),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})();const Pg=new l.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Nl=(()=>{class n{constructor(e,i){this.locale=e,this.defaultTimezone=i}transform(e,i="mediumDate",r,o){var c;if(null==e||""===e||e!=e)return null;try{return Pi(e,i,o||this.locale,null!==(c=null!=r?r:this.defaultTimezone)&&void 0!==c?c:void 0)}catch(d){throw function si(n,t){return new l.vHH(2100,"")}()}}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.soG,16),l.Y36(Pg,24))},n.\u0275pipe=l.Yjl({name:"date",type:n,pure:!0}),n})(),kn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const Ms="browser";function Ii(n){return n===Ms}function Li(n){return"server"===n}let Dc=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new Ic((0,l.LFG)(ie),window)}),n})();class Ic{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Ll(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const c=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Jo(this.window.history)||Jo(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Jo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class As extends class Ja extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){ee||(ee=n)}(new As)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function eh(){return pn=pn||document.querySelector("base"),pn?pn.getAttribute("href"):null}();return null==e?null:function aa(n){sa=sa||document.createElement("a"),sa.setAttribute("href",n);const t=sa.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){pn=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function Ka(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,o]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}(document.cookie,t)}}let sa,pn=null;const Gi=new l.OlP("TRANSITION_ID"),Bl=[{provide:l.ip1,useFactory:function ni(n,t,e){return()=>{e.get(l.CZH).donePromise.then(()=>{const i=U(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<r.length;o++)i.remove(r[o])})}},deps:[Gi,ie,l.zs3],multi:!0}];class Yr{static init(){(0,l.VLi)(new Yr)}addToWindow(t){l.dqk.getAngularTestability=(i,r=!0)=>{const o=t.findTestabilityInTree(i,r);if(null==o)throw new Error("Could not find testability for element.");return o},l.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(i=>{const r=l.dqk.getAllAngularTestabilities();let o=r.length,c=!1;const d=function(p){c=c||p,o--,0==o&&i(c)};r.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(t,e,i){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:i?U().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let qi=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const ks=new l.OlP("EventManagerPlugins");let es=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let o=0;o<r.length;o++){const c=r[o];if(c.supports(e))return this._eventNameToPlugin.set(e,c),c}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ks),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Sc{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=U().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let br=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Rs=(()=>{class n extends br{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(o=>{const c=this._doc.createElement("style");c.textContent=o,r.push(i.appendChild(c))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(Os),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Os))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ie))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Os(n){U().remove(n)}const Et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},el=/%COMP%/g;function la(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?la(n,r,e):(r=r.replace(el,n),e.push(r))}return e}function Te(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let ca=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Rn(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case l.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new To(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case l.ifc.ShadowDom:return new Fu(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=la(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(es),l.LFG(Rs),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Rn{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Et[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,i){t&&t.insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const o=Et[r];o?t.setAttributeNS(o,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=Et[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(l.JOm.DashCase|l.JOm.Important)?t.style.setProperty(e,i,r&l.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&l.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Te(i)):this.eventManager.addEventListener(t,e,Te(i))}}class To extends Rn{constructor(t,e,i,r){super(t),this.component=i;const o=la(r+"-"+i.id,i.styles,[]);e.addStyles(o),this.contentAttr=function kc(n){return"_ngcontent-%COMP%".replace(el,n)}(r+"-"+i.id),this.hostAttr=function Pu(n){return"_nghost-%COMP%".replace(el,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class Fu extends Rn{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=la(r.id,r.styles,[]);for(let c=0;c<o.length;c++){const d=document.createElement("style");d.textContent=o[c],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Vl=(()=>{class n extends Sc{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ie))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const th=["alt","control","meta","shift"],Rc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ul={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},_i={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Zr=(()=>{class n extends Sc{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const o=n.parseEventName(i),c=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>U().onAndCancel(e,o.domEventName,c))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let c="";if(th.forEach(p=>{const b=i.indexOf(p);b>-1&&(i.splice(b,1),c+=p+".")}),c+=o,0!=i.length||0===o.length)return null;const d={};return d.domEventName=r,d.fullKey=c,d}static getEventFullKey(e){let i="",r=function Oc(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&Ul.hasOwnProperty(t)&&(t=Ul[t]))}return Rc[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),th.forEach(o=>{o!=r&&_i[o](e)&&(i+=o+".")}),i+=r,i}static eventCallback(e,i,r){return o=>{n.getEventFullKey(o)===e&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ie))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Bu=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:Ms},{provide:l.g9A,useValue:function Ns(){As.makeCurrent(),Yr.init()},multi:!0},{provide:ie,useFactory:function Lu(){return(0,l.RDi)(document),document},deps:[]}]),Vu=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function Kr(){return new l.qLn},deps:[]},{provide:ks,useClass:Vl,multi:!0,deps:[ie,l.R0b,l.Lbi]},{provide:ks,useClass:Zr,multi:!0,deps:[ie]},{provide:ca,useClass:ca,deps:[es,Rs,l.AFp]},{provide:l.FYo,useExisting:ca},{provide:br,useExisting:Rs},{provide:Rs,useClass:Rs,deps:[ie]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b]},{provide:es,useClass:es,deps:[ks,l.R0b]},{provide:class Tn{},useClass:qi,deps:[]}];let tl=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:l.AFp,useValue:e.appId},{provide:Gi,useExisting:l.AFp},Bl]}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(n,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:Vu,imports:[kn,l.hGG]}),n})();"undefined"!=typeof window&&window;let rl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(e){let i=null;return i=e?new(e||n):l.LFG(Vc),i},providedIn:"root"}),n})(),Vc=(()=>{class n extends rl{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case l.q3G.NONE:return i;case l.q3G.HTML:return(0,l.qzn)(i,"HTML")?(0,l.z3N)(i):(0,l.EiD)(this._doc,String(i)).toString();case l.q3G.STYLE:return(0,l.qzn)(i,"Style")?(0,l.z3N)(i):i;case l.q3G.SCRIPT:if((0,l.qzn)(i,"Script"))return(0,l.z3N)(i);throw new Error("unsafe value used in a script context");case l.q3G.URL:return(0,l.yhl)(i),(0,l.qzn)(i,"URL")?(0,l.z3N)(i):(0,l.mCW)(String(i));case l.q3G.RESOURCE_URL:if((0,l.qzn)(i,"ResourceURL"))return(0,l.z3N)(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return(0,l.JVY)(e)}bypassSecurityTrustStyle(e){return(0,l.L6k)(e)}bypassSecurityTrustScript(e){return(0,l.eBb)(e)}bypassSecurityTrustUrl(e){return(0,l.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,l.pB0)(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ie))},n.\u0275prov=l.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function ql(n){return new Vc(n.get(ie))}(l.LFG(l.zs3)),i},providedIn:"root"}),n})();var Dn=V(8996),qn=V(3269);function st(...n){const t=(0,qn.yG)(n);return(0,Dn.D)(n,t)}var pt=V(7579);class er extends pt.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}var zn=V(8306);const{isArray:Fs}=Array,{getPrototypeOf:ah,prototype:Ln,keys:ol}=Object;function sl(n){if(1===n.length){const t=n[0];if(Fs(t))return{args:t,keys:null};if(function ha(n){return n&&"object"==typeof n&&ah(n)===Ln}(t)){const e=ol(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}var Rr=V(4671),et=V(4004);const{isArray:Lg}=Array;function Uc(n){return(0,et.U)(t=>function Gu(n,t){return Lg(t)?n(...t):n(t)}(n,t))}function fa(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}var On=V(5403),Xr=V(9672);function Ls(n,t,e){n?(0,Xr.f)(e,n,t):t()}var Si=V(576);function eo(n,t){const e=(0,Si.m)(n)?n:()=>n,i=r=>r.error(e());return new zn.y(t?r=>t.schedule(i,0,r):i)}const Bs=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Mo=V(8189);function Hc(...n){return function jc(){return(0,Mo.J)(1)}()((0,Dn.D)(n,(0,qn.yG)(n)))}var pa=V(8421);function Or(n){return new zn.y(t=>{(0,pa.Xf)(n()).subscribe(t)})}var Ao=V(515),Wn=V(727),Yn=V(4482);function ma(){return(0,Yn.e)((n,t)=>{let e=null;n._refCount++;const i=(0,On.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class ga extends zn.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Yn.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Wn.w0;const e=this.getSubject();t.add(this.source.subscribe((0,On.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Wn.w0.EMPTY)}return t}refCount(){return ma()(this)}}function mn(n,t){return(0,Yn.e)((e,i)=>{let r=null,o=0,c=!1;const d=()=>c&&!r&&i.complete();e.subscribe((0,On.x)(i,p=>{null==r||r.unsubscribe();let b=0;const E=o++;(0,pa.Xf)(n(p,E)).subscribe(r=(0,On.x)(i,D=>i.next(t?t(p,D,E,b++):D),()=>{r=null,d()}))},()=>{c=!0,d()}))})}var Bn=V(5698);function Bi(...n){const t=(0,qn.yG)(n);return(0,Yn.e)((e,i)=>{(t?Hc(n,e,t):Hc(n,e)).subscribe(i)})}function ll(n,t,e,i,r){return(o,c)=>{let d=e,p=t,b=0;o.subscribe((0,On.x)(c,E=>{const D=b++;p=d?n(p,E,D):(d=!0,E),i&&c.next(p)},r&&(()=>{d&&c.next(p),c.complete()})))}}function Ti(n,t){return(0,Yn.e)(ll(n,t,arguments.length>=2,!0))}function gn(n,t){return(0,Yn.e)((e,i)=>{let r=0;e.subscribe((0,On.x)(i,o=>n.call(t,o,r++)&&i.next(o)))})}function ko(n){return(0,Yn.e)((t,e)=>{let o,i=null,r=!1;i=t.subscribe((0,On.x)(e,void 0,void 0,c=>{o=(0,pa.Xf)(n(c,ko(n)(t))),i?(i.unsubscribe(),i=null,o.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(e))})}var ri=V(5577);function Wi(n,t){return(0,Si.m)(t)?(0,ri.z)(n,t,1):(0,ri.z)(n,1)}function ip(n){return n<=0?()=>Ao.E:(0,Yn.e)((t,e)=>{let i=[];t.subscribe((0,On.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function rp(n=Zn){return(0,Yn.e)((t,e)=>{let i=!1;t.subscribe((0,On.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function Zn(){return new Bs}function op(n){return(0,Yn.e)((t,e)=>{let i=!1;t.subscribe((0,On.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function Vs(n,t){const e=arguments.length>=2;return i=>i.pipe(n?gn((r,o)=>n(r,o,i)):Rr.y,(0,Bn.q)(1),e?op(t):rp(()=>new Bs))}var vi=V(8505);function cl(n){return(0,Yn.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}class Us{constructor(t,e){this.id=t,this.url=e}}class $c extends Us{constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ns extends Us{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class zu extends Us{constructor(t,e,i){super(t,e),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ai extends Us{constructor(t,e,i){super(t,e),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Gc extends Us{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zl extends Us{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lh extends Us{constructor(t,e,i,r,o){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Wl extends Us{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tr extends Us{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class to{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _a{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ro{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yr{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ul{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wu{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qc{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const jt="primary";class sp{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function va(n){return new sp(n)}const wr="ngNavigationCancelingError";function Yl(n){const t=Error("NavigationCancelingError: "+n);return t[wr]=!0,t}function Zl(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let o=0;o<i.length;o++){const c=i[o],d=n[o];if(c.startsWith(":"))r[c.substring(1)]=d;else if(c!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Oo(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!zc(n[r],t[r]))return!1;return!0}function zc(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,o)=>i[o]===r)}return n===t}function Po(n){return Array.prototype.concat.apply([],n)}function ch(n){return n.length>0?n[n.length-1]:null}function bi(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function no(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,Dn.D)(Promise.resolve(n)):st(n)}const uh={exact:function T(n,t,e){if(!Ft(n.segments,t.segments)||!oe(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!T(n.children[i],t.children[i],e))return!1;return!0},subset:H},Hs={exact:function S(n,t){return Oo(n,t)},subset:function P(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>zc(n[e],t[e]))},ignored:()=>!0};function Yu(n,t,e){return uh[e.paths](n.root,t.root,e.matrixParams)&&Hs[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function H(n,t,e){return Q(n,t,t.segments,e)}function Q(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!Ft(r,e)||t.hasChildren()||!oe(r,e,i))}if(n.segments.length===e.length){if(!Ft(n.segments,e)||!oe(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!H(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!!(Ft(n.segments,r)&&oe(n.segments,r,i)&&n.children[jt])&&Q(n.children[jt],t,o,i)}}function oe(n,t,e){return t.every((i,r)=>Hs[e](n[r].parameters,i.parameters))}class ke{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=va(this.queryParams)),this._queryParamMap}toString(){return dl.serialize(this)}}class Oe{constructor(t,e){this.segments=t,this.children=e,this.parent=null,bi(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ya(this)}}class Dt{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=va(this.parameters)),this._parameterMap}toString(){return Yc(this)}}function Ft(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}class Mi{}class Mn{parse(t){const e=new Ku(t);return new ke(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${io(t.root,!0)}`,i=function Vg(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${nr(e)}=${nr(r)}`).join("&"):`${nr(e)}=${nr(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function Wc(n){return encodeURI(n)}(t.fragment)}`:""}`}}const dl=new Mn;function ya(n){return n.segments.map(t=>Yc(t)).join("/")}function io(n,t){if(!n.hasChildren())return ya(n);if(t){const e=n.children[jt]?io(n.children[jt],!1):"",i=[];return bi(n.children,(r,o)=>{o!==jt&&i.push(`${o}:${io(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function Rt(n,t){let e=[];return bi(n.children,(i,r)=>{r===jt&&(e=e.concat(t(i,r)))}),bi(n.children,(i,r)=>{r!==jt&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===jt?[io(n.children[jt],!1)]:[`${r}:${io(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[jt]?`${ya(n)}/${e[0]}`:`${ya(n)}/(${e.join("//")})`}}function ro(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nr(n){return ro(n).replace(/%3B/gi,";")}function hl(n){return ro(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dh(n){return decodeURIComponent(n)}function hh(n){return dh(n.replace(/\+/g,"%20"))}function Yc(n){return`${hl(n.path)}${function fh(n){return Object.keys(n).map(t=>`;${hl(t)}=${hl(n[t])}`).join("")}(n.parameters)}`}const dy=/^[^\/()?;=#]+/;function Zc(n){const t=n.match(dy);return t?t[0]:""}const Kc=/^[^=?&#]+/,Ug=/^[^&#]+/;class Ku{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Oe([],{}):new Oe([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[jt]=new Oe(t,e)),i}parseSegment(){const t=Zc(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Dt(dh(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Zc(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Zc(this.remaining);r&&(i=r,this.capture(i))}t[dh(e)]=dh(i)}parseQueryParam(t){const e=function Zu(n){const t=n.match(Kc);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const c=function EE(n){const t=n.match(Ug);return t?t[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=hh(e),o=hh(i);if(t.hasOwnProperty(r)){let c=t[r];Array.isArray(c)||(c=[c],t[r]=c),c.push(o)}else t[r]=o}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Zc(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let o;i.indexOf(":")>-1?(o=i.substr(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=jt);const c=this.parseChildren();e[o]=1===Object.keys(c).length?c[jt]:new Oe([],c),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class jg{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Hg(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=Hg(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=ap(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return ap(t,this._root).map(e=>e.value)}}function Hg(n,t){if(n===t.value)return t;for(const e of t.children){const i=Hg(n,e);if(i)return i}return null}function ap(n,t){if(n===t.value)return[t];for(const e of t.children){const i=ap(n,e);if(i.length)return i.unshift(t),i}return[]}class wa{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Qc(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class Qu extends jg{constructor(t,e){super(t),this.snapshot=e,gh(this,t)}toString(){return this.snapshot.toString()}}function ph(n,t){const e=function Xc(n,t){const c=new Ql([],{},{},"",{},jt,t,null,n.root,-1,{});return new mh("",new wa(c,[]))}(n,t),i=new er([new Dt("",{})]),r=new er({}),o=new er({}),c=new er({}),d=new er(""),p=new Ca(i,r,c,d,o,jt,t,e.root);return p.snapshot=e.root,new Qu(new wa(p,[]),e)}class Ca{constructor(t,e,i,r,o,c,d,p){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=c,this.component=d,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,et.U)(t=>va(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,et.U)(t=>va(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function $g(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],o=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function xE(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(i))}class Ql{constructor(t,e,i,r,o,c,d,p,b,E,D){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=c,this.component=d,this.routeConfig=p,this._urlSegment=b,this._lastPathIndex=E,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=va(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=va(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class mh extends jg{constructor(t,e){super(e),this.url=t,gh(this,e)}toString(){return _h(this._root)}}function gh(n,t){t.value._routerState=n,t.children.forEach(e=>gh(n,e))}function _h(n){const t=n.children.length>0?` { ${n.children.map(_h).join(", ")} } `:"";return`${n.value}${t}`}function vh(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Oo(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Oo(t.params,e.params)||n.params.next(e.params),function Kl(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Oo(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Oo(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ea(n,t){const e=Oo(n.params,t.params)&&function at(n,t){return Ft(n,t)&&n.every((e,i)=>Oo(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||Ea(n.parent,t.parent))}function Xu(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function lp(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Xu(n,i,r);return Xu(n,i)})}(n,t,e);return new wa(i,r)}{if(n.shouldAttach(t.value)){const o=n.retrieve(t.value);if(null!==o){const c=o.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(d=>Xu(n,d)),c}}const i=function fy(n){return new Ca(new er(n.url),new er(n.params),new er(n.queryParams),new er(n.fragment),new er(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(o=>Xu(n,o));return new wa(i,r)}}function No(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function rs(n){return"object"==typeof n&&null!=n&&n.outlets}function bh(n,t,e,i,r){let o={};if(i&&bi(i,(d,p)=>{o[p]=Array.isArray(d)?d.map(b=>`${b}`):`${d}`}),n===t)return new ke(e,o,r);const c=yh(n,t,e);return new ke(c,o,r)}function yh(n,t,e){const i={};return bi(n.children,(r,o)=>{i[o]=r===t?e:yh(r,t,e)}),new Oe(n.segments,i)}class Gg{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&No(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(rs);if(r&&r!==ch(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class wh{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function gy(n,t,e){if(n||(n=new Oe([],{})),0===n.segments.length&&n.hasChildren())return $s(n,t,e);const i=function _y(n,t,e){let i=0,r=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return o;const c=n.segments[r],d=e[i];if(rs(d))break;const p=`${d}`,b=i<e.length-1?e[i+1]:null;if(r>0&&void 0===p)break;if(p&&b&&"object"==typeof b&&void 0===b.outlets){if(!Ju(p,b,c))return o;i+=2}else{if(!Ju(p,{},c))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const o=new Oe(n.segments.slice(0,i.pathIndex),{});return o.children[jt]=new Oe(n.segments.slice(i.pathIndex),n.children),$s(o,0,r)}return i.match&&0===r.length?new Oe(n.segments,{}):i.match&&!n.hasChildren()?Wg(n,t,e):i.match?$s(n,0,r):Wg(n,t,e)}function $s(n,t,e){if(0===e.length)return new Oe(n.segments,{});{const i=function my(n){return rs(n[0])?n[0].outlets:{[jt]:n}}(e),r={};return bi(i,(o,c)=>{"string"==typeof o&&(o=[o]),null!==o&&(r[c]=gy(n.children[c],t,o))}),bi(n.children,(o,c)=>{void 0===i[c]&&(r[c]=o)}),new Oe(n.segments,r)}}function Wg(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const o=e[r];if(rs(o)){const p=up(o.outlets);return new Oe(i,p)}if(0===r&&No(e[0])){i.push(new Dt(n.segments[t].path,Jc(e[0]))),r++;continue}const c=rs(o)?o.outlets[jt]:`${o}`,d=r<e.length-1?e[r+1]:null;c&&d&&No(d)?(i.push(new Dt(c,Jc(d))),r+=2):(i.push(new Dt(c,{})),r++)}return new Oe(i,{})}function up(n){const t={};return bi(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=Wg(new Oe([],{}),0,e))}),t}function Jc(n){const t={};return bi(n,(e,i)=>t[i]=`${e}`),t}function Ju(n,t,e){return n==e.path&&Oo(t,e.parameters)}class ed{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),vh(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=Qc(e);t.children.forEach(o=>{const c=o.value.outlet;this.deactivateRoutes(o,r[c],i),delete r[c]}),bi(r,(o,c)=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,e,i){const r=t.value,o=e?e.value:null;if(r===o)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(t,e,c.children)}else this.deactivateChildRoutes(t,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=Qc(t);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],r);if(i&&i.outlet){const c=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:d})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=Qc(t);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=Qc(e);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Wu(o.value.snapshot))}),t.children.length&&this.forwardEvent(new yr(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,o=e?e.value:null;if(vh(r),r===o)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,c.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(d.contexts),c.attachRef=d.componentRef,c.route=d.route.value,c.outlet&&c.outlet.attach(d.componentRef,d.route.value),vh(d.route.value),this.activateChildRoutes(t,null,c.children)}else{const d=function Ch(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),p=d?d.module.componentFactoryResolver:null;c.attachRef=null,c.route=r,c.resolver=p,c.outlet&&c.outlet.activateWith(r,p),this.activateChildRoutes(t,null,c.children)}}else this.activateChildRoutes(t,null,i)}}class Eh{constructor(t,e){this.routes=t,this.module=e}}function xa(n){return"function"==typeof n}function eu(n){return n instanceof ke}const td=Symbol("INITIAL_VALUE");function tu(){return mn(n=>function al(...n){const t=(0,qn.yG)(n),e=(0,qn.jO)(n),{args:i,keys:r}=sl(n);if(0===i.length)return(0,Dn.D)([],t);const o=new zn.y(function Jr(n,t,e=Rr.y){return i=>{Ls(t,()=>{const{length:r}=n,o=new Array(r);let c=r,d=r;for(let p=0;p<r;p++)Ls(t,()=>{const b=(0,Dn.D)(n[p],t);let E=!1;b.subscribe((0,On.x)(i,D=>{o[p]=D,E||(E=!0,d--),d||i.next(e(o.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,t,r?c=>fa(r,c):Rr.y));return e?o.pipe(Uc(e)):o}(n.map(t=>t.pipe((0,Bn.q)(1),Bi(td)))).pipe(Ti((t,e)=>{let i=!1;return e.reduce((r,o,c)=>r!==td?r:(o===td&&(i=!0),i||!1!==o&&c!==e.length-1&&!eu(o)?r:o),t)},td),gn(t=>t!==td),(0,et.U)(t=>eu(t)?t:!0===t),(0,Bn.q)(1)))}class Zg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new nd,this.attachRef=null}}class nd{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const i=this.getOrCreateContext(t);i.outlet=e,this.contexts.set(t,i)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Zg,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let id=(()=>{class n{constructor(e,i,r,o,c){this.parentContexts=e,this.location=i,this.resolver=r,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=o||jt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const c=(i=i||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,p=new pp(e,d,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(nd),l.Y36(l.s_b),l.Y36(l._Vd),l.$8M("name"),l.Y36(l.sBO))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class pp{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Ca?this.route:t===nd?this.childContexts:this.parent.get(t,e)}}let Kg=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,i){1&e&&l._UZ(0,"router-outlet")},directives:[id],encapsulation:2}),n})();function mp(n,t=""){for(let e=0;e<n.length;e++){const i=n[e];Xl(i,Qg(t,i))}}function Xl(n,t){n.children&&mp(n.children,t)}function Qg(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function rd(n){const t=n.children&&n.children.map(rd),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==jt&&(e.component=Kg),e}function Fo(n){return n.outlet||jt}function Kn(n,t){const e=n.filter(i=>Fo(i)===t);return e.push(...n.filter(i=>Fo(i)!==t)),e}const Xg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function xh(n,t,e){var i;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},Xg):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const o=(t.matcher||Zl)(e,n,t);if(!o)return Object.assign({},Xg);const c={};bi(o.posParams,(p,b)=>{c[b]=p.path});const d=o.consumed.length>0?Object.assign(Object.assign({},c),o.consumed[o.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:d,positionalParamSegments:null!==(i=o.posParams)&&void 0!==i?i:{}}}function nu(n,t,e,i,r="corrected"){if(e.length>0&&function vy(n,t,e){return e.some(i=>Ih(n,t,i)&&Fo(i)!==jt)}(n,e,i)){const c=new Oe(t,function Dh(n,t,e,i){const r={};r[jt]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const o of e)if(""===o.path&&Fo(o)!==jt){const c=new Oe([],{});c._sourceSegment=n,c._segmentIndexShift=t.length,r[Fo(o)]=c}return r}(n,t,i,new Oe(e,n.children)));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:[]}}if(0===e.length&&function e_(n,t,e){return e.some(i=>Ih(n,t,i))}(n,e,i)){const c=new Oe(n.segments,function Jg(n,t,e,i,r,o){const c={};for(const d of i)if(Ih(n,e,d)&&!r[Fo(d)]){const p=new Oe([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===o?n.segments.length:t.length,c[Fo(d)]=p}return Object.assign(Object.assign({},r),c)}(n,t,e,i,n.children,r));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:e}}const o=new Oe(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}function Ih(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function t_(n,t,e,i){return!!(Fo(n)===i||i!==jt&&Ih(t,e,n))&&("**"===n.path||xh(t,n,e).matched)}function by(n,t,e){return 0===t.length&&!n.children[e]}class gp{constructor(t){this.segmentGroup=t||null}}class Jl{constructor(t){this.urlTree=t}}function li(n){return eo(new gp(n))}function iu(n){return eo(new Jl(n))}class od{constructor(t,e,i,r,o){this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(l.h0i)}apply(){const t=nu(this.urlTree.root,[],[],this.config).segmentGroup,e=new Oe(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,jt).pipe((0,et.U)(o=>this.createUrlTree(ec(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ko(o=>{if(o instanceof Jl)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof gp?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,jt).pipe((0,et.U)(r=>this.createUrlTree(ec(r),t.queryParams,t.fragment))).pipe(ko(r=>{throw r instanceof gp?this.noMatchError(r):r}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,i){const r=t.segments.length>0?new Oe([],{[jt]:t}):t;return new ke(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,et.U)(o=>new Oe([],o))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return(0,Dn.D)(r).pipe(Wi(o=>{const c=i.children[o],d=Kn(e,o);return this.expandSegmentGroup(t,d,c,o).pipe((0,et.U)(p=>({segment:p,outlet:o})))}),Ti((o,c)=>(o[c.outlet]=c.segment,o),{}),function Bg(n,t){const e=arguments.length>=2;return i=>i.pipe(n?gn((r,o)=>n(r,o,i)):Rr.y,ip(1),e?op(t):rp(()=>new Bs))}())}expandSegment(t,e,i,r,o,c){return(0,Dn.D)(i).pipe(Wi(d=>this.expandSegmentAgainstRoute(t,e,i,d,r,o,c).pipe(ko(b=>{if(b instanceof gp)return st(null);throw b}))),Vs(d=>!!d),ko((d,p)=>{if(d instanceof Bs||"EmptyError"===d.name)return by(e,r,o)?st(new Oe([],{})):li(e);throw d}))}expandSegmentAgainstRoute(t,e,i,r,o,c,d){return t_(r,e,o,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,o,c):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,o,c):li(e):li(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,o,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,o,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const o=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?iu(o):this.lineralizeSegments(i,o).pipe((0,ri.z)(c=>{const d=new Oe(c,{});return this.expandSegment(t,d,e,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,o,c){const{matched:d,consumedSegments:p,remainingSegments:b,positionalParamSegments:E}=xh(e,r,o);if(!d)return li(e);const D=this.applyRedirectCommands(p,r.redirectTo,E);return r.redirectTo.startsWith("/")?iu(D):this.lineralizeSegments(r,D).pipe((0,ri.z)(R=>this.expandSegment(t,e,i,R.concat(b),c,!1)))}matchSegmentAgainstRoute(t,e,i,r,o){if("**"===i.path)return i.loadChildren?(i._loadedConfig?st(i._loadedConfig):this.configLoader.load(t.injector,i)).pipe((0,et.U)(D=>(i._loadedConfig=D,new Oe(r,{})))):st(new Oe(r,{}));const{matched:c,consumedSegments:d,remainingSegments:p}=xh(e,i,r);return c?this.getChildConfig(t,i,r).pipe((0,ri.z)(E=>{const D=E.module,R=E.routes,{segmentGroup:N,slicedSegments:B}=nu(e,d,p,R),K=new Oe(N.segments,N.children);if(0===B.length&&K.hasChildren())return this.expandChildren(D,R,K).pipe((0,et.U)(Ye=>new Oe(d,Ye)));if(0===R.length&&0===B.length)return st(new Oe(d,{}));const ce=Fo(i)===o;return this.expandSegment(D,K,R,B,ce?jt:o,!0).pipe((0,et.U)(We=>new Oe(d.concat(We.segments),We.children)))})):li(e)}getChildConfig(t,e,i){return e.children?st(new Eh(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?st(e._loadedConfig):this.runCanLoadGuards(t.injector,e,i).pipe((0,ri.z)(r=>r?this.configLoader.load(t.injector,e).pipe((0,et.U)(o=>(e._loadedConfig=o,o))):function n_(n){return eo(Yl(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(e))):st(new Eh([],t))}runCanLoadGuards(t,e,i){const r=e.canLoad;return r&&0!==r.length?st(r.map(c=>{const d=t.get(c);let p;if(function DE(n){return n&&xa(n.canLoad)}(d))p=d.canLoad(e,i);else{if(!xa(d))throw new Error("Invalid CanLoad guard");p=d(e,i)}return no(p)})).pipe(tu(),(0,vi.b)(c=>{if(!eu(c))return;const d=Yl(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw d.url=c,d}),(0,et.U)(c=>!0===c)):st(!0)}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return st(i);if(r.numberOfChildren>1||!r.children[jt])return eo(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t.redirectTo}'`));r=r.children[jt]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreatreUrlTree(t,e,i,r){const o=this.createSegmentGroup(t,e.root,i,r);return new ke(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return bi(t,(r,o)=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[o]=e[d]}else i[o]=r}),i}createSegmentGroup(t,e,i,r){const o=this.createSegments(t,e.segments,i,r);let c={};return bi(e.children,(d,p)=>{c[p]=this.createSegmentGroup(t,d,i,r)}),new Oe(o,c)}createSegments(t,e,i,r){return e.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}function ec(n){const t={};for(const i of Object.keys(n.children)){const o=ec(n.children[i]);(o.segments.length>0||o.hasChildren())&&(t[i]=o)}return function Cr(n){if(1===n.numberOfChildren&&n.children[jt]){const t=n.children[jt];return new Oe(n.segments.concat(t.segments),t.children)}return n}(new Oe(n.segments,t))}class vp{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class ru{constructor(t,e){this.component=t,this.route=e}}function Sh(n,t,e){const i=n._root;return Lo(i,t?t._root:null,e,[i.value])}function ou(n,t,e){const i=function wy(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(i?i.module.injector:e).get(n)}function Lo(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=Qc(t);return n.children.forEach(c=>{(function Th(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,c=t?t.value:null,d=e?e.getContext(n.value.outlet):null;if(c&&o.routeConfig===c.routeConfig){const p=function Cy(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Ft(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Ft(n.url,t.url)||!Oo(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ea(n,t)||!Oo(n.queryParams,t.queryParams);default:return!Ea(n,t)}}(c,o,o.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new vp(i)):(o.data=c.data,o._resolvedData=c._resolvedData),Lo(n,t,o.component?d?d.children:null:e,i,r),p&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new ru(d.outlet.component,c))}else c&&sd(t,d,r),r.canActivateChecks.push(new vp(i)),Lo(n,null,o.component?d?d.children:null:e,i,r)})(c,o[c.value.outlet],e,i.concat([c.value]),r),delete o[c.value.outlet]}),bi(o,(c,d)=>sd(c,e.getContext(d),r)),r}function sd(n,t,e){const i=Qc(n),r=n.value;bi(i,(o,c)=>{sd(o,r.component?t?t.children.getContext(c):null:t,e)}),e.canDeactivateChecks.push(new ru(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}class o_{}function Mh(n){return new zn.y(t=>t.error(n))}class wp{constructor(t,e,i,r,o,c){this.rootComponentType=t,this.config=e,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=c}recognize(){const t=nu(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,jt);if(null===e)return null;const i=new Ql([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},jt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new wa(i,e),o=new mh(this.url,r);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(t){const e=t.value,i=$g(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,i)}processChildren(t,e){const i=[];for(const o of Object.keys(e.children)){const c=e.children[o],d=Kn(t,o),p=this.processSegmentGroup(d,c,o);if(null===p)return null;i.push(...p)}const r=Cp(i);return function Dy(n){n.sort((t,e)=>t.value.outlet===jt?-1:e.value.outlet===jt?1:t.value.outlet.localeCompare(e.value.outlet))}(r),r}processSegment(t,e,i,r){for(const o of t){const c=this.processSegmentAgainstRoute(o,e,i,r);if(null!==c)return c}return by(e,i,r)?[]:null}processSegmentAgainstRoute(t,e,i,r){if(t.redirectTo||!t_(t,e,i,r))return null;let o,c=[],d=[];if("**"===t.path){const N=i.length>0?ch(i).parameters:{};o=new Ql(i,N,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,C(t),Fo(t),t.component,t,m(e),v(e)+i.length,k(t))}else{const N=xh(e,t,i);if(!N.matched)return null;c=N.consumedSegments,d=N.remainingSegments,o=new Ql(c,N.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,C(t),Fo(t),t.component,t,m(e),v(e)+c.length,k(t))}const p=function Iy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(t),{segmentGroup:b,slicedSegments:E}=nu(e,c,d,p.filter(N=>void 0===N.redirectTo),this.relativeLinkResolution);if(0===E.length&&b.hasChildren()){const N=this.processChildren(p,b);return null===N?null:[new wa(o,N)]}if(0===p.length&&0===E.length)return[new wa(o,[])];const D=Fo(t)===r,R=this.processSegment(p,b,E,D?jt:r);return null===R?null:[new wa(o,R)]}}function Sy(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function Cp(n){const t=[],e=new Set;for(const i of n){if(!Sy(i)){t.push(i);continue}const r=t.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=Cp(i.children);t.push(new wa(i.value,r))}return t.filter(i=>!e.has(i))}function m(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function v(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function C(n){return n.data||{}}function k(n){return n.resolve||{}}function it(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function mt(n){return mn(t=>{const e=n(t);return e?(0,Dn.D)(e).pipe((0,et.U)(()=>t)):st(t)})}class ld extends class Er{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const cd=new l.OlP("ROUTES");class au{constructor(t,e,i,r){this.injector=t,this.compiler=e,this.onLoadStartListener=i,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe((0,et.U)(o=>{this.onLoadEndListener&&this.onLoadEndListener(e);const c=o.create(t);return new Eh(Po(c.injector.get(cd,void 0,l.XFs.Self|l.XFs.Optional)).map(rd),c)}),ko(o=>{throw e._loader$=void 0,o}));return e._loader$=new ga(r,()=>new pt.x).pipe(ma()),e._loader$}loadModuleFactory(t){return no(t()).pipe((0,ri.z)(e=>e instanceof l.YKP?st(e):(0,Dn.D)(this.compiler.compileModuleAsync(e))))}}class Ep{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function s_(n){throw n}function tc(n,t,e){return t.parse("/")}function ud(n,t){return st(null)}const kh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},a_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Vn=(()=>{class n{constructor(e,i,r,o,c,d,p){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=o,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new pt.x,this.errorHandler=s_,this.malformedUriErrorHandler=tc,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ud,afterPreactivation:ud},this.urlHandlingStrategy=new Ep,this.routeReuseStrategy=new ld,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(l.h0i),this.console=c.get(l.c2e);const D=c.get(l.R0b);this.isNgZoneEnabled=D instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function ba(){return new ke(new Oe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new au(c,d,R=>this.triggerEvent(new to(R)),R=>this.triggerEvent(new _a(R))),this.routerState=ph(this.currentUrlTree,this.rootComponentType),this.transitions=new er({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(gn(r=>0!==r.id),(0,et.U)(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),mn(r=>{let o=!1,c=!1;return st(r).pipe((0,vi.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.currentRawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),mn(d=>{const p=this.browserUrlTree.toString(),b=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return l_(d.source)&&(this.browserUrlTree=d.extractedUrl),st(d).pipe(mn(D=>{const R=this.transitions.getValue();return i.next(new $c(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),R!==this.transitions.getValue()?Ao.E:Promise.resolve(D)}),function i_(n,t,e,i){return mn(r=>function Vi(n,t,e,i,r){return new od(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,et.U)(o=>Object.assign(Object.assign({},r),{urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,vi.b)(D=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function F(n,t,e,i,r){return(0,ri.z)(o=>function xy(n,t,e,i,r="emptyOnly",o="legacy"){try{const c=new wp(n,t,e,i,r,o).recognize();return null===c?Mh(new o_):st(c)}catch(c){return Mh(c)}}(n,t,o.urlAfterRedirects,e(o.urlAfterRedirects),i,r).pipe((0,et.U)(c=>Object.assign(Object.assign({},o),{targetSnapshot:c}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,vi.b)(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const N=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(N,D)}this.browserUrlTree=D.urlAfterRedirects}const R=new Gc(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);i.next(R)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:R,extractedUrl:N,source:B,restoredState:K,extras:ce}=d,He=new $c(R,this.serializeUrl(N),B,K);i.next(He);const We=ph(N,this.rootComponentType).snapshot;return st(Object.assign(Object.assign({},d),{targetSnapshot:We,urlAfterRedirects:N,extras:Object.assign(Object.assign({},ce),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=d.rawUrl,d.resolve(null),Ao.E}),mt(d=>{const{targetSnapshot:p,id:b,extractedUrl:E,rawUrl:D,extras:{skipLocationChange:R,replaceUrl:N}}=d;return this.hooks.beforePreactivation(p,{navigationId:b,appliedUrlTree:E,rawUrlTree:D,skipLocationChange:!!R,replaceUrl:!!N})}),(0,vi.b)(d=>{const p=new zl(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,et.U)(d=>Object.assign(Object.assign({},d),{guards:Sh(d.targetSnapshot,d.currentSnapshot,this.rootContexts)})),function bp(n,t){return(0,ri.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:c}}=e;return 0===c.length&&0===o.length?st(Object.assign(Object.assign({},e),{guardsResult:!0})):function r_(n,t,e,i){return(0,Dn.D)(n).pipe((0,ri.z)(r=>function ad(n,t,e,i,r){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?st(o.map(d=>{const p=ou(d,t,r);let b;if(function fp(n){return n&&xa(n.canDeactivate)}(p))b=no(p.canDeactivate(n,t,e,i));else{if(!xa(p))throw new Error("Invalid CanDeactivate guard");b=no(p(n,t,e,i))}return b.pipe(Vs())})).pipe(tu()):st(!0)}(r.component,r.route,e,t,i)),Vs(r=>!0!==r,!0))}(c,i,r,n).pipe((0,ri.z)(d=>d&&function Yg(n){return"boolean"==typeof n}(d)?function Pr(n,t,e,i){return(0,Dn.D)(t).pipe(Wi(r=>Hc(function yp(n,t){return null!==n&&t&&t(new Ro(n)),st(!0)}(r.route.parent,i),function su(n,t){return null!==n&&t&&t(new ul(n)),st(!0)}(r.route,i),function Da(n,t,e){const i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(c=>function yy(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(c)).filter(c=>null!==c).map(c=>Or(()=>st(c.guards.map(p=>{const b=ou(p,c.node,e);let E;if(function hp(n){return n&&xa(n.canActivateChild)}(b))E=no(b.canActivateChild(i,n));else{if(!xa(b))throw new Error("Invalid CanActivateChild guard");E=no(b(i,n))}return E.pipe(Vs())})).pipe(tu())));return st(o).pipe(tu())}(n,r.path,e),function Ey(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return st(!0);const r=i.map(o=>Or(()=>{const c=ou(o,t,e);let d;if(function dp(n){return n&&xa(n.canActivate)}(c))d=no(c.canActivate(t,n));else{if(!xa(c))throw new Error("Invalid CanActivate guard");d=no(c(t,n))}return d.pipe(Vs())}));return st(r).pipe(tu())}(n,r.route,e))),Vs(r=>!0!==r,!0))}(i,o,n,t):st(d)),(0,et.U)(d=>Object.assign(Object.assign({},e),{guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,vi.b)(d=>{if(eu(d.guardsResult)){const b=Yl(`Redirecting to "${this.serializeUrl(d.guardsResult)}"`);throw b.url=d.guardsResult,b}const p=new lh(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),gn(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,""),!1)),mt(d=>{if(d.guards.canActivateChecks.length)return st(d).pipe((0,vi.b)(p=>{const b=new Wl(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(b)}),mn(p=>{let b=!1;return st(p).pipe(function Z(n,t){return(0,ri.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return st(e);let o=0;return(0,Dn.D)(r).pipe(Wi(c=>function ve(n,t,e,i){return function Ve(n,t,e,i){const r=it(n);if(0===r.length)return st({});const o={};return(0,Dn.D)(r).pipe((0,ri.z)(c=>function wt(n,t,e,i){const r=ou(n,t,i);return no(r.resolve?r.resolve(t,e):r(t,e))}(n[c],t,e,i).pipe((0,vi.b)(d=>{o[c]=d}))),ip(1),(0,ri.z)(()=>it(o).length===r.length?st(o):Ao.E))}(n._resolve,n,t,i).pipe((0,et.U)(o=>(n._resolvedData=o,n.data=Object.assign(Object.assign({},n.data),$g(n,e).resolve),null)))}(c.route,i,n,t)),(0,vi.b)(()=>o++),ip(1),(0,ri.z)(c=>o===r.length?st(e):Ao.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,vi.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,vi.b)(p=>{const b=new tr(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(b)}))}),mt(d=>{const{targetSnapshot:p,id:b,extractedUrl:E,rawUrl:D,extras:{skipLocationChange:R,replaceUrl:N}}=d;return this.hooks.afterPreactivation(p,{navigationId:b,appliedUrlTree:E,rawUrlTree:D,skipLocationChange:!!R,replaceUrl:!!N})}),(0,et.U)(d=>{const p=function hy(n,t,e){const i=Xu(n,t._root,e?e._root:void 0);return new Qu(i,t)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return Object.assign(Object.assign({},d),{targetRouterState:p})}),(0,vi.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,t,e)=>(0,et.U)(i=>(new ed(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,vi.b)({next(){o=!0},complete(){o=!0}}),cl(()=>{var d;o||c||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(d=this.currentNavigation)||void 0===d?void 0:d.id)===r.id&&(this.currentNavigation=null)}),ko(d=>{if(c=!0,function js(n){return n&&n[wr]}(d)){const p=eu(d.url);p||(this.navigated=!0,this.restoreHistory(r,!0));const b=new zu(r.id,this.serializeUrl(r.extractedUrl),d.message);i.next(b),p?setTimeout(()=>{const E=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),D={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||l_(r.source)};this.scheduleNavigation(E,"imperative",null,D,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const p=new ai(r.id,this.serializeUrl(r.extractedUrl),d);i.next(p);try{r.resolve(this.errorHandler(d))}catch(b){r.reject(b)}}return Ao.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const o={replaceUrl:!0},c=(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null;if(c){const p=Object.assign({},c);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(o.state=p)}const d=this.parseUrl(e.url);this.scheduleNavigation(d,i,c,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){mp(e),this.config=e.map(rd),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:o,fragment:c,queryParamsHandling:d,preserveFragment:p}=i,b=r||this.routerState.root,E=p?this.currentUrlTree.fragment:c;let D=null;switch(d){case"merge":D=Object.assign(Object.assign({},this.currentUrlTree.queryParams),o);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=o||null}return null!==D&&(D=this.removeEmptyProps(D)),function cp(n,t,e,i,r){if(0===e.length)return bh(t.root,t.root,t.root,i,r);const o=function qg(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Gg(!0,0,n);let t=0,e=!1;const i=n.reduce((r,o,c)=>{if("object"==typeof o&&null!=o){if(o.outlets){const d={};return bi(o.outlets,(p,b)=>{d[b]="string"==typeof p?p.split("/"):p}),[...r,{outlets:d}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===c?(o.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?e=!0:".."===d?t++:""!=d&&r.push(d))}),r):[...r,o]},[]);return new Gg(e,t,i)}(e);if(o.toRoot())return bh(t.root,t.root,new Oe([],{}),i,r);const c=function py(n,t,e){if(n.isAbsolute)return new wh(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const o=e.snapshot._urlSegment;return new wh(o,o===t.root,0)}const i=No(n.commands[0])?0:1;return function zg(n,t,e){let i=n,r=t,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new wh(i,!1,r-o)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(o,t,n),d=c.processChildren?$s(c.segmentGroup,c.index,o.commands):gy(c.segmentGroup,c.index,o.commands);return bh(t.root,c.segmentGroup,d,i,r)}(b,this.currentUrlTree,e,D,null!=E?E:null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=eu(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function xp(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?Object.assign({},kh):!1===i?Object.assign({},a_):i,eu(e))return Yu(this.currentUrlTree,e,r);const o=this.parseUrl(e);return Yu(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const o=e[r];return null!=o&&(i[r]=o),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new ns(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,o,c){var d,p;if(this.disposed)return Promise.resolve(!1);let b,E,D;c?(b=c.resolve,E=c.reject,D=c.promise):D=new Promise((B,K)=>{b=B,E=K});const R=++this.navigationId;let N;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),N=r&&r.\u0275routerPageId?r.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?null!==(d=this.browserPageId)&&void 0!==d?d:0:(null!==(p=this.browserPageId)&&void 0!==p?p:0)+1):N=0,this.setTransition({id:R,targetPageId:N,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:o,resolve:b,reject:E,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(B=>Promise.reject(B))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),o=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",o):this.location.go(r,"",o)}restoreHistory(e,i=!1){var r,o;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===c?this.currentUrlTree===(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)&&0===c&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i){const r=new zu(e.id,this.serializeUrl(e.extractedUrl),i);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function l_(n){return"imperative"!==n}let Dp=(()=>{class n{constructor(e,i,r,o,c){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=c,this.commands=null,this.onChanges=new pt.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==e?i.setAttribute(r,"tabindex",e):i.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:Rh(this.skipLocationChange),replaceUrl:Rh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Rh(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Vn),l.Y36(Ca),l.$8M("tabindex"),l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,i){1&e&&l.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[l.TTD]}),n})();function Rh(n){return""===n||!!n}class c_{}class u_{preload(t,e){return st(null)}}let TE=(()=>{class n{constructor(e,i,r,o){this.router=e,this.injector=r,this.preloadingStrategy=o,this.loader=new au(r,i,p=>e.triggerEvent(new to(p)),p=>e.triggerEvent(new _a(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(gn(e=>e instanceof ns),Wi(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(l.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const o of i)if(o.loadChildren&&!o.canLoad&&o._loadedConfig){const c=o._loadedConfig;r.push(this.processRoutes(c.module,c.routes))}else o.loadChildren&&!o.canLoad?r.push(this.preloadConfig(e,o)):o.children&&r.push(this.processRoutes(e,o.children));return(0,Dn.D)(r).pipe((0,Mo.J)(),(0,et.U)(o=>{}))}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?st(i._loadedConfig):this.loader.load(e.injector,i)).pipe((0,ri.z)(o=>(i._loadedConfig=o,this.processRoutes(o.module,o.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Vn),l.LFG(l.Sil),l.LFG(l.zs3),l.LFG(c_))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),My=(()=>{class n{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof $c?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ns&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof qc&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new qc(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const lu=new l.OlP("ROUTER_CONFIGURATION"),cu=new l.OlP("ROUTER_FORROOT_GUARD"),ME=[Ee,{provide:Mi,useClass:Mn},{provide:Vn,useFactory:function OE(n,t,e,i,r,o,c={},d,p){const b=new Vn(null,n,t,e,i,r,Po(o));return d&&(b.urlHandlingStrategy=d),p&&(b.routeReuseStrategy=p),function ky(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(c,b),c.enableTracing&&b.events.subscribe(E=>{var D,R;null===(D=console.group)||void 0===D||D.call(console,`Router Event: ${E.constructor.name}`),console.log(E.toString()),console.log(E),null===(R=console.groupEnd)||void 0===R||R.call(console)}),b},deps:[Mi,nd,Ee,l.zs3,l.Sil,cd,lu,[class Ah{},new l.FiY],[class yi{},new l.FiY]]},nd,{provide:Ca,useFactory:function PE(n){return n.routerState.root},deps:[Vn]},TE,u_,class SE{preload(t,e){return e().pipe(ko(()=>st(null)))}},{provide:lu,useValue:{enableTracing:!1}}];function AE(){return new l.PXZ("Router",Vn)}let kE=(()=>{class n{constructor(e,i){}static forRoot(e,i){return{ngModule:n,providers:[ME,Ay(e),{provide:cu,useFactory:RE,deps:[[Vn,new l.FiY,new l.tp0]]},{provide:lu,useValue:i||{}},{provide:_e,useFactory:yM,deps:[ge,[new l.tBr(ot),new l.FiY],lu]},{provide:My,useFactory:d_,deps:[Vn,Dc,lu]},{provide:c_,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:u_},{provide:l.PXZ,multi:!0,useFactory:AE},[Oh,{provide:l.ip1,multi:!0,useFactory:h_,deps:[Oh]},{provide:f_,useFactory:NE,deps:[Oh]},{provide:l.tb,multi:!0,useExisting:f_}]]}}static forChild(e){return{ngModule:n,providers:[Ay(e)]}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(cu,8),l.LFG(Vn,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function d_(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new My(n,t,e)}function yM(n,t,e={}){return e.useHash?new Me(n,t):new Je(n,t)}function RE(n){return"guarded"}function Ay(n){return[{provide:l.deG,multi:!0,useValue:n},{provide:cd,multi:!0,useValue:n}]}let Oh=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new pt.x}appInitializer(){return this.injector.get(W,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(d=>i=d),o=this.injector.get(Vn),c=this.injector.get(lu);return"disabled"===c.initialNavigation?(o.setUpLocationChangeListener(),i(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(o.hooks.afterPreactivation=()=>this.initNavigation?st(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),o.initialNavigation()):i(!0),r})}bootstrapListener(e){const i=this.injector.get(lu),r=this.injector.get(TE),o=this.injector.get(My),c=this.injector.get(Vn),d=this.injector.get(l.z2F);e===d.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&c.initialNavigation(),r.setUpPreloading(),o.init(),c.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function h_(n){return n.appInitializer.bind(n)}function NE(n){return n.bootstrapListener.bind(n)}const f_=new l.OlP("Router Initializer");var oo=V(127),Ph=V(4986),Ia=V(6451),Ry=V(3099);function Oy(n,t=Rr.y){return n=null!=n?n:BE,(0,Yn.e)((e,i)=>{let r,o=!0;e.subscribe((0,On.x)(i,c=>{const d=t(c);(o||!n(r,d))&&(o=!1,r=d,i.next(c))}))})}function BE(n,t){return n===t}var Nh=V(5032),wn=V(5813),Yi=V(2011),Py=(V(820),V(3942)),Sa=V(4859),fe=V(5861),so=V(9681),L=V(2090),Ta=V(1877);const UE="@firebase/database";let Ny="";function Fy(n){Ny=n}class CM{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,L.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,L.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class EM{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,L.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const HE=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new CM(t)}}catch(t){}return new EM},Tt=HE("localStorage"),p_=HE("sessionStorage"),dd=new Ta.Yd("@firebase/database"),Ly=function(){let n=1;return function(){return n++}}(),Ip=function(n){const t=(0,L.dS)(n),e=new L.gQ;e.update(t);const i=e.digest();return L.US.encodeByteArray(i)},ao=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=ao.apply(null,i):t+="object"==typeof i?(0,L.Pz)(i):i,t+=" "}return t};let uu=null,$E=!0;const m_=function(n,t){(0,L.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(dd.logLevel=Ta.in.VERBOSE,uu=dd.log.bind(dd),t&&p_.set("logging_enabled",!0)):"function"==typeof n?uu=n:(uu=null,p_.remove("logging_enabled"))},Un=function(...n){if(!0===$E&&($E=!1,null===uu&&!0===p_.get("logging_enabled")&&m_(!0)),uu){const t=ao.apply(null,n);uu(t)}},hd=function(n){return function(...t){Un(n,...t)}},g_=function(...n){const t="FIREBASE INTERNAL ERROR: "+ao(...n);dd.error(t)},qs=function(...n){const t=`FIREBASE FATAL ERROR: ${ao(...n)}`;throw dd.error(t),new Error(t)},Bo=function(...n){const t="FIREBASE WARNING: "+ao(...n);dd.warn(t)},By=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},zs="[MIN_NAME]",Ws="[MAX_NAME]",nc=function(n,t){if(n===t)return 0;if(n===zs||t===Ws)return-1;if(t===zs||n===Ws)return 1;{const e=y_(n),i=y_(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},Vy=function(n,t){return n===t?0:n<t?-1:1},v_=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Pz)(t))},Uy=function(n){if("object"!=typeof n||null===n)return(0,L.Pz)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,L.Pz)(t[i]),e+=":",e+=Uy(n[t[i]]);return e+="}",e},qE=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function ir(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const zE=function(n){(0,L.hu)(!By(n),"Invalid JSON number");const i=1023;let r,o,c,d,p;0===n?(o=0,c=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=d+i,c=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(o=0,c=Math.round(n/Math.pow(2,-1074))));const b=[];for(p=52;p;p-=1)b.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)b.push(o%2?1:0),o=Math.floor(o/2);b.push(r?1:0),b.reverse();const E=b.join("");let D="";for(p=0;p<64;p+=8){let R=parseInt(E.substr(p,8),2).toString(16);1===R.length&&(R="0"+R),D+=R}return D.toLowerCase()},pF=new RegExp("^-?(0*)\\d{1,10}$"),jy=-2147483648,b_=2147483647,y_=function(n){if(pF.test(n)){const t=Number(n);if(t>=jy&&t<=b_)return t}return null},du=function(n){try{n()}catch(t){setTimeout(()=>{throw Bo("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},w_=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class gF{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Bo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class _F{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(Un("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Bo(t)}}let C_=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const ic=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,D_="websocket",$y="long_polling";class Sp{constructor(t,e,i,r,o=!1,c="",d=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Tt.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Tt.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function rc(n,t,e){let i;if((0,L.hu)("string"==typeof t,"typeof type must == string"),(0,L.hu)("object"==typeof e,"typeof params must == object"),t===D_)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==$y)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function AM(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return ir(e,(o,c)=>{r.push(o+"="+c)}),i+r.join("&")}class YE{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,L.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,L.p$)(this.counters_)}}const Gy={},Tp={};function qy(n){const t=n.toString();return Gy[t]||(Gy[t]=new YE),Gy[t]}class kM{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&du(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class md{constructor(t,e,i,r,o,c,d){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hd(t),this.stats_=qy(e),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),rc(e,$y,p))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new kM(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new I_((...o)=>{const[c,d,p,b,E]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=d,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[c,d]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&ic.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){md.forceAllow_=!0}static forceDisallow(){md.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!md.forceAllow_&&(md.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,L.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,L.h$)(e),r=qE(i,1840);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,L.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class I_{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=Ly(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=I_.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){Un("frame writing exception"),d.stack&&Un(d.stack),Un(d)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Un("No IE domain setting required")}catch(e){const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const c=this.pendingSegs.shift();i=i+"&seg"+r+"="+c.seg+"&ts"+r+"="+c.ts+"&d"+r+"="+c.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,L.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Un("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}},Math.floor(1))}}let kp=null;"undefined"!=typeof MozWebSocket?kp=MozWebSocket:"undefined"!=typeof WebSocket&&(kp=WebSocket);let Rp=(()=>{class n{constructor(e,i,r,o,c,d,p){this.connId=e,this.applicationId=r,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hd(this.connId),this.stats_=qy(i),this.connURL=n.connectionURL_(i,d,p,o),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,o){const c={v:"5"};return!(0,L.Yr)()&&"undefined"!=typeof location&&location.hostname&&ic.test(location.hostname)&&(c.r="f"),i&&(c.s=i),r&&(c.ls=r),o&&(c.ac=o),rc(e,D_,c)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Tt.set("previous_websocket_failure",!0);try{if((0,L.Yr)()){const o={headers:{"User-Agent":`Firebase/5/${Ny}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(o.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(o.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,d=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;d&&(o.proxy={origin:d}),this.mySock=new kp(this.connURL,[],o)}else this.mySock=new kp(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==kp&&!n.forceDisallow_}static previouslyFailed(){return Tt.isInMemoryStorage||!0===Tt.get("previous_websocket_failure")}markConnectionHealthy(){Tt.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,L.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,L.Pz)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=qE(i,16384);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class lo{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[md,Rp]}initTransports_(t){const e=Rp&&Rp.isAvailable();let i=e&&!Rp.previouslyFailed();if(t.webSocketOnly&&(e||Bo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Rp];else{const r=this.transports_=[];for(const o of lo.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class Qy{constructor(t,e,i,r,o,c,d,p,b,E){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=p,this.onKill_=b,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hd("c:"+this.id+":"),this.transportManager_=new lo(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=w_(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=v_("t",t),i=v_("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=v_("t",t),i=v_("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=v_("t",t);if("d"in t){const i=t.d;if("h"===e)this.onHandshake_(i);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?g_("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):g_("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&Bo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),w_(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):w_(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Tt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ox{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class sx{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,L.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let o=0;o<r.length;o++)if(r[o].callback===e&&(!i||i===r[o].context))return void r.splice(o,1)}validateEventType_(t){(0,L.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class Op extends sx{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Op}getInitialEvent(t){return(0,L.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Qt{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function an(){return new Qt("")}function Xt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function hu(n){return n.pieces_.length-n.pieceNum_}function jn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Qt(n.pieces_,t)}function M_(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Pp(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function lx(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Qt(t,0)}function Hn(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof Qt)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new Qt(e,0)}function Jt(n){return n.pieceNum_>=n.pieces_.length}function co(n,t){const e=Xt(n),i=Xt(t);if(null===e)return t;if(e===i)return co(jn(n),jn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function A_(n,t){const e=Pp(n,0),i=Pp(t,0);for(let r=0;r<e.length&&r<i.length;r++){const o=nc(e[r],i[r]);if(0!==o)return o}return e.length===i.length?0:e.length<i.length?-1:1}function Np(n,t){if(hu(n)!==hu(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function Ys(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(hu(n)>hu(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class Jy{constructor(t,e){this.errorPrefix_=e,this.parts_=Pp(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,L.ug)(this.parts_[i]);jM(this)}}function jM(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Bh(n))}function Bh(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Fp extends sx{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Fp}getInitialEvent(t){return(0,L.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const k_=1e3;let n0,pl=(()=>{class n extends ox{constructor(e,i,r,o,c,d,p,b){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=b,this.id=n.nextPersistentConnectionId_++,this.log_=hd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=k_,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Fp.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Op.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const o=++this.requestNumber_,c={r:o,a:e,b:i};this.log_((0,L.Pz)(c)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),r&&(this.requestCBHash_[o]=r)}get(e){this.initConnection_();const i=new L.BH,r={p:e._path.toString(),q:e._queryObject},o={action:"g",request:r,onComplete:d=>{const p=d.d;"ok"===d.s?(this.onDataUpdate_(r.p,p,!1,null),i.resolve(p)):i.reject(p)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const d=this.outstandingGets_[c];void 0===d||o!==d||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),i.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),i.promise}listen(e,i,r,o){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),(0,L.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const p={onComplete:o,hashFn:i,query:e,tag:r};this.listens.get(d).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);const c={p:r};e.tag&&(c.q=i._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest("q",c,p=>{const b=p.d,E=p.s;n.warnOnListenWarnings_(b,i),(this.listens.get(r)&&this.listens.get(r).get(o))===e&&(this.log_("listen response",p),"ok"!==E&&this.removeListen_(r,o),e.onComplete&&e.onComplete(E,b))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,L.r3)(e,"w")){const r=(0,L.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();Bo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,L.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,L.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{const c=o.s,d=o.d||"error";this.authToken_===e&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),(0,L.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,e._queryObject,i)}sendUnlisten_(e,i,r,o){this.log_("Unlisten on "+e+" for "+i);const c={p:e};o&&(c.q=r,c.t=o),this.sendRequest("n",c)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,o){const c={p:i,d:r};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{o&&setTimeout(()=>{o(d.s,d.d)},Math.floor(0))})}put(e,i,r,o){this.putInternal("p",e,i,r,o)}merge(e,i,r,o){this.putInternal("m",e,i,r,o)}putInternal(e,i,r,o,c){this.initConnection_();const d={p:i,d:r};void 0!==c&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,L.Pz)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):g_("Unrecognized action received from server: "+(0,L.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=k_,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=k_,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=k_),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,fe.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),o=e.onRealtimeDisconnect_.bind(e),c=e.id+":"+n.nextConnectionId_++,d=e.lastSessionId;let p=!1,b=null;const E=function(){b?b.close():(p=!0,o())};e.realtime_={close:E,sendRequest:function(N){(0,L.hu)(b,"sendRequest call when we're not connected not allowed."),b.sendRequest(N)}};const R=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[N,B]=yield Promise.all([e.authTokenProvider_.getToken(R),e.appCheckTokenProvider_.getToken(R)]);p?Un("getToken() completed but was canceled"):(Un("getToken() completed. Creating connection."),e.authToken_=N&&N.accessToken,e.appCheckToken_=B&&B.token,b=new Qy(c,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,o,K=>{Bo(K+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},d))}catch(N){e.log_("Failed to get token: "+N),p||(e.repoInfo_.nodeAdmin&&Bo(N),E())}}})()}interrupt(e){Un("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Un("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=k_,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(c=>Uy(c)).join("$"):"default";const o=this.removeListen_(e,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,i){const r=new Qt(e).toString();let o;if(this.listens.has(r)){const c=this.listens.get(r);o=c.get(i),c.delete(i),0===c.size&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(e,i){Un("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Un("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,L.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+Ny.replace(/\./g,"-")]=1,(0,L.uI)()?e["framework.cordova"]=1:(0,L.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Op.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class tn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new tn(t,e)}}class R_{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new tn(zs,t),r=new tn(zs,e);return 0!==this.compare(i,r)}minPost(){return tn.MIN}}class O_ extends R_{static get __EMPTY_NODE(){return n0}static set __EMPTY_NODE(t){n0=t}compare(t,e){return nc(t.name,e.name)}isDefinedOn(t){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return tn.MIN}maxPost(){return new tn(Ws,n0)}makePost(t,e){return(0,L.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new tn(t,n0)}toString(){return".key"}}const Ma=new O_;class Vh{constructor(t,e,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(t=t,c=e?i(t.key,e):1,r&&(c*=-1),c<0)t=this.isReverse_?t.left:t.right;else{if(0===c){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let N_,uo=(()=>{class n{constructor(e,i,r,o,c){this.key=e,this.value=i,this.color=null!=r?r:n.RED,this.left=null!=o?o:Nr.EMPTY_NODE,this.right=null!=c?c:Nr.EMPTY_NODE}copy(e,i,r,o,c){return new n(null!=e?e:this.key,null!=i?i:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,i,r),null):0===c?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(e,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Nr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,o;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return Nr.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Nr{constructor(t,e=Nr.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Nr(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,uo.BLACK,null,null))}remove(t){return new Nr(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,uo.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Vh(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new Vh(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new Vh(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new Vh(this.root_,null,this.comparator_,!0,t)}}function px(n,t){return nc(n.name,t.name)}function P_(n,t){return nc(n,t)}Nr.EMPTY_NODE=new class $M{copy(t,e,i,r,o){return this}insert(t,e,i){return new uo(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const F_=function(n){return"number"==typeof n?"number:"+zE(n):"string:"+n},mx=function(n){if(n.isLeafNode()){const t=n.val();(0,L.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,L.r3)(t,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===N_||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===N_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let gx,_d,r0,gd=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),mx(this.priorityNode_)}static set __childrenNodeConstructor(e){gx=e}static get __childrenNodeConstructor(){return gx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Jt(e)?this:".priority"===Xt(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=Xt(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,L.hu)(".priority"!==r||1===hu(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(jn(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+F_(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?zE(this.value_):this.value_,this.lazyHash_=Ip(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(i),c=n.VALUE_TYPE_ORDER.indexOf(r);return(0,L.hu)(o>=0,"Unknown leaf type: "+i),(0,L.hu)(c>=0,"Unknown leaf type: "+r),o===c?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const $n=new class Uh extends R_{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),o=i.compareTo(r);return 0===o?nc(t.name,e.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return tn.MIN}maxPost(){return new tn(Ws,new gd("[PRIORITY-POST]",r0))}makePost(t,e){const i=_d(t);return new tn(e,new gd("[PRIORITY-POST]",i))}toString(){return".priority"}},WM=Math.log(2);class YM{constructor(t){this.count=parseInt(Math.log(t+1)/WM,10),this.current_=this.count-1;const r=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const L_=function(n,t,e,i){n.sort(t);const r=function(p,b){const E=b-p;let D,R;if(0===E)return null;if(1===E)return D=n[p],R=e?e(D):D,new uo(R,D.node,uo.BLACK,null,null);{const N=parseInt(E/2,10)+p,B=r(p,N),K=r(N+1,b);return D=n[N],R=e?e(D):D,new uo(R,D.node,uo.BLACK,B,K)}},d=function(p){let b=null,E=null,D=n.length;const R=function(B,K){const ce=D-B,He=D;D-=B;const We=r(ce+1,He),Ye=n[ce],Ge=e?e(Ye):Ye;N(new uo(Ge,Ye.node,K,null,We))},N=function(B){b?(b.left=B,b=B):(E=B,b=B)};for(let B=0;B<p.count;++B){const K=p.nextBitIsOne(),ce=Math.pow(2,p.count-(B+1));K?R(ce,uo.BLACK):(R(ce,uo.BLACK),R(ce,uo.RED))}return E}(new YM(n.length));return new Nr(i||t,d)};let Zs;const fu={};class ml{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,L.hu)(fu&&$n,"ChildrenNode.ts has not been loaded"),Zs=Zs||new ml({".priority":fu},{".priority":$n}),Zs}get(t){const e=(0,L.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Nr?e:null}hasIndex(t){return(0,L.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,L.hu)(t!==Ma,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=e.getIterator(tn.Wrap);let d,c=o.getNext();for(;c;)r=r||t.isDefinedOn(c.node),i.push(c),c=o.getNext();d=r?L_(i,t.getCompare()):fu;const p=t.toString(),b=Object.assign({},this.indexSet_);b[p]=t;const E=Object.assign({},this.indexes_);return E[p]=d,new ml(E,b)}addToIndexes(t,e){const i=(0,L.UI)(this.indexes_,(r,o)=>{const c=(0,L.DV)(this.indexSet_,o);if((0,L.hu)(c,"Missing index implementation for "+o),r===fu){if(c.isDefinedOn(t.node)){const d=[],p=e.getIterator(tn.Wrap);let b=p.getNext();for(;b;)b.name!==t.name&&d.push(b),b=p.getNext();return d.push(t),L_(d,c.getCompare())}return fu}{const d=e.get(t.name);let p=r;return d&&(p=p.remove(new tn(t.name,d))),p.insert(t,t.node)}});return new ml(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,L.UI)(this.indexes_,r=>{if(r===fu)return r;{const o=e.get(t.name);return o?r.remove(new tn(t.name,o)):r}});return new ml(i,this.indexSet_)}}let jh,Vt=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&mx(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return jh||(jh=new n(new Nr(P_),null,ml.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||jh}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?jh:i}}getChild(e){const i=Xt(e);return null===i?this:this.getImmediateChild(i).getChild(jn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,L.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new tn(e,i);let o,c;i.isEmpty()?(o=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,i),c=this.indexMap_.addToIndexes(r,this.children_));const d=o.isEmpty()?jh:this.priorityNode_;return new n(o,d,c)}}updateChild(e,i){const r=Xt(e);if(null===r)return i;{(0,L.hu)(".priority"!==Xt(e)||1===hu(e),".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(jn(e),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,o=0,c=!0;if(this.forEachChild($n,(d,p)=>{i[d]=p.val(e),r++,c&&n.INTEGER_REGEXP_.test(d)?o=Math.max(o,Number(d)):c=!1}),!e&&c&&o<2*r){const d=[];for(const p in i)d[p]=i[p];return d}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+F_(this.getPriority().val())+":"),this.forEachChild($n,(i,r)=>{const o=r.hash();""!==o&&(e+=":"+i+":"+o)}),this.lazyHash_=""===e?"":Ip(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const o=this.resolveIndex_(r);if(o){const c=o.getPredecessorKey(new tn(e,i));return c?c.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new tn(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new tn(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,tn.Wrap);let c=o.peek();for(;null!=c&&i.compare(c,e)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,tn.Wrap);let c=o.peek();for(;null!=c&&i.compare(c,e)>0;)o.getNext(),c=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Lp?-1:0}withIndex(e){if(e===Ma||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===Ma||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator($n),o=i.getIterator($n);let c=r.getNext(),d=o.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=r.getNext(),d=o.getNext()}return null===c&&null===d}return!1}return!1}}resolveIndex_(e){return e===Ma?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Lp=new class _x extends Vt{constructor(){super(new Nr(P_),Vt.EMPTY_NODE,ml.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Vt.EMPTY_NODE}isEmpty(){return!1}};function ci(n,t=null){if(null===n)return Vt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,L.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new gd(n,ci(t));if(n instanceof Array){let e=Vt.EMPTY_NODE;return ir(n,(i,r)=>{if((0,L.r3)(n,i)&&"."!==i.substring(0,1)){const o=ci(r);(o.isLeafNode()||!o.isEmpty())&&(e=e.updateImmediateChild(i,o))}}),e.updatePriority(ci(t))}{const e=[];let i=!1;if(ir(n,(c,d)=>{if("."!==c.substring(0,1)){const p=ci(d);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),e.push(new tn(c,p)))}}),0===e.length)return Vt.EMPTY_NODE;const o=L_(e,px,c=>c.name,P_);if(i){const c=L_(e,$n.getCompare());return new Vt(o,ci(t),new ml({".priority":c},{".priority":$n}))}return new Vt(o,ci(t),ml.Default)}}Object.defineProperties(tn,{MIN:{value:new tn(zs,Vt.EMPTY_NODE)},MAX:{value:new tn(Ws,Lp)}}),O_.__EMPTY_NODE=Vt.EMPTY_NODE,gd.__childrenNodeConstructor=Vt,function GM(n){N_=n}(Lp),function zM(n){r0=n}(Lp),function qM(n){_d=n}(ci);class o0 extends R_{constructor(t){super(),this.indexPath_=t,(0,L.hu)(!Jt(t)&&".priority"!==Xt(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),o=i.compareTo(r);return 0===o?nc(t.name,e.name):o}makePost(t,e){const i=ci(t),r=Vt.EMPTY_NODE.updateChild(this.indexPath_,i);return new tn(e,r)}maxPost(){const t=Vt.EMPTY_NODE.updateChild(this.indexPath_,Lp);return new tn(Ws,t)}toString(){return Pp(this.indexPath_,0).join("/")}}const bx=new class vx extends R_{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?nc(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return tn.MIN}maxPost(){return tn.MAX}makePost(t,e){const i=ci(t);return new tn(e,i)}toString(){return".value"}},vd="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",wF=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const o=new Array(8);for(r=7;r>=0;r--)o[r]=vd.charAt(e%64),e=Math.floor(e/64);(0,L.hu)(0===e,"Cannot push at time == 0");let c=o.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)c+=vd.charAt(t[r]);return(0,L.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),B_=function(n){if(n===""+b_)return"-";const t=y_(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let c=0;c<e.length;c++)e[c]=n.charAt(c);if(e.length<786)return e.push("-"),e.join("");let i=e.length-1;for(;i>=0&&"z"===e[i];)i--;if(-1===i)return Ws;const o=vd.charAt(vd.indexOf(e[i])+1);return e[i]=o,e.slice(0,i+1).join("")},wx=function(n){if(n===""+jy)return zs;const t=y_(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let i=0;i<e.length;i++)e[i]=n.charAt(i);return"-"===e[e.length-1]?1===e.length?""+b_:(delete e[e.length-1],e.join("")):(e[e.length-1]=vd.charAt(vd.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function a0(n){return{type:"value",snapshotNode:n}}function bd(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function V_(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function ho(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class Cx{constructor(t){this.index_=t}updateChild(t,e,i,r,o,c){(0,L.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=t.getImmediateChild(e);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=c&&(i.isEmpty()?t.hasChild(e)?c.trackChildChange(V_(e,d)):(0,L.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(bd(e,i)):c.trackChildChange(ho(e,i,d))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild($n,(r,o)=>{e.hasChild(r)||i.trackChildChange(V_(r,o))}),e.isLeafNode()||e.forEachChild($n,(r,o)=>{if(t.hasChild(r)){const c=t.getImmediateChild(r);c.equals(o)||i.trackChildChange(ho(r,o,c))}else i.trackChildChange(bd(r,o))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Vt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Hh{constructor(t){this.indexedFilter_=new Cx(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Hh.getStartPost_(t),this.endPost_=Hh.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,i,r,o,c){return this.matches(new tn(e,i))||(i=Vt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,o,c)}updateFullNode(t,e,i){e.isLeafNode()&&(e=Vt.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(Vt.EMPTY_NODE);const o=this;return e.forEachChild($n,(c,d)=>{o.matches(new tn(c,d))||(r=r.updateImmediateChild(c,Vt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class Ex{constructor(t){this.rangedFilter_=new Hh(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,i,r,o,c){return this.rangedFilter_.matches(new tn(e,i))||(i=Vt.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,o,c):this.fullLimitUpdateChild_(t,e,i,o,c)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=Vt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let o;r=Vt.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;o.hasNext()&&c<this.limit_;){const d=o.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!p)break;r=r.updateImmediateChild(d.name,d.node),c++}}else{let o,c,d,p;if(r=e.withIndex(this.index_),r=r.updatePriority(Vt.EMPTY_NODE),this.reverse_){p=r.getReverseIterator(this.index_),o=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();d=(R,N)=>D(N,R)}else p=r.getIterator(this.index_),o=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let b=0,E=!1;for(;p.hasNext();){const D=p.getNext();!E&&d(o,D)<=0&&(E=!0),E&&b<this.limit_&&d(D,c)<=0?b++:r=r.updateImmediateChild(D.name,Vt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,o){let c;if(this.reverse_){const D=this.index_.getCompare();c=(R,N)=>D(N,R)}else c=this.index_.getCompare();const d=t;(0,L.hu)(d.numChildren()===this.limit_,"");const p=new tn(e,i),b=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),E=this.rangedFilter_.matches(p);if(d.hasChild(e)){const D=d.getImmediateChild(e);let R=r.getChildAfterChild(this.index_,b,this.reverse_);for(;null!=R&&(R.name===e||d.hasChild(R.name));)R=r.getChildAfterChild(this.index_,R,this.reverse_);const N=null==R?1:c(R,p);if(E&&!i.isEmpty()&&N>=0)return null!=o&&o.trackChildChange(ho(e,i,D)),d.updateImmediateChild(e,i);{null!=o&&o.trackChildChange(V_(e,D));const K=d.updateImmediateChild(e,Vt.EMPTY_NODE);return null!=R&&this.rangedFilter_.matches(R)?(null!=o&&o.trackChildChange(bd(R.name,R.node)),K.updateImmediateChild(R.name,R.node)):K}}return i.isEmpty()?t:E&&c(b,p)>=0?(null!=o&&(o.trackChildChange(V_(b.name,b.node)),o.trackChildChange(bd(e,i))),d.updateImmediateChild(e,i).updateImmediateChild(b.name,Vt.EMPTY_NODE)):t}}class Bp{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=$n}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:zs}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ws}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===$n}copy(){const t=new Bp;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Vp(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function Up(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function U_(n,t){const e=n.copy();return e.index_=t,e}function Dx(n){const t={};if(n.isDefault())return t;let e;return n.index_===$n?e="$priority":n.index_===bx?e="$value":n.index_===Ma?e="$key":((0,L.hu)(n.index_ instanceof o0,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,L.Pz)(e),n.startSet_&&(t.startAt=(0,L.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,L.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,L.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,L.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function Ix(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==$n&&(t.i=n.index_.toString()),t}class j_ extends ox{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=hd("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,L.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);const c=j_.getListenId_(t,i),d={};this.listens_[c]=d;const p=Dx(t._queryParams);this.restRequest_(o+".json",p,(b,E)=>{let D=E;if(404===b&&(D=null,b=null),null===b&&this.onDataUpdate_(o,D,!1,i),(0,L.DV)(this.listens_,c)===d){let R;R=b?401===b?"permission_denied":"rest_error:"+b:"ok",r(R,null)}})}unlisten(t,e){const i=j_.getListenId_(t,e);delete this.listens_[i]}get(t){const e=Dx(t._queryParams),i=t._path.toString(),r=new L.BH;return this.restRequest_(i+".json",e,(o,c)=>{let d=c;404===o&&(d=null,o=null),null===o?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(e.auth=r.accessToken),o&&o.token&&(e.ac=o.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,L.xO)(e);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,L.cI)(d.responseText)}catch(b){Bo("Failed to parse JSON response for "+c+": "+d.responseText)}i(null,p)}else 401!==d.status&&404!==d.status&&Bo("Got unsuccessful REST response for "+c+" Status: "+d.status),i(d.status);i=null}},d.open("GET",c,!0),d.send()})}}class eA{constructor(){this.rootNode_=Vt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function yd(){return{value:null,children:new Map}}function Aa(n,t,e){if(Jt(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=Xt(t);n.children.has(i)||n.children.set(i,yd()),Aa(n.children.get(i),t=jn(t),e)}}function l0(n,t){if(Jt(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild($n,(i,r)=>{Aa(n,new Qt(i),r)}),l0(n,t)}}if(n.children.size>0){const e=Xt(t);return t=jn(t),n.children.has(e)&&l0(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function wd(n,t,e){null!==n.value?e(t,n.value):function tA(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{wd(r,new Qt(t.toString()+"/"+i),e)})}class nA{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&ir(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class Fr{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new nA(t);const i=1e4+2e4*Math.random();w_(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;ir(t,(r,o)=>{o>0&&(0,L.r3)(this.statsToReport_,r)&&(e[r]=o,i=!0)}),i&&this.server_.reportStats(e),w_(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var rr=(()=>{return(n=rr||(rr={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",rr;var n})();function Hp(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class oc{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=rr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(Jt(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Qt(t));return new oc(an(),e,this.revert)}}return(0,L.hu)(Xt(this.path)===t,"operationForChild called for unrelated child."),new oc(jn(this.path),this.affectedTree,this.revert)}}class _l{constructor(t,e){this.source=t,this.path=e,this.type=rr.LISTEN_COMPLETE}operationForChild(t){return Jt(this.path)?new _l(this.source,an()):new _l(this.source,jn(this.path))}}class Ks{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=rr.OVERWRITE}operationForChild(t){return Jt(this.path)?new Ks(this.source,an(),this.snap.getImmediateChild(t)):new Ks(this.source,jn(this.path),this.snap)}}class ka{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=rr.MERGE}operationForChild(t){if(Jt(this.path)){const e=this.children.subtree(new Qt(t));return e.isEmpty()?null:e.value?new Ks(this.source,an(),e.value):new ka(this.source,an(),e)}return(0,L.hu)(Xt(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new ka(this.source,jn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class os{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Jt(t))return this.isFullyInitialized()&&!this.filtered_;const e=Xt(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class Gh{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function vl(n,t,e,i,r,o){const c=i.filter(d=>d.type===e);c.sort((d,p)=>function Sx(n,t,e){if(null==t.childName||null==e.childName)throw(0,L.g5)("Should only compare child_ events.");const i=new tn(t.childName,t.snapshotNode),r=new tn(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,d,p)),c.forEach(d=>{const p=function zh(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,d,o);r.forEach(b=>{b.respondsTo(d.type)&&t.push(b.createEvent(p,n.query_))})})}function $p(n,t){return{eventCache:n,serverCache:t}}function Wh(n,t,e,i){return $p(new os(t,e,i),n.serverCache)}function c0(n,t,e,i){return $p(n.eventCache,new os(t,e,i))}function Gp(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function pu(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let $_;class Pn{constructor(t,e=(()=>($_||($_=new Nr(Vy)),$_))()){this.value=t,this.children=e}static fromObject(t){let e=new Pn(null);return ir(t,(i,r)=>{e=e.set(new Qt(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:an(),value:this.value};if(Jt(t))return null;{const i=Xt(t),r=this.children.get(i);if(null!==r){const o=r.findRootMostMatchingPathAndValue(jn(t),e);return null!=o?{path:Hn(new Qt(i),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Jt(t))return this;{const e=Xt(t),i=this.children.get(e);return null!==i?i.subtree(jn(t)):new Pn(null)}}set(t,e){if(Jt(t))return new Pn(e,this.children);{const i=Xt(t),o=(this.children.get(i)||new Pn(null)).set(jn(t),e),c=this.children.insert(i,o);return new Pn(this.value,c)}}remove(t){if(Jt(t))return this.children.isEmpty()?new Pn(null):new Pn(null,this.children);{const e=Xt(t),i=this.children.get(e);if(i){const r=i.remove(jn(t));let o;return o=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&o.isEmpty()?new Pn(null):new Pn(this.value,o)}return this}}get(t){if(Jt(t))return this.value;{const e=Xt(t),i=this.children.get(e);return i?i.get(jn(t)):null}}setTree(t,e){if(Jt(t))return e;{const i=Xt(t),o=(this.children.get(i)||new Pn(null)).setTree(jn(t),e);let c;return c=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new Pn(this.value,c)}}fold(t){return this.fold_(an(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(Hn(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,an(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(Jt(t))return null;{const o=Xt(t),c=this.children.get(o);return c?c.findOnPath_(jn(t),Hn(e,o),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,an(),e)}foreachOnPath_(t,e,i){if(Jt(t))return this;{this.value&&i(e,this.value);const r=Xt(t),o=this.children.get(r);return o?o.foreachOnPath_(jn(t),Hn(e,r),i):new Pn(null)}}foreach(t){this.foreach_(an(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(Hn(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class Ra{constructor(t){this.writeTree_=t}static empty(){return new Ra(new Pn(null))}}function Yh(n,t,e){if(Jt(t))return new Ra(new Pn(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let o=i.value;const c=co(r,t);return o=o.updateChild(c,e),new Ra(n.writeTree_.set(r,o))}{const r=new Pn(e),o=n.writeTree_.setTree(t,r);return new Ra(o)}}}function u0(n,t,e){let i=n;return ir(e,(r,o)=>{i=Yh(i,Hn(t,r),o)}),i}function d0(n,t){if(Jt(t))return Ra.empty();{const e=n.writeTree_.setTree(t,new Pn(null));return new Ra(e)}}function G_(n,t){return null!=Cd(n,t)}function Cd(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(co(e.path,t)):null}function Mx(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild($n,(i,r)=>{t.push(new tn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new tn(i,r.value))}),t}function sc(n,t){if(Jt(t))return n;{const e=Cd(n,t);return new Ra(null!=e?new Pn(e):n.writeTree_.subtree(t))}}function h0(n){return n.writeTree_.isEmpty()}function Ed(n,t){return Ax(an(),n.writeTree_,t)}function Ax(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,o)=>{".priority"===r?((0,L.hu)(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):e=Ax(Hn(n,r),o,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(Hn(n,".priority"),i)),e}}function q_(n,t){return Fx(t,n)}function rA(n,t){if(n.snap)return Ys(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&Ys(Hn(n.path,e),t))return!0;return!1}function IF(n){return n.visible}function oA(n,t,e){let i=Ra.empty();for(let r=0;r<n.length;++r){const o=n[r];if(t(o)){const c=o.path;let d;if(o.snap)Ys(e,c)?(d=co(e,c),i=Yh(i,d,o.snap)):Ys(c,e)&&(d=co(c,e),i=Yh(i,an(),o.snap.getChild(d)));else{if(!o.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(Ys(e,c))d=co(e,c),i=u0(i,d,o.children);else if(Ys(c,e))if(d=co(c,e),Jt(d))i=u0(i,an(),o.children);else{const p=(0,L.DV)(o.children,Xt(d));if(p){const b=p.getChild(jn(d));i=Yh(i,an(),b)}}}}}return i}function kx(n,t,e,i,r){if(i||r){const o=sc(n.visibleWrites,t);return!r&&h0(o)?e:r||null!=e||G_(o,an())?Ed(oA(n.allWrites,function(b){return(b.visible||r)&&(!i||!~i.indexOf(b.writeId))&&(Ys(b.path,t)||Ys(t,b.path))},t),e||Vt.EMPTY_NODE):null}{const o=Cd(n.visibleWrites,t);if(null!=o)return o;{const c=sc(n.visibleWrites,t);return h0(c)?e:null!=e||G_(c,an())?Ed(c,e||Vt.EMPTY_NODE):null}}}function z_(n,t,e,i){return kx(n.writeTree,n.treePath,t,e,i)}function W_(n,t){return function Rx(n,t,e){let i=Vt.EMPTY_NODE;const r=Cd(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild($n,(o,c)=>{i=i.updateImmediateChild(o,c)}),i;if(e){const o=sc(n.visibleWrites,t);return e.forEachChild($n,(c,d)=>{const p=Ed(sc(o,new Qt(c)),d);i=i.updateImmediateChild(c,p)}),Mx(o).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}return Mx(sc(n.visibleWrites,t)).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}(n.writeTree,n.treePath,t)}function qp(n,t,e,i){return function SF(n,t,e,i,r){(0,L.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=Hn(t,e);if(G_(n.visibleWrites,o))return null;{const c=sc(n.visibleWrites,o);return h0(c)?r.getChild(e):Ed(c,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function Y_(n,t){return function Zh(n,t){return Cd(n.visibleWrites,t)}(n.writeTree,Hn(n.treePath,t))}function m0(n,t,e){return function sA(n,t,e,i){const r=Hn(t,e),o=Cd(n.visibleWrites,r);return null!=o?o:i.isCompleteForChild(e)?Ed(sc(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function Nx(n,t){return Fx(Hn(n.treePath,t),n.writeTree)}function Fx(n,t){return{treePath:n,writeTree:t}}class lA{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,L.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(i,ho(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(i,V_(i,r.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(i,bd(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw(0,L.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,ho(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const g0=new class cA{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class _0{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new os(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return m0(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:pu(this.viewCache_),o=function Px(n,t,e,i,r,o){return function aA(n,t,e,i,r,o,c){let d;const p=sc(n.visibleWrites,t),b=Cd(p,an());if(null!=b)d=b;else{if(null==e)return[];d=Ed(p,e)}if(d=d.withIndex(c),d.isEmpty()||d.isLeafNode())return[];{const E=[],D=c.getCompare(),R=o?d.getReverseIteratorFrom(i,c):d.getIteratorFrom(i,c);let N=R.getNext();for(;N&&E.length<r;)0!==D(N,i)&&E.push(N),N=R.getNext();return E}}(n.writeTree,n.treePath,t,e,i,r,o)}(this.writes_,r,e,1,i,t);return 0===o.length?null:o[0]}}function Z_(n,t,e,i,r,o){const c=t.eventCache;if(null!=Y_(i,e))return t;{let d,p;if(Jt(e))if((0,L.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const b=pu(t),D=W_(i,b instanceof Vt?b:Vt.EMPTY_NODE);d=n.filter.updateFullNode(t.eventCache.getNode(),D,o)}else{const b=z_(i,pu(t));d=n.filter.updateFullNode(t.eventCache.getNode(),b,o)}else{const b=Xt(e);if(".priority"===b){(0,L.hu)(1===hu(e),"Can't have a priority with additional path components");const E=c.getNode();p=t.serverCache.getNode();const D=qp(i,e,E,p);d=null!=D?n.filter.updatePriority(E,D):c.getNode()}else{const E=jn(e);let D;if(c.isCompleteForChild(b)){p=t.serverCache.getNode();const R=qp(i,e,c.getNode(),p);D=null!=R?c.getNode().getImmediateChild(b).updateChild(E,R):c.getNode().getImmediateChild(b)}else D=m0(i,b,t.serverCache);d=null!=D?n.filter.updateChild(c.getNode(),b,D,E,r,o):c.getNode()}}return Wh(t,d,c.isFullyInitialized()||Jt(e),n.filter.filtersNodes())}}function K_(n,t,e,i,r,o,c,d){const p=t.serverCache;let b;const E=c?n.filter:n.filter.getIndexedFilter();if(Jt(e))b=E.updateFullNode(p.getNode(),i,null);else if(E.filtersNodes()&&!p.isFiltered()){const N=p.getNode().updateChild(e,i);b=E.updateFullNode(p.getNode(),N,null)}else{const N=Xt(e);if(!p.isCompleteForPath(e)&&hu(e)>1)return t;const B=jn(e),ce=p.getNode().getImmediateChild(N).updateChild(B,i);b=".priority"===N?E.updatePriority(p.getNode(),ce):E.updateChild(p.getNode(),N,ce,B,g0,null)}const D=c0(t,b,p.isFullyInitialized()||Jt(e),E.filtersNodes());return Z_(n,D,e,r,new _0(r,D,o),d)}function Vx(n,t,e,i,r,o,c){const d=t.eventCache;let p,b;const E=new _0(r,t,o);if(Jt(e))b=n.filter.updateFullNode(t.eventCache.getNode(),i,c),p=Wh(t,b,!0,n.filter.filtersNodes());else{const D=Xt(e);if(".priority"===D)b=n.filter.updatePriority(t.eventCache.getNode(),i),p=Wh(t,b,d.isFullyInitialized(),d.isFiltered());else{const R=jn(e),N=d.getNode().getImmediateChild(D);let B;if(Jt(R))B=i;else{const K=E.getCompleteChild(D);B=null!=K?".priority"===M_(R)&&K.getChild(lx(R)).isEmpty()?K:K.updateChild(R,i):Vt.EMPTY_NODE}p=N.equals(B)?t:Wh(t,n.filter.updateChild(d.getNode(),D,B,R,E,c),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function Kh(n,t){return n.eventCache.isCompleteForChild(t)}function Q_(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function zp(n,t,e,i,r,o,c,d){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let b,p=t;b=Jt(e)?i:new Pn(null).setTree(e,i);const E=t.serverCache.getNode();return b.children.inorderTraversal((D,R)=>{if(E.hasChild(D)){const B=Q_(0,t.serverCache.getNode().getImmediateChild(D),R);p=K_(n,p,new Qt(D),B,r,o,c,d)}}),b.children.inorderTraversal((D,R)=>{const N=!t.serverCache.isCompleteForChild(D)&&void 0===R.value;if(!E.hasChild(D)&&!N){const K=Q_(0,t.serverCache.getNode().getImmediateChild(D),R);p=K_(n,p,new Qt(D),K,r,o,c,d)}}),p}class b0{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new Cx(i.getIndex()),o=function QM(n){return n.loadsAllData()?new Cx(n.getIndex()):n.hasLimit()?new Ex(n):new Hh(n)}(i);this.processor_=function Lx(n){return{filter:n}}(o);const c=e.serverCache,d=e.eventCache,p=r.updateFullNode(Vt.EMPTY_NODE,c.getNode(),null),b=o.updateFullNode(Vt.EMPTY_NODE,d.getNode(),null),E=new os(p,c.isFullyInitialized(),r.filtersNodes()),D=new os(b,d.isFullyInitialized(),o.filtersNodes());this.viewCache_=$p(D,E),this.eventGenerator_=new Gh(this.query_)}get query(){return this.query_}}function y0(n,t){const e=pu(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!Jt(t)&&!e.getImmediateChild(Xt(t)).isEmpty())?e.getChild(t):null}function ev(n){return 0===n.eventRegistrations_.length}function w0(n,t,e){const i=[];if(e){(0,L.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(o=>{const c=o.createCancelEvent(e,r);c&&i.push(c)})}if(t){let r=[];for(let o=0;o<n.eventRegistrations_.length;++o){const c=n.eventRegistrations_[o];if(c.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(o+1));break}}else r.push(c)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function tv(n,t,e,i){t.type===rr.MERGE&&null!==t.source.queryId&&((0,L.hu)(pu(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(Gp(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,o=function v0(n,t,e,i,r){const o=new lA;let c,d;if(e.type===rr.OVERWRITE){const b=e;b.source.fromUser?c=Vx(n,t,b.path,b.snap,i,r,o):((0,L.hu)(b.source.fromServer,"Unknown source."),d=b.source.tagged||t.serverCache.isFiltered()&&!Jt(b.path),c=K_(n,t,b.path,b.snap,i,r,d,o))}else if(e.type===rr.MERGE){const b=e;b.source.fromUser?c=function Ux(n,t,e,i,r,o,c){let d=t;return i.foreach((p,b)=>{const E=Hn(e,p);Kh(t,Xt(E))&&(d=Vx(n,d,E,b,r,o,c))}),i.foreach((p,b)=>{const E=Hn(e,p);Kh(t,Xt(E))||(d=Vx(n,d,E,b,r,o,c))}),d}(n,t,b.path,b.children,i,r,o):((0,L.hu)(b.source.fromServer,"Unknown source."),d=b.source.tagged||t.serverCache.isFiltered(),c=zp(n,t,b.path,b.children,i,r,d,o))}else if(e.type===rr.ACK_USER_WRITE){const b=e;c=b.revert?function J_(n,t,e,i,r,o){let c;if(null!=Y_(i,e))return t;{const d=new _0(i,t,r),p=t.eventCache.getNode();let b;if(Jt(e)||".priority"===Xt(e)){let E;if(t.serverCache.isFullyInitialized())E=z_(i,pu(t));else{const D=t.serverCache.getNode();(0,L.hu)(D instanceof Vt,"serverChildren would be complete if leaf node"),E=W_(i,D)}E=E,b=n.filter.updateFullNode(p,E,o)}else{const E=Xt(e);let D=m0(i,E,t.serverCache);null==D&&t.serverCache.isCompleteForChild(E)&&(D=p.getImmediateChild(E)),b=null!=D?n.filter.updateChild(p,E,D,jn(e),d,o):t.eventCache.getNode().hasChild(E)?n.filter.updateChild(p,E,Vt.EMPTY_NODE,jn(e),d,o):p,b.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=z_(i,pu(t)),c.isLeafNode()&&(b=n.filter.updateFullNode(b,c,o)))}return c=t.serverCache.isFullyInitialized()||null!=Y_(i,an()),Wh(t,b,c,n.filter.filtersNodes())}}(n,t,b.path,i,r,o):function uA(n,t,e,i,r,o,c){if(null!=Y_(r,e))return t;const d=t.serverCache.isFiltered(),p=t.serverCache;if(null!=i.value){if(Jt(e)&&p.isFullyInitialized()||p.isCompleteForPath(e))return K_(n,t,e,p.getNode().getChild(e),r,o,d,c);if(Jt(e)){let b=new Pn(null);return p.getNode().forEachChild(Ma,(E,D)=>{b=b.set(new Qt(E),D)}),zp(n,t,e,b,r,o,d,c)}return t}{let b=new Pn(null);return i.foreach((E,D)=>{const R=Hn(e,E);p.isCompleteForPath(R)&&(b=b.set(E,p.getNode().getChild(R)))}),zp(n,t,e,b,r,o,d,c)}}(n,t,b.path,b.affectedTree,i,r,o)}else{if(e.type!==rr.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+e.type);c=function X_(n,t,e,i,r){const o=t.serverCache;return Z_(n,c0(t,o.getNode(),o.isFullyInitialized()||Jt(e),o.isFiltered()),e,i,g0,r)}(n,t,e.path,i,o)}const p=o.getChanges();return function TF(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=Gp(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&e.push(a0(Gp(t)))}}(t,c,p),{viewCache:c,changes:p}}(n.processor_,r,t,e,i);return function Bx(n,t){(0,L.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,L.hu)(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,C0(n,o.changes,o.viewCache.eventCache.getNode(),null)}function C0(n,t,e,i){return function qh(n,t,e,i){const r=[],o=[];return t.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&o.push(function CF(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(c.childName,c.snapshotNode))}),vl(n,r,"child_removed",t,i,e),vl(n,r,"child_added",t,i,e),vl(n,r,"child_moved",o,i,e),vl(n,r,"child_changed",t,i,e),vl(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let Qh,Zp;class E0{constructor(){this.views=new Map}}function Wp(n,t,e,i){const r=t.source.queryId;if(null!==r){const o=n.views.get(r);return(0,L.hu)(null!=o,"SyncTree gave us an op for an invalid query."),tv(o,t,e,i)}{let o=[];for(const c of n.views.values())o=o.concat(tv(c,t,e,i));return o}}function x0(n,t,e,i,r){const c=n.views.get(t._queryIdentifier);if(!c){let d=z_(e,r?i:null),p=!1;d?p=!0:i instanceof Vt?(d=W_(e,i),p=!1):(d=Vt.EMPTY_NODE,p=!1);const b=$p(new os(d,p,!1),new os(i,r,!1));return new b0(t,b)}return c}function D0(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function bl(n,t){let e=null;for(const i of n.views.values())e=e||y0(i,t);return e}function nv(n,t){return t._queryParams.loadsAllData()?Yp(n):n.views.get(t._queryIdentifier)}function I0(n,t){return null!=nv(n,t)}function ac(n){return null!=Yp(n)}function Yp(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Yx=1;class S0{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Pn(null),this.pendingWriteTree_=function Ox(){return{visibleWrites:Ra.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Zx(n,t,e,i,r){return function xF(n,t,e,i,r){(0,L.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=Yh(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?Oa(n,new Ks({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function mu(n,t,e=!1){const i=function f0(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function p0(n,t){const e=n.allWrites.findIndex(d=>d.writeId===t);(0,L.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,o=!1,c=n.allWrites.length-1;for(;r&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=e&&rA(d,i.path)?r=!1:Ys(i.path,d.path)&&(o=!0)),c--}return!!r&&(o?(function DF(n){n.visibleWrites=oA(n.allWrites,IF,an()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=d0(n.visibleWrites,i.path):ir(i.children,p=>{n.visibleWrites=d0(n.visibleWrites,Hn(i.path,p))}),!0))}(n.pendingWriteTree_,t)){let o=new Pn(null);return null!=i.snap?o=o.set(an(),!0):ir(i.children,c=>{o=o.set(new Qt(c),!0)}),Oa(n,new oc(i.path,o,e))}return[]}function Xh(n,t,e){return Oa(n,new Ks({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function T0(n,t,e,i){const r=t._path,o=n.syncPointTree_.get(r);let c=[];if(o&&("default"===t._queryIdentifier||I0(o,t))){const d=function qx(n,t,e,i){const r=t._queryIdentifier,o=[];let c=[];const d=ac(n);if("default"===r)for(const[p,b]of n.views.entries())c=c.concat(w0(b,e,i)),ev(b)&&(n.views.delete(p),b.query._queryParams.loadsAllData()||o.push(b.query));else{const p=n.views.get(r);p&&(c=c.concat(w0(p,e,i)),ev(p)&&(n.views.delete(r),p.query._queryParams.loadsAllData()||o.push(p.query)))}return d&&!ac(n)&&o.push(new(function $x(){return(0,L.hu)(Qh,"Reference.ts has not been loaded"),Qh}())(t._repo,t._path)),{removed:o,events:c}}(o,t,e,i);(function Gx(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(r));const p=d.removed;c=d.events;const b=-1!==p.findIndex(D=>D._queryParams.loadsAllData()),E=n.syncPointTree_.findOnPath(r,(D,R)=>ac(R));if(b&&!E){const D=n.syncPointTree_.subtree(r);if(!D.isEmpty()){const R=function yl(n){return n.fold((t,e,i)=>{if(e&&ac(e))return[Yp(e)];{let r=[];return e&&(r=D0(e)),ir(i,(o,c)=>{r=r.concat(c)}),r}})}(D);for(let N=0;N<R.length;++N){const B=R[N],K=B.query,ce=M0(n,B);n.listenProvider_.startListening(em(K),iv(n,K),ce.hashFn,ce.onComplete)}}}!E&&p.length>0&&!i&&(b?n.listenProvider_.stopListening(em(t),null):p.forEach(D=>{const R=n.queryToTagMap.get(Qp(D));n.listenProvider_.stopListening(em(D),R)})),function iD(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=Qp(i),o=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(o)}}}(n,p)}return c}function Xx(n,t,e){const i=t._path;let r=null,o=!1;n.syncPointTree_.foreachOnPath(i,(D,R)=>{const N=co(D,i);r=r||bl(R,N),o=o||ac(R)});let d,c=n.syncPointTree_.get(i);c?(o=o||ac(c),r=r||bl(c,an())):(c=new E0,n.syncPointTree_=n.syncPointTree_.set(i,c)),null!=r?d=!0:(d=!1,r=Vt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((R,N)=>{const B=bl(N,an());B&&(r=r.updateImmediateChild(R,B))}));const p=I0(c,t);if(!p&&!t._queryParams.loadsAllData()){const D=Qp(t);(0,L.hu)(!n.queryToTagMap.has(D),"View does not exist, but we have a tag");const R=function wl(){return Yx++}();n.queryToTagMap.set(D,R),n.tagToQueryMap.set(R,D)}let E=function fA(n,t,e,i,r,o){const c=x0(n,t,i,r,o);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,c),function jx(n,t){n.eventRegistrations_.push(t)}(c,e),function Hx(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild($n,(o,c)=>{i.push(bd(o,c))}),e.isFullyInitialized()&&i.push(a0(e.getNode())),C0(n,i,e.getNode(),t)}(c,e)}(c,t,e,q_(n.pendingWriteTree_,i),r,d);if(!p&&!o){const D=nv(c,t);E=E.concat(function Pa(n,t,e){const i=t._path,r=iv(n,t),o=M0(n,e),c=n.listenProvider_.startListening(em(t),r,o.hashFn,o.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,L.hu)(!ac(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((b,E,D)=>{if(!Jt(b)&&E&&ac(E))return[Yp(E).query];{let R=[];return E&&(R=R.concat(D0(E).map(N=>N.query))),ir(D,(N,B)=>{R=R.concat(B)}),R}});for(let b=0;b<p.length;++b){const E=p[b];n.listenProvider_.stopListening(em(E),iv(n,E))}}return c}(n,t,D))}return E}function Kp(n,t,e){const r=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(t,(c,d)=>{const b=bl(d,co(c,t));if(b)return b});return kx(r,t,o,e,!0)}function Oa(n,t){return eD(t,n.syncPointTree_,null,q_(n.pendingWriteTree_,an()))}function eD(n,t,e,i){if(Jt(n.path))return tD(n,t,e,i);{const r=t.get(an());null==e&&null!=r&&(e=bl(r,an()));let o=[];const c=Xt(n.path),d=n.operationForChild(c),p=t.children.get(c);if(p&&d){const b=e?e.getImmediateChild(c):null,E=Nx(i,c);o=o.concat(eD(d,p,b,E))}return r&&(o=o.concat(Wp(r,n,i,e))),o}}function tD(n,t,e,i){const r=t.get(an());null==e&&null!=r&&(e=bl(r,an()));let o=[];return t.children.inorderTraversal((c,d)=>{const p=e?e.getImmediateChild(c):null,b=Nx(i,c),E=n.operationForChild(c);E&&(o=o.concat(tD(E,d,p,b)))}),r&&(o=o.concat(Wp(r,n,i,e))),o}function M0(n,t){const e=t.query,i=iv(n,e);return{hashFn:()=>(function MF(n){return n.viewCache_.serverCache.getNode()}(t)||Vt.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function Kx(n,t,e){const i=nD(n,e);if(i){const r=Xp(i),o=r.path,c=r.queryId,d=co(o,t);return Jp(n,o,new _l(Hp(c),d))}return[]}(n,e._path,i):function Zi(n,t){return Oa(n,new _l({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const o=function xM(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return T0(n,e,null,o)}}}}function iv(n,t){const e=Qp(t);return n.queryToTagMap.get(e)}function Qp(n){return n._path.toString()+"$"+n._queryIdentifier}function nD(n,t){return n.tagToQueryMap.get(t)}function Xp(n){const t=n.indexOf("$");return(0,L.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Qt(n.substr(0,t))}}function Jp(n,t,e){const i=n.syncPointTree_.get(t);return(0,L.hu)(i,"Missing sync point for query tag that we're tracking"),Wp(i,e,q_(n.pendingWriteTree_,t),null)}function em(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Wx(){return(0,L.hu)(Zp,"Reference.ts has not been loaded"),Zp}())(n._repo,n._path):n}class ss{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new ss(e)}node(){return this.node_}}class rv{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Hn(this.path_,t);return new rv(this.syncTree_,e)}node(){return Kp(this.syncTree_,this.path_)}}const oD=function(n,t,e){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?_A(n[".sv"],t,e):"object"==typeof n[".sv"]?vA(n[".sv"],t):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},_A=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},vA=function(n,t,e){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,L.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,L.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const c=r.getValue();return"number"!=typeof c?i:c+i},sD=function(n,t,e,i){return xd(t,new rv(e,n),i)},tm=function(n,t,e){return xd(n,new ss(t),e)};function xd(n,t,e){const i=n.getPriority().val(),r=oD(i,t.getImmediateChild(".priority"),e);let o;if(n.isLeafNode()){const c=n,d=oD(c.getValue(),t,e);return d!==c.getValue()||r!==c.getPriority().val()?new gd(d,ci(r)):n}{const c=n;return o=c,r!==c.getPriority().val()&&(o=o.updatePriority(new gd(r))),c.forEachChild($n,(d,p)=>{const b=xd(p,t.getImmediateChild(d),e);b!==p&&(o=o.updateImmediateChild(d,b))}),o}}class A0{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function nm(n,t){let e=t instanceof Qt?t:new Qt(t),i=n,r=Xt(e);for(;null!==r;){const o=(0,L.DV)(i.node.children,r)||{children:{},childCount:0};i=new A0(r,i,o),e=jn(e),r=Xt(e)}return i}function Dd(n){return n.node.value}function ov(n,t){n.node.value=t,Jh(n)}function k0(n){return n.node.childCount>0}function av(n,t){ir(n.node.children,(e,i)=>{t(new A0(e,n,i))})}function R0(n,t,e,i){e&&!i&&t(n),av(n,r=>{R0(r,t,!0,i)}),e&&i&&t(n)}function Id(n){return new Qt(null===n.parent?n.name:Id(n.parent)+"/"+n.name)}function Jh(n){null!==n.parent&&function O0(n,t,e){const i=function sv(n){return void 0===Dd(n)&&!k0(n)}(e),r=(0,L.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,Jh(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,Jh(n))}(n.parent,n.name,n)}const P0=/[\[\].#$\/\u0000-\u001F\u007F]/,lD=/[\[\].#$\u0000-\u001F\u007F]/,lv=10485760,im=function(n){return"string"==typeof n&&0!==n.length&&!P0.test(n)},N0=function(n){return"string"==typeof n&&0!==n.length&&!lD.test(n)},ef=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!By(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},Cl=function(n,t,e,i){i&&void 0===t||rm((0,L.gK)(n,"value"),t,e)},rm=function(n,t,e){const i=e instanceof Qt?new Jy(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+Bh(i));if("function"==typeof t)throw new Error(n+"contains a function "+Bh(i)+" with contents = "+t.toString());if(By(t))throw new Error(n+"contains "+t.toString()+" "+Bh(i));if("string"==typeof t&&t.length>lv/3&&(0,L.ug)(t)>lv)throw new Error(n+"contains a string greater than "+lv+" utf8 bytes "+Bh(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,o=!1;if(ir(t,(c,d)=>{if(".value"===c)r=!0;else if(".priority"!==c&&".sv"!==c&&(o=!0,!im(c)))throw new Error(n+" contains an invalid key ("+c+") "+Bh(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function e0(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,L.ug)(t),jM(n)})(i,c),rm(n,d,i),function cx(n){const t=n.parts_.pop();n.byteLength_-=(0,L.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&o)throw new Error(n+' contains ".value" child '+Bh(i)+" in addition to actual children.")}},uD=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,L.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const o=[];ir(t,(c,d)=>{const p=new Qt(c);if(rm(r,d,Hn(e,p)),".priority"===M_(p)&&!ef(d))throw new Error(r+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(p)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const o=Pp(i);for(let c=0;c<o.length;c++)if((".priority"!==o[c]||c!==o.length-1)&&!im(o[c]))throw new Error(n+"contains an invalid key ("+o[c]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(A_);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&Ys(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,o)},F0=function(n,t,e){if(!e||void 0!==t){if(By(t))throw new Error((0,L.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ef(t))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},om=function(n,t,e,i){if(!(i&&void 0===e||im(e)))throw new Error((0,L.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},sm=function(n,t,e,i){if(!(i&&void 0===e||N0(e)))throw new Error((0,L.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Qs=function(n,t){if(".info"===Xt(t))throw new Error(n+" failed = Can't modify data under /.info/")},dD=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!im(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),N0(n)}(e))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class wA{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function cv(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],o=r.getPath();null!==e&&!Np(o,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:o}),e.events.push(r)}e&&n.eventLists_.push(e)}function L0(n,t,e){cv(n,e),hD(n,i=>Np(i,t))}function Xs(n,t,e){cv(n,e),hD(n,i=>Ys(i,t)||Ys(t,i))}function hD(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(CA(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function CA(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();uu&&Un("event: "+e.toString()),du(i)}}}const fD="repo_interrupt";class pD{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=yd(),this.transactionQueueTree_=new A0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function B0(n){const e=n.infoData_.getNode(new Qt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function tf(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:B0(n)})}function V0(n,t,e,i,r){n.dataUpdateCount++;const o=new Qt(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let c=[];if(r)if(i){const p=(0,L.UI)(e,b=>ci(b));c=function Qx(n,t,e,i){const r=nD(n,i);if(r){const o=Xp(r),c=o.path,d=o.queryId,p=co(c,t),b=Pn.fromObject(e);return Jp(n,c,new ka(Hp(d),p,b))}return[]}(n.serverSyncTree_,o,p,r)}else{const p=ci(e);c=function gA(n,t,e,i){const r=nD(n,i);if(null!=r){const o=Xp(r),c=o.path,d=o.queryId,p=co(c,t);return Jp(n,c,new Ks(Hp(d),p,e))}return[]}(n.serverSyncTree_,o,p,r)}else if(i){const p=(0,L.UI)(e,b=>ci(b));c=function mA(n,t,e){const i=Pn.fromObject(e);return Oa(n,new ka({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,o,p)}else{const p=ci(e);c=Xh(n.serverSyncTree_,o,p)}let d=o;c.length>0&&(d=lc(n,o)),Xs(n.eventQueue_,d,c)}function U0(n,t){uv(n,"connected",t),!1===t&&function xA(n){_t(n,"onDisconnectEvents");const t=tf(n),e=yd();wd(n.onDisconnect_,an(),(r,o)=>{const c=sD(r,o,n.serverSyncTree_,t);Aa(e,r,c)});let i=[];wd(e,an(),(r,o)=>{i=i.concat(Xh(n.serverSyncTree_,r,o));const c=z0(n,r);lc(n,c)}),n.onDisconnect_=yd(),Xs(n.eventQueue_,an(),i)}(n)}function uv(n,t,e){const i=new Qt("/.info/"+t),r=ci(e);n.infoData_.updateSnapshot(i,r);const o=Xh(n.infoSyncTree_,i,r);Xs(n.eventQueue_,i,o)}function am(n){return n.nextWriteId_++}function dv(n,t,e,i,r){_t(n,"set",{path:t.toString(),value:e,priority:i});const o=tf(n),c=ci(e,i),d=Kp(n.serverSyncTree_,t),p=tm(c,d,o),b=am(n),E=Zx(n.serverSyncTree_,t,p,b,!0);cv(n.eventQueue_,E),n.server_.put(t.toString(),c.val(!0),(R,N)=>{const B="ok"===R;B||Bo("set at "+t+" failed: "+R);const K=mu(n.serverSyncTree_,b,!B);Xs(n.eventQueue_,t,K),gu(0,r,R,N)});const D=z0(n,t);lc(n,D),Xs(n.eventQueue_,D,[])}function DA(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&l0(n.onDisconnect_,t),gu(0,e,i,r)})}function Td(n,t,e,i){const r=ci(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(o,c)=>{"ok"===o&&Aa(n.onDisconnect_,t,r),gu(0,i,o,c)})}function hv(n,t,e){let i;i=".info"===Xt(t._path)?T0(n.infoSyncTree_,t,e):T0(n.serverSyncTree_,t,e),L0(n.eventQueue_,t._path,i)}function $0(n){n.persistentConnection_&&n.persistentConnection_.interrupt(fD)}function _t(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Un(e,...t)}function gu(n,t,e,i){t&&du(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let o=r;i&&(o+=": "+i);const c=new Error(o);c.code=r,t(c)}})}function G0(n,t,e){return Kp(n.serverSyncTree_,t,e)||Vt.EMPTY_NODE}function Md(n,t=n.transactionQueueTree_){if(t||pv(n,t),Dd(t)){const e=MA(n,t);(0,L.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function TA(n,t,e){const i=e.map(b=>b.currentWriteId),r=G0(n,t,i);let o=r;const c=r.hash();for(let b=0;b<e.length;b++){const E=e[b];(0,L.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const D=co(t,E.path);o=o.updateChild(D,E.currentOutputSnapshotRaw)}const d=o.val(!0),p=t;n.server_.put(p.toString(),d,b=>{_t(n,"transaction put response",{path:p.toString(),status:b});let E=[];if("ok"===b){const D=[];for(let R=0;R<e.length;R++)e[R].status=2,E=E.concat(mu(n.serverSyncTree_,e[R].currentWriteId)),e[R].onComplete&&D.push(()=>e[R].onComplete(null,!0,e[R].currentOutputSnapshotResolved)),e[R].unwatcher();pv(n,nm(n.transactionQueueTree_,t)),Md(n,n.transactionQueueTree_),Xs(n.eventQueue_,t,E);for(let R=0;R<D.length;R++)du(D[R])}else{if("datastale"===b)for(let D=0;D<e.length;D++)e[D].status=3===e[D].status?4:0;else{Bo("transaction at "+p.toString()+" failed: "+b);for(let D=0;D<e.length;D++)e[D].status=4,e[D].abortReason=b}lc(n,t)}},c)}(n,Id(t),e)}else k0(t)&&av(t,e=>{Md(n,e)})}function lc(n,t){const e=ui(n,t),i=Id(e);return function fv(n,t,e){if(0===t.length)return;const i=[];let r=[];const c=t.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<t.length;d++){const p=t[d],b=co(e,p.path);let D,E=!1;if((0,L.hu)(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)E=!0,D=p.abortReason,r=r.concat(mu(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)E=!0,D="maxretry",r=r.concat(mu(n.serverSyncTree_,p.currentWriteId,!0));else{const R=G0(n,p.path,c);p.currentInputSnapshot=R;const N=t[d].update(R.val());if(void 0!==N){rm("transaction failed: Data returned ",N,p.path);let B=ci(N);"object"==typeof N&&null!=N&&(0,L.r3)(N,".priority")||(B=B.updatePriority(R.getPriority()));const ce=p.currentWriteId,He=tf(n),We=tm(B,R,He);p.currentOutputSnapshotRaw=B,p.currentOutputSnapshotResolved=We,p.currentWriteId=am(n),c.splice(c.indexOf(ce),1),r=r.concat(Zx(n.serverSyncTree_,p.path,We,p.currentWriteId,p.applyLocally)),r=r.concat(mu(n.serverSyncTree_,ce,!0))}else E=!0,D="nodata",r=r.concat(mu(n.serverSyncTree_,p.currentWriteId,!0))}Xs(n.eventQueue_,e,r),r=[],E&&(t[d].status=2,setTimeout(t[d].unwatcher,Math.floor(0)),t[d].onComplete&&i.push("nodata"===D?()=>t[d].onComplete(null,!1,t[d].currentInputSnapshot):()=>t[d].onComplete(new Error(D),!1,null)))}pv(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)du(i[d]);Md(n,n.transactionQueueTree_)}(n,MA(n,e),i),i}function ui(n,t){let e,i=n.transactionQueueTree_;for(e=Xt(t);null!==e&&void 0===Dd(i);)i=nm(i,e),e=Xt(t=jn(t));return i}function MA(n,t){const e=[];return q0(n,t,e),e.sort((i,r)=>i.order-r.order),e}function q0(n,t,e){const i=Dd(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);av(t,r=>{q0(n,r,e)})}function pv(n,t){const e=Dd(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,ov(t,e.length>0?e:void 0)}av(t,i=>{pv(n,i)})}function z0(n,t){const e=Id(ui(n,t)),i=nm(n.transactionQueueTree_,t);return function aD(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{mv(n,r)}),mv(n,i),R0(i,r=>{mv(n,r)}),e}function mv(n,t){const e=Dd(t);if(e){const i=[];let r=[],o=-1;for(let c=0;c<e.length;c++)3===e[c].status||(1===e[c].status?((0,L.hu)(o===c-1,"All SENT items should be at beginning of queue."),o=c,e[c].status=3,e[c].abortReason="set"):((0,L.hu)(0===e[c].status,"Unexpected transaction status in abort"),e[c].unwatcher(),r=r.concat(mu(n.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&i.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));-1===o?ov(t,void 0):e.length=o+1,Xs(n.eventQueue_,Id(t),r);for(let c=0;c<i.length;c++)du(i[c])}}const gv=function(n,t){const e=AA(n),i=e.namespace;return"firebase.com"===e.domain&&qs(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&qs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Bo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Sp(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new Qt(e.pathString)}},AA=function(n){let t="",e="",i="",r="",o="",c=!0,d="https",p=443;if("string"==typeof n){let b=n.indexOf("//");b>=0&&(d=n.substring(0,b-1),n=n.substring(b+2));let E=n.indexOf("/");-1===E&&(E=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),t=n.substring(0,Math.min(E,D)),E<D&&(r=function _D(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(o){}t+="/"+r}return t}(n.substring(E,D)));const R=function vD(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Bo(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,D)));b=t.indexOf(":"),b>=0?(c="https"===d||"wss"===d,p=parseInt(t.substring(b+1),10)):b=t.length;const N=t.slice(0,b);if("localhost"===N.toLowerCase())e="localhost";else if(N.split(".").length<=2)e=N;else{const B=t.indexOf(".");i=t.substring(0,B).toLowerCase(),e=t.substring(B+1),o=i}"ns"in R&&(o=R.ns)}return{host:t,port:p,domain:e,subdomain:i,secure:c,scheme:d,pathString:r,namespace:o}};class bD{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Pz)(this.snapshot.exportVal())}}class yD{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class nf{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class wD{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new L.BH;return DA(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Qs("OnDisconnect.remove",this._path);const t=new L.BH;return Td(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Qs("OnDisconnect.set",this._path),Cl("OnDisconnect.set",t,this._path,!1);const e=new L.BH;return Td(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Qs("OnDisconnect.setWithPriority",this._path),Cl("OnDisconnect.setWithPriority",t,this._path,!1),F0("OnDisconnect.setWithPriority",e,!1);const i=new L.BH;return function IA(n,t,e,i,r){const o=ci(e,i);n.server_.onDisconnectPut(t.toString(),o.val(!0),(c,d)=>{"ok"===c&&Aa(n.onDisconnect_,t,o),gu(0,r,c,d)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){Qs("OnDisconnect.update",this._path),uD("OnDisconnect.update",t,this._path,!1);const e=new L.BH;return function H0(n,t,e,i){if((0,L.xb)(e))return Un("onDisconnect().update() called with empty data.  Don't do anything."),void gu(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,o)=>{"ok"===r&&ir(e,(c,d)=>{const p=ci(d);Aa(n.onDisconnect_,Hn(t,c),p)}),gu(0,i,r,o)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class Uo{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return Jt(this._path)?null:M_(this._path)}get ref(){return new as(this._repo,this._path)}get _queryIdentifier(){const t=Ix(this._queryParams),e=Uy(t);return"{}"===e?"default":e}get _queryObject(){return Ix(this._queryParams)}isEqual(t){if(!((t=(0,L.m9)(t))instanceof Uo))return!1;const e=this._repo===t._repo,i=Np(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function UM(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function _v(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Na(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===Ma){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==zs)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Ws)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===$n){if(null!=t&&!ef(t)||null!=e&&!ef(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof o0||n.getIndex()===bx,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function lm(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class as extends Uo{constructor(t,e){super(t,e,new Bp,!1)}get parent(){const t=lx(this._path);return null===t?null:new as(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class _u{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Qt(t),i=Fa(this.ref,t);return new _u(this._node.getChild(e),i,$n)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new _u(r,Fa(this.ref,i),$n)))}hasChild(t){const e=new Qt(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function CD(n,t){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==t?Fa(n._root,t):n._root}function rf(n,t){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const e=gv(t,n._repo.repoInfo_.nodeAdmin);dD("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&qs("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),CD(n,e.path.toString())}function Fa(n,t){return null===Xt((n=(0,L.m9)(n))._path)?(e=t,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),sm("child","path",e,!1)):sm("child","path",t,!1),new as(n._repo,Hn(n._path,t));var e}function vv(n,t){n=(0,L.m9)(n),Qs("set",n._path),Cl("set",t,n._path,!1);const e=new L.BH;return dv(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function OA(n,t){uD("update",t,n._path,!1);const e=new L.BH;return function Sd(n,t,e,i){_t(n,"update",{path:t.toString(),value:e});let r=!0;const o=tf(n),c={};if(ir(e,(d,p)=>{r=!1,c[d]=sD(Hn(t,d),ci(p),n.serverSyncTree_,o)}),r)Un("update() called with empty data.  Don't do anything."),gu(0,i,"ok",void 0);else{const d=am(n),p=function pA(n,t,e,i){!function iA(n,t,e,i){(0,L.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=u0(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=Pn.fromObject(e);return Oa(n,new ka({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,c,d);cv(n.eventQueue_,p),n.server_.merge(t.toString(),e,(b,E)=>{const D="ok"===b;D||Bo("update at "+t+" failed: "+b);const R=mu(n.serverSyncTree_,d,!D),N=R.length>0?lc(n,t):t;Xs(n.eventQueue_,N,R),gu(0,i,b,E)}),ir(e,b=>{const E=z0(n,Hn(t,b));lc(n,E)}),Xs(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function DD(n){return function j0(n,t){const e=function Jx(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(b,E)=>{const D=co(b,e);i=i||bl(E,D)});let r=n.syncPointTree_.get(e);r?i=i||bl(r,an()):(r=new E0,n.syncPointTree_=n.syncPointTree_.set(e,r));const o=null!=i,c=o?new os(i,!0,!1):null;return function dA(n){return Gp(n.viewCache_)}(x0(r,t,q_(n.pendingWriteTree_,t._path),o?c.getNode():Vt.EMPTY_NODE,o))}(n.serverSyncTree_,t);return null!=e?Promise.resolve(e):n.server_.get(t).then(i=>{const r=ci(i).withIndex(t._queryParams.getIndex()),o=Xh(n.serverSyncTree_,t._path,r);return L0(n.eventQueue_,t._path,o),Promise.resolve(r)},i=>(_t(n,"get for query "+(0,L.Pz)(t)+" failed: "+i),Promise.reject(new Error(i))))}((n=(0,L.m9)(n))._repo,n).then(t=>new _u(t,new as(n._repo,n._path),n._queryParams.getIndex()))}class bv{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new bD("value",this,new _u(t.snapshotNode,new as(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new yD(this,t,e):null}matches(t){return t instanceof bv&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class yv{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new yD(this,t,e):null}createEvent(t,e){(0,L.hu)(null!=t.childName,"Child events should have a childName.");const i=Fa(new as(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new bD(t.type,this,new _u(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof yv&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function wv(n,t,e,i,r){let o;if("object"==typeof i&&(o=void 0,r=i),"function"==typeof i&&(o=i),r&&r.onlyOnce){const p=e,b=(E,D)=>{hv(n._repo,n,d),p(E,D)};b.userCallback=e.userCallback,b.context=e.context,e=b}const c=new nf(e,o||void 0),d="value"===t?new bv(c):new yv(t,c);return function AF(n,t,e){let i;i=".info"===Xt(t._path)?Xx(n.infoSyncTree_,t,e):Xx(n.serverSyncTree_,t,e),L0(n.eventQueue_,t._path,i)}(n._repo,n,d),()=>hv(n._repo,n,d)}function ID(n,t,e,i){return wv(n,"value",t,e,i)}function PA(n,t,e,i){return wv(n,"child_added",t,e,i)}function NA(n,t,e,i){return wv(n,"child_changed",t,e,i)}function W0(n,t,e,i){return wv(n,"child_moved",t,e,i)}function cm(n,t,e,i){return wv(n,"child_removed",t,e,i)}function SD(n,t,e){let i=null;const r=e?new nf(e):null;"value"===t?i=new bv(r):t&&(i=new yv(t,r)),hv(n._repo,n,i)}class La{}class Y0 extends La{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Cl("endAt",this._value,t._path,!0);const e=Up(t._queryParams,this._value,this._key);if(lm(e),Na(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Uo(t._repo,t._path,e,t._orderByCalled)}}class FA extends La{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Cl("endBefore",this._value,t._path,!1);const e=function JM(n,t,e){let i,r;return n.index_===Ma?("string"==typeof t&&(t=wx(t)),r=Up(n,t,e)):(i=null==e?zs:wx(e),r=Up(n,t,i)),r.endBeforeSet_=!0,r}(t._queryParams,this._value,this._key);if(lm(e),Na(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Uo(t._repo,t._path,e,t._orderByCalled)}}class TD extends La{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Cl("startAt",this._value,t._path,!0);const e=Vp(t._queryParams,this._value,this._key);if(lm(e),Na(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Uo(t._repo,t._path,e,t._orderByCalled)}}class VA extends La{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Cl("startAfter",this._value,t._path,!1);const e=function XM(n,t,e){let i;if(n.index_===Ma)"string"==typeof t&&(t=B_(t)),i=Vp(n,t,e);else{let r;r=null==e?Ws:B_(e),i=Vp(n,t,r)}return i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(lm(e),Na(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Uo(t._repo,t._path,e,t._orderByCalled)}}class UA extends La{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Uo(t._repo,t._path,function EF(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class sf extends La{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Uo(t._repo,t._path,function xx(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class AD extends La{constructor(t){super(),this._path=t}_apply(t){_v(t,"orderByChild");const e=new Qt(this._path);if(Jt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new o0(e),r=U_(t._queryParams,i);return Na(r),new Uo(t._repo,t._path,r,!0)}}class kD extends La{_apply(t){_v(t,"orderByKey");const e=U_(t._queryParams,Ma);return Na(e),new Uo(t._repo,t._path,e,!0)}}class RD extends La{_apply(t){_v(t,"orderByPriority");const e=U_(t._queryParams,$n);return Na(e),new Uo(t._repo,t._path,e,!0)}}class Z0 extends La{_apply(t){_v(t,"orderByValue");const e=U_(t._queryParams,bx);return Na(e),new Uo(t._repo,t._path,e,!0)}}class OD extends La{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Cl("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Y0(this._value,this._key)._apply(new TD(this._value,this._key)._apply(t))}}function Ba(n,...t){let e=(0,L.m9)(n);for(const i of t)e=i._apply(e);return e}(function hA(n){(0,L.hu)(!Qh,"__referenceConstructor has already been defined"),Qh=n})(as),function zx(n){(0,L.hu)(!Zp,"__referenceConstructor has already been defined"),Zp=n}(as);const K0={};function Q0(n,t,e,i,r){let o=i||n.options.databaseURL;void 0===o&&(n.options.projectId||qs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Un("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,b,c=gv(o,r),d=c.repoInfo;"undefined"!=typeof process&&process.env&&(b=process.env.FIREBASE_DATABASE_EMULATOR_HOST),b?(p=!0,o=`http://${b}?ns=${d.namespace}`,c=gv(o,r),d=c.repoInfo):p=!c.repoInfo.secure;const E=r&&p?new C_(C_.OWNER):new _F(n.name,n.options,t);dD("Invalid Firebase Database URL",c),Jt(c.path)||qs("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function KA(n,t,e,i){let r=K0[t.name];r||(r={},K0[t.name]=r);let o=r[n.toURLString()];return o&&qs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new pD(n,false,e,i),r[n.toURLString()]=o,o}(d,n,E,new gF(n.name,e));return new XA(D,n)}class XA{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function mD(n,t,e){if(n.stats_=qy(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new j_(n.repoInfo_,(i,r,o,c)=>{V0(n,i,r,o,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>U0(n,!0),0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Pz)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new pl(n.repoInfo_,t,(i,r,o,c)=>{V0(n,i,r,o,c)},i=>{U0(n,i)},i=>{!function gD(n,t){ir(t,(e,i)=>{uv(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function ZE(n,t){const e=n.toString();return Tp[e]||(Tp[e]=t()),Tp[e]}(n.repoInfo_,()=>new Fr(n.stats_,n.server_)),n.infoData_=new eA,n.infoSyncTree_=new S0({startListening:(i,r,o,c)=>{let d=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(d=Xh(n.infoSyncTree_,i._path,p),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),uv(n,"connected",!1),n.serverSyncTree_=new S0({startListening:(i,r,o,c)=>(n.server_.listen(i,o,r,(d,p)=>{const b=c(d,p);Xs(n.eventQueue_,i._path,b)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new as(this._repo,an())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function ZA(n,t){const e=K0[t];(!e||e[n.key]!==n)&&qs(`Database ${t}(${n.repoInfo_}) has already been deleted.`),$0(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&qs("Cannot call "+t+" on a deleted database.")}}function ND(n,t){m_(n,t)}const nk={".sv":"timestamp"};class rk{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}pl.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},pl.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function FD(n){Fy(so.SDK_VERSION),(0,so._registerComponent)(new Sa.wA("database",(t,{instanceIdentifier:e})=>Q0(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,so.registerVersion)(UE,"0.12.8",n),(0,so.registerVersion)(UE,"0.12.8","esm2017")}();const J0=new Ta.Yd("@firebase/database-compat"),UD=function(n){J0.warn("FIREBASE WARNING: "+n)};class ak{constructor(t){this._delegate=t}cancel(t){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),o=>i(o)),r}update(t,e){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let o=0;o<t.length;++o)r[""+o]=t[o];t=r,UD("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class jD{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class vu{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),sm("DataSnapshot.child","path",t,!1),new vu(this._database,this._delegate.child(t))}hasChild(t){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),sm("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new vu(this._database,e)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new ls(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class or{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var o;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",e,!1);const c=or.getCancelAndContextArgs_("Query.on",i,r),d=(b,E)=>{e.call(c.context,new vu(this.database,b),E)};d.userCallback=e,d.context=c.context;const p=null===(o=c.cancel)||void 0===o?void 0:o.bind(c.context);switch(t){case"value":return ID(this._delegate,d,p),e;case"child_added":return PA(this._delegate,d,p),e;case"child_removed":return cm(this._delegate,d,p),e;case"child_changed":return NA(this._delegate,d,p),e;case"child_moved":return W0(this._delegate,d,p),e;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,L.Wj)("Query.off","callback",e,!0),(0,L.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,SD(this._delegate,t,r)}else SD(this._delegate,t)}get(){return DD(this._delegate).then(t=>new vu(this.database,t))}once(t,e,i,r){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",e,!0);const o=or.getCancelAndContextArgs_("Query.once",i,r),c=new L.BH,d=(b,E)=>{const D=new vu(this.database,b);e&&e.call(o.context,D,E),c.resolve(D)};d.userCallback=e,d.context=o.context;const p=b=>{o.cancel&&o.cancel.call(o.context,b),c.reject(b)};switch(t){case"value":ID(this._delegate,d,p,{onlyOnce:!0});break;case"child_added":PA(this._delegate,d,p,{onlyOnce:!0});break;case"child_removed":cm(this._delegate,d,p,{onlyOnce:!0});break;case"child_changed":NA(this._delegate,d,p,{onlyOnce:!0});break;case"child_moved":W0(this._delegate,d,p,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(t){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new or(this.database,Ba(this._delegate,function jA(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new UA(n)}(t)))}limitToLast(t){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new or(this.database,Ba(this._delegate,function HA(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new sf(n)}(t)))}orderByChild(t){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new or(this.database,Ba(this._delegate,function $A(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return sm("orderByChild","path",n,!1),new AD(n)}(t)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new or(this.database,Ba(this._delegate,function GA(){return new kD}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new or(this.database,Ba(this._delegate,function qA(){return new RD}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new or(this.database,Ba(this._delegate,function zA(){return new Z0}()))}startAt(t=null,e){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new or(this.database,Ba(this._delegate,function BA(n=null,t){return om("startAt","key",t,!0),new TD(n,t)}(t,e)))}startAfter(t=null,e){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new or(this.database,Ba(this._delegate,function MD(n,t){return om("startAfter","key",t,!0),new VA(n,t)}(t,e)))}endAt(t=null,e){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new or(this.database,Ba(this._delegate,function um(n,t){return om("endAt","key",t,!0),new Y0(n,t)}(t,e)))}endBefore(t=null,e){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new or(this.database,Ba(this._delegate,function LA(n,t){return om("endBefore","key",t,!0),new FA(n,t)}(t,e)))}equalTo(t,e){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new or(this.database,Ba(this._delegate,function PD(n,t){return om("equalTo","key",t,!0),new OD(n,t)}(t,e)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof or))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,L.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,L.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,L.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new ls(this.database,new as(this._delegate._repo,this._delegate._path))}}class ls extends or{constructor(t,e){super(t,new Uo(e._repo,e._path,new Bp,!1)),this.database=t,this._delegate=e}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new ls(this.database,Fa(this._delegate,t))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new ls(this.database,t):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new ls(this.database,this._delegate.root)}set(t,e){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",e,!0);const i=vv(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let o=0;o<t.length;++o)r[""+o]=t[o];t=r,UD("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Qs("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",e,!0);const i=OA(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function xD(n,t,e){if(Qs("setWithPriority",n._path),Cl("setWithPriority",t,n._path,!1),F0("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new L.BH;return dv(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),o=>i(o)),r}remove(t){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",t,!0);const e=function RA(n){return Qs("remove",n._path),vv(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,L.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function ok(n,t,e){var i;if(n=(0,L.m9)(n),Qs("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=null==e?void 0:e.applyLocally)||void 0===i||i,o=new L.BH,d=ID(n,()=>{});return function SA(n,t,e,i,r,o){_t(n,"transaction on "+t);const c={path:t,update:e,onComplete:i,status:null,order:Ly(),applyLocally:o,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=G0(n,t,void 0);c.currentInputSnapshot=d;const p=c.update(d.val());if(void 0===p)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{rm("transaction failed: Data returned ",p,c.path),c.status=0;const b=nm(n.transactionQueueTree_,t),E=Dd(b)||[];let D;E.push(c),ov(b,E),"object"==typeof p&&null!==p&&(0,L.r3)(p,".priority")?(D=(0,L.DV)(p,".priority"),(0,L.hu)(ef(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(Kp(n.serverSyncTree_,t)||Vt.EMPTY_NODE).getPriority().val();const R=tf(n),N=ci(p,D),B=tm(N,d,R);c.currentOutputSnapshotRaw=N,c.currentOutputSnapshotResolved=B,c.currentWriteId=am(n);const K=Zx(n.serverSyncTree_,t,B,c.currentWriteId,c.applyLocally);Xs(n.eventQueue_,t,K),Md(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(p,b,E)=>{let D=null;p?o.reject(p):(D=new _u(E,new as(n._repo,n._path),$n),o.resolve(new rk(b,D)))},d,r),o.promise}(this._delegate,t,{applyLocally:i}).then(o=>new jD(o.committed,new vu(this.database,o.snapshot)));return e&&r.then(o=>e(null,o.committed,o.snapshot),o=>e(o,!1,null)),r}setPriority(t,e){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",e,!0);const i=function ED(n,t){n=(0,L.m9)(n),Qs("setPriority",n._path),F0("setPriority",t,!1);const e=new L.BH;return dv(n._repo,Hn(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",e,!0);const i=function kA(n,t){n=(0,L.m9)(n),Qs("push",n._path),Cl("push",t,n._path,!0);const e=B0(n._repo),i=wF(e),r=Fa(n,i),o=Fa(n,i);let c;return c=null!=t?vv(o,t).then(()=>o):Promise.resolve(o),r.then=c.then.bind(c),r.catch=c.then.bind(c,void 0),r}(this._delegate,t),r=i.then(c=>new ls(this.database,c));e&&r.then(()=>e(null),c=>e(c));const o=new ls(this.database,i);return o.then=r.then.bind(r),o.catch=r.catch.bind(r,void 0),o}onDisconnect(){return Qs("Reference.onDisconnect",this._delegate._path),new ak(new wD(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class af{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(t,e,i={}){!function JA(n,t,e,i={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&qs("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&qs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new C_(C_.OWNER);else if(i.mockUserToken){const c="string"==typeof i.mockUserToken?i.mockUserToken:(0,L.Sg)(i.mockUserToken,n.app.options.projectId);o=new C_(c)}!function YA(n,t,e,i){n.repoInfo_=new Sp(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,t,e,o)}(this._delegate,t,e,i)}ref(t){if((0,L.Dv)("database.ref",0,1,arguments.length),t instanceof ls){const e=rf(this._delegate,t.toString());return new ls(this,e)}{const e=CD(this._delegate,t);return new ls(this,e)}}refFromURL(t){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const i=rf(this._delegate,t);return new ls(this,i)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function ek(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),$0(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function tk(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function kF(n){n.persistentConnection_&&n.persistentConnection_.resume(fD)}(n._repo)}(this._delegate)}}af.ServerValue={TIMESTAMP:function ik(){return nk}(),increment:n=>function LD(n){return{".sv":{increment:n}}}(n)};var lk=Object.freeze({__proto__:null,initStandalone:function NF({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:o=!1}){Fy(e);const c=new Sa.zt("auth-internal",new Sa.H0("database-standalone"));return c.setComponent(new Sa.wA("auth-internal",()=>i,"PRIVATE")),{instance:new af(Q0(n,c,void 0,t,o),n),namespace:r}}});const Ev=af.ServerValue;!function ck(n){n.INTERNAL.registerComponent(new Sa.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new af(r,i)},"PUBLIC").setServiceProps({Reference:ls,Query:or,Database:af,DataSnapshot:vu,enableLogging:ND,INTERNAL:lk,ServerValue:Ev}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.8")}(Py.Z);var cc=V(5363),dm=V(6063);class uk extends pt.x{constructor(t=1/0,e=1/0,i=dm.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:c}=this;e||(i.push(t),!r&&i.push(o.now()+c)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let c=0;c<o.length&&!t.closed;c+=i?1:2)t.next(o[c]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*t;if(t<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const c=e.now();let d=0;for(let p=1;p<i.length&&i[p]<=c;p+=2)d=p;d&&i.splice(0,d+1)}}}function dk(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=null!=n?n:1/0,(0,Ry.B)({connector:()=>new uk(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function tw(n,t){return(0,Si.m)(t)?mn(()=>n,t):mn(()=>n)}var nw=V(9468);V(5867);const Ad=new Map,zD={activated:!1,tokenObservers:[]},lf={initialized:!1,enabled:!1};function xr(n){return Ad.get(n)||zD}function Js(n,t){Ad.set(n,t)}function Iv(){return lf}class KD{constructor(t,e,i,r,o){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,fe.Z)(function*(){e.stop();try{e.pending=new L.BH,yield function _k(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new L.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const Lr=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function XD(n){if(!xr(n).activated)throw Lr.create("use-before-activation",{appName:n.name})}function kd(n,t){return Mv.apply(this,arguments)}function Mv(){return(Mv=(0,fe.Z)(function*({url:n,body:t},e){const i={"Content-Type":"application/json"},r=e.getImmediate({optional:!0});if(r){const D=yield r.getHeartbeatsHeader();D&&(i["X-Firebase-Client"]=D)}const o={method:"POST",body:JSON.stringify(t),headers:i};let c,d;try{c=yield fetch(n,o)}catch(D){throw Lr.create("fetch-network-error",{originalErrorMessage:D.message})}if(200!==c.status)throw Lr.create("fetch-status-error",{httpStatus:c.status});try{d=yield c.json()}catch(D){throw Lr.create("fetch-parse-error",{originalErrorMessage:D.message})}const p=d.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw Lr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const b=1e3*Number(p[1]),E=Date.now();return{token:d.attestationToken,expireTimeMillis:E+b,issuedAtTimeMillis:E}})).apply(this,arguments)}function tI(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${e}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const pm="firebase-app-check-store";let mm=null;function oI(){return mm||(mm=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(Lr.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},e.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(pm,{keyPath:"compositeKey"})}}catch(e){t(Lr.create("storage-open",{originalErrorMessage:e.message}))}}),mm)}function ea(){return(ea=(0,fe.Z)(function*(n,t){const i=(yield oI()).transaction(pm,"readwrite"),o=i.objectStore(pm).put({compositeKey:n,value:t});return new Promise((c,d)=>{o.onsuccess=p=>{c()},i.onerror=p=>{var b;d(Lr.create("storage-set",{originalErrorMessage:null===(b=p.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const _m=new Ta.Yd("@firebase/app-check");function vm(n,t){return(0,L.hl)()?function yk(n,t){return function Av(n,t){return ea.apply(this,arguments)}(function uf(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{_m.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function aI(){return Iv().enabled}function aw(){return Rv.apply(this,arguments)}function Rv(){return(Rv=(0,fe.Z)(function*(){const n=Iv();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const lI={error:"UNKNOWN_ERROR"};function Ek(n){return L.US.encodeString(JSON.stringify(n),!1)}function Ov(n){return cI.apply(this,arguments)}function cI(){return(cI=(0,fe.Z)(function*(n,t=!1){const e=n.app;XD(e);const i=xr(e);let o,r=i.token;if(!r){const p=yield i.cachedTokenPromise;p&&Nv(p)&&(r=p)}if(!t&&r&&Nv(r))return{token:r.token};let d,c=!1;if(aI()){i.exchangeTokenPromise||(i.exchangeTokenPromise=kd(tI(e,yield aw()),n.heartbeatServiceProvider).then(b=>(i.exchangeTokenPromise=void 0,b)),c=!0);const p=yield i.exchangeTokenPromise;return yield vm(e,p),Js(e,Object.assign(Object.assign({},i),{token:p})),{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(p=>(i.exchangeTokenPromise=void 0,p)),c=!0),r=yield i.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?_m.warn(p.message):_m.error(p),o=p}return r?(d={token:r.token},Js(e,Object.assign(Object.assign({},i),{token:r})),yield vm(e,r)):d=xk(o),c&&Pv(e,d),d})).apply(this,arguments)}function ym(n,t){const e=xr(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),Js(n,Object.assign(Object.assign({},e),{tokenObservers:i}))}function cw(n){const{app:t}=n,e=xr(t);let i=e.tokenRefresher;i||(i=function uw(n){const{app:t}=n;return new KD((0,fe.Z)(function*(){let i;if(i=xr(t).token?yield Ov(n,!0):yield Ov(n),i.error)throw i.error}),()=>!0,()=>{const e=xr(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),Js(t,Object.assign(Object.assign({},e),{tokenRefresher:i}))),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function Pv(n,t){const e=xr(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(r){}}function Nv(n){return n.expireTimeMillis-Date.now()>0}function xk(n){return{token:Ek(lI),error:n}}class Dk{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=xr(this.app);for(const e of t)ym(this.app,e.next);return Promise.resolve()}}const pw="app-check-internal";!function Lv(){(0,so._registerComponent)(new Sa.wA("app-check",n=>function Ik(n,t){return new Dk(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(pw).initialize()})),(0,so._registerComponent)(new Sa.wA(pw,n=>function uI(n){return{getToken:t=>Ov(n,t),addTokenListener:t=>function bm(n,t,e,i){const{app:r}=n,o=xr(r),c={next:e,error:i,type:t};if(Js(r,Object.assign(Object.assign({},o),{tokenObservers:[...o.tokenObservers,c]})),o.token&&Nv(o.token)){const d=o.token;Promise.resolve().then(()=>{e({token:d.token}),cw(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>cw(n))}(n,"INTERNAL",t),removeTokenListener:t=>ym(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,so.registerVersion)("@firebase/app-check","0.5.6")}();class ff{constructor(){return(0,wn.vb)("app-check")}}"undefined"!=typeof window&&window;const vw=new l.OlP("angularfire2.auth.use-emulator"),Uv=new l.OlP("angularfire2.auth.settings"),bw=new l.OlP("angularfire2.auth.tenant-id"),jv=new l.OlP("angularfire2.auth.langugage-code"),Hv=new l.OlP("angularfire2.auth.use-device-language"),$v=new l.OlP("angularfire.auth.persistence"),Gv=(n,t,e,i,r,o,c,d)=>(0,Yi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=t.runOutsideAngular(()=>n.auth());if(e&&p.useEmulator(...e),i&&(p.tenantId=i),p.languageCode=r,o&&p.useDeviceLanguage(),c)for(const[b,E]of Object.entries(c))p.settings[b]=E;return d&&p.setPersistence(d),p},[e,i,r,o,c,d]);let yw=(()=>{class n{constructor(e,i,r,o,c,d,p,b,E,D,R,N){const B=new pt.x,K=st(void 0).pipe((0,cc.Q)(c.outsideAngular),mn(()=>o.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,820)))),(0,et.U)(()=>(0,Yi.on)(e,o,i)),(0,et.U)(ce=>Gv(ce,o,d,b,E,D,p,R)),dk({bufferSize:1,refCount:!1}));if(Li(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=st(null);else{K.pipe(Vs()).subscribe();const He=K.pipe(mn(Ge=>Ge.getRedirectResult().then(Mt=>Mt,()=>null)),wn.iC,dk({bufferSize:1,refCount:!1})),We=K.pipe(mn(Ge=>new zn.y(Mt=>({unsubscribe:o.runOutsideAngular(()=>Ge.onAuthStateChanged(Ot=>Mt.next(Ot),Ot=>Mt.error(Ot),()=>Mt.complete()))})))),Ye=K.pipe(mn(Ge=>new zn.y(Mt=>({unsubscribe:o.runOutsideAngular(()=>Ge.onIdTokenChanged(Ot=>Mt.next(Ot),Ot=>Mt.error(Ot),()=>Mt.complete()))}))));this.authState=He.pipe(tw(We),(0,nw.R)(c.outsideAngular),(0,cc.Q)(c.insideAngular)),this.user=He.pipe(tw(Ye),(0,nw.R)(c.outsideAngular),(0,cc.Q)(c.insideAngular)),this.idToken=this.user.pipe(mn(Ge=>Ge?(0,Dn.D)(Ge.getIdToken()):st(null))),this.idTokenResult=this.user.pipe(mn(Ge=>Ge?(0,Dn.D)(Ge.getIdTokenResult()):st(null))),this.credential=(0,Ia.T)(He,B,this.authState.pipe(gn(Ge=>!Ge))).pipe((0,et.U)(Ge=>(null==Ge?void 0:Ge.user)?Ge:null),(0,nw.R)(c.outsideAngular),(0,cc.Q)(c.insideAngular))}return(0,Yi.pX)(this,K,o,{spy:{apply:(ce,He,We)=>{(ce.startsWith("signIn")||ce.startsWith("createUser"))&&We.then(Ye=>B.next(Ye))}}})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Yi.Dh),l.LFG(Yi.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(wn.HU),l.LFG(vw,8),l.LFG(Uv,8),l.LFG(bw,8),l.LFG(jv,8),l.LFG(Hv,8),l.LFG($v,8),l.LFG(ff,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Bk(n){return null==n}function Vk(n){return"function"==typeof n.set}function Uk(n,t){return Vk(t)?t:n.ref(t)}function jk(n,t){if(function YF(n){return"string"==typeof n}(n))return t.stringCase();if(Vk(n))return t.firebaseCase();if(function xI(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function qv(n,t,e="on",i=Ph.z){return new zn.y(r=>{let o=null;return o=n[e](t,(c,d)=>{i.schedule(()=>{r.next({snapshot:c,prevKey:d})}),"once"===e&&i.schedule(()=>r.complete())},c=>{i.schedule(()=>r.error(c))}),"on"===e?{unsubscribe(){null!=o&&n.off(t,o)}}:{unsubscribe(){}}}).pipe((0,et.U)(r=>{const{snapshot:o,prevKey:c}=r;let d=null;return o.exists()&&(d=o.key),{type:t,payload:o,prevKey:c,key:d}}),(0,Ry.B)())}function Hk(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function zv(n,t){const{payload:e,prevKey:i,key:r}=t,o=Hk(n,r),c=function KF(n,t){if(Bk(t))return 0;{const e=Hk(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let d=null;t.payload.forEach(p=>{const b={payload:p,type:"value",prevKey:d,key:p.key};return d=p.key,n=[...n,b],!1})}return n;case"child_added":if(o>-1){const d=n[o-1];(d&&d.key||null)!==i&&(n=n.filter(p=>p.payload.key!==e.key)).splice(c,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(c,0,t)}return n;case"child_removed":return n.filter(d=>d.payload.key!==e.key);case"child_changed":return n.map(d=>d.payload.key===r?t:d);case"child_moved":if(o>-1){const d=n.splice(o,1)[0];return(n=n.slice()).splice(c,0,d),n}return n;default:return n}}function $k(n){return(Bk(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function ww(n,t,e){return function ZF(n,t,e){return qv(n,"value","once",e).pipe(mn(i=>{const r=[st(i)];return t.forEach(o=>r.push(qv(n,o,"on",e))),(0,Ia.T)(...r).pipe(Ti(zv,[]))}),Oy())}(n,t=$k(t),e)}function Wv(n,t,e){const i=(t=$k(t)).map(r=>qv(n,r,"on",e));return(0,Ia.T)(...i)}function Yv(n,t){return function(i,r){return jk(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function SI(n){return function(e){return e?jk(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function Cw(n,t){return function(){return qv(n,"value","on",t)}}const qk=new l.OlP("angularfire2.realtimeDatabaseURL"),zk=new l.OlP("angularfire2.database.use-emulator");let pf=(()=>{class n{constructor(e,i,r,o,c,d,p,b,E,D,R,N,B,K,ce){this.schedulers=d;const He=p,We=(0,Yi.on)(e,c,i);b&&Gv(We,c,E,R,N,B,D,K),this.database=(0,Yi.cc)(`${We.name}.database.${r}`,"AngularFireDatabase",We.name,()=>{const Ye=c.runOutsideAngular(()=>We.database(r||void 0));return He&&Ye.useEmulator(...He),Ye},[He])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>Uk(this.database,e));let o=r;return i&&(o=i(r)),function Gk(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Yv(i,"update"),set:Yv(i,"set"),push:r=>i.push(r),remove:SI(i),snapshotChanges:r=>ww(n,r,e).pipe(wn.iC),stateChanges:r=>Wv(n,r,e).pipe(wn.iC),auditTrail:r=>function DI(n,t,e){return function QF(n,t,e){return function II(n,t){return qv(n,"value","on",t).pipe((0,et.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(function VE(...n){const t=(0,qn.jO)(n);return(0,Yn.e)((e,i)=>{const r=n.length,o=new Array(r);let c=n.map(()=>!1),d=!1;for(let p=0;p<r;p++)(0,pa.Xf)(n[p]).subscribe((0,On.x)(i,b=>{o[p]=b,!d&&!c[p]&&(c[p]=!0,(d=c.every(Rr.y))&&(c=null))},Nh.Z));e.subscribe((0,On.x)(i,p=>{if(d){const b=[p,...o];i.next(t?t(...b):b)}}))})}(t),(0,et.U)(([r,o])=>{const c=r.lastKeyToLoad,d=o.map(p=>p.key);return{actions:o,lastKeyToLoad:c,loadedKeys:d}}),function hF(n){return(0,Yn.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,On.x)(e,o=>(i||(i=!n(o,r++)))&&e.next(o)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,et.U)(r=>r.actions))}(n,Wv(n,t).pipe(Ti((r,o)=>[...r,o],[])),e)}(n,r,e).pipe(wn.iC),valueChanges:(r,o)=>ww(n,r,e).pipe((0,et.U)(d=>d.map(p=>o&&o.idField?Object.assign(Object.assign({},p.payload.val()),{[o.idField]:p.key}):p.payload.val())),wn.iC)}}(o,this)}object(e){return function XF(n,t){return{query:n,snapshotChanges:()=>Cw(n,t.schedulers.outsideAngular)().pipe(wn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>Cw(n,t.schedulers.outsideAngular)().pipe(wn.iC,(0,et.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Uk(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Yi.Dh),l.LFG(Yi.xv,8),l.LFG(qk,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(wn.HU),l.LFG(zk,8),l.LFG(yw,8),l.LFG(vw,8),l.LFG(Uv,8),l.LFG(bw,8),l.LFG(jv,8),l.LFG(Hv,8),l.LFG($v,8),l.LFG(ff,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Zv=(()=>{class n{constructor(e){this.af=e,this.users=[],this.usersSubj=new pt.x,this.isAuth=!1,this.currentUserSubject=new er(JSON.parse(localStorage.getItem("user"))),this.currentUser=this.currentUserSubject.asObservable(),this.getUsers().finally(()=>console.log("get users completed !"))}get currentUserValue(){return this.currentUserSubject.value}getUsers(){return new Promise((e,i)=>{oo.Z.database().ref("users").on("value",r=>{this.users=r.val()?r.val():[],this.emitUsers(),e("true")},r=>{i(r+" error get users")})})}createUser(e){return new Promise((i,r)=>{this.verifyUserExist(e)?(console.error("user exist !"),alert("Cet utilisateur existe d\xe9j\xe0 !")):(this.users.push(e),this.saveUsers().then(o=>i(o)).catch(o=>r(o)).finally(()=>console.log("create user completed !")))})}getUserById(e){return st(this.users.find(r=>r.id==e))}saveUsers(){return new Promise((e,i)=>{oo.Z.database().ref("users").set(this.users).then(()=>this.emitUsers()).catch(r=>i(r)).finally(()=>console.log("save users completed !"))})}updateUser(e){this.users.forEach((i,r)=>{i.username===e.username&&i.password===e.password&&(this.users[r].username=e.username,this.users[r].password=e.password,this.saveUsers().catch(()=>console.error(new Error("update error"))).finally(()=>console.log("update user completed !")))})}verifyUserExist(e){let i=!1;return this.users.forEach(r=>{r.username===e.username&&(i=!0)}),i}emitUsers(){this.usersSubj.next(this.users)}SignIn(e,i){let r=!1;return this.users.forEach(o=>{o.username==e&&o.password==i&&(this.isAuth=!0,r=!0,localStorage.setItem("user",JSON.stringify(o)),this.currentUserSubject.next(this.currentUserValue),console.log(this.currentUserValue.username+" You're in!"))}),r}SignOut(){this.isAuth=!1}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(pf))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Wk(n,t=Ph.z){return(0,Yn.e)((e,i)=>{let r=null,o=null,c=null;const d=()=>{if(r){r.unsubscribe(),r=null;const b=o;o=null,i.next(b)}};function p(){const b=c+n,E=t.now();if(E<b)return r=this.schedule(void 0,b-E),void i.add(r);d()}e.subscribe((0,On.x)(i,b=>{o=b,c=t.now(),r||(r=t.schedule(p,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{o=r=null}))})}const Yk="firebasestorage.googleapis.com",TI="storageBucket";class Ai extends L.ZR{constructor(t,e){super(Ew(t),`Firebase Storage: ${e} (${Ew(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ai.prototype)}_codeEquals(t){return Ew(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Ew(n){return"storage/"+n}function Cm(){return new Ai("unknown","An unknown error occurred, please check the error payload for server response.")}function Kv(){return new Ai("canceled","User canceled the upload/download.")}function Dw(){return new Ai("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function mf(n){return new Ai("invalid-argument",n)}function Qv(){return new Ai("app-deleted","The Firebase app was deleted.")}function bu(n){return new Ai("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gf(n,t){return new Ai("invalid-format","String does not match format '"+n+"': "+t)}function _f(n){throw new Ai("internal-error","Internal error: "+n)}class Br{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=Br.makeFromUrl(t,e)}catch(r){return new Br(t,"")}if(""===i.path)return i;throw function AI(n){return new Ai("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let i=null;const r="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+r+"(/(.*))?$","i");function b(Ge){Ge.path_=decodeURIComponent(Ge.path)}const D=e.replace(/[.]/g,"\\."),Ye=[{regex:d,indices:{bucket:1,path:3},postModify:function o(Ge){"/"===Ge.path.charAt(Ge.path.length-1)&&(Ge.path_=Ge.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${e===Yk?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let Ge=0;Ge<Ye.length;Ge++){const Mt=Ye[Ge],Ot=Mt.regex.exec(t);if(Ot){let ki=Ot[Mt.indices.path];ki||(ki=""),i=new Br(Ot[Mt.indices.bucket],ki),Mt.postModify(i);break}}if(null==i)throw function MI(n){return new Ai("invalid-url","Invalid URL '"+n+"'.")}(t);return i}}class eL{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function Xv(n){return"string"==typeof n||n instanceof String}function c1(n){return Em()&&n instanceof Blob}function Em(){return"undefined"!=typeof Blob}function Jv(n,t,e,i){if(i<t)throw mf(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw mf(`Invalid value for '${n}'. Expected ${e} or less.`)}function uc(n,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function RI(n){const t=encodeURIComponent;let e="?";for(const i in n)n.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(n[i])+"&");return e=e.slice(0,-1),e}var dc=(()=>{return(n=dc||(dc={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",dc;var n})();class Iw{constructor(t,e,i,r,o,c,d,p,b,E,D){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=p,this.timeout_=b,this.progressCallback_=E,this.connectionFactory_=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,N)=>{this.resolve_=R,this.reject_=N,this.start_()})}start_(){const e=(i,r)=>{const o=this.resolve_,c=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function a1(n){return void 0!==n}(p)?o():o(p)}catch(p){c(p)}else if(null!==d){const p=Cm();p.serverResponse=d.getErrorText(),c(this.errorCallback_?this.errorCallback_(d,p):p)}else c(r.canceled?this.appDelete_?Qv():Kv():function e1(){return new Ai("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?e(0,new vf(!1,null,!0)):this.backoffId_=function o1(n,t,e){let i=1,r=null,o=null,c=!1,d=0;function p(){return 2===d}let b=!1;function E(...ce){b||(b=!0,t.apply(null,ce))}function D(ce){r=setTimeout(()=>{r=null,n(N,p())},ce)}function R(){o&&clearTimeout(o)}function N(ce,...He){if(b)return void R();if(ce)return R(),void E.call(null,ce,...He);if(p()||c)return R(),void E.call(null,ce,...He);let Ye;i<64&&(i*=2),1===d?(d=2,Ye=0):Ye=1e3*(i+Math.random()),D(Ye)}let B=!1;function K(ce){B||(B=!0,R(),!b&&(null!==r?(ce||(d=2),clearTimeout(r),D(0)):ce||(d=1)))}return D(0),o=setTimeout(()=>{c=!0,K(!0)},e),K}((i,r)=>{if(r)return void i(!1,new vf(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const c=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const d=o.getErrorCode()===dc.NO_ERROR,p=o.getStatus();if(!d||this.isRetryStatusCode_(p)){const E=o.getErrorCode()===dc.ABORT;return void i(!1,new vf(!1,null,E))}const b=-1!==this.successCodes_.indexOf(p);i(!0,new vf(b,o))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function s1(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,r=-1!==[408,429].indexOf(t),o=-1!==this.additionalRetryCodes_.indexOf(t);return e||r||o}}class vf{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function tL(...n){const t=function h1(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}if(Em())return new Blob(n);throw new Ai("unsupported-environment","This browser doesn't seem to support creating Blobs")}const cs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Sw{constructor(t,e){this.data=t,this.contentType=e||null}}function Tw(n,t){switch(n){case cs.RAW:return new Sw(f1(t));case cs.BASE64:case cs.BASE64URL:return new Sw(p1(n,t));case cs.DATA_URL:return new Sw(function rL(n){const t=new m1(n);return t.base64?p1(cs.BASE64,t.rest):function iL(n){let t;try{t=decodeURIComponent(n)}catch(e){throw gf(cs.DATA_URL,"Malformed data URL.")}return f1(t)}(t.rest)}(t),function g1(n){return new m1(n).contentType}(t))}throw Cm()}function f1(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function p1(n,t){switch(n){case cs.BASE64:{const r=-1!==t.indexOf("-"),o=-1!==t.indexOf("_");if(r||o)throw gf(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case cs.BASE64URL:{const r=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(r||o)throw gf(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function FI(n){return atob(n)}(t)}catch(r){throw gf(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}class m1{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw gf(cs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function eb(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class El{constructor(t,e){let i=0,r="";c1(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(c1(this.data_)){const r=function nL(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===r?null:new El(r)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new El(i,!0)}}static getBlob(...t){if(Em()){const e=t.map(i=>i instanceof El?i.data_:i);return new El(tL.apply(null,e))}{const e=t.map(c=>Xv(c)?Tw(cs.RAW,c).data:c.data_);let i=0;e.forEach(c=>{i+=c.byteLength});const r=new Uint8Array(i);let o=0;return e.forEach(c=>{for(let d=0;d<c.length;d++)r[o++]=c[d]}),new El(r,!0)}}uploadData(){return this.data_}}function Mw(n){let t;try{t=JSON.parse(n)}catch(e){return null}return function l1(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function Aw(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function kw(n,t){return t}class Dr{constructor(t,e,i,r){this.server=t,this.local=e||t,this.writable=!!i,this.xform=r||kw}}let tb=null;function Od(){if(tb)return tb;const n=[];n.push(new Dr("bucket")),n.push(new Dr("generation")),n.push(new Dr("metageneration")),n.push(new Dr("name","fullPath",!0));const e=new Dr("name");e.xform=function t(o,c){return function Rw(n){return!Xv(n)||n.length<2?n:Aw(n)}(c)},n.push(e);const r=new Dr("size");return r.xform=function i(o,c){return void 0!==c?Number(c):c},n.push(r),n.push(new Dr("timeCreated")),n.push(new Dr("updated")),n.push(new Dr("md5Hash",null,!0)),n.push(new Dr("cacheControl",null,!0)),n.push(new Dr("contentDisposition",null,!0)),n.push(new Dr("contentEncoding",null,!0)),n.push(new Dr("contentLanguage",null,!0)),n.push(new Dr("contentType",null,!0)),n.push(new Dr("metadata","customMetadata",!0)),tb=n,tb}function _1(n,t,e){const i=Mw(t);return null===i?null:function oL(n,t,e){const i={type:"file"},r=e.length;for(let o=0;o<r;o++){const c=e[o];i[c.local]=c.xform(i,t[c.server])}return function nb(n,t){Object.defineProperty(n,"ref",{get:function e(){const o=new Br(n.bucket,n.fullPath);return t._makeStorageReference(o)}})}(i,n),i}(n,i,e)}function BI(n,t){const e={},i=t.length;for(let r=0;r<i;r++){const o=t[r];o.writable&&(e[o.server]=n[o.local])}return JSON.stringify(e)}const Ow="prefixes";class xl{constructor(t,e,i,r){this.url=t,this.method=e,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ua(n){if(!n)throw Cm()}function xm(n,t){return function e(i,r){const o=_1(n,r,t);return Ua(null!==o),o}}function bf(n){return function t(e,i){let r;return r=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function xw(){return new Ai("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Xk(){return new Ai("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function Va(n){return new Ai("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function Jk(n){return new Ai("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.serverResponse=i.serverResponse,r}}function yf(n){const t=bf(n);return function e(i,r){let o=t(i,r);return 404===i.getStatus()&&(o=function Qk(n){return new Ai("object-not-found","Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=r.serverResponse,o}}function ib(n,t,e){const r=uc(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new xl(r,"GET",xm(n,e),c);return d.errorHandler=yf(t),d}function aL(n,t,e,i,r){const o={};o.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(o.delimiter=e),i&&(o.pageToken=i),r&&(o.maxResults=r);const d=uc(t.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,E=new xl(d,"GET",function UI(n,t){return function e(i,r){const o=function b1(n,t,e){const i=Mw(e);return null===i?null:function v1(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[Ow])for(const r of e[Ow]){const o=r.replace(/\/$/,""),c=n._makeStorageReference(new Br(t,o));i.prefixes.push(c)}if(e.items)for(const r of e.items){const o=n._makeStorageReference(new Br(t,r.name));i.items.push(o)}return i}(n,t,i)}(n,t,r);return Ua(null!==o),o}}(n,t.bucket),b);return E.urlParams=o,E.errorHandler=bf(t),E}function E1(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=function lL(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}class rb{constructor(t,e,i,r){this.current=t,this.total=e,this.finalized=!!i,this.metadata=r||null}}function HI(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch(r){Ua(!1)}return Ua(!!e&&-1!==(t||["active"]).indexOf(e)),e}const D1={STATE_CHANGED:"state_changed"},jo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function $I(n){switch(n){case"running":case"pausing":case"canceling":return jo.RUNNING;case"paused":return jo.PAUSED;case"success":return jo.SUCCESS;case"canceled":return jo.CANCELED;default:return jo.ERROR}}class hL{constructor(t,e,i){if(function kI(n){return"function"==typeof n}(t)||null!=e||null!=i)this.next=t,this.error=null!=e?e:void 0,this.complete=null!=i?i:void 0;else{const o=t;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function Dm(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class u extends class a{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=dc.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=dc.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=dc.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,r){if(this.sent_)throw _f("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw _f("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw _f("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponse(){if(!this.sent_)throw _f("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw _f("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function h(){return new u}class I{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=Od(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=r,this._transition("error"))},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this._promise=new Promise((r,o)=>{this._resolve=r,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function cL(n,t,e,i,r){const o=t.bucketOnlyServerUrl(),c=E1(t,i,r),d={name:c.fullPath},p=uc(o,n.host,n._protocol),E={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},D=BI(c,e),B=new xl(p,"POST",function N(K){let ce;HI(K);try{ce=K.getResponseHeader("X-Goog-Upload-URL")}catch(He){Ua(!1)}return Ua(Xv(ce)),ce},n.maxUploadRetryTime);return B.urlParams=d,B.headers=E,B.body=D,B.errorHandler=bf(t),B}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,h,t,e);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const r=function uL(n,t,e,i){const p=new xl(e,"POST",function o(b){const E=HI(b,["active","final"]);let D=null;try{D=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch(N){Ua(!1)}D||Ua(!1);const R=Number(D);return Ua(!isNaN(R)),new rb(R,i.size(),"final"===E)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=bf(t),p}(this._ref.storage,this._ref._location,t,this._blob),o=this._ref.storage._makeRequest(r,h,e,i);this._request=o,o.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new rb(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,o)=>{let c;try{c=function dL(n,t,e,i,r,o,c,d){const p=new rb(0,0);if(c?(p.current=c.current,p.total=c.total):(p.current=0,p.total=i.size()),i.size()!==p.total)throw function n1(){return new Ai("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const b=p.total-p.current;let E=b;r>0&&(E=Math.min(E,r));const D=p.current,B={"X-Goog-Upload-Command":E===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${p.current}`},K=i.slice(D,D+E);if(null===K)throw Dw();const Ye=new xl(e,"POST",function ce(Ge,Mt){const Ot=HI(Ge,["active","final"]),cn=p.current+E,ki=i.size();let Wa;return Wa="final"===Ot?xm(t,o)(Ge,Mt):null,new rb(cn,ki,"final"===Ot,Wa)},t.maxUploadRetryTime);return Ye.headers=B,Ye.body=K.uploadData(),Ye.progressCallback=d||null,Ye.errorHandler=bf(n),Ye}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const d=this._ref.storage._makeRequest(c,h,r,o);this._request=d,d.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=ib(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,h,t,e);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=function jI(n,t,e,i,r){const o=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},p=function d(){let Ye="";for(let Ge=0;Ge<2;Ge++)Ye+=Math.random().toString().slice(2);return Ye}();c["Content-Type"]="multipart/related; boundary="+p;const b=E1(t,i,r),E=BI(b,e),N=El.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+E+"\r\n--"+p+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",i,"\r\n--"+p+"--");if(null===N)throw Dw();const B={name:b.fullPath},K=uc(o,n.host,n._protocol),He=n.maxUploadRetryTime,We=new xl(K,"POST",xm(n,e),He);return We.urlParams=B,We.headers=c,We.body=N.uploadData(),We.errorHandler=bf(t),We}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,h,t,e);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=Kv(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=$I(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,r){const o=new hL(e||void 0,i||void 0,r||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch($I(this._state)){case jo.SUCCESS:Dm(this._resolve.bind(null,this.snapshot))();break;case jo.CANCELED:case jo.ERROR:Dm(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch($I(this._state)){case jo.RUNNING:case jo.PAUSED:t.next&&Dm(t.next.bind(t,this.snapshot))();break;case jo.SUCCESS:t.complete&&Dm(t.complete.bind(t))();break;default:t.error&&Dm(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class M{constructor(t,e){this._service=t,this._location=e instanceof Br?e:Br.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new M(t,e)}get root(){const t=new Br(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Aw(this._location.path)}get storage(){return this._service}get parent(){const t=function LI(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Br(this._location.bucket,t);return new M(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw bu(t)}}function ze(n,t,e){return rt.apply(this,arguments)}function rt(){return(rt=(0,fe.Z)(function*(n,t,e){const r=yield Se(n,{pageToken:e});t.prefixes.push(...r.prefixes),t.items.push(...r.items),null!=r.nextPageToken&&(yield ze(n,t,r.nextPageToken))})).apply(this,arguments)}function Se(n,t){null!=t&&"number"==typeof t.maxResults&&Jv("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=aL(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,h)}function In(n){n._throwIfRoot("getDownloadURL");const t=function Nw(n,t,e){const r=uc(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new xl(r,"GET",function y1(n,t){return function e(i,r){const o=_1(n,r,t);return Ua(null!==o),function sL(n,t,e,i){const r=Mw(t);if(null===r||!Xv(r.downloadTokens))return null;const o=r.downloadTokens;if(0===o.length)return null;const c=encodeURIComponent;return o.split(",").map(b=>{const D=n.fullPath;return uc("/b/"+c(n.bucket)+"/o/"+c(D),e,i)+RI({alt:"media",token:b})})[0]}(o,r,n.host,n._protocol)}}(n,e),c);return d.errorHandler=yf(t),d}(n.storage,n._location,Od());return n.storage.makeRequestWithTokens(t,h).then(e=>{if(null===e)throw function r1(){return new Ai("no-download-url","The given file does not have any download URLs.")}();return e})}function yu(n,t){const e=function Rd(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),i=new Br(n._location.bucket,e);return new M(n.storage,i)}function ob(n,t){if(n instanceof Im){const e=n;if(null==e._bucket)throw function t1(){return new Ai("no-default-bucket","No default bucket found. Did you set the '"+TI+"' property when initializing the app?")}();const i=new M(e,e._bucket);return null!=t?ob(i,t):i}return void 0!==t?yu(n,t):n}function Bw(n,t){if(t&&function Fw(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof Im)return function Lw(n,t){return new M(n,t)}(n,t);throw mf("To use ref(service, url), the first argument must be a Storage instance.")}return ob(n,t)}function sb(n,t){const e=null==t?void 0:t[TI];return null==e?null:Br.makeFromBucketSpec(e,n)}class Im{constructor(t,e,i,r,o){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=Yk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Br.makeFromBucketSpec(r,this._host):sb(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Br.makeFromBucketSpec(this._url,t):sb(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Jv("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Jv("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,fe.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,fe.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new M(this,t)}_makeRequest(t,e,i,r){if(this._deleted)return new eL(Qv());{const o=function d1(n,t,e,i,r,o){const c=RI(n.urlParams),d=n.url+c,p=Object.assign({},n.headers);return function PI(n,t){t&&(n["X-Firebase-GMPID"]=t)}(p,t),function OI(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(p,e),function u1(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(p,o),function NI(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(p,i),new Iw(d,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r)}(t,this._appId,i,r,e,this._firebaseVersion);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(t,e){var i=this;return(0,fe.Z)(function*(){const[r,o]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,r,o).getPromise()})()}}const ab="@firebase/storage";function pL(n,t){return Bw(n=(0,L.m9)(n),t)}function T6(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new Im(e,i,r,t,so.SDK_VERSION)}!function M6(){(0,so._registerComponent)(new Sa.wA("storage",T6,"PUBLIC").setMultipleInstances(!0)),(0,so.registerVersion)(ab,"0.9.5",""),(0,so.registerVersion)(ab,"0.9.5","esm2017")}();class GI{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class mL{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new GI(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new GI(i,this,this._ref))},e)}on(t,e,i,r){let o;return e&&(o="function"==typeof e?c=>e(new GI(c,this,this._ref)):{next:e.next?c=>e.next(new GI(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,i||void 0,r||void 0)}}class gL{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new Pd(t,this._service))}get items(){return this._delegate.items.map(t=>new Pd(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Pd{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function I6(n,t){return yu(n,t)}(this._delegate,t);return new Pd(e,this.storage)}get root(){return new Pd(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new Pd(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new mL(function b6(n,t,e){return function J(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new I(n,new El(t),e)}(n=(0,L.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=cs.RAW,i){this._throwIfRoot("putString");const r=Tw(e,t),o=Object.assign({},i);return null==o.contentType&&null!=r.contentType&&(o.contentType=r.contentType),new mL(new I(this._delegate,new El(r.data,!0),o),this)}listAll(){return function E6(n){return function Be(n){const t={prefixes:[],items:[]};return ze(n,t).then(()=>t)}(n=(0,L.m9)(n))}(this._delegate).then(t=>new gL(t,this.storage))}list(t){return function C6(n,t){return Se(n=(0,L.m9)(n),t)}(this._delegate,t||void 0).then(e=>new gL(e,this.storage))}getMetadata(){return function y6(n){return function Ct(n){n._throwIfRoot("getMetadata");const t=ib(n.storage,n._location,Od());return n.storage.makeRequestWithTokens(t,h)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(t){return function w6(n,t){return function nn(n,t){n._throwIfRoot("updateMetadata");const e=function w1(n,t,e,i){const o=uc(t.fullServerUrl(),n.host,n._protocol),d=BI(e,i),b=n.maxOperationRetryTime,E=new xl(o,"PATCH",xm(n,i),b);return E.headers={"Content-Type":"application/json; charset=utf-8"},E.body=d,E.errorHandler=yf(t),E}(n.storage,n._location,t,Od());return n.storage.makeRequestWithTokens(e,h)}(n=(0,L.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function x6(n){return In(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function D6(n){return function us(n){n._throwIfRoot("deleteObject");const t=function C1(n,t){const i=uc(t.fullServerUrl(),n.host,n._protocol),d=new xl(i,"DELETE",function c(p,b){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=yf(t),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,h)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw bu(t)}}class _L{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(vL(t))throw mf("ref() expected a child path but got a URL, use refFromURL instead.");return new Pd(pL(this._delegate,t),this)}refFromURL(t){if(!vL(t))throw mf("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Br.makeFromUrl(t,this._delegate.host)}catch(e){throw mf("refFromUrl() expected a valid full URL but got an invalid one.")}return new Pd(pL(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){!function S6(n,t,e,i={}){!function Vw(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,L.Sg)(r,n.app.options.projectId))}(n,t,e,i)}(this._delegate,t,e,i)}}function vL(n){return/^[A-Za-z]+:\/\//.test(n)}function O6(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new _L(e,i)}function bL(n){const t=function N6(n){return new zn.y(t=>{const e=c=>t.next(c);e(n.snapshot);const o=n.on("state_changed",e);return n.then(c=>{e(c),t.complete()},c=>{e(n.snapshot),(c=>{t.error(c)})(c)}),function(){o()}}).pipe(Wk(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,et.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function qI(n){return{getDownloadURL:()=>st(void 0).pipe(wn.fc,mn(()=>n.getDownloadURL()),wn.iC),getMetadata:()=>st(void 0).pipe(wn.fc,mn(()=>n.getMetadata()),wn.iC),delete:()=>(0,Dn.D)(n.delete()),child:t=>qI(n.child(t)),updateMetadata:t=>(0,Dn.D)(n.updateMetadata(t)),put:(t,e)=>bL(n.put(t,e)),putString:(t,e,i)=>bL(n.putString(t,e,i)),list:t=>(0,Dn.D)(n.list(t)),listAll:()=>(0,Dn.D)(n.listAll())}}!function P6(n){const t={TaskState:jo,TaskEvent:D1,StringFormat:cs,Storage:_L,Reference:Pd};n.INTERNAL.registerComponent(new Sa.wA("storage-compat",O6,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.13")}(Py.Z);const F6=new l.OlP("angularfire2.storageBucket"),L6=new l.OlP("angularfire2.storage.maxUploadRetryTime"),B6=new l.OlP("angularfire2.storage.maxOperationRetryTime"),V6=new l.OlP("angularfire2.storage.use-emulator");let I1=(()=>{class n{constructor(e,i,r,o,c,d,p,b,E,D){const R=(0,Yi.on)(e,c,i);this.storage=(0,Yi.cc)(`${R.name}.storage.${r}`,"AngularFireStorage",R.name,()=>{const N=c.runOutsideAngular(()=>R.storage(r||void 0)),B=E;return B&&N.useEmulator(...B),p&&N.setMaxUploadRetryTime(p),b&&N.setMaxOperationRetryTime(b),N},[p,b])}ref(e){return qI(this.storage.ref(e))}refFromURL(e){return qI(this.storage.refFromURL(e))}upload(e,i,r){return qI(this.storage.ref(e)).put(i,r)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Yi.Dh),l.LFG(Yi.xv,8),l.LFG(F6,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(wn.HU),l.LFG(L6,8),l.LFG(B6,8),l.LFG(V6,8),l.LFG(ff,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),U6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),j6=(()=>{class n{constructor(){oo.Z.registerVersion("angularfire",wn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[I1],imports:[U6]}),n})(),Sm=(()=>{class n{constructor(e,i,r,o){this.db=e,this.authService=i,this.router=r,this.afStorage=o,this.dbPath="/interventions",this.basePath="/images",this.interventions=[],this.prestations=[],this.intersSubj=new pt.x,this.prestasSubj=new pt.x,this.currentUser=this.authService.currentUserValue,this.interventionsRef=e.list(this.dbPath),this.getPrestations().then(c=>this.getInterventions().then(()=>console.log("get inters of "+this.currentUser.username))).finally(()=>console.log("get prestas of "+this.currentUser.username))}createNewIntervention(e){var i,r;this.intervention=e,(null===(r=null===(i=this.intervention)||void 0===i?void 0:i.fileUpload)||void 0===r?void 0:r.file)?this.pushFileToStorage():this.createIntervention(this.intervention),alert(this.intervention.typeRaccordement+" enregistr\xe9 avec succ\xe8s !")}createIntervention(e){this.getInterventions().then(i=>{this.interventions.push(e),oo.Z.database().ref(this.currentUser.username+"/interventions").set(this.interventions).then(()=>this.emitInterventions()).catch(r=>console.error(new Error(r))).finally(()=>this.router.navigate(["/home"]))})}createNewPrestation(e){this.prestationTab=e,this.prestationTab.forEach(i=>{i.fileUpload?this.pushFileToStoragePrestaComp(i):this.createPrestation(i)})}createPrestation(e){this.getPrestations().then(i=>{this.prestations.push(e),oo.Z.database().ref(this.currentUser.username+"/prestations").set(this.prestations).then(()=>this.emitPrestations()).catch(r=>console.error(new Error(r)))})}pushFileToStorage(){var e,i;const r=`${this.currentUser.username}/${this.basePath}/${null===(e=this.intervention.fileUpload)||void 0===e?void 0:e.file.name}`,o=this.afStorage.ref(r),c=this.afStorage.upload(r,null===(i=this.intervention.fileUpload)||void 0===i?void 0:i.file);return c.snapshotChanges().pipe(cl(()=>{o.getDownloadURL().subscribe(d=>{this.intervention.fileUpload&&(this.intervention.fileUpload.url=d,this.intervention.fileUpload.name=this.intervention.fileUpload.file.name,this.saveFileData(this.intervention.fileUpload)),this.createIntervention(this.intervention)})})).subscribe(),c.percentageChanges()}pushFileToStorageBis(e){var i,r;const o=`${this.currentUser.username}/${this.basePath}/${null===(i=e.fileUpload)||void 0===i?void 0:i.file.name}`,c=this.afStorage.ref(o);this.afStorage.upload(o,null===(r=e.fileUpload)||void 0===r?void 0:r.file).snapshotChanges().pipe(cl(()=>{c.getDownloadURL().subscribe(p=>{var b,E,D;null===(b=e.fileUpload)||void 0===b||(b.url=p),null===(E=e.fileUpload)||void 0===E||(E.name=null===(D=e.fileUpload)||void 0===D?void 0:D.file.name),this.saveFileData(e.fileUpload)})})).subscribe()}pushFileToStoragePrestaComp(e){var i,r;const o=`${this.currentUser.username}/${this.basePath}/${null===(i=e.fileUpload)||void 0===i?void 0:i.file.name}`,c=this.afStorage.ref(o);this.afStorage.upload(o,null===(r=e.fileUpload)||void 0===r?void 0:r.file).snapshotChanges().pipe(cl(()=>{c.getDownloadURL().subscribe(p=>{var b,E;null===(b=e.fileUpload)||void 0===b||(b.url=p),null===(E=e.fileUpload)||void 0===E||(E.name=e.fileUpload.file.name),this.saveFileData(e.fileUpload),this.createPrestation(e)})})).subscribe()}saveFileData(e){this.db.list(this.basePath).push(e)}getFiles(e){return this.db.list(this.basePath,i=>i.limitToLast(e))}deleteInterventionFile(e){var i;this.deleteFileDatabase(null===(i=null==e?void 0:e.fileUpload)||void 0===i?void 0:i.key).then(()=>{var r;this.deleteFileStorage(null===(r=null==e?void 0:e.fileUpload)||void 0===r?void 0:r.name)}).catch(r=>console.log(r))}deleteFileDatabase(e){return this.db.list(this.basePath).remove(e)}deleteFileStorage(e){this.afStorage.ref(this.currentUser.username+"/"+this.basePath).child(e).delete()}deleteIntervention(e){const i=this.interventions.indexOf(e);-1!==i&&(this.interventions.splice(i,1),this.saveInterventions())}saveInterventions(){return new Promise((e,i)=>{oo.Z.database().ref(this.currentUser.username+"/interventions").set(this.interventions).then(()=>this.emitInterventions()).catch(r=>i(r)).finally()})}getInterventions(){return new Promise((e,i)=>{oo.Z.database().ref(this.currentUser.username+"/interventions").on("value",r=>{this.interventions=r.val()?r.val():[],this.emitInterventions(),e("true")},r=>{i(r)})})}getPrestations(){return new Promise((e,i)=>{oo.Z.database().ref(this.currentUser.username+"/prestations").on("value",r=>{this.prestations=r.val()?r.val():[],this.emitPrestations(),e("true")},r=>{i(r)})})}addPrestation(e){this.prestationTab.push(e)}emitInterventions(){this.intersSubj.next(this.interventions)}emitPrestations(){this.prestasSubj.next(this.prestations)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(pf),l.LFG(Zv),l.LFG(Vn),l.LFG(I1))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yL=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var H6=V(1144);const $6=["addListener","removeListener"],G6=["addEventListener","removeEventListener"],q6=["on","off"];function Tm(n,t,e,i){if((0,Si.m)(e)&&(i=e,e=void 0),i)return Tm(n,t,e).pipe(Uc(i));const[r,o]=function Y6(n){return(0,Si.m)(n.addEventListener)&&(0,Si.m)(n.removeEventListener)}(n)?G6.map(c=>d=>n[c](t,d,e)):function z6(n){return(0,Si.m)(n.addListener)&&(0,Si.m)(n.removeListener)}(n)?$6.map(wL(n,t)):function W6(n){return(0,Si.m)(n.on)&&(0,Si.m)(n.off)}(n)?q6.map(wL(n,t)):[];if(!r&&(0,H6.z)(n))return(0,ri.z)(c=>Tm(c,t,e))((0,pa.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new zn.y(c=>{const d=(...p)=>c.next(1<p.length?p:p[0]);return r(d),()=>o(d)})}function wL(n,t){return e=>i=>n[e](t,i)}const wf=new zn.y(Nh.Z),K6={connector:()=>new pt.x};function CL(n,t=K6){const{connector:e}=t;return(0,Yn.e)((i,r)=>{const o=e();(0,Dn.D)(n(function Z6(n){return new zn.y(t=>n.subscribe(t))}(o))).subscribe(r),r.add(i.subscribe(o))})}function EL(n,t){return t?e=>Hc(t.pipe((0,Bn.q)(1),function J6(){return(0,Yn.e)((n,t)=>{n.subscribe((0,On.x)(t,Nh.Z))})}()),e.pipe(EL(n))):(0,ri.z)((e,i)=>n(e,i).pipe((0,Bn.q)(1),function e4(n){return(0,et.U)(()=>n)}(e)))}var t4=V(3532);function S1(n=0,t,e=Ph.P){let i=-1;return null!=t&&((0,t4.K)(t)?e=t:i=t),new zn.y(r=>{let o=function n4(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;o<0&&(o=0);let c=0;return e.schedule(function(){r.closed||(r.next(c++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function T1(n,t=Ph.z){const e=S1(n,t);return EL(()=>e)}const Uw="Service workers are disabled or not supported by this browser";class zI{constructor(t){if(this.serviceWorker=t,t){const i=Tm(t,"controllerchange").pipe((0,et.U)(()=>t.controller)),o=Hc(Or(()=>st(t.controller)),i);this.worker=o.pipe(gn(E=>!!E)),this.registration=this.worker.pipe(mn(()=>t.getRegistration()));const b=Tm(t,"message").pipe((0,et.U)(E=>E.data)).pipe(gn(E=>E&&E.type)).pipe(function X6(n){return n?t=>CL(n)(t):t=>function Q6(n,t){const e=(0,Si.m)(n)?n:()=>n;return(0,Si.m)(t)?CL(t,{connector:e}):i=>new ga(i,e)}(new pt.x)(t)}());b.connect(),this.events=b}else this.worker=this.events=this.registration=function r4(n){return Or(()=>eo(new Error(n)))}(Uw)}postMessage(t,e){return this.worker.pipe((0,Bn.q)(1),(0,vi.b)(i=>{i.postMessage(Object.assign({action:t},e))})).toPromise().then(()=>{})}postMessageWithOperation(t,e,i){const r=this.waitForOperationCompleted(i),o=this.postMessage(t,e);return Promise.all([o,r]).then(([,c])=>c)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(t){let e;return e="string"==typeof t?i=>i.type===t:i=>t.includes(i.type),this.events.pipe(gn(e))}nextEventOfType(t){return this.eventsOfType(t).pipe((0,Bn.q)(1))}waitForOperationCompleted(t){return this.eventsOfType("OPERATION_COMPLETED").pipe(gn(e=>e.nonce===t),(0,Bn.q)(1),(0,et.U)(e=>{if(void 0!==e.result)return e.result;throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let o4=(()=>{class n{constructor(e){if(this.sw=e,this.subscriptionChanges=new pt.x,!e.isEnabled)return this.messages=wf,this.notificationClicks=wf,void(this.subscription=wf);this.messages=this.sw.eventsOfType("PUSH").pipe((0,et.U)(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,et.U)(r=>r.data)),this.pushManager=this.sw.registration.pipe((0,et.U)(r=>r.pushManager));const i=this.pushManager.pipe(mn(r=>r.getSubscription()));this.subscription=(0,Ia.T)(i,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(e){if(!this.sw.isEnabled)return Promise.reject(new Error(Uw));const i={userVisibleOnly:!0};let r=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(r.length));for(let c=0;c<r.length;c++)o[c]=r.charCodeAt(c);return i.applicationServerKey=o,this.pushManager.pipe(mn(c=>c.subscribe(i)),(0,Bn.q)(1)).toPromise().then(c=>(this.subscriptionChanges.next(c),c))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Bn.q)(1),mn(i=>{if(null===i)throw new Error("Not subscribed to push notifications.");return i.unsubscribe().then(r=>{if(!r)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Uw))}decodeBase64(e){return atob(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(zI))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),M1=(()=>{class n{constructor(e){if(this.sw=e,!e.isEnabled)return this.versionUpdates=wf,this.available=wf,this.activated=wf,void(this.unrecoverable=wf);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY"]),this.available=this.versionUpdates.pipe(gn(i=>"VERSION_READY"===i.type),(0,et.U)(i=>({type:"UPDATE_AVAILABLE",current:i.currentVersion,available:i.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Uw));const e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Uw));const e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(zI))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class A1{}const xL=new l.OlP("NGSW_REGISTER_SCRIPT");function s4(n,t,e,i){return()=>{if(!Ii(i)||!("serviceWorker"in navigator)||!1===e.enabled)return;let o;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof e.registrationStrategy)o=e.registrationStrategy();else{const[d,...p]=(e.registrationStrategy||"registerWhenStable:30000").split(":");switch(d){case"registerImmediately":o=st(null);break;case"registerWithDelay":o=DL(+p[0]||0);break;case"registerWhenStable":o=p[0]?(0,Ia.T)(IL(n),DL(+p[0])):IL(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${e.registrationStrategy}`)}}n.get(l.R0b).runOutsideAngular(()=>o.pipe((0,Bn.q)(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:e.scope}).catch(d=>console.error("Service worker registration failed with:",d))))}}function DL(n){return st(null).pipe(T1(n))}function IL(n){return n.get(l.z2F).isStable.pipe(gn(e=>e))}function a4(n,t){return new zI(Ii(t)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let l4=(()=>{class n{static register(e,i={}){return{ngModule:n,providers:[{provide:xL,useValue:e},{provide:A1,useValue:i},{provide:zI,useFactory:a4,deps:[A1,l.Lbi]},{provide:l.ip1,useFactory:s4,deps:[l.zs3,xL,A1,l.Lbi],multi:!0}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[o4,M1]}),n})(),SL=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),k1=(()=>{class n{constructor(e,i,r,o){this.db=e,this.authService=i,this.router=r,this.afStorage=o,this.dbPath="/charges",this.basePath="/images",this.charges=[],this.chargesSubj=new pt.x,this.currentUser=this.authService.currentUserValue,this.chargesRef=e.list(this.dbPath),this.getCharges().finally(()=>console.log("get charges of "+this.currentUser.username))}addCharge(e){var i;this.charge=e,(null===(i=this.charge.fileUpload)||void 0===i?void 0:i.file)?this.pushFileToStorage():this.createCharge(e)}pushFileToStorage(){var e,i;const r=`${this.currentUser.username}/${this.basePath}/${null===(e=this.charge.fileUpload)||void 0===e?void 0:e.file.name}`,o=this.afStorage.ref(r),c=this.afStorage.upload(r,null===(i=this.charge.fileUpload)||void 0===i?void 0:i.file);return c.snapshotChanges().pipe(cl(()=>{o.getDownloadURL().subscribe(d=>{this.charge.fileUpload&&(this.charge.fileUpload.url=d,this.charge.fileUpload.name=this.charge.fileUpload.file.name,this.saveFileData(this.charge.fileUpload)),this.createCharge(this.charge)})})).subscribe(),c.percentageChanges()}createCharge(e){this.charges.push(e),oo.Z.database().ref(this.currentUser.username+"/charges").set(this.charges).then(()=>this.emitCharges()).catch(i=>console.error(new Error(i))).finally(()=>this.router.navigate(["/home"]))}pushFileToStorageBis(e){var i,r;const o=`${this.currentUser.username}/${this.basePath}/${null===(i=e.fileUpload)||void 0===i?void 0:i.file.name}`,c=this.afStorage.ref(o);this.afStorage.upload(o,null===(r=e.fileUpload)||void 0===r?void 0:r.file).snapshotChanges().pipe(cl(()=>{c.getDownloadURL().subscribe(p=>{var b,E,D;null===(b=e.fileUpload)||void 0===b||(b.url=p),null===(E=e.fileUpload)||void 0===E||(E.name=null===(D=e.fileUpload)||void 0===D?void 0:D.file.name),this.saveFileData(e.fileUpload)})})).subscribe()}saveFileData(e){this.db.list(this.basePath).push(e)}getFiles(e){return this.db.list(this.basePath,i=>i.limitToLast(e))}deleteFile(e){this.deleteFileDatabase(e.key).then(()=>{this.deleteFileStorage(e.name)}).catch(i=>console.log(i))}deleteFileDatabase(e){return this.db.list(this.basePath).remove(e)}deleteFileStorage(e){this.afStorage.ref(this.currentUser.username+"/"+this.basePath).child(e).delete()}getCharges(){return new Promise((e,i)=>{oo.Z.database().ref(this.currentUser.username+"/charges").on("value",r=>{this.charges=r.val()?r.val():[],this.emitCharges(),e("true")},r=>{i(r)})})}emitCharges(){this.chargesSubj.next(this.charges)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(pf),l.LFG(Zv),l.LFG(Vn),l.LFG(I1))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const c4=new l.OlP("cdk-dir-doc",{providedIn:"root",factory:function u4(){return(0,l.f3M)(ie)}}),d4=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let R1,jw=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new l.vpe,e){const r=e.documentElement?e.documentElement.dir:null;this.value=function h4(n){const t=(null==n?void 0:n.toLowerCase())||"";return"auto"===t&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?d4.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(c4,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Hw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();try{R1="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){R1=!1}let $w,Mm,O1,Dl=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?Ii(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!R1)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.Lbi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function WI(n){return function f4(){if(null==$w&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>$w=!0}))}finally{$w=$w||!1}return $w}()?n:!!n.capture}function p4(){if(null==Mm){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Mm=!1,Mm;if("scrollBehavior"in document.documentElement.style)Mm=!0;else{const n=Element.prototype.scrollTo;Mm=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Mm}function Am(n){return n.composedPath?n.composedPath()[0]:n.target}function P1(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function Gw(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function wu(n){return(0,Yn.e)((t,e)=>{(0,pa.Xf)(n).subscribe((0,On.x)(e,()=>e.complete(),Nh.Z)),!e.closed&&t.subscribe(e)})}function Qn(n){return null!=n&&"false"!=`${n}`}function RL(n){return Array.isArray(n)?n:[n]}function sr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function fb(n){return n instanceof l.SBq?n.nativeElement:n}let M4=(()=>{class n{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),OL=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[M4]}),n})();class FL extends class R4{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new pt.x,this._typeaheadSubscription=Wn.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new pt.x,this.change=new pt.x,t instanceof l.n_E&&t.changes.subscribe(e=>{if(this._activeItem){const r=e.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,vi.b)(e=>this._pressedLetters.push(e)),Wk(t),gn(()=>this._pressedLetters.length>0),(0,et.U)(()=>this._pressedLetters.join(""))).subscribe(e=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const o=(this._activeItemIndex+r)%i.length,c=i[o];if(!this._skipPredicateFn(c)&&0===c.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!t[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||Gw(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),i="number"==typeof t?t:e.indexOf(t),r=e[i];this._activeItem=null==r?null:r,this._activeItemIndex=i}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let i=1;i<=e.length;i++){const r=(this._activeItemIndex+t*i+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const i=this._getItemsArray();if(i[t]){for(;this._skipPredicateFn(i[t]);)if(!i[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof l.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let O4=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function N4(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function P4(n){try{return n.frameElement}catch(t){return null}}(function $4(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(i&&(-1===BL(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),o=BL(e);return e.hasAttribute("contenteditable")?-1!==o:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function j4(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==o:"video"===r?-1!==o&&(null!==o||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function H4(n){return!function L4(n){return function V4(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function F4(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function B4(n){return function U4(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||LL(n))}(e)&&!this.isDisabled(e)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Dl))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function LL(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function BL(n){if(!LL(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class G4{constructor(t,e,i,r,o=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return null==i||i.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=0;i<e.length;i++){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=e.length-1;i>=0;i--){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe((0,Bn.q)(1)).subscribe(t)}}let q4=(()=>{class n{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new G4(e,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(O4),l.LFG(l.R0b),l.LFG(ie))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),z4=(()=>{class n{constructor(e,i,r){this._elementRef=e,this._focusTrapFactory=i,this._previouslyFocusedElement=null,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(e){this.focusTrap.enabled=Qn(e)}get autoCapture(){return this._autoCapture}set autoCapture(e){this._autoCapture=Qn(e)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(e){const i=e.autoCapture;i&&!i.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=function _4(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}(),this.focusTrap.focusInitialElementWhenReady()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(q4),l.Y36(ie))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"],features:[l.TTD]}),n})();function B1(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function V1(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const W4=new l.OlP("cdk-input-modality-detector-options"),Y4={ignoreKeys:[18,17,224,91,16]},pb=WI({passive:!0,capture:!0});let Z4=(()=>{class n{constructor(e,i,r,o){this._platform=e,this._mostRecentTarget=null,this._modality=new er(null),this._lastTouchMs=0,this._onKeydown=c=>{var d,p;(null===(p=null===(d=this._options)||void 0===d?void 0:d.ignoreKeys)||void 0===p?void 0:p.some(b=>b===c.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Am(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(B1(c)?"keyboard":"mouse"),this._mostRecentTarget=Am(c))},this._onTouchstart=c=>{V1(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Am(c))},this._options=Object.assign(Object.assign({},Y4),o),this.modalityDetected=this._modality.pipe(function S4(n){return gn((t,e)=>n<=e)}(1)),this.modalityChanged=this.modalityDetected.pipe(Oy()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,pb),r.addEventListener("mousedown",this._onMousedown,pb),r.addEventListener("touchstart",this._onTouchstart,pb)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,pb),document.removeEventListener("mousedown",this._onMousedown,pb),document.removeEventListener("touchstart",this._onTouchstart,pb))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Dl),l.LFG(l.R0b),l.LFG(ie),l.LFG(W4,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Q4=new l.OlP("cdk-focus-monitor-default-options"),QI=WI({passive:!0,capture:!0});let Rm=(()=>{class n{constructor(e,i,r,o,c){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new pt.x,this._rootNodeFocusAndBlurListener=d=>{const p=Am(d),b="focus"===d.type?this._onFocus:this._onBlur;for(let E=p;E;E=E.parentElement)b.call(this,d,E)},this._document=o,this._detectionMode=(null==c?void 0:c.detectionMode)||0}monitor(e,i=!1){const r=fb(e);if(!this._platform.isBrowser||1!==r.nodeType)return st(null);const o=function g4(n){if(function m4(){if(null==O1){const n="undefined"!=typeof document?document.head:null;O1=!(!n||!n.createShadowRoot&&!n.attachShadow)}return O1}()){const t=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(r)||this._getDocument(),c=this._elementInfo.get(r);if(c)return i&&(c.checkChildren=!0),c.subject;const d={checkChildren:i,subject:new pt.x,rootNode:o};return this._elementInfo.set(r,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(e){const i=fb(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const o=fb(e);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([d,p])=>this._originChanged(d,i,p)):(this._setOrigin(i),"function"==typeof o.focus&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),o=Am(e);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(e,i){this._ngZone.run(()=>e.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,QI),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,QI)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(wu(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,QI),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,QI),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,o)=>{(o===e||r.checkChildren&&o.contains(e))&&i.push([o,r])}),i}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.R0b),l.LFG(Dl),l.LFG(Z4),l.LFG(ie,8),l.LFG(Q4,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),X4=(()=>{class n{constructor(e,i){this._elementRef=e,this._focusMonitor=i,this.cdkFocusChange=new l.vpe}ngAfterViewInit(){const e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,1===e.nodeType&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(i=>this.cdkFocusChange.emit(i))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(Rm))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),n})();const UL="cdk-high-contrast-black-on-white",jL="cdk-high-contrast-white-on-black",U1="cdk-high-contrast-active";let HL=(()=>{class n{constructor(e,i){this._platform=e,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(U1),e.remove(UL),e.remove(jL),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(e.add(U1),e.add(UL)):2===i&&(e.add(U1),e.add(jL))}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Dl),l.LFG(ie))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$L=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(HL))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[OL]]}),n})();class GL{}const Nd="*";function Om(n,t){return{type:7,name:n,definitions:t,options:{}}}function Cu(n,t=null){return{type:4,styles:t,timings:n}}function qL(n,t=null){return{type:2,steps:n,options:t}}function ar(n){return{type:6,styles:n,offset:null}}function xf(n,t,e){return{type:0,name:n,styles:t,options:e}}function hc(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function WL(n){Promise.resolve(null).then(n)}class qw{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){WL(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class YL{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const o=this.players.length;0==o?WL(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++e==o&&this._onFinish()}),c.onDestroy(()=>{++i==o&&this._onDestroy()}),c.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((c,d)=>Math.max(c,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const ln=!1;function ZL(n){return new l.vHH(3e3,ln)}function N$(){return"undefined"!=typeof window&&void 0!==window.document}function H1(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Df(n){switch(n.length){case 0:return new qw;case 1:return n[0];default:return new YL(n)}}function KL(n,t,e,i,r={},o={}){const c=[],d=[];let p=-1,b=null;if(i.forEach(E=>{const D=E.offset,R=D==p,N=R&&b||{};Object.keys(E).forEach(B=>{let K=B,ce=E[B];if("offset"!==B)switch(K=t.normalizePropertyName(K,c),ce){case"!":ce=r[B];break;case Nd:ce=o[B];break;default:ce=t.normalizeStyleValue(B,K,ce,c)}N[K]=ce}),R||d.push(N),b=N,p=D}),c.length)throw function x$(n){return new l.vHH(3502,ln)}();return d}function $1(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&G1(e,"start",n)));break;case"done":n.onDone(()=>i(e&&G1(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&G1(e,"destroy",n)))}}function G1(n,t,e){const i=e.totalTime,o=q1(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,null==i?n.totalTime:i,!!e.disabled),c=n._data;return null!=c&&(o._data=c),o}function q1(n,t,e,i,r="",o=0,c){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:o,disabled:!!c}}function ja(n,t,e){let i;return n instanceof Map?(i=n.get(t),i||n.set(t,i=e)):(i=n[t],i||(i=n[t]=e)),i}function QL(n){const t=n.indexOf(":");return[n.substring(1,t),n.substr(t+1)]}let z1=(n,t)=>!1,XL=(n,t,e)=>[],JL=null;function W1(n){const t=n.parentNode||n.host;return t===JL?null:t}(H1()||"undefined"!=typeof Element)&&(N$()?(JL=(()=>document.documentElement)(),z1=(n,t)=>{for(;t;){if(t===n)return!0;t=W1(t)}return!1}):z1=(n,t)=>n.contains(t),XL=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]});let Pm=null,e2=!1;function t2(n){Pm||(Pm=function L$(){return"undefined"!=typeof document?document.body:null}()||{},e2=!!Pm.style&&"WebkitAppearance"in Pm.style);let t=!0;return Pm.style&&!function F$(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Pm.style,!t&&e2&&(t="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Pm.style)),t}const n2=z1,r2=XL;let o2=(()=>{class n{validateStyleProperty(e){return t2(e)}matchesElement(e,i){return!1}containsElement(e,i){return n2(e,i)}getParentElement(e){return W1(e)}query(e,i,r){return r2(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,o,c,d=[],p){return new qw(r,o)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Y1=(()=>{class n{}return n.NOOP=new o2,n})();const Z1="ng-enter",JI="ng-leave",eS="ng-trigger",tS=".ng-trigger",a2="ng-animating",K1=".ng-animating";function Nm(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Q1(parseFloat(t[1]),t[2])}function Q1(n,t){return"s"===t?1e3*n:n}function nS(n,t,e){return n.hasOwnProperty("duration")?n:function U$(n,t,e){let r,o=0,c="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return t.push(ZL()),{duration:0,delay:0,easing:""};r=Q1(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(o=Q1(parseFloat(p),d[4]));const b=d[5];b&&(c=b)}else r=n;if(!e){let d=!1,p=t.length;r<0&&(t.push(function n$(){return new l.vHH(3100,ln)}()),d=!0),o<0&&(t.push(function i$(){return new l.vHH(3101,ln)}()),d=!0),d&&t.splice(p,0,ZL())}return{duration:r,delay:o,easing:c}}(n,t,e)}function mb(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function If(n,t,e={}){if(t)for(let i in n)e[i]=n[i];else mb(n,e);return e}function c2(n,t,e){return e?t+":"+e+";":""}function u2(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=c2(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=c2(0,$$(e),n.style[e]));n.setAttribute("style",t)}function Eu(n,t,e){n.style&&(Object.keys(t).forEach(i=>{const r=J1(i);e&&!e.hasOwnProperty(i)&&(e[i]=n.style[r]),n.style[r]=t[i]}),H1()&&u2(n))}function Fm(n,t){n.style&&(Object.keys(t).forEach(e=>{const i=J1(e);n.style[i]=""}),H1()&&u2(n))}function zw(n){return Array.isArray(n)?1==n.length?n[0]:qL(n):n}const X1=new RegExp("{{\\s*(.+?)\\s*}}","g");function d2(n){let t=[];if("string"==typeof n){let e;for(;e=X1.exec(n);)t.push(e[1]);X1.lastIndex=0}return t}function iS(n,t,e){const i=n.toString(),r=i.replace(X1,(o,c)=>{let d=t[c];return t.hasOwnProperty(c)||(e.push(function o$(n){return new l.vHH(3003,ln)}()),d=""),d.toString()});return r==i?n:r}function rS(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const H$=/-+([a-z0-9])/g;function J1(n){return n.replace(H$,(...t)=>t[1].toUpperCase())}function $$(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ha(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function s$(n){return new l.vHH(3004,ln)}()}}function h2(n,t){return window.getComputedStyle(n)[t]}function Z$(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function K$(n,t,e){if(":"==n[0]){const p=function Q$(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function y$(n){return new l.vHH(3016,ln)}()),"* => *"}}(n,e);if("function"==typeof p)return void t.push(p);n=p}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function b$(n){return new l.vHH(3015,ln)}()),t;const r=i[1],o=i[2],c=i[3];t.push(f2(r,c));"<"==o[0]&&!("*"==r&&"*"==c)&&t.push(f2(c,r))}(i,e,t)):e.push(n),e}const lS=new Set(["true","1"]),cS=new Set(["false","0"]);function f2(n,t){const e=lS.has(n)||cS.has(n),i=lS.has(t)||cS.has(t);return(r,o)=>{let c="*"==n||n==r,d="*"==t||t==o;return!c&&e&&"boolean"==typeof r&&(c=r?lS.has(n):cS.has(n)),!d&&i&&"boolean"==typeof o&&(d=o?lS.has(t):cS.has(t)),c&&d}}const X$=new RegExp("s*:selfs*,?","g");function eR(n,t,e,i){return new J$(n).build(t,e,i)}class J${constructor(t){this._driver=t}build(t,e,i){const r=new nG(e);this._resetContextStyleTimingState(r);const o=Ha(this,zw(t),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),o}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const o=[],c=[];return"@"==t.name.charAt(0)&&e.errors.push(function l$(){return new l.vHH(3006,ln)}()),t.definitions.forEach(d=>{if(this._resetContextStyleTimingState(e),0==d.type){const p=d,b=p.name;b.toString().split(/\s*,\s*/).forEach(E=>{p.name=E,o.push(this.visitState(p,e))}),p.name=b}else if(1==d.type){const p=this.visitTransition(d,e);i+=p.queryCount,r+=p.depCount,c.push(p)}else e.errors.push(function c$(){return new l.vHH(3007,ln)}())}),{type:7,name:t.name,states:o,transitions:c,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const o=new Set,c=r||{};i.styles.forEach(d=>{if(uS(d)){const p=d;Object.keys(p).forEach(b=>{d2(p[b]).forEach(E=>{c.hasOwnProperty(E)||o.add(E)})})}}),o.size&&(rS(o.values()),e.errors.push(function u$(n,t){return new l.vHH(3008,ln)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=Ha(this,zw(t.animation),e);return{type:1,matchers:Z$(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Lm(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>Ha(this,i,e)),options:Lm(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const o=t.steps.map(c=>{e.currentTime=i;const d=Ha(this,c,e);return r=Math.max(r,e.currentTime),d});return e.currentTime=r,{type:3,steps:o,options:Lm(t.options)}}visitAnimate(t,e){const i=function rG(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return tR(nS(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=tR(0,0,"");return o.dynamic=!0,o.strValue=e,o}const r=nS(e,t);return tR(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,o=t.styles?t.styles:ar({});if(5==o.type)r=this.visitKeyframes(o,e);else{let c=t.styles,d=!1;if(!c){d=!0;const b={};i.easing&&(b.easing=i.easing),c=ar(b)}e.currentTime+=i.duration+i.delay;const p=this.visitStyle(c,e);p.isEmptyStep=d,r=p}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[];Array.isArray(t.styles)?t.styles.forEach(c=>{"string"==typeof c?c==Nd?i.push(c):e.errors.push(function d$(n){return new l.vHH(3002,ln)}()):i.push(c)}):i.push(t.styles);let r=!1,o=null;return i.forEach(c=>{if(uS(c)){const d=c,p=d.easing;if(p&&(o=p,delete d.easing),!r)for(let b in d)if(d[b].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:o,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,o=e.currentTime;i&&o>0&&(o-=i.duration+i.delay),t.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(d=>{if(!this._driver.validateStyleProperty(d))return delete c[d],void e.unsupportedCSSPropertiesFound.add(d);const p=e.collectedStyles[e.currentQuerySelector],b=p[d];let E=!0;b&&(o!=r&&o>=b.startTime&&r<=b.endTime&&(e.errors.push(function h$(n,t,e,i,r){return new l.vHH(3010,ln)}()),E=!1),o=b.startTime),E&&(p[d]={startTime:o,endTime:r}),e.options&&function j$(n,t,e){const i=t.params||{},r=d2(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||e.push(function r$(n){return new l.vHH(3001,ln)}())})}(c[d],e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function f$(){return new l.vHH(3011,ln)}()),i;let o=0;const c=[];let d=!1,p=!1,b=0;const E=t.steps.map(He=>{const We=this._makeStyleAst(He,e);let Ye=null!=We.offset?We.offset:function iG(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(uS(e)&&e.hasOwnProperty("offset")){const i=e;t=parseFloat(i.offset),delete i.offset}});else if(uS(n)&&n.hasOwnProperty("offset")){const e=n;t=parseFloat(e.offset),delete e.offset}return t}(We.styles),Ge=0;return null!=Ye&&(o++,Ge=We.offset=Ye),p=p||Ge<0||Ge>1,d=d||Ge<b,b=Ge,c.push(Ge),We});p&&e.errors.push(function p$(){return new l.vHH(3012,ln)}()),d&&e.errors.push(function m$(){return new l.vHH(3200,ln)}());const D=t.steps.length;let R=0;o>0&&o<D?e.errors.push(function g$(){return new l.vHH(3202,ln)}()):0==o&&(R=1/(D-1));const N=D-1,B=e.currentTime,K=e.currentAnimateTimings,ce=K.duration;return E.forEach((He,We)=>{const Ye=R>0?We==N?1:R*We:c[We],Ge=Ye*ce;e.currentTime=B+K.delay+Ge,K.duration=Ge,this._validateStyleAst(He,e),He.offset=Ye,i.styles.push(He)}),i}visitReference(t,e){return{type:8,animation:Ha(this,zw(t.animation),e),options:Lm(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Lm(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Lm(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[o,c]=function eG(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(X$,"")),n=n.replace(/@\*/g,tS).replace(/@\w+/g,e=>tS+"-"+e.substr(1)).replace(/:animating/g,K1),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+o:o,ja(e.collectedStyles,e.currentQuerySelector,{});const d=Ha(this,zw(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:c,animation:d,originalSelector:t.selector,options:Lm(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function _$(){return new l.vHH(3013,ln)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:nS(t.timings,e.errors,!0);return{type:12,animation:Ha(this,zw(t.animation),e),timings:i,options:null}}}class nG{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function uS(n){return!Array.isArray(n)&&"object"==typeof n}function Lm(n){return n?(n=mb(n)).params&&(n.params=function tG(n){return n?mb(n):null}(n.params)):n={},n}function tR(n,t,e){return{duration:n,delay:t,easing:e}}function nR(n,t,e,i,r,o,c=null,d=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:c,subTimeline:d}}class dS{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const aG=new RegExp(":enter","g"),cG=new RegExp(":leave","g");function iR(n,t,e,i,r,o={},c={},d,p,b=[]){return(new uG).buildKeyframes(n,t,e,i,r,o,c,d,p,b)}class uG{buildKeyframes(t,e,i,r,o,c,d,p,b,E=[]){b=b||new dS;const D=new rR(t,e,b,r,o,E,[]);D.options=p,D.currentTimeline.setStyles([c],null,D.errors,p),Ha(this,i,D);const R=D.timelines.filter(N=>N.containsAnimation());if(Object.keys(d).length){let N;for(let B=R.length-1;B>=0;B--){const K=R[B];if(K.element===e){N=K;break}}N&&!N.allowOnlyTimelineStyles()&&N.setStyles([d],null,D.errors,p)}return R.length?R.map(N=>N.buildKeyframes()):[nR(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),o=e.currentTimeline.currentTime,c=this._visitSubInstructions(i,r,r.options);o!=c&&e.transformIntoNewTimeline(c)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,i){let o=e.currentTimeline.currentTime;const c=null!=i.duration?Nm(i.duration):null,d=null!=i.delay?Nm(i.delay):null;return 0!==c&&t.forEach(p=>{const b=e.appendInstructionToTimeline(p,c,d);o=Math.max(o,b.duration+b.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),Ha(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const o=t.options;if(o&&(o.params||o.delay)&&(r=e.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=hS);const c=Nm(o.delay);r.delayNextStep(c)}t.steps.length&&(t.steps.forEach(c=>Ha(this,c,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const o=t.options&&t.options.delay?Nm(t.options.delay):0;t.steps.forEach(c=>{const d=e.createSubContext(t.options);o&&d.delayNextStep(o),Ha(this,c,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(c=>e.currentTimeline.mergeTimelineCollectedStyles(c)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return nS(e.params?iS(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const o=t.style;5==o.type?this.visitKeyframes(o,e):(e.incrementTime(i.duration),this.visitStyle(o,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const o=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(o):i.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,o=i.duration,d=e.createSubContext().currentTimeline;d.easing=i.easing,t.styles.forEach(p=>{d.forwardTime((p.offset||0)*o),d.setStyles(p.styles,p.easing,e.errors,e.options),d.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(d),e.transformIntoNewTimeline(r+o),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},o=r.delay?Nm(r.delay):0;o&&(6===e.previousNode.type||0==i&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=hS);let c=i;const d=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=d.length;let p=null;d.forEach((b,E)=>{e.currentQueryIndex=E;const D=e.createSubContext(t.options,b);o&&D.delayNextStep(o),b===e.element&&(p=D.currentTimeline),Ha(this,t.animation,D),D.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,D.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(c),p&&(e.currentTimeline.mergeTimelineCollectedStyles(p),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,o=t.timings,c=Math.abs(o.duration),d=c*(e.currentQueryTotal-1);let p=c*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":p=d-p;break;case"full":p=i.currentStaggerTime}const E=e.currentTimeline;p&&E.delayNextStep(p);const D=E.currentTime;Ha(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-D+(r.startTime-i.currentTimeline.startTime)}}const hS={};class rR{constructor(t,e,i,r,o,c,d,p){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=c,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=hS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new fS(this._driver,e,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=Nm(i.duration)),null!=i.delay&&(r.delay=Nm(i.delay));const o=i.params;if(o){let c=r.params;c||(c=this.options.params={}),Object.keys(o).forEach(d=>{(!e||!c.hasOwnProperty(d))&&(c[d]=iS(o[d],c,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,o=new rR(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=hS,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+t.delay,easing:""},o=new dG(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,o,c){let d=[];if(r&&d.push(this.element),t.length>0){t=(t=t.replace(aG,"."+this._enterClassName)).replace(cG,"."+this._leaveClassName);let b=this._driver.query(this.element,t,1!=i);0!==i&&(b=i<0?b.slice(b.length+i,b.length):b.slice(0,i)),d.push(...b)}return!o&&0==d.length&&c.push(function v$(n){return new l.vHH(3014,ln)}()),d}}class fS{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new fS(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||Nd,this._currentKeyframe[e]=Nd}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&(this._previousKeyframe.easing=e);const o=r&&r.params||{},c=function hG(n,t){const e={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(t),i.forEach(o=>{e[o]=Nd})):If(r,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(c).forEach(d=>{const p=iS(c[d],o,i);this._pendingStyles[d]=p,this._localTimelineStyles.hasOwnProperty(d)||(this._backFill[d]=this._globalTimelineStyles.hasOwnProperty(d)?this._globalTimelineStyles[d]:Nd),this._updateStyle(d,p)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(i=>{this._currentKeyframe[i]=t[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const i=this._styleSummary[e],r=t._styleSummary[e];(!i||r.time>i.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,p)=>{const b=If(d,!0);Object.keys(b).forEach(E=>{const D=b[E];"!"==D?t.add(E):D==Nd&&e.add(E)}),i||(b.offset=p/this.duration),r.push(b)});const o=t.size?rS(t.values()):[],c=e.size?rS(e.values()):[];if(i){const d=r[0],p=mb(d);d.offset=0,p.offset=1,r=[d,p]}return nR(this.element,r,o,c,this.duration,this.startTime,this.easing,!1)}}class dG extends fS{constructor(t,e,i,r,o,c,d=!1){super(t,e,c.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=d,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const o=[],c=i+e,d=e/c,p=If(t[0],!1);p.offset=0,o.push(p);const b=If(t[0],!1);b.offset=g2(d),o.push(b);const E=t.length-1;for(let D=1;D<=E;D++){let R=If(t[D],!1);R.offset=g2((e+R.offset*i)/c),o.push(R)}i=c,e=0,r="",t=o}return nR(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function g2(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class oR{}class fG extends oR{normalizePropertyName(t,e){return J1(t)}normalizeStyleValue(t,e,i,r){let o="";const c=i.toString().trim();if(pG[e]&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function a$(n,t){return new l.vHH(3005,ln)}())}return c+o}}const pG=(()=>function mG(n){const t={};return n.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function _2(n,t,e,i,r,o,c,d,p,b,E,D,R){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:o,toState:i,toStyles:c,timelines:d,queriedElements:p,preStyleProps:b,postStyleProps:E,totalTime:D,errors:R}}const sR={};class v2{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function gG(n,t,e,i,r){return n.some(o=>o(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){const r=this._stateStyles["*"],o=this._stateStyles[t],c=r?r.buildStyles(e,i):{};return o?o.buildStyles(e,i):c}build(t,e,i,r,o,c,d,p,b,E){const D=[],R=this.ast.options&&this.ast.options.params||sR,B=this.buildStyles(i,d&&d.params||sR,D),K=p&&p.params||sR,ce=this.buildStyles(r,K,D),He=new Set,We=new Map,Ye=new Map,Ge="void"===r,Mt={params:Object.assign(Object.assign({},R),K)},Ot=E?[]:iR(t,e,this.ast.animation,o,c,B,ce,Mt,b,D);let cn=0;if(Ot.forEach(Wa=>{cn=Math.max(Wa.duration+Wa.delay,cn)}),D.length)return _2(e,this._triggerName,i,r,Ge,B,ce,[],[],We,Ye,cn,D);Ot.forEach(Wa=>{const qd=Wa.element,f6=ja(We,qd,{});Wa.preStyleProps.forEach(Tg=>f6[Tg]=!0);const wE=ja(Ye,qd,{});Wa.postStyleProps.forEach(Tg=>wE[Tg]=!0),qd!==e&&He.add(qd)});const ki=rS(He.values());return _2(e,this._triggerName,i,r,Ge,B,ce,Ot,ki,We,Ye,cn)}}class _G{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i={},r=mb(this.defaultParams);return Object.keys(t).forEach(o=>{const c=t[o];null!=c&&(r[o]=c)}),this.styles.styles.forEach(o=>{if("string"!=typeof o){const c=o;Object.keys(c).forEach(d=>{let p=c[d];p.length>1&&(p=iS(p,r,e));const b=this.normalizer.normalizePropertyName(d,e);p=this.normalizer.normalizeStyleValue(d,b,p,e),i[b]=p})}}),i}}class bG{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states={},e.states.forEach(r=>{this.states[r.name]=new _G(r.style,r.options&&r.options.params||{},i)}),b2(this.states,"true","1"),b2(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new v2(t,r,this.states))}),this.fallbackTransition=function yG(n,t,e){return new v2(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,d)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(c=>c.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function b2(n,t,e){n.hasOwnProperty(t)?n.hasOwnProperty(e)||(n[e]=n[t]):n.hasOwnProperty(e)&&(n[t]=n[e])}const wG=new dS;class CG{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(t,e){const i=[],o=eR(this._driver,e,i,[]);if(i.length)throw function D$(n){return new l.vHH(3503,ln)}();this._animations[t]=o}_buildPlayer(t,e,i){const r=t.element,o=KL(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],o=this._animations[t];let c;const d=new Map;if(o?(c=iR(this._driver,e,o,Z1,JI,{},{},i,wG,r),c.forEach(E=>{const D=ja(d,E.element,{});E.postStyleProps.forEach(R=>D[R]=null)})):(r.push(function I$(){return new l.vHH(3300,ln)}()),c=[]),r.length)throw function S$(n){return new l.vHH(3504,ln)}();d.forEach((E,D)=>{Object.keys(E).forEach(R=>{E[R]=this._driver.computeStyle(D,R,Nd)})});const b=Df(c.map(E=>{const D=d.get(E.element);return this._buildPlayer(E,{},D)}));return this._playersById[t]=b,b.onDestroy(()=>this.destroy(t)),this.players.push(b),b}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw function T$(n){return new l.vHH(3301,ln)}();return e}listen(t,e,i,r){const o=q1(e,"","","");return $1(this._getPlayer(t),i,o,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const o=this._getPlayer(t);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const y2="ng-animate-queued",aR="ng-animate-disabled",SG=[],w2={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},TG={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Il="__ng_removed";class lR{constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function RG(n){return null!=n?n:null}(i?t.value:t),i){const o=mb(t);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const Ww="void",cR=new lR(Ww);class MG{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Sl(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.hasOwnProperty(e))throw function M$(n,t){return new l.vHH(3302,ln)}();if(null==i||0==i.length)throw function A$(n){return new l.vHH(3303,ln)}();if(!function OG(n){return"start"==n||"done"==n}(i))throw function k$(n,t){return new l.vHH(3400,ln)}();const o=ja(this._elementListeners,t,[]),c={name:e,phase:i,callback:r};o.push(c);const d=ja(this._engine.statesByElement,t,{});return d.hasOwnProperty(e)||(Sl(t,eS),Sl(t,eS+"-"+e),d[e]=cR),()=>{this._engine.afterFlush(()=>{const p=o.indexOf(c);p>=0&&o.splice(p,1),this._triggers[e]||delete d[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw function R$(n){return new l.vHH(3401,ln)}();return e}trigger(t,e,i,r=!0){const o=this._getTrigger(e),c=new uR(this.id,e,t);let d=this._engine.statesByElement.get(t);d||(Sl(t,eS),Sl(t,eS+"-"+e),this._engine.statesByElement.set(t,d={}));let p=d[e];const b=new lR(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&b.absorbOptions(p.options),d[e]=b,p||(p=cR),b.value!==Ww&&p.value===b.value){if(!function FG(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const o=e[r];if(!t.hasOwnProperty(o)||n[o]!==t[o])return!1}return!0}(p.params,b.params)){const K=[],ce=o.matchStyles(p.value,p.params,K),He=o.matchStyles(b.value,b.params,K);K.length?this._engine.reportError(K):this._engine.afterFlush(()=>{Fm(t,ce),Eu(t,He)})}return}const R=ja(this._engine.playersByElement,t,[]);R.forEach(K=>{K.namespaceId==this.id&&K.triggerName==e&&K.queued&&K.destroy()});let N=o.matchTransition(p.value,b.value,t,b.params),B=!1;if(!N){if(!r)return;N=o.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:N,fromState:p,toState:b,player:c,isFallbackTransition:B}),B||(Sl(t,y2),c.onStart(()=>{gb(t,y2)})),c.onDone(()=>{let K=this.players.indexOf(c);K>=0&&this.players.splice(K,1);const ce=this._engine.playersByElement.get(t);if(ce){let He=ce.indexOf(c);He>=0&&ce.splice(He,1)}}),this.players.push(c),R.push(c),c}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,i)=>{delete e[t]}),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,tS,!0);i.forEach(r=>{if(r[Il])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(c=>c.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const o=this._engine.statesByElement.get(t),c=new Map;if(o){const d=[];if(Object.keys(o).forEach(p=>{if(c.set(p,o[p].value),this._triggers[p]){const b=this.trigger(t,p,Ww,r);b&&d.push(b)}}),d.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,c),i&&Df(d).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(o=>{const c=o.name;if(r.has(c))return;r.add(c);const p=this._triggers[c].fallbackTransition,b=i[c]||cR,E=new lR(Ww),D=new uR(this.id,c,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:c,transition:p,fromState:b,toState:E,player:D,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(t):[];if(o&&o.length)r=!0;else{let c=t;for(;c=c.parentNode;)if(i.statesByElement.get(c)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const o=t[Il];(!o||o===w2)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){Sl(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,c=this._elementListeners.get(o);c&&c.forEach(d=>{if(d.name==i.triggerName){const p=q1(o,i.triggerName,i.fromState.value,i.toState.value);p._data=t,$1(i.player,d.phase,p,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const o=i.transition.ast.depCount,c=r.transition.ast.depCount;return 0==o||0==c?o-c:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class AG{constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new MG(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement,o=i.length-1;if(o>=0){let c=!1;if(void 0!==this.driver.getParentElement){let d=this.driver.getParentElement(e);for(;d;){const p=r.get(d);if(p){const b=i.indexOf(p);i.splice(b+1,0,t),c=!0;break}d=this.driver.getParentElement(d)}}else for(let d=o;d>=0;d--)if(this.driver.containsElement(i[d].hostElement,e)){i.splice(d+1,0,t),c=!0;break}c||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i){const r=Object.keys(i);for(let o=0;o<r.length;o++){const c=i[r[o]].namespaceId;if(c){const d=this._fetchNamespace(c);d&&e.add(d)}}}return e}trigger(t,e,i,r){if(pS(e)){const o=this._fetchNamespace(t);if(o)return o.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!pS(e))return;const o=e[Il];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const c=this.collectedLeaveElements.indexOf(e);c>=0&&this.collectedLeaveElements.splice(c,1)}if(t){const c=this._fetchNamespace(t);c&&c.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Sl(t,aR)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),gb(t,aR))}removeNode(t,e,i,r){if(pS(e)){const o=t?this._fetchNamespace(t):null;if(o?o.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const c=this.namespacesByHostElement.get(e);c&&c.id!==t&&c.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r,o){this.collectedLeaveElements.push(e),e[Il]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,i,r,o){return pS(e)?this._fetchNamespace(t).listen(e,i,r,o):()=>{}}_buildInstruction(t,e,i,r,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,tS,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,K1,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Df(this.players).onDone(()=>t());t()})}processLeaveNode(t){var e;const i=t[Il];if(i&&i.setForRemoval){if(t[Il]=w2,i.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,i.setForRemoval)}(null===(e=t.classList)||void 0===e?void 0:e.contains(aR))&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Sl(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Df(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function O$(n){return new l.vHH(3402,ln)}()}_flushAnimations(t,e){const i=new dS,r=[],o=new Map,c=[],d=new Map,p=new Map,b=new Map,E=new Set;this.disabledNodes.forEach(ft=>{E.add(ft);const St=this.driver.query(ft,".ng-animate-queued",!0);for(let Nt=0;Nt<St.length;Nt++)E.add(St[Nt])});const D=this.bodyNode,R=Array.from(this.statesByElement.keys()),N=x2(R,this.collectedEnterElements),B=new Map;let K=0;N.forEach((ft,St)=>{const Nt=Z1+K++;B.set(St,Nt),ft.forEach(Cn=>Sl(Cn,Nt))});const ce=[],He=new Set,We=new Set;for(let ft=0;ft<this.collectedLeaveElements.length;ft++){const St=this.collectedLeaveElements[ft],Nt=St[Il];Nt&&Nt.setForRemoval&&(ce.push(St),He.add(St),Nt.hasAnimation?this.driver.query(St,".ng-star-inserted",!0).forEach(Cn=>He.add(Cn)):We.add(St))}const Ye=new Map,Ge=x2(R,Array.from(He));Ge.forEach((ft,St)=>{const Nt=JI+K++;Ye.set(St,Nt),ft.forEach(Cn=>Sl(Cn,Nt))}),t.push(()=>{N.forEach((ft,St)=>{const Nt=B.get(St);ft.forEach(Cn=>gb(Cn,Nt))}),Ge.forEach((ft,St)=>{const Nt=Ye.get(St);ft.forEach(Cn=>gb(Cn,Nt))}),ce.forEach(ft=>{this.processLeaveNode(ft)})});const Mt=[],Ot=[];for(let ft=this._namespaceList.length-1;ft>=0;ft--)this._namespaceList[ft].drainQueuedTransitions(e).forEach(Nt=>{const Cn=Nt.player,zr=Nt.element;if(Mt.push(Cn),this.collectedEnterElements.length){const ys=zr[Il];if(ys&&ys.setForMove){if(ys.previousTriggersValues&&ys.previousTriggersValues.has(Nt.triggerName)){const Mg=ys.previousTriggersValues.get(Nt.triggerName),Qf=this.statesByElement.get(Nt.element);Qf&&Qf[Nt.triggerName]&&(Qf[Nt.triggerName].value=Mg)}return void Cn.destroy()}}const Mu=!D||!this.driver.containsElement(D,zr),Ya=Ye.get(zr),Kf=B.get(zr),Ri=this._buildInstruction(Nt,i,Kf,Ya,Mu);if(Ri.errors&&Ri.errors.length)return void Ot.push(Ri);if(Mu)return Cn.onStart(()=>Fm(zr,Ri.fromStyles)),Cn.onDestroy(()=>Eu(zr,Ri.toStyles)),void r.push(Cn);if(Nt.isFallbackTransition)return Cn.onStart(()=>Fm(zr,Ri.fromStyles)),Cn.onDestroy(()=>Eu(zr,Ri.toStyles)),void r.push(Cn);const g6=[];Ri.timelines.forEach(ys=>{ys.stretchStartingKeyframe=!0,this.disabledNodes.has(ys.element)||g6.push(ys)}),Ri.timelines=g6,i.append(zr,Ri.timelines),c.push({instruction:Ri,player:Cn,element:zr}),Ri.queriedElements.forEach(ys=>ja(d,ys,[]).push(Cn)),Ri.preStyleProps.forEach((ys,Mg)=>{const Qf=Object.keys(ys);if(Qf.length){let Ag=p.get(Mg);Ag||p.set(Mg,Ag=new Set),Qf.forEach(dF=>Ag.add(dF))}}),Ri.postStyleProps.forEach((ys,Mg)=>{const Qf=Object.keys(ys);let Ag=b.get(Mg);Ag||b.set(Mg,Ag=new Set),Qf.forEach(dF=>Ag.add(dF))})});if(Ot.length){const ft=[];Ot.forEach(St=>{ft.push(function P$(n,t){return new l.vHH(3505,ln)}())}),Mt.forEach(St=>St.destroy()),this.reportError(ft)}const cn=new Map,ki=new Map;c.forEach(ft=>{const St=ft.element;i.has(St)&&(ki.set(St,St),this._beforeAnimationBuild(ft.player.namespaceId,ft.instruction,cn))}),r.forEach(ft=>{const St=ft.element;this._getPreviousPlayers(St,!1,ft.namespaceId,ft.triggerName,null).forEach(Cn=>{ja(cn,St,[]).push(Cn),Cn.destroy()})});const Wa=ce.filter(ft=>I2(ft,p,b)),qd=new Map;E2(qd,this.driver,We,b,Nd).forEach(ft=>{I2(ft,p,b)&&Wa.push(ft)});const wE=new Map;N.forEach((ft,St)=>{E2(wE,this.driver,new Set(ft),p,"!")}),Wa.forEach(ft=>{const St=qd.get(ft),Nt=wE.get(ft);qd.set(ft,Object.assign(Object.assign({},St),Nt))});const Tg=[],p6=[],m6={};c.forEach(ft=>{const{element:St,player:Nt,instruction:Cn}=ft;if(i.has(St)){if(E.has(St))return Nt.onDestroy(()=>Eu(St,Cn.toStyles)),Nt.disabled=!0,Nt.overrideTotalTime(Cn.totalTime),void r.push(Nt);let zr=m6;if(ki.size>1){let Ya=St;const Kf=[];for(;Ya=Ya.parentNode;){const Ri=ki.get(Ya);if(Ri){zr=Ri;break}Kf.push(Ya)}Kf.forEach(Ri=>ki.set(Ri,zr))}const Mu=this._buildAnimation(Nt.namespaceId,Cn,cn,o,wE,qd);if(Nt.setRealPlayer(Mu),zr===m6)Tg.push(Nt);else{const Ya=this.playersByElement.get(zr);Ya&&Ya.length&&(Nt.parentPlayer=Df(Ya)),r.push(Nt)}}else Fm(St,Cn.fromStyles),Nt.onDestroy(()=>Eu(St,Cn.toStyles)),p6.push(Nt),E.has(St)&&r.push(Nt)}),p6.forEach(ft=>{const St=o.get(ft.element);if(St&&St.length){const Nt=Df(St);ft.setRealPlayer(Nt)}}),r.forEach(ft=>{ft.parentPlayer?ft.syncPlayerEvents(ft.parentPlayer):ft.destroy()});for(let ft=0;ft<ce.length;ft++){const St=ce[ft],Nt=St[Il];if(gb(St,JI),Nt&&Nt.hasAnimation)continue;let Cn=[];if(d.size){let Mu=d.get(St);Mu&&Mu.length&&Cn.push(...Mu);let Ya=this.driver.query(St,K1,!0);for(let Kf=0;Kf<Ya.length;Kf++){let Ri=d.get(Ya[Kf]);Ri&&Ri.length&&Cn.push(...Ri)}}const zr=Cn.filter(Mu=>!Mu.destroyed);zr.length?PG(this,St,zr):this.processLeaveNode(St)}return ce.length=0,Tg.forEach(ft=>{this.players.push(ft),ft.onDone(()=>{ft.destroy();const St=this.players.indexOf(ft);this.players.splice(St,1)}),ft.play()}),Tg}elementContainsData(t,e){let i=!1;const r=e[Il];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,o){let c=[];if(e){const d=this.playersByQueriedElement.get(t);d&&(c=d)}else{const d=this.playersByElement.get(t);if(d){const p=!o||o==Ww;d.forEach(b=>{b.queued||!p&&b.triggerName!=r||c.push(b)})}}return(i||r)&&(c=c.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),c}_beforeAnimationBuild(t,e,i){const o=e.element,c=e.isRemovalTransition?void 0:t,d=e.isRemovalTransition?void 0:e.triggerName;for(const p of e.timelines){const b=p.element,E=b!==o,D=ja(i,b,[]);this._getPreviousPlayers(b,E,c,d,e.toState).forEach(N=>{const B=N.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),N.destroy(),D.push(N)})}Fm(o,e.fromStyles)}_buildAnimation(t,e,i,r,o,c){const d=e.triggerName,p=e.element,b=[],E=new Set,D=new Set,R=e.timelines.map(B=>{const K=B.element;E.add(K);const ce=K[Il];if(ce&&ce.removedBeforeQueried)return new qw(B.duration,B.delay);const He=K!==p,We=function NG(n){const t=[];return D2(n,t),t}((i.get(K)||SG).map(cn=>cn.getRealPlayer())).filter(cn=>!!cn.element&&cn.element===K),Ye=o.get(K),Ge=c.get(K),Mt=KL(0,this._normalizer,0,B.keyframes,Ye,Ge),Ot=this._buildPlayer(B,Mt,We);if(B.subTimeline&&r&&D.add(K),He){const cn=new uR(t,d,K);cn.setRealPlayer(Ot),b.push(cn)}return Ot});b.forEach(B=>{ja(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function kG(n,t,e){let i;if(n instanceof Map){if(i=n.get(t),i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}}else if(i=n[t],i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&delete n[t]}return i}(this.playersByQueriedElement,B.element,B))}),E.forEach(B=>Sl(B,a2));const N=Df(R);return N.onDestroy(()=>{E.forEach(B=>gb(B,a2)),Eu(p,e.toStyles)}),D.forEach(B=>{ja(r,B,[]).push(N)}),N}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new qw(t.duration,t.delay)}}class uR{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new qw,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(i=>$1(t,e,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){ja(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function pS(n){return n&&1===n.nodeType}function C2(n,t){const e=n.style.display;return n.style.display=null!=t?t:"none",e}function E2(n,t,e,i,r){const o=[];e.forEach(p=>o.push(C2(p)));const c=[];i.forEach((p,b)=>{const E={};p.forEach(D=>{const R=E[D]=t.computeStyle(b,D,r);(!R||0==R.length)&&(b[Il]=TG,c.push(b))}),n.set(b,E)});let d=0;return e.forEach(p=>C2(p,o[d++])),c}function x2(n,t){const e=new Map;if(n.forEach(d=>e.set(d,[])),0==t.length)return e;const r=new Set(t),o=new Map;function c(d){if(!d)return 1;let p=o.get(d);if(p)return p;const b=d.parentNode;return p=e.has(b)?b:r.has(b)?1:c(b),o.set(d,p),p}return t.forEach(d=>{const p=c(d);1!==p&&e.get(p).push(d)}),e}function Sl(n,t){var e;null===(e=n.classList)||void 0===e||e.add(t)}function gb(n,t){var e;null===(e=n.classList)||void 0===e||e.remove(t)}function PG(n,t,e){Df(e).onDone(()=>n.processLeaveNode(t))}function D2(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof YL?D2(i.players,t):t.push(i)}}function I2(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(o=>r.add(o)):t.set(n,i),e.delete(n),!0}class mS{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new AG(t,e,i),this._timelineEngine=new CG(t,e,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(t,e,i,r,o){const c=t+"-"+r;let d=this._triggerCache[c];if(!d){const p=[],E=eR(this._driver,o,p,[]);if(p.length)throw function E$(n,t){return new l.vHH(3404,ln)}();d=function vG(n,t,e){return new bG(n,t,e)}(r,E,this._normalizer),this._triggerCache[c]=d}this._transitionEngine.registerTrigger(e,r,d)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[o,c]=QL(i);this._timelineEngine.command(o,e,c,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,o){if("@"==i.charAt(0)){const[c,d]=QL(i);return this._timelineEngine.listen(c,e,d,o)}return this._transitionEngine.listen(t,e,i,r,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let BG=(()=>{class n{constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let o=n.initialStylesByElement.get(e);o||n.initialStylesByElement.set(e,o={}),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Eu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Eu(this._element,this._initialStyles),this._endStyles&&(Eu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Fm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Fm(this._element,this._endStyles),this._endStyles=null),Eu(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function dR(n){let t=null;const e=Object.keys(n);for(let i=0;i<e.length;i++){const r=e[i];VG(r)&&(t=t||{},t[r]=n[r])}return t}function VG(n){return"display"===n||"position"===n}class S2{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,i){return t.animate(e,i)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};if(this.hasStarted()){const e=this._finalKeyframe;Object.keys(e).forEach(i=>{"offset"!=i&&(t[i]=this._finished?e[i]:h2(this.element,i))})}this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class UG{validateStyleProperty(t){return t2(t)}matchesElement(t,e){return!1}containsElement(t,e){return n2(t,e)}getParentElement(t){return W1(t)}query(t,e,i){return r2(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,o,c=[]){const p={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(p.easing=o);const b={},E=c.filter(R=>R instanceof S2);(function G$(n,t){return 0===n||0===t})(i,r)&&E.forEach(R=>{let N=R.currentSnapshot;Object.keys(N).forEach(B=>b[B]=N[B])}),e=function q$(n,t,e){const i=Object.keys(e);if(i.length&&t.length){let o=t[0],c=[];if(i.forEach(d=>{o.hasOwnProperty(d)||c.push(d),o[d]=e[d]}),c.length)for(var r=1;r<t.length;r++){let d=t[r];c.forEach(function(p){d[p]=h2(n,p)})}}return t}(t,e=e.map(R=>If(R,!1)),b);const D=function LG(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=dR(t[0]),t.length>1&&(i=dR(t[t.length-1]))):t&&(e=dR(t)),e||i?new BG(n,e,i):null}(t,e);return new S2(t,e,p,D)}}let jG=(()=>{class n extends GL{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:l.ifc.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?qL(e):e;return T2(this._renderer,null,i,"register",[r]),new HG(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.FYo),l.LFG(ie))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class HG extends class J4{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new $G(this._id,t,e||{},this._renderer)}}class $G{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return T2(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function T2(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const M2="@.disabled";let GG=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(o,c)=>{const d=null==c?void 0:c.parentNode(o);d&&c.removeChild(d,o)}}createRenderer(e,i){const o=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let E=this._rendererCache.get(o);return E||(E=new A2("",o,this.engine),this._rendererCache.set(o,E)),E}const c=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,e);const p=E=>{Array.isArray(E)?E.forEach(p):this.engine.registerTrigger(c,d,e,E.name,E)};return i.data.animation.forEach(p),new qG(this,d,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[c,d]=o;c(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.FYo),l.LFG(mS),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class A2{constructor(t,e,i){this.namespaceId=t,this.delegate=e,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==M2?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class qG extends A2{constructor(t,e,i,r){super(e,i,r),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==M2?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.substr(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function zG(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let o=e.substr(1),c="";return"@"!=o.charAt(0)&&([o,c]=function WG(n){const t=n.indexOf(".");return[n.substring(0,t),n.substr(t+1)]}(o)),this.engine.listen(this.namespaceId,r,o,c,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(t,e,i)}}let YG=(()=>{class n extends mS{constructor(e,i,r){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ie),l.LFG(Y1),l.LFG(oR))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Bm=new l.OlP("AnimationModuleType"),k2=[{provide:GL,useClass:jG},{provide:oR,useFactory:function ZG(){return new fG}},{provide:mS,useClass:YG},{provide:l.FYo,useFactory:function KG(n,t,e){return new GG(n,t,e)},deps:[ca,mS,l.R0b]}],R2=[{provide:Y1,useFactory:()=>new UG},{provide:Bm,useValue:"BrowserAnimations"},...k2],QG=[{provide:Y1,useClass:o2},{provide:Bm,useValue:"NoopAnimations"},...k2];let XG=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?QG:R2}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:R2,imports:[tl]}),n})();const eq=new l.OlP("mat-sanity-checks",{providedIn:"root",factory:function JG(){return!0}});let Xn=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!P1()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(HL),l.LFG(eq,8),l.LFG(ie))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Hw],Hw]}),n})();function hR(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Qn(t)}}}function fR(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function Vm(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Qn(t)}}}const iq=new l.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function rq(){return(0,l.f3M)(l.soG)}});class ds{constructor(){this._localeChanges=new pt.x,this.localeChanges=this._localeChanges}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let i=this.isValid(t),r=this.isValid(e);return i&&r?!this.compareDate(t,e):i==r}return t==e}clampDate(t,e,i){return e&&this.compareDate(t,e)<0?e:i&&this.compareDate(t,i)>0?i:t}}const Um=new l.OlP("mat-date-formats"),oq=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function pR(n,t){const e=Array(n);for(let i=0;i<n;i++)e[i]=t(i);return e}let sq=(()=>{class n extends ds{constructor(e,i){super(),this.useUtcForDisplay=!1,super.setLocale(e)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){const i=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return pR(12,r=>this._format(i,new Date(2017,r,1)))}getDateNames(){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return pR(31,i=>this._format(e,new Date(2017,0,i+1)))}getDayOfWeekNames(e){const i=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return pR(7,r=>this._format(i,new Date(2017,0,r+1)))}getYearName(e){const i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(i,e)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,i,r){let o=this._createDateWithOverflow(e,i,r);return o.getMonth(),o}today(){return new Date}parse(e){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,i){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");const r=new Intl.DateTimeFormat(this.locale,Object.assign(Object.assign({},i),{timeZone:"utc"}));return this._format(r,e)}addCalendarYears(e,i){return this.addCalendarMonths(e,12*i)}addCalendarMonths(e,i){let r=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+i,this.getDate(e));return this.getMonth(r)!=((this.getMonth(e)+i)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(e,i){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+i)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(oq.test(e)){let i=new Date(e);if(this.isValid(i))return i}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,i,r){const o=new Date;return o.setFullYear(e,i,r),o.setHours(0,0,0,0),o}_2digit(e){return("00"+e).slice(-2)}_format(e,i){const r=new Date;return r.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),r.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),e.format(r)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(iq,8),l.LFG(Dl))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const aq={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let lq=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[{provide:ds,useClass:sq}]}),n})(),cq=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[{provide:Um,useValue:aq}],imports:[[lq]]}),n})(),P2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),n})();function Yw(n,t,e){n.nativeElement.classList.toggle(t,e)}let F2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Xn],Xn]}),n})();class uq{constructor(t,e,i){this._renderer=t,this.element=e,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const L2={enterDuration:225,exitDuration:150},mR=WI({passive:!0}),B2=["mousedown","touchstart"],V2=["mouseup","mouseleave","touchend","touchcancel"];class hq{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=fb(i))}fadeInRipple(t,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=Object.assign(Object.assign({},L2),i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const c=i.radius||function pq(n,t,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),d=t-r.left,p=e-r.top,b=o.enterDuration,E=document.createElement("div");E.classList.add("mat-ripple-element"),E.style.left=d-c+"px",E.style.top=p-c+"px",E.style.height=2*c+"px",E.style.width=2*c+"px",null!=i.color&&(E.style.backgroundColor=i.color),E.style.transitionDuration=`${b}ms`,this._containerElement.appendChild(E),function fq(n){window.getComputedStyle(n).getPropertyValue("opacity")}(E),E.style.transform="scale(1)";const D=new uq(this,E,i);return D.state=0,this._activeRipples.add(D),i.persistent||(this._mostRecentTransientRipple=D),this._runTimeoutOutsideZone(()=>{const R=D===this._mostRecentTransientRipple;D.state=1,!i.persistent&&(!R||!this._isPointerDown)&&D.fadeOut()},b),D}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const i=t.element,r=Object.assign(Object.assign({},L2),t.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,i.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=fb(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(B2))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(V2),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=B1(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!V1(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,mR)})})}_removeTriggerEvents(){this._triggerElement&&(B2.forEach(t=>{this._triggerElement.removeEventListener(t,this,mR)}),this._pointerUpEventsRegistered&&V2.forEach(t=>{this._triggerElement.removeEventListener(t,this,mR)}))}}const mq=new l.OlP("mat-ripple-global-options");let _b=(()=>{class n{constructor(e,i,r,o,c){this._elementRef=e,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new hq(this,i,e,r)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(Dl),l.Y36(mq,8),l.Y36(Bm,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,i){2&e&&l.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),Zw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Xn],Xn]}),n})(),gR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Xn]]}),n})(),_R=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Zw,kn,Xn,gR]]}),n})();const _q=["mat-button",""],vq=["*"],yq=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],wq=fR(hR(Vm(class{constructor(n){this._elementRef=n}})));let _S=(()=>{class n extends wq{constructor(e,i,r){super(e),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const o of yq)this._hasHostAttributes(o)&&this._getHostElement().classList.add(o);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,i){e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(Rm),l.Y36(Bm,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,i){if(1&e&&l.Gf(_b,5),2&e){let r;l.iGM(r=l.CRH())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,i){2&e&&(l.uIk("disabled",i.disabled||null),l.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[l.qOj],attrs:_q,ngContentSelectors:vq,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,i){1&e&&(l.F$t(),l.TgZ(0,"span",0),l.Hsn(1),l.qZA(),l._UZ(2,"span",1)(3,"span",2)),2&e&&(l.xp6(2),l.ekj("mat-button-ripple-round",i.isRoundButton||i.isIconButton),l.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[_b],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),U2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Zw,Xn],Xn]}),n})(),Cq=(()=>{class n{constructor(e,i,r,o,c){this.interService=e,this.racService=i,this.swUpdate=r,this.recoService=o,this.chargeService=c,this.swUpdate.versionUpdates.pipe(gn(p=>"VERSION_READY"===p.type),(0,et.U)(p=>({type:"UPDATE_AVAILABLE",current:p.currentVersion,available:p.latestVersion})))}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Sm),l.Y36(yL),l.Y36(M1),l.Y36(SL),l.Y36(k1))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-home-page"]],decls:8,vars:0,consts:[["color","primary","mat-raised-button","","routerLink","/addInter"],["color","primary","mat-raised-button","","routerLink","/addReconnexion"],["color","accent","mat-raised-button","","routerLink","/addSav"],["color","accent","mat-raised-button","","routerLink","/addCharge"]],template:function(e,i){1&e&&(l.TgZ(0,"button",0),l._uU(1,"Add Raccordement"),l.qZA(),l.TgZ(2,"button",1),l._uU(3,"Add Reconnexion (PLP)"),l.qZA(),l.TgZ(4,"button",2),l._uU(5,"Add SAV"),l.qZA(),l.TgZ(6,"button",3),l._uU(7,"Add Charge"),l.qZA())},directives:[_S,Dp],styles:[""]}),n})();class vb{constructor(t){this.id=Number.parseInt((new Date).getUTCFullYear().toString()+(new Date).getUTCMonth().toString()+(new Date).getUTCMinutes().toString()+(new Date).getMilliseconds().toString()),this.numero="",this.typeIntervention=t,this.date=new Date}}function j2(...n){const t=(0,qn.jO)(n),{args:e,keys:i}=sl(n),r=new zn.y(o=>{const{length:c}=e;if(!c)return void o.complete();const d=new Array(c);let p=c,b=c;for(let E=0;E<c;E++){let D=!1;(0,pa.Xf)(e[E]).subscribe((0,On.x)(o,R=>{D||(D=!0,b--),d[E]=R},()=>p--,void 0,()=>{(!p||!D)&&(b||o.next(i?fa(i,d):d),o.complete())}))}});return t?r.pipe(Uc(t)):r}let H2=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),jm=(()=>{class n extends H2{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const Ho=new l.OlP("NgValueAccessor"),xq={provide:Ho,useExisting:(0,l.Gpc)(()=>Sf),multi:!0},Iq=new l.OlP("CompositionEventMode");let Sf=(()=>{class n extends H2{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Dq(){const n=U()?U().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(Iq,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&l.NdJ("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[l._Bn([xq]),l.qOj]}),n})();function Tf(n){return null==n||0===n.length}function G2(n){return null!=n&&"number"==typeof n.length}const po=new l.OlP("NgValidators"),Mf=new l.OlP("NgAsyncValidators"),Sq=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class fc{static min(t){return function q2(n){return t=>{if(Tf(t.value)||Tf(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function z2(n){return t=>{if(Tf(t.value)||Tf(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return W2(t)}static requiredTrue(t){return function Y2(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function Z2(n){return Tf(n.value)||Sq.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function K2(n){return t=>Tf(t.value)||!G2(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function Q2(n){return t=>G2(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function X2(n){if(!n)return vS;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(Tf(i.value))return null;const r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return rB(t)}static composeAsync(t){return oB(t)}}function W2(n){return Tf(n.value)?{required:!0}:null}function vS(n){return null}function J2(n){return null!=n}function eB(n){const t=(0,l.QGY)(n)?(0,Dn.D)(n):n;return(0,l.CqO)(t),t}function tB(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function nB(n,t){return t.map(e=>e(n))}function iB(n){return n.map(t=>function Tq(n){return!n.validate}(t)?t:e=>t.validate(e))}function rB(n){if(!n)return null;const t=n.filter(J2);return 0==t.length?null:function(e){return tB(nB(e,t))}}function vR(n){return null!=n?rB(iB(n)):null}function oB(n){if(!n)return null;const t=n.filter(J2);return 0==t.length?null:function(e){return j2(nB(e,t).map(eB)).pipe((0,et.U)(tB))}}function bR(n){return null!=n?oB(iB(n)):null}function sB(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function aB(n){return n._rawValidators}function lB(n){return n._rawAsyncValidators}function yR(n){return n?Array.isArray(n)?n:[n]:[]}function bS(n,t){return Array.isArray(n)?n.includes(t):n===t}function cB(n,t){const e=yR(t);return yR(n).forEach(r=>{bS(e,r)||e.push(r)}),e}function uB(n,t){return yR(t).filter(e=>!bS(n,e))}class dB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=vR(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=bR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Af extends dB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class hs extends dB{get formDirective(){return null}get path(){return null}}class hB{constructor(t){this._cd=t}is(t){var e,i,r;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[t])}}let bb=(()=>{class n extends hB{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Af,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&l.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[l.qOj]}),n})(),yb=(()=>{class n extends hB{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(hs,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&l.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[l.qOj]}),n})();function Kw(n,t){ER(n,t),t.valueAccessor.writeValue(n.value),function Fq(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&pB(n,t)})}(n,t),function Bq(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function Lq(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&pB(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function Nq(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function CS(n,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),xS(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ES(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function ER(n,t){const e=aB(n);null!==t.validator?n.setValidators(sB(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=lB(n);null!==t.asyncValidator?n.setAsyncValidators(sB(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();ES(t._rawValidators,r),ES(t._rawAsyncValidators,r)}function xS(n,t){let e=!1;if(null!==n){if(null!==t.validator){const r=aB(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(c=>c!==t.validator);o.length!==r.length&&(e=!0,n.setValidators(o))}}if(null!==t.asyncValidator){const r=lB(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(c=>c!==t.asyncValidator);o.length!==r.length&&(e=!0,n.setAsyncValidators(o))}}}const i=()=>{};return ES(t._rawValidators,i),ES(t._rawAsyncValidators,i),e}function pB(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function IR(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const Qw="VALID",DS="INVALID",wb="PENDING",Xw="DISABLED";function TR(n){return(IS(n)?n.validators:n)||null}function vB(n){return Array.isArray(n)?vR(n):n||null}function MR(n,t){return(IS(t)?t.asyncValidators:n)||null}function bB(n){return Array.isArray(n)?bR(n):n||null}function IS(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const AR=n=>n instanceof Nn,SS=n=>n instanceof TS,yB=n=>n instanceof xB;function wB(n){return AR(n)?n.value:n.getRawValue()}function CB(n,t){const e=SS(n),i=n.controls;if(!(e?Object.keys(i):i).length)throw new l.vHH(1e3,"");if(!i[t])throw new l.vHH(1001,"")}function EB(n,t){SS(n),n._forEachChild((i,r)=>{if(void 0===t[r])throw new l.vHH(1002,"")})}class kR{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=vB(this._rawValidators),this._composedAsyncValidatorFn=bB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Qw}get invalid(){return this.status===DS}get pending(){return this.status==wb}get disabled(){return this.status===Xw}get enabled(){return this.status!==Xw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=vB(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=bB(t)}addValidators(t){this.setValidators(cB(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(cB(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(uB(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(uB(t,this._rawAsyncValidators))}hasValidator(t){return bS(this._rawValidators,t)}hasAsyncValidator(t){return bS(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=wb,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Xw,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Qw,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qw||this.status===wb)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xw:Qw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=wb,this._hasOwnPendingAsyncValidator=!0;const e=eB(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function Hq(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(e)),Array.isArray(t)&&0===t.length))return null;let i=n;return t.forEach(r=>{i=SS(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:yB(i)&&i.at(r)||null}),i}(this,t,".")}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?Xw:this.errors?DS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wb)?wb:this._anyControlsHaveStatus(DS)?DS:Qw}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){IS(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Nn extends kR{constructor(t=null,e,i){super(TR(e),MR(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),IS(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){IR(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){IR(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class TS extends kR{constructor(t,e,i){super(TR(e),MR(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){EB(this,t),Object.keys(t).forEach(i=>{CB(this,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=wB(e),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const i=this.controls[e];if(this.contains(e)&&t(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,i)=>((e.enabled||this.disabled)&&(t[i]=e.value),t))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class xB extends kR{constructor(t,e,i){super(TR(e),MR(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){EB(this,t),t.forEach((i,r)=>{CB(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>wB(t))}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let Cb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const zq={provide:Ho,useExisting:(0,l.Gpc)(()=>Eb),multi:!0};let Eb=(()=>{class n extends jm{writeValue(e){this.setProperty("value",null==e?"":e)}registerOnChange(e){this.onChange=i=>{e(""==i?null:parseFloat(i))}}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,i){1&e&&l.NdJ("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[l._Bn([zq]),l.qOj]}),n})(),MB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const OR=new l.OlP("NgModelWithFormControlWarning"),Qq={provide:hs,useExisting:(0,l.Gpc)(()=>kf)};let kf=(()=>{class n extends hs{constructor(e,i){super(),this.validators=e,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new l.vpe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(xS(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return Kw(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){CS(e.control||null,e,!1),IR(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,function _B(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(CS(i||null,e),AR(r)&&(Kw(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);(function mB(n,t){ER(n,t)})(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function Vq(n,t){return xS(n,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ER(this.form,this),this._oldForm&&xS(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(po,10),l.Y36(Mf,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&l.NdJ("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([Qq]),l.qOj,l.TTD]}),n})();const ez={provide:Af,useExisting:(0,l.Gpc)(()=>Hm)};let Hm=(()=>{class n extends Af{constructor(e,i,r,o,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new l.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function DR(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(o=>{o.constructor===Sf?e=o:function jq(n){return Object.getPrototypeOf(n.constructor)===jm}(o)?i=o:r=o}),r||i||e||null}(0,o)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function xR(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function wS(n,t){return[...t.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(l.Y36(hs,13),l.Y36(po,10),l.Y36(Mf,10),l.Y36(Ho,10),l.Y36(OR,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[l._Bn([ez]),l.qOj,l.TTD]}),n})();const tz={provide:Ho,useExisting:(0,l.Gpc)(()=>$m),multi:!0};function PB(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let $m=(()=>{class n extends jm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=PB(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function nz(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,i){1&e&&l.NdJ("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[l._Bn([tz]),l.qOj]}),n})(),eC=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(PB(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36($m,9))},n.\u0275dir=l.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const iz={provide:Ho,useExisting:(0,l.Gpc)(()=>FR),multi:!0};function NB(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let FR=(()=>{class n extends jm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const r=e.map(o=>this._getOptionId(o));i=(o,c)=>{o._setSelected(r.indexOf(c.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const r=[],o=i.selectedOptions;if(void 0!==o){const c=o;for(let d=0;d<c.length;d++){const b=this._getOptionValue(c[d].value);r.push(b)}}else{const c=i.options;for(let d=0;d<c.length;d++){const p=c[d];if(p.selected){const b=this._getOptionValue(p.value);r.push(b)}}}this.value=r,e(r)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function rz(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,i){1&e&&l.NdJ("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[l._Bn([iz]),l.qOj]}),n})(),tC=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(NB(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(NB(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(FR,9))},n.\u0275dir=l.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Gm=(()=>{class n{constructor(){this._validator=vS}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):vS,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,features:[l.TTD]}),n})();const lz={provide:po,useExisting:(0,l.Gpc)(()=>qm),multi:!0};let qm=(()=>{class n extends Gm{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=e=>function oz(n){return null!=n&&!1!==n&&"false"!=`${n}`}(e),this.createValidator=e=>W2}enabled(e){return e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,i){2&e&&l.uIk("required",i._enabled?"":null)},inputs:{required:"required"},features:[l._Bn([lz]),l.qOj]}),n})(),qB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[MB]]}),n})(),zB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[qB]}),n})(),WB=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:OR,useValue:e.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[qB]}),n})(),nC=(()=>{class n{group(e,i=null){const r=this._reduceControls(e);let d,o=null,c=null;return null!=i&&(function pz(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(i)?(o=null!=i.validators?i.validators:null,c=null!=i.asyncValidators?i.asyncValidators:null,d=null!=i.updateOn?i.updateOn:void 0):(o=null!=i.validator?i.validator:null,c=null!=i.asyncValidator?i.asyncValidator:null)),new TS(r,{asyncValidators:c,updateOn:d,validators:o})}control(e,i,r){return new Nn(e,i,r)}array(e,i,r){const o=e.map(c=>this._createControl(c));return new xB(o,i,r)}_reduceControls(e){const i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){return AR(e)||SS(e)||yB(e)?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:WB}),n})();class pc{constructor(t){this.name="",this.url="",this.file=t}}class LR{constructor(t){this.id=0,this.type=t}}const mz=["*",[["mat-card-footer"]]],gz=["*","mat-card-footer"];let MS=(()=>{class n{constructor(e){this._animationMode=e}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Bm,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(e,i){2&e&&l.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)},exportAs:["matCard"],ngContentSelectors:gz,decls:2,vars:0,template:function(e,i){1&e&&(l.F$t(mz),l.Hsn(0),l.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),_z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Xn],Xn]}),n})();var YB=V(4408);const iC={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=iC;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(o=>{e=void 0,n(o)});return new Wn.w0(()=>null==e?void 0:e(r))},requestAnimationFrame(...n){const{delegate:t}=iC;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=iC;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var ZB=V(7565);const KB=new class bz extends ZB.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class vz extends YB.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=iC.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(iC.cancelAnimationFrame(e),t._scheduled=void 0)}});let BR,yz=1;const AS={};function QB(n){return n in AS&&(delete AS[n],!0)}const wz={setImmediate(n){const t=yz++;return AS[t]=!0,BR||(BR=Promise.resolve()),BR.then(()=>QB(t)&&n()),t},clearImmediate(n){QB(n)}},{setImmediate:Cz,clearImmediate:Ez}=wz,kS={setImmediate(...n){const{delegate:t}=kS;return((null==t?void 0:t.setImmediate)||Cz)(...n)},clearImmediate(n){const{delegate:t}=kS;return((null==t?void 0:t.clearImmediate)||Ez)(n)},delegate:void 0},VR=new class Dz extends ZB.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class xz extends YB.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=kS.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(kS.clearImmediate(e),t._scheduled=void 0)}});function XB(n,t=Ph.z){return function Iz(n){return(0,Yn.e)((t,e)=>{let i=!1,r=null,o=null,c=!1;const d=()=>{if(null==o||o.unsubscribe(),o=null,i){i=!1;const b=r;r=null,e.next(b)}c&&e.complete()},p=()=>{o=null,c&&e.complete()};t.subscribe((0,On.x)(e,b=>{i=!0,r=b,o||(0,pa.Xf)(n(b)).subscribe(o=(0,On.x)(e,d,p))},()=>{c=!0,(!i||!o||o.closed)&&e.complete()}))})}(()=>S1(n,t))}let Tz=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new pt.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new zn.y(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(XB(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):st()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(gn(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,e)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=fb(i),o=e.getElementRef().nativeElement;do{if(r==o)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Tm(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.R0b),l.LFG(Dl),l.LFG(ie,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JB=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new pt.x,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,o=r.getBoundingClientRect();return{top:-o.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-o.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(XB(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Dl),l.LFG(l.R0b),l.LFG(ie,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),eV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Hw,rC],Hw,rC]}),n})();class UR{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class tV extends UR{constructor(t,e,i,r){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r}}class nV extends UR{constructor(t,e,i){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class Az extends UR{constructor(t){super(),this.element=t instanceof l.SBq?t.nativeElement:t}}class iV{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof tV?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof nV?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof Az?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class kz extends iV{constructor(t,e,i,r,o){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=c=>{const d=c.element,p=this._document.createComment("dom-portal");d.parentNode.insertBefore(p,d),this.outletElement.appendChild(d),this._attachedPortal=c,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(d,p)})},this._document=o}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||l.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Rz=(()=>{class n extends iV{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new l.vpe,this.attachDomPortal=o=>{const c=o.element,d=this._document.createComment("dom-portal");o.setAttachedHost(this),c.parentNode.insertBefore(d,c),this._getRootNode().appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(c,d)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,o=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),c=i.createComponent(o,i.length,e.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=e,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l._Vd),l.Y36(l.s_b),l.Y36(ie))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[l.qOj]}),n})(),rV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const oV=p4();class Oz{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=sr(-this._previousScrollPosition.left),t.style.top=sr(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,o=i.scrollBehavior||"",c=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),oV&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),oV&&(i.scrollBehavior=o,r.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class Pz{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class sV{enable(){}disable(){}attach(){}}function jR(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function aV(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class Nz{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();jR(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Fz=(()=>{class n{constructor(e,i,r,o){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new sV,this.close=c=>new Pz(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new Oz(this._viewportRuler,this._document),this.reposition=c=>new Nz(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=o}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Tz),l.LFG(JB),l.LFG(l.R0b),l.LFG(ie))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class lV{constructor(t){if(this.scrollStrategy=new sV,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class Lz{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}class Bz{constructor(t,e,i,r,o,c,d,p,b){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=c,this._document=d,this._location=p,this._outsideClickDispatcher=b,this._backdropElement=null,this._backdropClick=new pt.x,this._attachments=new pt.x,this._detachments=new pt.x,this._locationChanges=Wn.w0.EMPTY,this._backdropClickHandler=E=>this._backdropClick.next(E),this._backdropTransitionendHandler=E=>{this._disposeBackdrop(E.target)},this._keydownEvents=new pt.x,this._outsidePointerEvents=new pt.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Bn.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){var t;const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(t=this._host)||void 0===t||t.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=sr(this._config.width),t.height=sr(this._config.height),t.minWidth=sr(this._config.minWidth),t.minHeight=sr(this._config.minHeight),t.maxWidth=sr(this._config.maxWidth),t.maxHeight=sr(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;!t||(t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500)))}_toggleClasses(t,e,i){const r=RL(e||[]).filter(o=>!!o);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(wu((0,Ia.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let cV=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){var e;null===(e=this._containerElement)||void 0===e||e.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||P1()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}const i=this._document.createElement("div");i.classList.add(e),P1()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ie),l.LFG(Dl))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uV="cdk-overlay-connected-position-bounding-box",Vz=/([A-Za-z%]+)$/;class Uz{constructor(t,e,i,r,o){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new pt.x,this._resizeSubscription=Wn.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(uV),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let c;for(let d of this._preferredPositions){let p=this._getOriginPoint(t,r,d),b=this._getOverlayPoint(p,e,d),E=this._getOverlayFit(b,e,i,d);if(E.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,p);this._canFitWithFlexibleDimensions(E,b,i)?o.push({position:d,origin:p,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(p,d)}):(!c||c.overlayFit.visibleArea<E.visibleArea)&&(c={overlayFit:E,overlayPoint:b,originPoint:p,position:d,overlayRect:e})}if(o.length){let d=null,p=-1;for(const b of o){const E=b.boundingBoxRect.width*b.boundingBoxRect.height*(b.position.weight||1);E>p&&(p=E,d=b)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&zm(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(uV),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r,o;if("center"==i.originX)r=t.left+t.width/2;else{const c=this._isRtl()?t.right:t.left,d=this._isRtl()?t.left:t.right;r="start"==i.originX?c:d}return e.left<0&&(r-=e.left),o="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,e.top<0&&(o-=e.top),{x:r,y:o}}_getOverlayPoint(t,e,i){let r,o;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,o="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+r,y:t.y+o}}_getOverlayFit(t,e,i,r){const o=hV(e);let{x:c,y:d}=t,p=this._getOffset(r,"x"),b=this._getOffset(r,"y");p&&(c+=p),b&&(d+=b);let R=0-d,N=d+o.height-i.height,B=this._subtractOverflows(o.width,0-c,c+o.width-i.width),K=this._subtractOverflows(o.height,R,N),ce=B*K;return{visibleArea:ce,isCompletelyWithinViewport:o.width*o.height===ce,fitsInViewportVertically:K===o.height,fitsInViewportHorizontally:B==o.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,o=i.right-e.x,c=dV(this._overlayRef.getConfig().minHeight),d=dV(this._overlayRef.getConfig().minWidth),b=t.fitsInViewportHorizontally||null!=d&&d<=o;return(t.fitsInViewportVertically||null!=c&&c<=r)&&b}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=hV(e),o=this._viewportRect,c=Math.max(t.x+r.width-o.width,0),d=Math.max(t.y+r.height-o.height,0),p=Math.max(o.top-i.top-t.y,0),b=Math.max(o.left-i.left-t.x,0);let E=0,D=0;return E=r.width<=o.width?b||-c:t.x<this._viewportMargin?o.left-i.left-t.x:0,D=r.height<=o.height?p||-d:t.y<this._viewportMargin?o.top-i.top-t.y:0,this._previousPushAmount={x:E,y:D},{x:t.x+E,y:t.y+D}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new Lz(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,r=this._isRtl();let o,c,d,E,D,R;if("top"===e.overlayY)c=t.y,o=i.height-c+this._viewportMargin;else if("bottom"===e.overlayY)d=i.height-t.y+2*this._viewportMargin,o=i.height-d+this._viewportMargin;else{const N=Math.min(i.bottom-t.y+i.top,t.y),B=this._lastBoundingBoxSize.height;o=2*N,c=t.y-N,o>B&&!this._isInitialRender&&!this._growAfterOpen&&(c=t.y-B/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)R=i.width-t.x+this._viewportMargin,E=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)D=t.x,E=i.right-t.x;else{const N=Math.min(i.right-t.x+i.left,t.x),B=this._lastBoundingBoxSize.width;E=2*N,D=t.x-N,E>B&&!this._isInitialRender&&!this._growAfterOpen&&(D=t.x-B/2)}return{top:c,left:D,bottom:d,right:R,width:E,height:o}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;r.height=sr(i.height),r.top=sr(i.top),r.bottom=sr(i.bottom),r.width=sr(i.width),r.left=sr(i.left),r.right=sr(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=sr(o)),c&&(r.maxWidth=sr(c))}this._lastBoundingBoxSize=i,zm(this._boundingBox.style,r)}_resetBoundingBoxStyles(){zm(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){zm(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(r){const E=this._viewportRuler.getViewportScrollPosition();zm(i,this._getExactOverlayY(e,t,E)),zm(i,this._getExactOverlayX(e,t,E))}else i.position="static";let d="",p=this._getOffset(e,"x"),b=this._getOffset(e,"y");p&&(d+=`translateX(${p}px) `),b&&(d+=`translateY(${b}px)`),i.transform=d.trim(),c.maxHeight&&(r?i.maxHeight=sr(c.maxHeight):o&&(i.maxHeight="")),c.maxWidth&&(r?i.maxWidth=sr(c.maxWidth):o&&(i.maxWidth="")),zm(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=sr(o.y),r}_getExactOverlayX(t,e,i){let c,r={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),c=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===c?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=sr(o.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:aV(t,i),isOriginOutsideView:jR(t,i),isOverlayClipped:aV(e,i),isOverlayOutsideView:jR(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&RL(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof l.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function zm(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function dV(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(Vz);return e&&"px"!==e?null:parseFloat(t)}return n||null}function hV(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const fV="cdk-global-overlay-wrapper";class jz{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(fV),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:c,maxHeight:d}=i,p=!("100%"!==r&&"100vw"!==r||c&&"100%"!==c&&"100vw"!==c),b=!("100%"!==o&&"100vh"!==o||d&&"100%"!==d&&"100vh"!==d);t.position=this._cssPosition,t.marginLeft=p?"0":this._leftOffset,t.marginTop=b?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,p?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=b?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(fV),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let Hz=(()=>{class n{constructor(e,i,r,o){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=o}global(){return new jz}flexibleConnectedTo(e){return new Uz(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(JB),l.LFG(ie),l.LFG(Dl),l.LFG(cV))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pV=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ie))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$z=(()=>{class n extends pV{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const o=this._attachedOverlays;for(let c=o.length-1;c>-1;c--)if(o[c]._keydownEvents.observers.length>0){const d=o[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ie),l.LFG(l.R0b,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Gz=(()=>{class n extends pV{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=Am(o)},this._clickListener=o=>{const c=Am(o),d="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let b=p.length-1;b>-1;b--){const E=p[b];if(E._outsidePointerEvents.observers.length<1||!E.hasAttached())continue;if(E.overlayElement.contains(c)||E.overlayElement.contains(d))break;const D=E._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>D.next(o)):D.next(o)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ie),l.LFG(Dl),l.LFG(l.R0b,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qz=0,xb=(()=>{class n{constructor(e,i,r,o,c,d,p,b,E,D,R){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=c,this._injector=d,this._ngZone=p,this._document=b,this._directionality=E,this._location=D,this._outsideClickDispatcher=R}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),c=new lV(e);return c.direction=c.direction||this._directionality.value,new Bz(o,i,r,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+qz++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(l.z2F)),new kz(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Fz),l.LFG(cV),l.LFG(l._Vd),l.LFG(Hz),l.LFG($z),l.LFG(l.zs3),l.LFG(l.R0b),l.LFG(ie),l.LFG(jw),l.LFG(Ee),l.LFG(Gz))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Yz={provide:new l.OlP("cdk-connected-overlay-scroll-strategy"),deps:[xb],useFactory:function Wz(n){return()=>n.scrollStrategies.reposition()}};let HR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[xb,Yz],imports:[[Hw,rV,eV],eV]}),n})(),mV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[kn,Xn,OL],Xn]}),n})();const t8=["mat-calendar-body",""];function n8(n,t){if(1&n&&(l.TgZ(0,"tr",2)(1,"td",3),l._uU(2),l.qZA()()),2&n){const e=l.oxw();l.xp6(1),l.Udp("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),l.uIk("colspan",e.numCols),l.xp6(1),l.hij(" ",e.label," ")}}function r8(n,t){if(1&n&&(l.TgZ(0,"td",3),l._uU(1),l.qZA()),2&n){const e=l.oxw(2);l.Udp("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),l.uIk("colspan",e._firstRowOffset),l.xp6(1),l.hij(" ",e._firstRowOffset>=e.labelMinRequiredCells?e.label:""," ")}}function o8(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"td",7)(1,"button",8),l.NdJ("click",function(r){const c=l.CHM(e).$implicit;return l.oxw(2)._cellClicked(c,r)}),l.TgZ(2,"div",9),l._uU(3),l.qZA(),l._UZ(4,"div",10),l.qZA()()}if(2&n){const e=t.$implicit,i=t.index,r=l.oxw().index,o=l.oxw();l.Udp("width",o._cellWidth)("padding-top",o._cellPadding)("padding-bottom",o._cellPadding),l.uIk("data-mat-row",r)("data-mat-col",i),l.xp6(1),l.ekj("mat-calendar-body-disabled",!e.enabled)("mat-calendar-body-active",o._isActiveCell(r,i))("mat-calendar-body-range-start",o._isRangeStart(e.compareValue))("mat-calendar-body-range-end",o._isRangeEnd(e.compareValue))("mat-calendar-body-in-range",o._isInRange(e.compareValue))("mat-calendar-body-comparison-bridge-start",o._isComparisonBridgeStart(e.compareValue,r,i))("mat-calendar-body-comparison-bridge-end",o._isComparisonBridgeEnd(e.compareValue,r,i))("mat-calendar-body-comparison-start",o._isComparisonStart(e.compareValue))("mat-calendar-body-comparison-end",o._isComparisonEnd(e.compareValue))("mat-calendar-body-in-comparison-range",o._isInComparisonRange(e.compareValue))("mat-calendar-body-preview-start",o._isPreviewStart(e.compareValue))("mat-calendar-body-preview-end",o._isPreviewEnd(e.compareValue))("mat-calendar-body-in-preview",o._isInPreview(e.compareValue)),l.Q6J("ngClass",e.cssClasses)("tabindex",o._isActiveCell(r,i)?0:-1),l.uIk("aria-label",e.ariaLabel)("aria-disabled",!e.enabled||null)("aria-pressed",o._isSelected(e.compareValue))("aria-current",o.todayValue===e.compareValue?"date":null),l.xp6(1),l.ekj("mat-calendar-body-selected",o._isSelected(e.compareValue))("mat-calendar-body-comparison-identical",o._isComparisonIdentical(e.compareValue))("mat-calendar-body-today",o.todayValue===e.compareValue),l.xp6(1),l.hij(" ",e.displayValue," ")}}function s8(n,t){if(1&n&&(l.TgZ(0,"tr",4),l.YNc(1,r8,2,6,"td",5),l.YNc(2,o8,5,47,"td",6),l.qZA()),2&n){const e=t.$implicit,i=t.index,r=l.oxw();l.xp6(1),l.Q6J("ngIf",0===i&&r._firstRowOffset),l.xp6(1),l.Q6J("ngForOf",e)}}function a8(n,t){if(1&n&&(l.TgZ(0,"th",5)(1,"span",6),l._uU(2),l.qZA(),l.TgZ(3,"span",7),l._uU(4),l.qZA()()),2&n){const e=t.$implicit;l.xp6(2),l.Oqu(e.long),l.xp6(2),l.Oqu(e.narrow)}}const l8=["*"];function c8(n,t){}function u8(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"mat-month-view",5),l.NdJ("activeDateChange",function(r){return l.CHM(e),l.oxw().activeDate=r})("_userSelection",function(r){return l.CHM(e),l.oxw()._dateSelected(r)}),l.qZA()}if(2&n){const e=l.oxw();l.Q6J("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)("comparisonStart",e.comparisonStart)("comparisonEnd",e.comparisonEnd)}}function d8(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"mat-year-view",6),l.NdJ("activeDateChange",function(r){return l.CHM(e),l.oxw().activeDate=r})("monthSelected",function(r){return l.CHM(e),l.oxw()._monthSelectedInYearView(r)})("selectedChange",function(r){return l.CHM(e),l.oxw()._goToDateInView(r,"month")}),l.qZA()}if(2&n){const e=l.oxw();l.Q6J("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function h8(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"mat-multi-year-view",7),l.NdJ("activeDateChange",function(r){return l.CHM(e),l.oxw().activeDate=r})("yearSelected",function(r){return l.CHM(e),l.oxw()._yearSelectedInMultiYearView(r)})("selectedChange",function(r){return l.CHM(e),l.oxw()._goToDateInView(r,"year")}),l.qZA()}if(2&n){const e=l.oxw();l.Q6J("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}class $R{constructor(t,e,i,r,o={},c=t,d){this.value=t,this.displayValue=e,this.ariaLabel=i,this.enabled=r,this.cssClasses=o,this.compareValue=c,this.rawValue=d}}let Db=(()=>{class n{constructor(e,i){this._elementRef=e,this._ngZone=i,this.numCols=7,this.activeCell=0,this.isRange=!1,this.cellAspectRatio=1,this.previewStart=null,this.previewEnd=null,this.selectedValueChange=new l.vpe,this.previewChange=new l.vpe,this._enterHandler=r=>{if(this._skipNextFocus&&"focus"===r.type)this._skipNextFocus=!1;else if(r.target&&this.isRange){const o=this._getCellFromElement(r.target);o&&this._ngZone.run(()=>this.previewChange.emit({value:o.enabled?o:null,event:r}))}},this._leaveHandler=r=>{null!==this.previewEnd&&this.isRange&&r.target&&this._getCellFromElement(r.target)&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:r}))},i.runOutsideAngular(()=>{const r=e.nativeElement;r.addEventListener("mouseenter",this._enterHandler,!0),r.addEventListener("focus",this._enterHandler,!0),r.addEventListener("mouseleave",this._leaveHandler,!0),r.addEventListener("blur",this._leaveHandler,!0)})}_cellClicked(e,i){e.enabled&&this.selectedValueChange.emit({value:e.value,event:i})}_isSelected(e){return this.startValue===e||this.endValue===e}ngOnChanges(e){const i=e.numCols,{rows:r,numCols:o}=this;(e.rows||i)&&(this._firstRowOffset=r&&r.length&&r[0].length?o-r[0].length:0),(e.cellAspectRatio||i||!this._cellPadding)&&(this._cellPadding=50*this.cellAspectRatio/o+"%"),(i||!this._cellWidth)&&(this._cellWidth=100/o+"%")}ngOnDestroy(){const e=this._elementRef.nativeElement;e.removeEventListener("mouseenter",this._enterHandler,!0),e.removeEventListener("focus",this._enterHandler,!0),e.removeEventListener("mouseleave",this._leaveHandler,!0),e.removeEventListener("blur",this._leaveHandler,!0)}_isActiveCell(e,i){let r=e*this.numCols+i;return e&&(r-=this._firstRowOffset),r==this.activeCell}_focusActiveCell(e=!0){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,Bn.q)(1)).subscribe(()=>{setTimeout(()=>{const i=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");i&&(e||(this._skipNextFocus=!0),i.focus())})})})}_isRangeStart(e){return GR(e,this.startValue,this.endValue)}_isRangeEnd(e){return qR(e,this.startValue,this.endValue)}_isInRange(e){return zR(e,this.startValue,this.endValue,this.isRange)}_isComparisonStart(e){return GR(e,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(e,i,r){if(!this._isComparisonStart(e)||this._isRangeStart(e)||!this._isInRange(e))return!1;let o=this.rows[i][r-1];if(!o){const c=this.rows[i-1];o=c&&c[c.length-1]}return o&&!this._isRangeEnd(o.compareValue)}_isComparisonBridgeEnd(e,i,r){if(!this._isComparisonEnd(e)||this._isRangeEnd(e)||!this._isInRange(e))return!1;let o=this.rows[i][r+1];if(!o){const c=this.rows[i+1];o=c&&c[0]}return o&&!this._isRangeStart(o.compareValue)}_isComparisonEnd(e){return qR(e,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(e){return zR(e,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(e){return this.comparisonStart===this.comparisonEnd&&e===this.comparisonStart}_isPreviewStart(e){return GR(e,this.previewStart,this.previewEnd)}_isPreviewEnd(e){return qR(e,this.previewStart,this.previewEnd)}_isInPreview(e){return zR(e,this.previewStart,this.previewEnd,this.isRange)}_getCellFromElement(e){let i;if(gV(e)?i=e:gV(e.parentNode)&&(i=e.parentNode),i){const r=i.getAttribute("data-mat-row"),o=i.getAttribute("data-mat-col");if(r&&o)return this.rows[parseInt(r)][parseInt(o)]}return null}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange"},exportAs:["matCalendarBody"],features:[l.TTD],attrs:t8,decls:2,vars:2,consts:[["aria-hidden","true",4,"ngIf"],["role","row",4,"ngFor","ngForOf"],["aria-hidden","true"],[1,"mat-calendar-body-label"],["role","row"],["class","mat-calendar-body-label",3,"paddingTop","paddingBottom",4,"ngIf"],["role","gridcell","class","mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom",4,"ngFor","ngForOf"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"ngClass","tabindex","click"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(e,i){1&e&&(l.YNc(0,n8,3,6,"tr",0),l.YNc(1,s8,3,2,"tr",1)),2&e&&(l.Q6J("ngIf",i._firstRowOffset<i.labelMinRequiredCells),l.xp6(1),l.Q6J("ngForOf",i.rows))},directives:[ti,gi,Mr],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.7142857143%;padding-right:4.7142857143%}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.cdk-high-contrast-active .mat-calendar-body-disabled{opacity:.5}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content,.cdk-high-contrast-active .cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content{outline:dotted 2px}.cdk-high-contrast-active .cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content.mat-calendar-body-selected,.cdk-high-contrast-active .cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content.mat-calendar-body-selected{outline:solid 3px}.cdk-high-contrast-active .mat-calendar-body-cell::before,.cdk-high-contrast-active .mat-calendar-body-cell::after,.cdk-high-contrast-active .mat-calendar-body-selected{background:none}.cdk-high-contrast-active .mat-calendar-body-in-range::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-start::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.cdk-high-contrast-active .mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}[dir=rtl] .mat-calendar-body-label{text-align:right}\n'],encapsulation:2,changeDetection:0}),n})();function gV(n){return"TD"===n.nodeName}function GR(n,t,e){return null!==e&&t!==e&&n<e&&n===t}function qR(n,t,e){return null!==t&&t!==e&&n>=t&&n===e}function zR(n,t,e,i){return i&&null!==t&&null!==e&&t!==e&&n>=t&&n<=e}class $a{constructor(t,e){this.start=t,this.end=e}}let Ib=(()=>{class n{constructor(e,i){this.selection=e,this._adapter=i,this._selectionChanged=new pt.x,this.selectionChanged=this._selectionChanged,this.selection=e}updateSelection(e,i){const r=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:i,oldValue:r})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}}return n.\u0275fac=function(e){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),f8=(()=>{class n extends Ib{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return null!=this.selection&&this._isValidDateInstance(this.selection)}isComplete(){return null!=this.selection}clone(){const e=new n(this._adapter);return e.updateSelection(this.selection,this),e}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ds))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const g8={provide:Ib,deps:[[new l.FiY,new l.tp0,Ib],ds],useFactory:function m8(n,t){return n||new f8(t)}},WR=new l.OlP("MAT_DATE_RANGE_SELECTION_STRATEGY");let _V=(()=>{class n{constructor(e,i,r,o,c){this._changeDetectorRef=e,this._dateFormats=i,this._dateAdapter=r,this._dir=o,this._rangeStrategy=c,this._rerenderSubscription=Wn.w0.EMPTY,this.selectedChange=new l.vpe,this._userSelection=new l.vpe,this.activeDateChange=new l.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){const i=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._hasSameMonthAndYear(i,this._activeDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof $a?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setRanges(this._selected)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Bi(null)).subscribe(()=>this._init())}ngOnChanges(e){const i=e.comparisonStart||e.comparisonEnd;i&&!i.firstChange&&this._setRanges(this.selected)}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(e){const i=e.value,r=this._dateAdapter.getYear(this.activeDate),o=this._dateAdapter.getMonth(this.activeDate),c=this._dateAdapter.createDate(r,o,i);let d,p;this._selected instanceof $a?(d=this._getDateInCurrentMonth(this._selected.start),p=this._getDateInCurrentMonth(this._selected.end)):d=p=this._getDateInCurrentMonth(this._selected),(d!==i||p!==i)&&this.selectedChange.emit(c),this._userSelection.emit({value:c,event:e.event}),this._previewStart=this._previewEnd=null,this._changeDetectorRef.markForCheck()}_handleCalendarBodyKeydown(e){const i=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:return this._selectionKeyPressed=!0,void(this._canSelect(this._activeDate)&&e.preventDefault());case 27:return void(null!=this._previewEnd&&!Gw(e)&&(this._previewStart=this._previewEnd=null,this.selectedChange.emit(null),this._userSelection.emit({value:null,event:e}),e.preventDefault(),e.stopPropagation()));default:return}this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(7+this._dateAdapter.getDayOfWeek(e)-this._dateAdapter.getFirstDayOfWeek())%7,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(e){this._matCalendarBody._focusActiveCell(e)}_previewChanged({event:e,value:i}){if(this._rangeStrategy){const o=this._rangeStrategy.createPreview(i?i.rawValue:null,this.selected,e);this._previewStart=this._getCellCompareValue(o.start),this._previewEnd=this._getCellCompareValue(o.end),this._changeDetectorRef.detectChanges()}}_initWeekdays(){const e=this._dateAdapter.getFirstDayOfWeek(),i=this._dateAdapter.getDayOfWeekNames("narrow");let o=this._dateAdapter.getDayOfWeekNames("long").map((c,d)=>({long:c,narrow:i[d]}));this._weekdays=o.slice(e).concat(o.slice(0,e))}_createWeekCells(){const e=this._dateAdapter.getNumDaysInMonth(this.activeDate),i=this._dateAdapter.getDateNames();this._weeks=[[]];for(let r=0,o=this._firstWeekOffset;r<e;r++,o++){7==o&&(this._weeks.push([]),o=0);const c=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),r+1),d=this._shouldEnableDate(c),p=this._dateAdapter.format(c,this._dateFormats.display.dateA11yLabel),b=this.dateClass?this.dateClass(c,"month"):void 0;this._weeks[this._weeks.length-1].push(new $R(r+1,i[r],p,d,b,this._getCellCompareValue(c),c))}}_shouldEnableDate(e){return!!e&&(!this.minDate||this._dateAdapter.compareDate(e,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(e,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(e))}_getDateInCurrentMonth(e){return e&&this._hasSameMonthAndYear(e,this.activeDate)?this._dateAdapter.getDate(e):null}_hasSameMonthAndYear(e,i){return!(!e||!i||this._dateAdapter.getMonth(e)!=this._dateAdapter.getMonth(i)||this._dateAdapter.getYear(e)!=this._dateAdapter.getYear(i))}_getCellCompareValue(e){if(e){const i=this._dateAdapter.getYear(e),r=this._dateAdapter.getMonth(e),o=this._dateAdapter.getDate(e);return new Date(i,r,o).getTime()}return null}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setRanges(e){e instanceof $a?(this._rangeStart=this._getCellCompareValue(e.start),this._rangeEnd=this._getCellCompareValue(e.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(e),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(e){return!this.dateFilter||this.dateFilter(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.sBO),l.Y36(Um,8),l.Y36(ds,8),l.Y36(jw,8),l.Y36(WR,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-month-view"]],viewQuery:function(e,i){if(1&e&&l.Gf(Db,5),2&e){let r;l.iGM(r=l.CRH())&&(i._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[l.TTD],decls:7,vars:13,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col",4,"ngFor","ngForOf"],["aria-hidden","true","colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","selectedValueChange","previewChange","keyup","keydown"],["scope","col"],[1,"cdk-visually-hidden"],["aria-hidden","true"]],template:function(e,i){1&e&&(l.TgZ(0,"table",0)(1,"thead",1)(2,"tr"),l.YNc(3,a8,5,2,"th",2),l.qZA(),l.TgZ(4,"tr"),l._UZ(5,"th",3),l.qZA()(),l.TgZ(6,"tbody",4),l.NdJ("selectedValueChange",function(o){return i._dateSelected(o)})("previewChange",function(o){return i._previewChanged(o)})("keyup",function(o){return i._handleCalendarBodyKeyup(o)})("keydown",function(o){return i._handleCalendarBodyKeydown(o)}),l.qZA()()),2&e&&(l.xp6(3),l.Q6J("ngForOf",i._weekdays),l.xp6(3),l.Q6J("label",i._monthLabel)("rows",i._weeks)("todayValue",i._todayDate)("startValue",i._rangeStart)("endValue",i._rangeEnd)("comparisonStart",i._comparisonRangeStart)("comparisonEnd",i._comparisonRangeEnd)("previewStart",i._previewStart)("previewEnd",i._previewEnd)("isRange",i._isRange)("labelMinRequiredCells",3)("activeCell",i._dateAdapter.getDate(i.activeDate)-1))},directives:[Db,gi],encapsulation:2,changeDetection:0}),n})(),vV=(()=>{class n{constructor(e,i,r){this._changeDetectorRef=e,this._dateAdapter=i,this._dir=r,this._rerenderSubscription=Wn.w0.EMPTY,this.selectedChange=new l.vpe,this.yearSelected=new l.vpe,this.activeDateChange=new l.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate;const r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),bV(this._dateAdapter,i,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof $a?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedYear(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Bi(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());const i=this._dateAdapter.getYear(this._activeDate)-oC(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let r=0,o=[];r<24;r++)o.push(i+r),4==o.length&&(this._years.push(o.map(c=>this._createCellForYear(c))),o=[]);this._changeDetectorRef.markForCheck()}_yearSelected(e){const i=e.value;this.yearSelected.emit(this._dateAdapter.createDate(i,0,1));let r=this._dateAdapter.getMonth(this.activeDate),o=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(i,r,1));this.selectedChange.emit(this._dateAdapter.createDate(i,r,Math.min(this._dateAdapter.getDate(this.activeDate),o)))}_handleCalendarBodyKeydown(e){const i=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-oC(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,24-oC(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-240:-24);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?240:24);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_getActiveCell(){return oC(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_createCellForYear(e){const i=this._dateAdapter.createDate(e,0,1),r=this._dateAdapter.getYearName(i),o=this.dateClass?this.dateClass(i,"multi-year"):void 0;return new $R(e,r,r,this._shouldEnableYear(e),o)}_shouldEnableYear(e){if(null==e||this.maxDate&&e>this._dateAdapter.getYear(this.maxDate)||this.minDate&&e<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(let r=this._dateAdapter.createDate(e,0,1);this._dateAdapter.getYear(r)==e;r=this._dateAdapter.addCalendarDays(r,1))if(this.dateFilter(r))return!0;return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedYear(e){if(this._selectedYear=null,e instanceof $a){const i=e.start||e.end;i&&(this._selectedYear=this._dateAdapter.getYear(i))}else e&&(this._selectedYear=this._dateAdapter.getYear(e))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.sBO),l.Y36(ds,8),l.Y36(jw,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-multi-year-view"]],viewQuery:function(e,i){if(1&e&&l.Gf(Db,5),2&e){let r;l.iGM(r=l.CRH())&&(i._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell","selectedValueChange","keyup","keydown"]],template:function(e,i){1&e&&(l.TgZ(0,"table",0)(1,"thead",1)(2,"tr"),l._UZ(3,"th",2),l.qZA()(),l.TgZ(4,"tbody",3),l.NdJ("selectedValueChange",function(o){return i._yearSelected(o)})("keyup",function(o){return i._handleCalendarBodyKeyup(o)})("keydown",function(o){return i._handleCalendarBodyKeydown(o)}),l.qZA()()),2&e&&(l.xp6(4),l.Q6J("rows",i._years)("todayValue",i._todayYear)("startValue",i._selectedYear)("endValue",i._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",i._getActiveCell()))},directives:[Db],encapsulation:2,changeDetection:0}),n})();function bV(n,t,e,i,r){const o=n.getYear(t),c=n.getYear(e),d=yV(n,i,r);return Math.floor((o-d)/24)===Math.floor((c-d)/24)}function oC(n,t,e,i){return function y8(n,t){return(n%t+t)%t}(n.getYear(t)-yV(n,e,i),24)}function yV(n,t,e){let i=0;return e?i=n.getYear(e)-24+1:t&&(i=n.getYear(t)),i}let wV=(()=>{class n{constructor(e,i,r,o){this._changeDetectorRef=e,this._dateFormats=i,this._dateAdapter=r,this._dir=o,this._rerenderSubscription=Wn.w0.EMPTY,this.selectedChange=new l.vpe,this.monthSelected=new l.vpe,this.activeDateChange=new l.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate;const r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._dateAdapter.getYear(i)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof $a?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedMonth(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Bi(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(e){const i=e.value,r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),i,1);this.monthSelected.emit(r);const o=this._dateAdapter.getNumDaysInMonth(r);this.selectedChange.emit(this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),i,Math.min(this._dateAdapter.getDate(this.activeDate),o)))}_handleCalendarBodyKeydown(e){const i=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let e=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(i=>i.map(r=>this._createCellForMonth(r,e[r]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_getMonthInCurrentYear(e){return e&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(e):null}_createCellForMonth(e,i){const r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),o=this._dateAdapter.format(r,this._dateFormats.display.monthYearA11yLabel),c=this.dateClass?this.dateClass(r,"year"):void 0;return new $R(e,i.toLocaleUpperCase(),o,this._shouldEnableMonth(e),c)}_shouldEnableMonth(e){const i=this._dateAdapter.getYear(this.activeDate);if(null==e||this._isYearAndMonthAfterMaxDate(i,e)||this._isYearAndMonthBeforeMinDate(i,e))return!1;if(!this.dateFilter)return!0;for(let o=this._dateAdapter.createDate(i,e,1);this._dateAdapter.getMonth(o)==e;o=this._dateAdapter.addCalendarDays(o,1))if(this.dateFilter(o))return!0;return!1}_isYearAndMonthAfterMaxDate(e,i){if(this.maxDate){const r=this._dateAdapter.getYear(this.maxDate),o=this._dateAdapter.getMonth(this.maxDate);return e>r||e===r&&i>o}return!1}_isYearAndMonthBeforeMinDate(e,i){if(this.minDate){const r=this._dateAdapter.getYear(this.minDate),o=this._dateAdapter.getMonth(this.minDate);return e<r||e===r&&i<o}return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedMonth(e){this._selectedMonth=e instanceof $a?this._getMonthInCurrentYear(e.start)||this._getMonthInCurrentYear(e.end):this._getMonthInCurrentYear(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.sBO),l.Y36(Um,8),l.Y36(ds,8),l.Y36(jw,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-year-view"]],viewQuery:function(e,i){if(1&e&&l.Gf(Db,5),2&e){let r;l.iGM(r=l.CRH())&&(i._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell","selectedValueChange","keyup","keydown"]],template:function(e,i){1&e&&(l.TgZ(0,"table",0)(1,"thead",1)(2,"tr"),l._UZ(3,"th",2),l.qZA()(),l.TgZ(4,"tbody",3),l.NdJ("selectedValueChange",function(o){return i._monthSelected(o)})("keyup",function(o){return i._handleCalendarBodyKeyup(o)})("keydown",function(o){return i._handleCalendarBodyKeydown(o)}),l.qZA()()),2&e&&(l.xp6(4),l.Q6J("label",i._yearLabel)("rows",i._months)("todayValue",i._todayMonth)("startValue",i._selectedMonth)("endValue",i._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",i._dateAdapter.getMonth(i.activeDate)))},directives:[Db],encapsulation:2,changeDetection:0}),n})(),KR=(()=>{class n{constructor(){this.changes=new pt.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(e,i){return`${e} \u2013 ${i}`}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),w8=0,C8=(()=>{class n{constructor(e,i,r,o,c){this._intl=e,this.calendar=i,this._dateAdapter=r,this._dateFormats=o,this._buttonDescriptionId="mat-calendar-button-"+w8++,this.calendar.stateChanges.subscribe(()=>c.markForCheck())}get periodButtonText(){if("month"==this.calendar.currentView)return this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase();if("year"==this.calendar.currentView)return this._dateAdapter.getYearName(this.calendar.activeDate);const i=this._dateAdapter.getYear(this.calendar.activeDate)-oC(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),r=i+24-1,o=this._dateAdapter.getYearName(this._dateAdapter.createDate(i,0,1)),c=this._dateAdapter.getYearName(this._dateAdapter.createDate(r,0,1));return this._intl.formatYearRange(o,c)}get periodButtonLabel(){return"month"==this.calendar.currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView="month"==this.calendar.currentView?"multi-year":"month"}previousClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?-1:-24)}nextClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?1:24)}previousEnabled(){return!this.calendar.minDate||!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate)}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(e,i){return"month"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i)&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(i):"year"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i):bV(this._dateAdapter,e,i,this.calendar.minDate,this.calendar.maxDate)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(KR),l.Y36((0,l.Gpc)(()=>sC)),l.Y36(ds,8),l.Y36(Um,8),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:l8,decls:11,vars:10,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["mat-button","","type","button","aria-live","polite",1,"mat-calendar-period-button",3,"click"],["viewBox","0 0 10 5","focusable","false",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"disabled","click"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"disabled","click"]],template:function(e,i){1&e&&(l.F$t(),l.TgZ(0,"div",0)(1,"div",1)(2,"button",2),l.NdJ("click",function(){return i.currentPeriodClicked()}),l.TgZ(3,"span"),l._uU(4),l.qZA(),l.O4$(),l.TgZ(5,"svg",3),l._UZ(6,"polygon",4),l.qZA()(),l.kcU(),l._UZ(7,"div",5),l.Hsn(8),l.TgZ(9,"button",6),l.NdJ("click",function(){return i.previousClicked()}),l.qZA(),l.TgZ(10,"button",7),l.NdJ("click",function(){return i.nextClicked()}),l.qZA()()()),2&e&&(l.xp6(2),l.uIk("aria-label",i.periodButtonLabel)("aria-describedby",i._buttonDescriptionId),l.xp6(1),l.uIk("id",i._buttonDescriptionId),l.xp6(1),l.Oqu(i.periodButtonText),l.xp6(1),l.ekj("mat-calendar-invert","month"!==i.calendar.currentView),l.xp6(4),l.Q6J("disabled",!i.previousEnabled()),l.uIk("aria-label",i.prevButtonLabel),l.xp6(1),l.Q6J("disabled",!i.nextEnabled()),l.uIk("aria-label",i.nextButtonLabel))},directives:[_S],encapsulation:2,changeDetection:0}),n})(),sC=(()=>{class n{constructor(e,i,r,o){this._dateAdapter=i,this._dateFormats=r,this._changeDetectorRef=o,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new l.vpe,this.yearSelected=new l.vpe,this.monthSelected=new l.vpe,this.viewChanged=new l.vpe(!0),this._userSelection=new l.vpe,this.stateChanges=new pt.x,this._intlChanges=e.changes.subscribe(()=>{o.markForCheck(),this.stateChanges.next()})}get startAt(){return this._startAt}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get selected(){return this._selected}set selected(e){this._selected=e instanceof $a?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get activeDate(){return this._clampedActiveDate}set activeDate(e){this._clampedActiveDate=this._dateAdapter.clampDate(e,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(e){const i=this._currentView!==e?e:null;this._currentView=e,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),i&&this.viewChanged.emit(i)}ngAfterContentInit(){this._calendarHeaderPortal=new tV(this.headerComponent||C8),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(e){const i=e.minDate&&!this._dateAdapter.sameDate(e.minDate.previousValue,e.minDate.currentValue)?e.minDate:void 0,r=e.maxDate&&!this._dateAdapter.sameDate(e.maxDate.previousValue,e.maxDate.currentValue)?e.maxDate:void 0,o=i||r||e.dateFilter;if(o&&!o.firstChange){const c=this._getCurrentViewComponent();c&&(this._changeDetectorRef.detectChanges(),c._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(e){const i=e.value;(this.selected instanceof $a||i&&!this._dateAdapter.sameDate(i,this.selected))&&this.selectedChange.emit(i),this._userSelection.emit(e)}_yearSelectedInMultiYearView(e){this.yearSelected.emit(e)}_monthSelectedInYearView(e){this.monthSelected.emit(e)}_goToDateInView(e,i){this.activeDate=e,this.currentView=i}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(KR),l.Y36(ds,8),l.Y36(Um,8),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-calendar"]],viewQuery:function(e,i){if(1&e&&(l.Gf(_V,5),l.Gf(wV,5),l.Gf(vV,5)),2&e){let r;l.iGM(r=l.CRH())&&(i.monthView=r.first),l.iGM(r=l.CRH())&&(i.yearView=r.first),l.iGM(r=l.CRH())&&(i.multiYearView=r.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection"},exportAs:["matCalendar"],features:[l._Bn([g8]),l.TTD],decls:5,vars:5,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content",3,"ngSwitch"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange"]],template:function(e,i){1&e&&(l.YNc(0,c8,0,0,"ng-template",0),l.TgZ(1,"div",1),l.YNc(2,u8,1,8,"mat-month-view",2),l.YNc(3,d8,1,6,"mat-year-view",3),l.YNc(4,h8,1,6,"mat-multi-year-view",4),l.qZA()),2&e&&(l.Q6J("cdkPortalOutlet",i._calendarHeaderPortal),l.xp6(1),l.Q6J("ngSwitch",i.currentView),l.xp6(1),l.Q6J("ngSwitchCase","month"),l.xp6(1),l.Q6J("ngSwitchCase","year"),l.xp6(1),l.Q6J("ngSwitchCase","multi-year"))},directives:[_V,wV,vV,Rz,X4,Ar,gr],styles:['.mat-calendar{display:block}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-controls .mat-icon-button:hover .mat-button-focus-overlay{opacity:.04}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.cdk-high-contrast-active .mat-calendar-arrow{fill:CanvasText}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px}\n'],encapsulation:2,changeDetection:0}),n})();const D8={provide:new l.OlP("mat-datepicker-scroll-strategy"),deps:[xb],useFactory:function x8(n){return()=>n.scrollStrategies.reposition()}};let A8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[KR,D8],imports:[[kn,U2,HR,$L,rV,Xn],rC]}),n})();const EV=function(n){return{width:n}};function k8(n,t){if(1&n&&(l.TgZ(0,"div",21)(1,"div",22),l._uU(2),l.qZA()()),2&n){const e=l.oxw();l.xp6(1),l.Q6J("ngStyle",l.VKq(3,EV,e.percentage+"%")),l.uIk("aria-valuenow",e.percentage),l.xp6(1),l.hij(" Ajout en cours ",e.percentage,"% ")}}function R8(n,t){1&n&&(l.TgZ(0,"div",1)(1,"label",37),l._uU(2,"Taille de la goulotte"),l.qZA(),l._UZ(3,"input",38),l.qZA())}function O8(n,t){if(1&n&&(l.TgZ(0,"div",21)(1,"div",22),l._uU(2),l.qZA()()),2&n){const e=l.oxw(2);l.xp6(1),l.Q6J("ngStyle",l.VKq(3,EV,e.percentage+"%")),l.uIk("aria-valuenow",e.percentage),l.xp6(1),l.hij(" Ajout en cours ",e.percentage,"% ")}}function P8(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div")(1,"button",23),l.NdJ("click",function(){return l.CHM(e),l.oxw().showInter()}),l._uU(2," Annuler "),l.qZA(),l.TgZ(3,"form",24),l.NdJ("ngSubmit",function(){return l.CHM(e),l.oxw().upload()}),l.TgZ(4,"div")(5,"div",1)(6,"label",25),l._uU(7,"Type de prestation compl\xe9mentaire"),l.qZA(),l.TgZ(8,"select",26)(9,"option",27),l._uU(10,"Installation de goulotte"),l.qZA(),l.TgZ(11,"option",28),l._uU(12,"Installation de mat\xe9riel"),l.qZA(),l.TgZ(13,"option",29),l._uU(14,"D\xe9monstration de service"),l.qZA()()(),l.YNc(15,R8,4,0,"div",30),l.TgZ(16,"div",1)(17,"label",31),l._uU(18,"Commentaire"),l.qZA(),l._UZ(19,"input",32),l.qZA(),l.TgZ(20,"div",1)(21,"label",33),l._uU(22,"Vous pouvez ajouter une capture d'\xe9cran"),l.qZA(),l._UZ(23,"br"),l.TgZ(24,"input",34),l.NdJ("change",function(r){return l.CHM(e),l.oxw().selectFilePresta(r)}),l.qZA()()(),l.TgZ(25,"button",35),l.NdJ("click",function(){return l.CHM(e),l.oxw().addPresta()}),l._uU(26," Ajouter la prestation "),l.qZA(),l.TgZ(27,"button",36),l._uU(28," Valider "),l.qZA(),l.YNc(29,O8,3,5,"div",19),l.qZA()()}if(2&n){const e=l.oxw();l.xp6(3),l.Q6J("formGroup",e.formGroupPresta),l.xp6(12),l.Q6J("ngIf","goulotte"==e.formGroupPresta.value.typePrestationControl),l.xp6(10),l.Q6J("disabled",!e.formGroupPresta.value.typePrestationControl),l.xp6(4),l.Q6J("ngIf",e.currentFileUpload)}}let N8=(()=>{class n{constructor(e,i,r){this.interService=e,this.router=i,this.fb=r,this.intervention=new vb("RACCORDEMENT"),this.prestaVue=!1,this.prestaTab=[],this.selectedAllFilesPresta=[],this.percentage=0,this.submittedInter=!1,this.submittedPresta=!1,this.selected=new Date,this.interVue=!0}ngOnInit(){this.formGroup=this.fb.group({numControl:new Nn(""),typeRaccControl:new Nn("",fc.required),comControl:new Nn("")}),this.formGroupPresta=this.fb.group({tailleControl:new Nn(""),comPrestaControl:new Nn(""),captureControl:new Nn(""),typePrestationControl:new Nn("",fc.required)})}selectFile(e){this.selectedFile=e.target.files}selectFilePresta(e){e&&(this.selectedFilePresta=e.target.files)}upload(){var e;if(this.submittedInter=!0,this.intervention=new vb("RACCORDEMENT"),this.prestaTab.length>0&&this.prestaTab.forEach(i=>{i.id=this.intervention.id,console.log(i)}),this.intervention.typeRaccordement=this.formGroup.value.typeRaccControl,this.intervention.commentaire=this.formGroup.value.comControl,this.intervention.numero=this.formGroup.value.numControl,this.intervention.jour=this.selected.getDate().toString(),1==this.intervention.jour.length&&(this.intervention.jour="0"+this.intervention.jour),this.intervention.mois=(this.selected.getMonth()+1).toString(),1==this.intervention.mois.length&&(this.intervention.mois="0"+this.intervention.mois),this.intervention.annee=this.selected.getFullYear().toString(),console.log(this.intervention.date),null===(e=this.selectedFile)||void 0===e?void 0:e.item(0)){const i=this.selectedFile.item(0);this.selectedFile=void 0,i&&(this.intervention.fileUpload=new pc(i),console.log("inter add fileupload "+this.intervention.fileUpload))}this.interService.createNewIntervention(this.intervention),this.prestaTab.length>0&&(console.log("inter add ptresta lendgt"),this.interService.prestations=this.prestaTab,this.interService.createNewPrestation(this.prestaTab))}saveInter(e){this.interService.createIntervention(e),alert("Intervention ajout\xe9e avec succ\xe8s")}goToPresta(){this.prestaVue=!this.prestaVue,this.interVue=!this.interVue}addPresta(){var e;this.submittedPresta=!0;let i=new LR(this.formGroupPresta.value.typePrestationControl);if(i.commentaire=this.formGroupPresta.value.comPrestaControl,this.formGroupPresta.value.tailleControl&&(i.taille=this.formGroupPresta.value.tailleControl),null===(e=this.selectedFilePresta)||void 0===e?void 0:e.item(0)){const r=this.selectedFilePresta.item(0);this.selectedFilePresta=void 0,r&&(this.currentFilePrestaUpload=new pc(r),i.fileUpload=new pc(r),console.log("presta add fileupload "+i.fileUpload))}this.prestaTab.push(i),console.log("presta tab le "+this.prestaTab.length),alert("Prestation ajout\xe9e ! "+this.formGroupPresta.value.typePrestationControl),this.formGroupPresta.reset()}showInter(){this.interVue=!0,this.prestaVue=!this.prestaVue}ngOnDestroy(){this.interService.intervention=this.intervention,this.interService.prestations=this.prestaTab}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Sm),l.Y36(Vn),l.Y36(nC))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-ajouter-intervention"]],decls:43,vars:10,consts:[[1,"submit-form",3,"formGroup","hidden","ngSubmit"],[1,"form-group"],["for","typeRacc"],["formControlName","typeRaccControl","id","typeRacc","name","typeRaccordement","required","",1,"browser-default","custom-select"],["value","a\xe9rien"],["value","a\xe9ro-souterrain"],["value","fa\xe7ade"],["selected","","value","immeuble"],["value","souterrain"],["for","numero"],["formControlName","numControl","id","numero","name","numero","type","text",1,"form-control"],["for","com"],["formControlName","comControl","id","com","name","commentaire",1,"form-control"],["for","capture"],["id","capture","type","file",1,"text-nowrap","text-truncate",3,"change"],[1,"demo-inline-calendar-card"],[3,"selected","selectedChange"],["type","submit",1,"btn","btn-success","btn-sm",3,"disabled"],["type","button",1,"btn","btn-warning","btn-sm",3,"click"],["class","progress mt-2",4,"ngIf"],[4,"ngIf"],[1,"progress","mt-2"],["aria-valuemax","100","aria-valuemin","0","role","progressbar",1,"progress-bar","progress-bar-info",3,"ngStyle"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"submit-form",3,"formGroup","ngSubmit"],["for","typePresta"],["formControlName","typePrestationControl","id","typePresta","name","typePrestation","required","",1,"browser-default","custom-select"],["value","goulotte"],["value","mat\xe9riel"],["value","service"],["class","form-group",4,"ngIf"],["for","comPresta"],["formControlName","comPrestaControl","id","comPresta","name","commentaire",1,"form-control"],["for","capturePresta"],["formControlName","captureControl","id","capturePresta","type","file",1,"text-nowrap","text-truncate",3,"change"],[1,"btn","btn-warning","btn-sm",3,"disabled","click"],["type","submit",1,"btn","btn-success","btn-sm"],["for","tailleg"],["formControlName","tailleControl","id","tailleg","type","number"]],template:function(e,i){1&e&&(l.TgZ(0,"form",0),l.NdJ("ngSubmit",function(){return i.upload()}),l.TgZ(1,"div")(2,"div",1)(3,"label",2),l._uU(4,"Type de raccordement (Obligatoire)"),l.qZA(),l.TgZ(5,"select",3)(6,"option",4),l._uU(7,"A\xe9rien"),l.qZA(),l.TgZ(8,"option",5),l._uU(9,"A\xe9ro-souterrain"),l.qZA(),l.TgZ(10,"option",6),l._uU(11,"Fa\xe7ade"),l.qZA(),l.TgZ(12,"option",7),l._uU(13,"Immeuble"),l.qZA(),l.TgZ(14,"option",8),l._uU(15,"Souterrain"),l.qZA()()(),l.TgZ(16,"div",1)(17,"label",9),l._uU(18,"Num\xe9ro d'intervention"),l.qZA(),l._UZ(19,"input",10),l.qZA(),l.TgZ(20,"div",1)(21,"label",11),l._uU(22,"Commentaire"),l.qZA(),l._UZ(23,"input",12),l.qZA(),l.TgZ(24,"div",1)(25,"label",13),l._uU(26,"Vous pouvez ajouter une capture d'\xe9cran"),l.qZA(),l._UZ(27,"br"),l.TgZ(28,"input",14),l.NdJ("change",function(o){return i.selectFile(o)}),l.qZA()(),l.TgZ(29,"div",1)(30,"label"),l._uU(31,"Date d'intervention"),l.qZA(),l.TgZ(32,"mat-card",15)(33,"mat-calendar",16),l.NdJ("selectedChange",function(o){return i.selected=o}),l.qZA()(),l.TgZ(34,"label"),l._uU(35),l.ALo(36,"date"),l.qZA()()(),l.TgZ(37,"button",17),l._uU(38," Terminer "),l.qZA(),l.TgZ(39,"button",18),l.NdJ("click",function(){return i.goToPresta()}),l._uU(40," Prestation comp "),l.qZA(),l.YNc(41,k8,3,5,"div",19),l.qZA(),l.YNc(42,P8,30,4,"div",20)),2&e&&(l.Q6J("formGroup",i.formGroup)("hidden",!i.interVue),l.xp6(33),l.Q6J("selected",i.selected),l.xp6(2),l.hij("Intervention du ",l.xi3(36,7,i.selected,"dd MMMM yyyy"),""),l.xp6(2),l.Q6J("disabled",i.formGroup.invalid),l.xp6(4),l.Q6J("ngIf",i.currentFileUpload),l.xp6(1),l.Q6J("ngIf",i.prestaVue))},directives:[Cb,yb,kf,$m,bb,Hm,qm,eC,tC,Sf,MS,sC,ti,Pl,Eb],pipes:[Nl],styles:[".mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}label[_ngcontent-%COMP%]{color:#fff;font-size:1.2em}"]}),n})();function F8(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"ul",3)(1,"li",4)(2,"div",5)(3,"div",6)(4,"span"),l._uU(5),l.qZA(),l.TgZ(6,"span"),l._uU(7),l.qZA(),l.TgZ(8,"span"),l._uU(9),l.ALo(10,"date"),l.qZA()(),l.TgZ(11,"div",7)(12,"button",8),l.NdJ("click",function(){const o=l.CHM(e).$implicit;return l.oxw().deleteInter(o)}),l._uU(13,"Supp"),l.qZA()(),l.TgZ(14,"div",7)(15,"button",9),l.NdJ("click",function(){const o=l.CHM(e).$implicit;return l.oxw().goToDetails(o)}),l._uU(16,"D\xe9tails"),l.qZA()()()()()}if(2&n){const e=t.$implicit;l.xp6(1),l.Q6J("ngClass","RACCORDEMENT"!==e.typeIntervention?"blue":"green"),l.xp6(4),l.lnq(" ",e.jour,"/",e.mois,"/",e.annee," "),l.xp6(2),l.hij(" ",e.typeIntervention," "),l.xp6(2),l.AsE(" ",e.typeRaccordement," ",l.xi3(10,7,e.date,"dd.MM.y")," ")}}let L8=(()=>{class n{constructor(e,i){this.interServ=e,this.router=i,this.interventions=[],this.inteSubs=new Wn.w0,this.interventions=e.interventions}ngOnInit(){this.interServ.intersSubj.subscribe(e=>{this.interventions=this.interServ.interventions}),console.log("get inter2 "+this.interventions.length),this.interServ.getFiles(6).snapshotChanges().pipe((0,et.U)(e=>e.map(i=>Object.assign({key:i.payload.key},i.payload.val())))).subscribe(e=>{this.fileUploads=e})}goToDetails(e){this.interServ.intervention=e,this.router.navigateByUrl("detailsInter")}deleteInter(e){this.interServ.deleteIntervention(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Sm),l.Y36(Vn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-list-interventions"]],decls:4,vars:1,consts:[[1,"card"],[1,"card-header"],["class","list-group list-group-flush",4,"ngFor","ngForOf"],[1,"list-group","list-group-flush"],[1,"list-group-item",3,"ngClass"],[1,"row"],[1,"col-8"],[1,"col-2"],["color","warn","mat-raised-button","",3,"click"],["color","primary","mat-raised-button","",3,"click"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0)(1,"div",1),l._uU(2,"List of Files"),l.qZA(),l.YNc(3,F8,17,10,"ul",2),l.qZA()),2&e&&(l.xp6(3),l.Q6J("ngForOf",i.interventions))},directives:[gi,Mr,_S],pipes:[Nl],styles:[""]}),n})();class B8{constructor(t,e,i){let r=new Date,o=String(r.getHours()).padStart(2,"0"),c=String(r.getMinutes()).padStart(2,"0"),d=String(r.getUTCMilliseconds()).padStart(2,"0");this.anneeAdhesion=r.getFullYear().toString(),this.moisAdhesion=String(r.getMonth()+1).padStart(2,"0"),this.jourAdhesion=String(r.getDate()).padStart(2,"0"),this.typeUser=i,this.id=Number.parseInt(this.jourAdhesion+this.moisAdhesion+this.anneeAdhesion+o+c+d),this.username=t,this.password=e}}function V8(n,t){1&n&&(l.TgZ(0,"div"),l._uU(1,"username is required"),l.qZA())}function U8(n,t){1&n&&(l.TgZ(0,"div",10),l.YNc(1,V8,2,0,"div",11),l.qZA())}function j8(n,t){1&n&&l._UZ(0,"div",10)}function H8(n,t){1&n&&l._UZ(0,"span",12)}const xV=function(n){return{"is-invalid":n}};let $8=(()=>{class n{constructor(e,i,r,o,c){this.af=e,this.formBuilder=i,this.route=r,this.router=o,this.authenticationService=c,this.loading=!1,this.submitted=!1,this.loginSubs=new Wn.w0}ngOnInit(){this.loginForm=this.formBuilder.group({username:["",fc.required],password:["",fc.required]})}get fval(){return this.loginForm.controls}login(){this.loading=!0,this.submitted=!0,!this.loginForm.invalid&&(this.authenticationService.SignIn(this.loginForm.value.username,this.loginForm.value.password)?this.router.navigate(["/home"]):alert("username ou mot de passe erron\xe9 !"),this.loading=!1)}register(){let e=new B8(this.loginForm.value.username,this.loginForm.value.password,"user");this.authenticationService.createUser(e).then()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(pf),l.Y36(nC),l.Y36(Ca),l.Y36(Vn),l.Y36(Zv))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-login-page"]],decls:19,vars:11,consts:[[3,"formGroup"],[1,"form-group"],["for","username"],["formControlName","username","id","username","placeholder","Nom d'utilisateur","type","text",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","password"],["formControlName","password","id","password","placeholder","Enter password here","type","password",1,"form-control",3,"ngClass"],[1,"btn","btn-primary",3,"disabled","click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"btn","btn-link",3,"click"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,i){1&e&&(l.TgZ(0,"h3"),l._uU(1,"User Login"),l.qZA(),l.TgZ(2,"form",0)(3,"div",1)(4,"label",2),l._uU(5,"Username"),l.qZA(),l._UZ(6,"input",3),l.YNc(7,U8,2,0,"div",4),l.qZA(),l.TgZ(8,"div",1)(9,"label",5),l._uU(10,"Password"),l.qZA(),l._UZ(11,"input",6),l.YNc(12,j8,1,0,"div",4),l.qZA(),l.TgZ(13,"div",1)(14,"button",7),l.NdJ("click",function(){return i.login()}),l.YNc(15,H8,1,0,"span",8),l._uU(16," Login "),l.qZA(),l.TgZ(17,"button",9),l.NdJ("click",function(){return i.register()}),l._uU(18,"Register"),l.qZA()()()),2&e&&(l.xp6(2),l.Q6J("formGroup",i.loginForm),l.xp6(4),l.Q6J("ngClass",l.VKq(7,xV,i.submitted)),l.xp6(1),l.Q6J("ngIf",i.submitted),l.xp6(4),l.Q6J("ngClass",l.VKq(9,xV,i.submitted)),l.xp6(1),l.Q6J("ngIf",i.submitted),l.xp6(2),l.Q6J("disabled",i.loginForm.invalid),l.xp6(1),l.Q6J("ngIf",i.loading))},directives:[Cb,yb,kf,Sf,bb,Hm,Mr,ti],styles:[""]}),n})(),DV=(()=>{class n{constructor(e,i){this.authService=e,this.router=i}canActivate(e,i){return this.authService.isAuth||(window.alert("Access Denied, Login is Required to Access This Page!"),this.router.navigate(["/login"])),!0}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Zv),l.LFG(Vn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const IV=function(n){return{width:n}};function G8(n,t){if(1&n&&(l.TgZ(0,"div",21)(1,"div",22),l._uU(2),l.qZA()()),2&n){const e=l.oxw();l.xp6(1),l.Q6J("ngStyle",l.VKq(3,IV,e.percentage+"%")),l.uIk("aria-valuenow",e.percentage),l.xp6(1),l.hij(" Ajout en cours ",e.percentage,"% ")}}function q8(n,t){1&n&&(l.TgZ(0,"div",1)(1,"label",37),l._uU(2,"Taille de la goulotte"),l.qZA(),l._UZ(3,"input",38),l.qZA())}function z8(n,t){if(1&n&&(l.TgZ(0,"div",21)(1,"div",22),l._uU(2),l.qZA()()),2&n){const e=l.oxw(2);l.xp6(1),l.Q6J("ngStyle",l.VKq(3,IV,e.percentage+"%")),l.uIk("aria-valuenow",e.percentage),l.xp6(1),l.hij(" Ajout en cours ",e.percentage,"% ")}}function W8(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div")(1,"button",23),l.NdJ("click",function(){return l.CHM(e),l.oxw().showInter()}),l._uU(2," Annuler "),l.qZA(),l.TgZ(3,"form",24),l.NdJ("ngSubmit",function(){return l.CHM(e),l.oxw().valider()}),l.TgZ(4,"div")(5,"div",1)(6,"label",25),l._uU(7,"Type de prestation compl\xe9mentaire"),l.qZA(),l.TgZ(8,"select",26)(9,"option",27),l._uU(10,"Installation de goulotte"),l.qZA(),l.TgZ(11,"option",28),l._uU(12,"Installation de mat\xe9riel"),l.qZA(),l.TgZ(13,"option",29),l._uU(14,"D\xe9monstration de service"),l.qZA()()(),l.YNc(15,q8,4,0,"div",30),l.TgZ(16,"div",1)(17,"label",31),l._uU(18,"Commentaire"),l.qZA(),l._UZ(19,"input",32),l.qZA(),l.TgZ(20,"div",1)(21,"label",33),l._uU(22,"Vous pouvez ajouter une capture d'\xe9cran"),l.qZA(),l._UZ(23,"br"),l.TgZ(24,"input",34),l.NdJ("change",function(r){return l.CHM(e),l.oxw().selectFilePresta(r)}),l.qZA()()(),l.TgZ(25,"button",35),l.NdJ("click",function(){return l.CHM(e),l.oxw().addPresta()}),l._uU(26," Ajouter la prestation "),l.qZA(),l.TgZ(27,"button",36),l._uU(28," Valider "),l.qZA(),l.YNc(29,z8,3,5,"div",19),l.qZA()()}if(2&n){const e=l.oxw();l.xp6(3),l.Q6J("formGroup",e.formGroupPresta),l.xp6(12),l.Q6J("ngIf","goulotte"==e.formGroupPresta.value.typePrestationControl),l.xp6(10),l.Q6J("disabled",!e.formGroupPresta.value.typePrestationControl),l.xp6(4),l.Q6J("ngIf",e.currentFileUpload)}}let Y8=(()=>{class n{constructor(e,i,r){this.interService=e,this.router=i,this.fb=r,this.intervention=new vb("RACCORDEMENT"),this.prestaVue=!1,this.prestaTab=[],this.autorisation=!1,this.selectedAllFilesPresta=[],this.percentage=0,this.submittedInter=!1,this.submittedPresta=!1,this.selected=new Date,this.interVue=!0}ngOnInit(){console.log("presta vue "+this.prestaVue),this.formGroup=this.fb.group({numControl:["",fc.required],capControl:new Nn(""),typeRaccControl:new Nn(""),comControl:new Nn("")}),this.formGroupPresta=this.fb.group({tailleControl:new Nn(""),comPrestaControl:new Nn(""),captureControl:new Nn(""),typePrestationControl:new Nn("",fc.required)})}selectFile(e){this.selectedFile=e.target.files,this.autorisation=!0}selectFilePresta(e){e&&(this.selectedFilePresta=e.target.files)}valider(){var e;if(this.submittedInter=!0,this.intervention=new vb("RECONNEXION"),this.prestaTab.length>0&&this.prestaTab.forEach(i=>{i.id=this.intervention.id,console.log(i)}),this.intervention.typeRaccordement=this.formGroup.value.typeRaccControl,this.intervention.commentaire=this.formGroup.value.comControl,this.intervention.numero=this.formGroup.value.numControl,this.intervention.jour=this.selected.getDate().toString(),1==this.intervention.jour.length&&(this.intervention.jour="0"+this.intervention.jour),this.intervention.mois=(this.selected.getMonth()+1).toString(),1==this.intervention.mois.length&&(this.intervention.mois="0"+this.intervention.mois),this.intervention.annee=this.selected.getFullYear().toString(),this.intervention.date=new Date,null===(e=this.selectedFile)||void 0===e?void 0:e.item(0)){const i=this.selectedFile.item(0);this.selectedFile=void 0,i&&(this.intervention.fileUpload=new pc(i),console.log("inter add fileupload "+this.intervention.fileUpload))}this.interService.createNewIntervention(this.intervention),this.prestaTab.length>0&&(console.log("inter add ptresta lendgt"),this.interService.prestations=this.prestaTab,this.interService.createNewPrestation(this.prestaTab))}saveInter(e){this.interService.createIntervention(e),alert("Intervention ajout\xe9e avec succ\xe8s")}goToPresta(){this.prestaVue=!this.prestaVue,this.interVue=!this.interVue}addPresta(){var e;this.submittedPresta=!0;let i=new LR(this.formGroupPresta.value.typePrestationControl);if(i.commentaire=this.formGroupPresta.value.comPrestaControl,this.formGroupPresta.value.tailleControl&&(i.taille=this.formGroupPresta.value.tailleControl),null===(e=this.selectedFilePresta)||void 0===e?void 0:e.item(0)){const r=this.selectedFilePresta.item(0);this.selectedFilePresta=void 0,r&&(this.currentFilePrestaUpload=new pc(r),i.fileUpload=new pc(r),console.log("presta add fileupload "+i.fileUpload))}this.prestaTab.push(i),console.log("presta tab le "+this.prestaTab.length),alert("Prestation ajout\xe9e ! "+this.formGroupPresta.value.typePrestationControl),this.formGroupPresta.reset()}showInter(){this.interVue=!0,this.prestaVue=!this.prestaVue}ngOnDestroy(){this.interService.intervention=this.intervention,this.interService.prestations=this.prestaTab}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Sm),l.Y36(Vn),l.Y36(nC))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-reconnexion"]],decls:43,vars:10,consts:[[1,"submit-form",3,"formGroup","hidden","ngSubmit"],[1,"form-group"],["for","numero"],["formControlName","numControl","id","numero","name","numero","type","text",1,"form-control"],["for","com"],["formControlName","comControl","id","com","name","commentaire",1,"form-control"],["for","capture"],["formControlName","capControl","id","capture","type","file",1,"text-nowrap","text-truncate",3,"change"],[1,"demo-inline-calendar-card"],[3,"selected","selectedChange"],["for","typeRacc"],["formControlName","typeRaccControl","id","typeRacc","name","typeRaccordement","required","",1,"browser-default","custom-select"],["value","a\xe9rien"],["value","a\xe9ro-souterrain"],["value","fa\xe7ade"],["selected","","value","immeuble"],["value","souterrain"],["type","submit",1,"btn","btn-success","btn-sm",3,"disabled"],["type","button",1,"btn","btn-warning","btn-sm",3,"click"],["class","progress mt-2",4,"ngIf"],[4,"ngIf"],[1,"progress","mt-2"],["aria-valuemax","100","aria-valuemin","0","role","progressbar",1,"progress-bar","progress-bar-info",3,"ngStyle"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"submit-form",3,"formGroup","ngSubmit"],["for","typePresta"],["formControlName","typePrestationControl","id","typePresta","name","typePrestation","required","",1,"browser-default","custom-select"],["value","goulotte"],["value","mat\xe9riel"],["value","service"],["class","form-group",4,"ngIf"],["for","comPresta"],["formControlName","comPrestaControl","id","comPresta","name","commentaire",1,"form-control"],["for","capturePresta"],["formControlName","captureControl","id","capturePresta","type","file",1,"text-nowrap","text-truncate",3,"change"],["type","submit",1,"btn","btn-warning","btn-sm",3,"disabled","click"],["type","submit",1,"btn","btn-success","btn-sm"],["for","tailleg"],["formControlName","tailleControl","id","tailleg","type","number"]],template:function(e,i){1&e&&(l.TgZ(0,"form",0),l.NdJ("ngSubmit",function(){return i.valider()}),l.TgZ(1,"div")(2,"div",1)(3,"label",2),l._uU(4,"Num\xe9ro d'intervention"),l.qZA(),l._UZ(5,"input",3),l.qZA(),l.TgZ(6,"div",1)(7,"label",4),l._uU(8,"Commentaire"),l.qZA(),l._UZ(9,"input",5),l.qZA(),l.TgZ(10,"div",1)(11,"label",6),l._uU(12,"Vous pouvez ajouter une capture d'\xe9cran"),l.qZA(),l._UZ(13,"br"),l.TgZ(14,"input",7),l.NdJ("change",function(o){return i.selectFile(o)}),l.qZA()(),l.TgZ(15,"div",1)(16,"label"),l._uU(17,"Date d'intervention"),l.qZA(),l.TgZ(18,"mat-card",8)(19,"mat-calendar",9),l.NdJ("selectedChange",function(o){return i.selected=o}),l.qZA()(),l.TgZ(20,"label"),l._uU(21),l.ALo(22,"date"),l.qZA()(),l.TgZ(23,"div",1)(24,"label",10),l._uU(25,"Type de raccordement (Optionnel)"),l.qZA(),l.TgZ(26,"select",11)(27,"option",12),l._uU(28,"A\xe9rien"),l.qZA(),l.TgZ(29,"option",13),l._uU(30,"A\xe9ro-souterrain"),l.qZA(),l.TgZ(31,"option",14),l._uU(32,"Fa\xe7ade"),l.qZA(),l.TgZ(33,"option",15),l._uU(34,"Immeuble"),l.qZA(),l.TgZ(35,"option",16),l._uU(36,"Souterrain"),l.qZA()()()(),l.TgZ(37,"button",17),l._uU(38," Terminer "),l.qZA(),l.TgZ(39,"button",18),l.NdJ("click",function(){return i.goToPresta()}),l._uU(40," Prestation comp "),l.qZA(),l.YNc(41,G8,3,5,"div",19),l.qZA(),l.YNc(42,W8,30,4,"div",20)),2&e&&(l.Q6J("formGroup",i.formGroup)("hidden",!i.interVue),l.xp6(19),l.Q6J("selected",i.selected),l.xp6(2),l.hij("Intervention du ",l.xi3(22,7,i.selected,"dd MMMM yyyy"),""),l.xp6(16),l.Q6J("disabled",!i.formGroup.value.numControl&&!i.formGroup.value.capControl),l.xp6(4),l.Q6J("ngIf",i.currentFileUpload),l.xp6(1),l.Q6J("ngIf",i.prestaVue))},directives:[Cb,yb,kf,Sf,bb,Hm,MS,sC,$m,qm,eC,tC,ti,Pl,Eb],pipes:[Nl],styles:[".mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}label[_ngcontent-%COMP%]{color:#fff;font-size:1.2em}"]}),n})();const SV=function(n){return{width:n}};function Z8(n,t){if(1&n&&(l.TgZ(0,"div",21)(1,"div",22),l._uU(2),l.qZA()()),2&n){const e=l.oxw();l.xp6(1),l.Q6J("ngStyle",l.VKq(3,SV,e.percentage+"%")),l.uIk("aria-valuenow",e.percentage),l.xp6(1),l.hij(" Ajout en cours ",e.percentage,"% ")}}function K8(n,t){1&n&&(l.TgZ(0,"div",1)(1,"label",37),l._uU(2,"Taille de la goulotte"),l.qZA(),l._UZ(3,"input",38),l.qZA())}function Q8(n,t){if(1&n&&(l.TgZ(0,"div",21)(1,"div",22),l._uU(2),l.qZA()()),2&n){const e=l.oxw(2);l.xp6(1),l.Q6J("ngStyle",l.VKq(3,SV,e.percentage+"%")),l.uIk("aria-valuenow",e.percentage),l.xp6(1),l.hij(" Ajout en cours ",e.percentage,"% ")}}function X8(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div")(1,"button",23),l.NdJ("click",function(){return l.CHM(e),l.oxw().showInter()}),l._uU(2," Annuler "),l.qZA(),l.TgZ(3,"form",24),l.NdJ("ngSubmit",function(){return l.CHM(e),l.oxw().valider()}),l.TgZ(4,"div")(5,"div",1)(6,"label",25),l._uU(7,"Type de prestation compl\xe9mentaire"),l.qZA(),l.TgZ(8,"select",26)(9,"option",27),l._uU(10,"Installation de goulotte"),l.qZA(),l.TgZ(11,"option",28),l._uU(12,"Installation de mat\xe9riel"),l.qZA(),l.TgZ(13,"option",29),l._uU(14,"D\xe9monstration de service"),l.qZA()()(),l.YNc(15,K8,4,0,"div",30),l.TgZ(16,"div",1)(17,"label",31),l._uU(18,"Commentaire"),l.qZA(),l._UZ(19,"input",32),l.qZA(),l.TgZ(20,"div",1)(21,"label",33),l._uU(22,"Vous pouvez ajouter une capture d'\xe9cran"),l.qZA(),l._UZ(23,"br"),l.TgZ(24,"input",34),l.NdJ("change",function(r){return l.CHM(e),l.oxw().selectFilePresta(r)}),l.qZA()()(),l.TgZ(25,"button",35),l.NdJ("click",function(){return l.CHM(e),l.oxw().addPresta()}),l._uU(26," Ajouter la prestation "),l.qZA(),l.TgZ(27,"button",36),l._uU(28," Valider "),l.qZA(),l.YNc(29,Q8,3,5,"div",19),l.qZA()()}if(2&n){const e=l.oxw();l.xp6(3),l.Q6J("formGroup",e.formGroupPresta),l.xp6(12),l.Q6J("ngIf","goulotte"==e.formGroupPresta.value.typePrestationControl),l.xp6(10),l.Q6J("disabled",!e.formGroupPresta.value.typePrestationControl),l.xp6(4),l.Q6J("ngIf",e.currentFileUpload)}}let J8=(()=>{class n{constructor(e,i,r){this.interService=e,this.router=i,this.fb=r,this.intervention=new vb("RACCORDEMENT"),this.prestaVue=!1,this.prestaTab=[],this.selectedAllFilesPresta=[],this.percentage=0,this.submittedInter=!1,this.submittedPresta=!1,this.selected=new Date,this.interVue=!0}ngOnInit(){console.log("presta vue "+this.prestaVue),this.selectFilePresta(event),this.formGroup=this.fb.group({numControl:new Nn("",fc.required),capControl:new Nn(""),typeRaccControl:new Nn(""),comControl:new Nn("",fc.required)}),this.formGroupPresta=this.fb.group({tailleControl:new Nn(""),comPrestaControl:new Nn(""),captureControl:new Nn(""),typePrestationControl:new Nn("",fc.required)})}selectFile(e){this.selectedFile=e.target.files}selectFilePresta(e){e&&(this.selectedFilePresta=e.target.files)}valider(){var e;if(this.submittedInter=!0,this.intervention=new vb("SAV"),this.prestaTab.length>0&&this.prestaTab.forEach(i=>{i.id=this.intervention.id,console.log(i)}),this.intervention.typeRaccordement=this.formGroup.value.typeRaccControl,this.intervention.commentaire=this.formGroup.value.comControl,this.intervention.numero=this.formGroup.value.numControl,this.intervention.jour=this.selected.getDate().toString(),1==this.intervention.jour.length&&(this.intervention.jour="0"+this.intervention.jour),this.intervention.mois=(this.selected.getMonth()+1).toString(),1==this.intervention.mois.length&&(this.intervention.mois="0"+this.intervention.mois),this.intervention.annee=this.selected.getFullYear().toString(),this.intervention.date=new Date,null===(e=this.selectedFile)||void 0===e?void 0:e.item(0)){const i=this.selectedFile.item(0);this.selectedFile=void 0,i&&(this.intervention.fileUpload=new pc(i),console.log("inter add fileupload "+this.intervention.fileUpload))}this.interService.createNewIntervention(this.intervention),this.prestaTab.length>0&&(this.interService.prestations=this.prestaTab,this.interService.createNewPrestation(this.prestaTab))}saveInter(e){this.interService.createIntervention(e),alert("Intervention ajout\xe9e avec succ\xe8s")}goToPresta(){this.prestaVue=!this.prestaVue,this.interVue=!this.interVue}addPresta(){var e;this.submittedPresta=!0;let i=new LR(this.formGroupPresta.value.typePrestationControl);if(i.commentaire=this.formGroupPresta.value.comPrestaControl,this.formGroupPresta.value.tailleControl&&(i.taille=this.formGroupPresta.value.tailleControl),null===(e=this.selectedFilePresta)||void 0===e?void 0:e.item(0)){const r=this.selectedFilePresta.item(0);this.selectedFilePresta=void 0,r&&(this.currentFilePrestaUpload=new pc(r),i.fileUpload=new pc(r),console.log("presta add fileupload "+i.fileUpload))}this.prestaTab.push(i),console.log("presta tab le "+this.prestaTab.length),alert("Prestation ajout\xe9e ! "+this.formGroupPresta.value.typePrestationControl),this.formGroupPresta.reset()}showInter(){this.interVue=!0,this.prestaVue=!this.prestaVue}ngOnDestroy(){this.interService.intervention=this.intervention,this.interService.prestations=this.prestaTab}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Sm),l.Y36(Vn),l.Y36(nC))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-sav"]],decls:43,vars:10,consts:[[1,"submit-form",3,"formGroup","hidden","ngSubmit"],[1,"form-group"],["for","numero"],["formControlName","numControl","id","numero","name","numero","type","text",1,"form-control"],["for","com"],["formControlName","comControl","id","com","name","commentaire",1,"form-control"],["for","capture"],["formControlName","capControl","id","capture","type","file",1,"text-nowrap","text-truncate",3,"change"],[1,"demo-inline-calendar-card"],[3,"selected","selectedChange"],["for","typeRacc"],["formControlName","typeRaccControl","id","typeRacc","name","typeRaccordement","required","",1,"browser-default","custom-select"],["value","a\xe9rien"],["value","a\xe9ro-souterrain"],["value","fa\xe7ade"],["selected","","value","immeuble"],["value","souterrain"],["type","submit",1,"btn","btn-success","btn-sm",3,"disabled"],["type","button",1,"btn","btn-warning","btn-sm",3,"click"],["class","progress mt-2",4,"ngIf"],[4,"ngIf"],[1,"progress","mt-2"],["aria-valuemax","100","aria-valuemin","0","role","progressbar",1,"progress-bar","progress-bar-info",3,"ngStyle"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"submit-form",3,"formGroup","ngSubmit"],["for","typePresta"],["formControlName","typePrestationControl","id","typePresta","name","typePrestation","required","",1,"browser-default","custom-select"],["value","goulotte"],["value","mat\xe9riel"],["value","service"],["class","form-group",4,"ngIf"],["for","comPresta"],["formControlName","comPrestaControl","id","comPresta","name","commentaire",1,"form-control"],["for","capturePresta"],["formControlName","captureControl","id","capturePresta","type","file",1,"text-nowrap","text-truncate",3,"change"],["type","submit",1,"btn","btn-warning","btn-sm",3,"disabled","click"],["type","submit",1,"btn","btn-success","btn-sm"],["for","tailleg"],["formControlName","tailleControl","id","tailleg","type","number"]],template:function(e,i){1&e&&(l.TgZ(0,"form",0),l.NdJ("ngSubmit",function(){return i.valider()}),l.TgZ(1,"div")(2,"div",1)(3,"label",2),l._uU(4,"Num\xe9ro d'intervention"),l.qZA(),l._UZ(5,"input",3),l.qZA(),l.TgZ(6,"div",1)(7,"label",4),l._uU(8,"Commentaire"),l.qZA(),l._UZ(9,"input",5),l.qZA(),l.TgZ(10,"div",1)(11,"label",6),l._uU(12,"Vous pouvez ajouter une capture d'\xe9cran"),l.qZA(),l._UZ(13,"br"),l.TgZ(14,"input",7),l.NdJ("change",function(o){return i.selectFile(o)}),l.qZA()(),l.TgZ(15,"div",1)(16,"label"),l._uU(17,"Date d'intervention"),l.qZA(),l.TgZ(18,"mat-card",8)(19,"mat-calendar",9),l.NdJ("selectedChange",function(o){return i.selected=o}),l.qZA()(),l.TgZ(20,"label"),l._uU(21),l.ALo(22,"date"),l.qZA()(),l.TgZ(23,"div",1)(24,"label",10),l._uU(25,"Type de raccordement (Optionnel)"),l.qZA(),l.TgZ(26,"select",11)(27,"option",12),l._uU(28,"A\xe9rien"),l.qZA(),l.TgZ(29,"option",13),l._uU(30,"A\xe9ro-souterrain"),l.qZA(),l.TgZ(31,"option",14),l._uU(32,"Fa\xe7ade"),l.qZA(),l.TgZ(33,"option",15),l._uU(34,"Immeuble"),l.qZA(),l.TgZ(35,"option",16),l._uU(36,"Souterrain"),l.qZA()()()(),l.TgZ(37,"button",17),l._uU(38," Terminer "),l.qZA(),l.TgZ(39,"button",18),l.NdJ("click",function(){return i.goToPresta()}),l._uU(40," Prestation comp "),l.qZA(),l.YNc(41,Z8,3,5,"div",19),l.qZA(),l.YNc(42,X8,30,4,"div",20)),2&e&&(l.Q6J("formGroup",i.formGroup)("hidden",!i.interVue),l.xp6(19),l.Q6J("selected",i.selected),l.xp6(2),l.hij("Intervention du ",l.xi3(22,7,i.selected,"dd MMMM yyyy"),""),l.xp6(16),l.Q6J("disabled",!i.formGroup.value.numControl&&!i.formGroup.value.capControl),l.xp6(4),l.Q6J("ngIf",i.currentFileUpload),l.xp6(1),l.Q6J("ngIf",i.prestaVue))},directives:[Cb,yb,kf,Sf,bb,Hm,MS,sC,$m,qm,eC,tC,ti,Pl,Eb],pipes:[Nl],styles:[".mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}label[_ngcontent-%COMP%]{color:#fff;font-size:1.2em}"]}),n})();class eW{constructor(){this.id=Number.parseInt((new Date).getUTCFullYear().toString()+(new Date).getUTCMonth().toString()+(new Date).getUTCMinutes().toString()+(new Date).getMilliseconds().toString()),this.typeCharge="",this.commentaire="",this.montant=0,this.date=new Date}}const tW=function(n){return{width:n}};function nW(n,t){if(1&n&&(l.TgZ(0,"div",17)(1,"div",18),l._uU(2),l.qZA()()),2&n){const e=l.oxw();l.xp6(1),l.Q6J("ngStyle",l.VKq(3,tW,e.percentage+"%")),l.uIk("aria-valuenow",e.percentage),l.xp6(1),l.hij(" Ajout en cours ",e.percentage,"% ")}}let iW=(()=>{class n{constructor(e,i,r){this.chargeService=e,this.router=i,this.fb=r,this.percentage=0,this.submitted=!1,this.selected=new Date}ngOnInit(){this.formGroup=this.fb.group({montantControl:new Nn(""),typeControl:new Nn("",fc.required),comControl:new Nn(""),capControl:new Nn("")})}selectFile(e){this.selectedFile=e.target.files}upload(){var e;if(this.submitted=!0,this.charge=new eW,this.charge.typeCharge=this.formGroup.value.typeControl,this.charge.commentaire=this.formGroup.value.comControl,this.charge.montant=this.formGroup.value.montantControl,1==this.charge.jour.length&&(this.charge.jour="0"+this.charge.jour),this.charge.mois=(this.selected.getMonth()+1).toString(),1==this.charge.mois.length&&(this.charge.mois="0"+this.charge.mois),this.charge.annee=this.selected.getFullYear().toString(),this.charge.date=new Date,null===(e=this.selectedFile)||void 0===e?void 0:e.item(0)){const i=this.selectedFile.item(0);this.selectedFile=void 0,i&&(this.charge.fileUpload=new pc(i),this.currentFileUpload=new pc(i),console.log("add fileupload charge "+this.charge.fileUpload))}this.chargeService.charge=this.charge,this.chargeService.addCharge(this.charge)}ngOnDestroy(){this.chargeService.charge=this.charge}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(k1),l.Y36(Vn),l.Y36(nC))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-ajouter-charge"]],decls:38,vars:8,consts:[[1,"submit-form",3,"formGroup","ngSubmit"],[1,"form-group"],["for","typeCharge"],["formControlName","typeControl","id","typeCharge","name","typeCharge","required","",1,"browser-default","custom-select"],["value","carburant"],["value","Entretien"],["value","mat\xe9riel"],["selected","","value","Autre"],["for","com"],["formControlName","montantControl","id","montant","name","montant","required","","type","number",1,"form-control"],["formControlName","comControl","id","com","name","commentaire",1,"form-control"],["for","capture"],["id","capture","type","file",1,"text-nowrap","text-truncate",3,"change"],[1,"demo-inline-calendar-card"],[3,"selected","selectedChange"],["type","submit",1,"btn","btn-success","btn-sm",3,"disabled"],["class","progress mt-2",4,"ngIf"],[1,"progress","mt-2"],["aria-valuemax","100","aria-valuemin","0","role","progressbar",1,"progress-bar","progress-bar-info",3,"ngStyle"]],template:function(e,i){1&e&&(l.TgZ(0,"form",0),l.NdJ("ngSubmit",function(){return i.upload()}),l.TgZ(1,"div")(2,"div",1)(3,"label",2),l._uU(4,"Type de charge (Obligatoire)"),l.qZA(),l.TgZ(5,"select",3)(6,"option",4),l._uU(7,"Carburant"),l.qZA(),l.TgZ(8,"option",5),l._uU(9,"Entretien du v\xe9hicule"),l.qZA(),l.TgZ(10,"option",6),l._uU(11,"Mat\xe9riel de travail"),l.qZA(),l.TgZ(12,"option",7),l._uU(13,"Autre"),l.qZA()()(),l.TgZ(14,"div",1)(15,"label",8),l._uU(16,"Montant"),l.qZA(),l._UZ(17,"input",9),l.qZA(),l.TgZ(18,"div",1)(19,"label",8),l._uU(20,"Commentaire"),l.qZA(),l._UZ(21,"input",10),l.qZA(),l.TgZ(22,"div",1)(23,"label",11),l._uU(24,"Vous pouvez ajouter une capture d'\xe9cran"),l.qZA(),l._UZ(25,"br"),l.TgZ(26,"input",12),l.NdJ("change",function(o){return i.selectFile(o)}),l.qZA()(),l.TgZ(27,"div",1)(28,"label"),l._uU(29,"Date d'intervention"),l.qZA(),l.TgZ(30,"mat-card",13)(31,"mat-calendar",14),l.NdJ("selectedChange",function(o){return i.selected=o}),l.qZA()(),l.TgZ(32,"label"),l._uU(33),l.ALo(34,"date"),l.qZA()()(),l.TgZ(35,"button",15),l._uU(36," Terminer "),l.qZA(),l.YNc(37,nW,3,5,"div",16),l.qZA()),2&e&&(l.Q6J("formGroup",i.formGroup),l.xp6(31),l.Q6J("selected",i.selected),l.xp6(2),l.hij("Intervention du ",l.xi3(34,5,i.selected,"dd MMMM yyyy"),""),l.xp6(2),l.Q6J("disabled",i.formGroup.invalid),l.xp6(2),l.Q6J("ngIf",i.currentFileUpload))},directives:[Cb,yb,kf,$m,bb,Hm,qm,eC,tC,Sf,Eb,MS,sC,ti,Pl],pipes:[Nl],styles:[".mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}label[_ngcontent-%COMP%]{color:#fff;font-size:1.2em}"]}),n})(),oW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Xn],Xn]}),n})();const MV=["*"],sW=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],aW=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],hW=hR(Vm(class{})),fW=Vm(class{}),kV=new l.OlP("MatList"),pW=new l.OlP("MatNavList");let mW=(()=>{class n extends hW{constructor(e){super(),this._elementRef=e,this._stateChanges=new pt.x,"action-list"===this._getListType()&&e.nativeElement.classList.add("mat-action-list")}_getListType(){const e=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===e?"list":"mat-action-list"===e?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[l._Bn([{provide:kV,useExisting:n}]),l.qOj,l.TTD],ngContentSelectors:MV,decls:1,vars:0,template:function(e,i){1&e&&(l.F$t(),l.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),n})(),RV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),n})(),OV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),n})(),gW=(()=>{class n extends fW{constructor(e,i,r,o){super(),this._element=e,this._isInteractiveList=!1,this._destroyed=new pt.x,this._disabled=!1,this._isInteractiveList=!!(r||o&&"action-list"===o._getListType()),this._list=r||o;const c=this._getHostElement();"button"===c.nodeName.toLowerCase()&&!c.hasAttribute("type")&&c.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(wu(this._destroyed)).subscribe(()=>{i.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(e){this._disabled=Qn(e)}ngAfterContentInit(){!function N2(n,t,e="mat"){n.changes.pipe(Bi(n)).subscribe(({length:i})=>{Yw(t,`${e}-2-line`,!1),Yw(t,`${e}-3-line`,!1),Yw(t,`${e}-multi-line`,!1),2===i||3===i?Yw(t,`${e}-${i}-line`,!0):i>3&&Yw(t,`${e}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(pW,8),l.Y36(kV,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(e,i,r){if(1&e&&(l.Suo(r,RV,5),l.Suo(r,OV,5),l.Suo(r,P2,5)),2&e){let o;l.iGM(o=l.CRH())&&(i._avatar=o.first),l.iGM(o=l.CRH())&&(i._icon=o.first),l.iGM(o=l.CRH())&&(i._lines=o)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(e,i){2&e&&l.ekj("mat-list-item-disabled",i.disabled)("mat-list-item-avatar",i._avatar||i._icon)("mat-list-item-with-avatar",i._avatar||i._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[l.qOj],ngContentSelectors:aW,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(e,i){1&e&&(l.F$t(sW),l.TgZ(0,"span",0),l._UZ(1,"span",1),l.Hsn(2),l.TgZ(3,"span",2),l.Hsn(4,1),l.qZA(),l.Hsn(5,2),l.qZA()),2&e&&(l.xp6(1),l.Q6J("matRippleTrigger",i._getHostElement())("matRippleDisabled",i._isRippleDisabled()))},directives:[_b],encapsulation:2,changeDetection:0}),n})(),CW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[F2,Zw,Xn,gR,kn],F2,Xn,gR,oW]}),n})();function EW(n,t){if(1&n&&(l.TgZ(0,"a",6),l._UZ(1,"img",7),l.qZA()),2&n){const e=l.oxw(2);l.s9C("href",e.intervention.fileUpload.url,l.LSH),l.xp6(1),l.Q6J("src",e.intervention.fileUpload.url,l.LSH)}}function xW(n,t){if(1&n&&(l.TgZ(0,"div")(1,"mat-list",1)(2,"mat-list-item",2),l._uU(3),l.qZA(),l.TgZ(4,"mat-list-item",2),l._uU(5),l.qZA(),l.TgZ(6,"mat-list-item",2),l._uU(7),l.qZA(),l.TgZ(8,"mat-list-item",2),l._uU(9),l.qZA()(),l.YNc(10,EW,2,2,"a",3),l._UZ(11,"br"),l.TgZ(12,"button",4),l._uU(13,"Primary"),l.qZA(),l.TgZ(14,"button",5),l._uU(15,"Success"),l.qZA()()),2&n){const e=l.oxw();l.xp6(3),l.Oqu(e.intervention.typeIntervention),l.xp6(2),l.Oqu(e.intervention.typeRaccordement),l.xp6(2),l.lnq("",e.intervention.jour,"/",e.intervention.mois,"/",e.intervention.annee,""),l.xp6(2),l.Oqu(e.intervention.typeIntervention),l.xp6(1),l.Q6J("ngIf",e.intervention.fileUpload)}}const DW=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:$8},{path:"home",component:Cq},{path:"detailsInter",component:(()=>{class n{constructor(e){this.interService=e}ngOnInit(){this.intervention=this.interService.intervention}deleteFileUpload(){this.interService.deleteInterventionFile(this.intervention)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Sm))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-intervention-details"]],inputs:{intervention:"intervention"},decls:1,vars:1,consts:[[4,"ngIf"],["role","list"],["role","listitem"],[3,"href",4,"ngIf"],["type","button",1,"btn","btn-primary"],["type","button",1,"btn","btn-outline-success"],[3,"href"],["alt","screenshoot","height","50%",1,"img-thumbnail",3,"src"]],template:function(e,i){1&e&&l.YNc(0,xW,16,7,"div",0),2&e&&l.Q6J("ngIf",i.intervention)},directives:[ti,mW,gW],styles:[""]}),n})()},{path:"listInters",component:L8},{path:"addInter",component:N8},{path:"addSav",component:J8},{path:"addCharge",component:iW},{path:"addReconnexion",component:Y8}];let IW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[DV],imports:[[kE.forRoot(DW)],kE]}),n})(),NV=(()=>{class n{constructor(e){e.versionUpdates.subscribe(i=>{switch(i.type){case"VERSION_DETECTED":console.log(`Downloading new app version: ${i.version.hash}`);break;case"VERSION_READY":console.log(`Current app version: ${i.currentVersion.hash}`),console.log(`New app version ready for use: ${i.latestVersion.hash}`);break;case"VERSION_INSTALLATION_FAILED":console.log(`Failed to install app version '${i.version.hash}': ${i.error}`)}})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(M1))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const SW=["*",[["mat-toolbar-row"]]],TW=["*","mat-toolbar-row"],MW=fR(class{constructor(n){this._elementRef=n}});let FV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),AW=(()=>{class n extends MW{constructor(e,i,r){super(e),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(Dl),l.Y36(ie))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,FV,5),2&e){let o;l.iGM(o=l.CRH())&&(i._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,i){2&e&&l.ekj("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[l.qOj],ngContentSelectors:TW,decls:2,vars:0,template:function(e,i){1&e&&(l.F$t(SW),l.Hsn(0),l.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),kW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Xn],Xn]}),n})();const RW=["mat-menu-item",""];function OW(n,t){1&n&&(l.O4$(),l.TgZ(0,"svg",2),l._UZ(1,"polygon",3),l.qZA())}const LV=["*"];function PW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",0),l.NdJ("keydown",function(r){return l.CHM(e),l.oxw()._handleKeydown(r)})("click",function(){return l.CHM(e),l.oxw().closed.emit("click")})("@transformMenu.start",function(r){return l.CHM(e),l.oxw()._onAnimationStart(r)})("@transformMenu.done",function(r){return l.CHM(e),l.oxw()._onAnimationDone(r)}),l.TgZ(1,"div",1),l.Hsn(2),l.qZA()()}if(2&n){const e=l.oxw();l.Q6J("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),l.uIk("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const OS={transformMenu:Om("transformMenu",[xf("void",ar({opacity:0,transform:"scale(0.8)"})),hc("void => enter",Cu("120ms cubic-bezier(0, 0, 0.2, 1)",ar({opacity:1,transform:"scale(1)"}))),hc("* => void",Cu("100ms 25ms linear",ar({opacity:0})))]),fadeInItems:Om("fadeInItems",[xf("showing",ar({opacity:1})),hc("void => *",[ar({opacity:0}),Cu("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},NW=new l.OlP("MatMenuContent"),QR=new l.OlP("MAT_MENU_PANEL"),FW=Vm(hR(class{}));let PS=(()=>{class n extends FW{constructor(e,i,r,o,c){var d;super(),this._elementRef=e,this._document=i,this._focusMonitor=r,this._parentMenu=o,this._changeDetectorRef=c,this.role="menuitem",this._hovered=new pt.x,this._focused=new pt.x,this._highlighted=!1,this._triggersSubmenu=!1,null===(d=null==o?void 0:o.addItem)||void 0===d||d.call(o,this)}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var e;const i=this._elementRef.nativeElement.cloneNode(!0),r=i.querySelectorAll("mat-icon, .material-icons");for(let o=0;o<r.length;o++)r[o].remove();return(null===(e=i.textContent)||void 0===e?void 0:e.trim())||""}_setHighlighted(e){var i;this._highlighted=e,null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(ie),l.Y36(Rm),l.Y36(QR,8),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(e,i){1&e&&l.NdJ("click",function(o){return i._checkDisabled(o)})("mouseenter",function(){return i._handleMouseEnter()}),2&e&&(l.uIk("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled.toString())("disabled",i.disabled||null),l.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",i._highlighted)("mat-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[l.qOj],attrs:RW,ngContentSelectors:LV,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,i){1&e&&(l.F$t(),l.Hsn(0),l._UZ(1,"div",0),l.YNc(2,OW,2,0,"svg",1)),2&e&&(l.xp6(1),l.Q6J("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),l.xp6(1),l.Q6J("ngIf",i._triggersSubmenu))},directives:[_b,ti],encapsulation:2,changeDetection:0}),n})();const BV=new l.OlP("mat-menu-default-options",{providedIn:"root",factory:function LW(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let BW=0,aC=(()=>{class n{constructor(e,i,r,o){this._elementRef=e,this._ngZone=i,this._defaultOptions=r,this._changeDetectorRef=o,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new l.n_E,this._tabSubscription=Wn.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new pt.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new l.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+BW++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=Qn(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=Qn(e)}set panelClass(e){const i=this._previousPanelClass;i&&i.length&&i.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new FL(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Bi(this._directDescendantItems),mn(e=>(0,Ia.T)(...e.map(i=>i._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{var i;const r=this._keyManager;if("enter"===this._panelAnimationState&&(null===(i=r.activeItem)||void 0===i?void 0:i._hasFocus())){const o=e.toArray(),c=Math.max(0,Math.min(o.length-1,r.activeItemIndex||0));o[c]&&!o[c].disabled?r.setActiveItem(c):r.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(Bi(this._directDescendantItems),mn(i=>(0,Ia.T)(...i.map(r=>r._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const i=e.keyCode,r=this._keyManager;switch(i){case 27:Gw(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===i||40===i)&&r.setFocusOrigin("keyboard"),void r.onKeydown(e)}e.stopPropagation()}focusFirstItem(e="program"){this._ngZone.onStable.pipe((0,Bn.q)(1)).subscribe(()=>{let i=null;if(this._directDescendantItems.length&&(i=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!i||!i.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(e).setFirstItemActive(),!r.activeItem&&i&&i.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const i=Math.min(this._baseElevation+e,24),r=`${this._elevationPrefix}${i}`,o=Object.keys(this._classList).find(c=>c.startsWith(this._elevationPrefix));(!o||o===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(e=this.xPosition,i=this.yPosition){var r;const o=this._classList;o["mat-menu-before"]="before"===e,o["mat-menu-after"]="after"===e,o["mat-menu-above"]="above"===i,o["mat-menu-below"]="below"===i,null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Bi(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(BV),l.Y36(l.sBO))},n.\u0275dir=l.lG2({type:n,contentQueries:function(e,i,r){if(1&e&&(l.Suo(r,NW,5),l.Suo(r,PS,5),l.Suo(r,PS,4)),2&e){let o;l.iGM(o=l.CRH())&&(i.lazyContent=o.first),l.iGM(o=l.CRH())&&(i._allItems=o),l.iGM(o=l.CRH())&&(i.items=o)}},viewQuery:function(e,i){if(1&e&&l.Gf(l.Rgc,5),2&e){let r;l.iGM(r=l.CRH())&&(i.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),VW=(()=>{class n extends aC{constructor(e,i,r,o){super(e,i,r,o),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(BV),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,i){2&e&&l.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[l._Bn([{provide:QR,useExisting:n}]),l.qOj],ngContentSelectors:LV,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(e,i){1&e&&(l.F$t(),l.YNc(0,PW,3,6,"ng-template"))},directives:[Mr],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::before{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[OS.transformMenu,OS.fadeInItems]},changeDetection:0}),n})();const VV=new l.OlP("mat-menu-scroll-strategy"),jW={provide:VV,deps:[xb],useFactory:function UW(n){return()=>n.scrollStrategies.reposition()}},jV=WI({passive:!0});let HW=(()=>{class n{constructor(e,i,r,o,c,d,p,b,E){this._overlay=e,this._element=i,this._viewContainerRef=r,this._menuItemInstance=d,this._dir=p,this._focusMonitor=b,this._ngZone=E,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Wn.w0.EMPTY,this._hoverSubscription=Wn.w0.EMPTY,this._menuCloseSubscription=Wn.w0.EMPTY,this._handleTouchStart=D=>{V1(D)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new l.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new l.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=o,this._parentMaterialMenu=c instanceof aC?c:void 0,i.nativeElement.addEventListener("touchstart",this._handleTouchStart,jV),d&&(d._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(i=>{this._destroyMenu(i),("click"===i||"tab"===i)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,jV),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const e=this._createOverlay(),i=e.getConfig(),r=i.positionStrategy;this._setPosition(r),i.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,e.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof aC&&(this.menu._startAnimation(),this.menu._directDescendantItems.changes.pipe(wu(this.menu.close)).subscribe(()=>{r.withLockedPosition(!1).reapplyLastPosition(),r.withLockedPosition(!0)}))}closeMenu(){this.menu.close.emit()}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,i):this._element.nativeElement.focus(i)}updatePosition(){var e;null===(e=this._overlayRef)||void 0===e||e.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const i=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,i instanceof aC?(i._resetAnimation(),i.lazyContent?i._animationDone.pipe(gn(r=>"void"===r.toState),(0,Bn.q)(1),wu(i.lazyContent._attached)).subscribe({next:()=>i.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),i.lazyContent&&i.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let e=0,i=this.menu.parentMenu;for(;i;)e++,i=i.parentMenu;this.menu.setElevation(e)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const e=this._getOverlayConfig();this._subscribeToPositions(e.positionStrategy),this._overlayRef=this._overlay.create(e),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new lV({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e){this.menu.setPositionClasses&&e.positionChanges.subscribe(i=>{const r="start"===i.connectionPair.overlayX?"after":"before",o="top"===i.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>this.menu.setPositionClasses(r,o)):this.menu.setPositionClasses(r,o)})}_setPosition(e){let[i,r]="before"===this.menu.xPosition?["end","start"]:["start","end"],[o,c]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[d,p]=[o,c],[b,E]=[i,r],D=0;this.triggersSubmenu()?(E=i="before"===this.menu.xPosition?"start":"end",r=b="end"===i?"start":"end",D="bottom"===o?8:-8):this.menu.overlapTrigger||(d="top"===o?"bottom":"top",p="top"===c?"bottom":"top"),e.withPositions([{originX:i,originY:d,overlayX:b,overlayY:o,offsetY:D},{originX:r,originY:d,overlayX:E,overlayY:o,offsetY:D},{originX:i,originY:p,overlayX:b,overlayY:c,offsetY:-D},{originX:r,originY:p,overlayX:E,overlayY:c,offsetY:-D}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),i=this._overlayRef.detachments(),r=this._parentMaterialMenu?this._parentMaterialMenu.closed:st(),o=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(gn(c=>c!==this._menuItemInstance),gn(()=>this._menuOpen)):st();return(0,Ia.T)(e,r,o,i)}_handleMousedown(e){B1(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const i=e.keyCode;(13===i||32===i)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===i&&"ltr"===this.dir||37===i&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(gn(e=>e===this._menuItemInstance&&!e.disabled),T1(0,VR)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof aC&&this.menu._isAnimating?this.menu._animationDone.pipe((0,Bn.q)(1),T1(0,VR),wu(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new nV(this.menu.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(xb),l.Y36(l.SBq),l.Y36(l.s_b),l.Y36(VV),l.Y36(QR,8),l.Y36(PS,10),l.Y36(jw,8),l.Y36(Rm),l.Y36(l.R0b))},n.\u0275dir=l.lG2({type:n,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(e,i){1&e&&l.NdJ("click",function(o){return i._handleClick(o)})("mousedown",function(o){return i._handleMousedown(o)})("keydown",function(o){return i._handleKeydown(o)}),2&e&&l.uIk("aria-expanded",i.menuOpen||null)("aria-controls",i.menuOpen?i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),$W=(()=>{class n extends HW{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[l.qOj]}),n})(),GW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[jW],imports:[[kn,Xn,Zw,HR],rC,Xn]}),n})();class qW{}class Rf{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),o=r.toLowerCase(),c=e.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(c):this.headers.set(o,[c])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let i=t[e];const r=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Rf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Rf;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Rf?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const o=t.value;if(o){let c=this.headers.get(e);if(!c)return;c=c.filter(d=>-1===o.indexOf(d)),0===c.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class zW{encodeKey(t){return HV(t)}encodeValue(t){return HV(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const YW=/%(\d[a-f0-9])/gi,ZW={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function HV(n){return encodeURIComponent(n).replace(YW,(t,e)=>{var i;return null!==(i=ZW[e])&&void 0!==i?i:t})}function $V(n){return`${n}`}class Of{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new zW,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function WW(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[c,d]=-1==o?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],p=e.get(c)||[];p.push(d),e.set(c,p)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e];this.map.set(e,Array.isArray(i)?i:[i])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Of({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push($V(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf($V(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class KW{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function GV(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function qV(n){return"undefined"!=typeof Blob&&n instanceof Blob}function zV(n){return"undefined"!=typeof FormData&&n instanceof FormData}class lC{constructor(t,e,i,r){let o;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function QW(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Rf),this.context||(this.context=new KW),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=e;else{const d=e.indexOf("?");this.urlWithParams=e+(-1===d?"?":d<e.length-1?"&":"")+c}}else this.params=new Of,this.urlWithParams=e}serializeBody(){return null===this.body?null:GV(this.body)||qV(this.body)||zV(this.body)||function XW(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Of?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||zV(this.body)?null:qV(this.body)?this.body.type||null:GV(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Of?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const i=t.method||this.method,r=t.url||this.url,o=t.responseType||this.responseType,c=void 0!==t.body?t.body:this.body,d=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,p=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let b=t.headers||this.headers,E=t.params||this.params;const D=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(b=Object.keys(t.setHeaders).reduce((R,N)=>R.set(N,t.setHeaders[N]),b)),t.setParams&&(E=Object.keys(t.setParams).reduce((R,N)=>R.set(N,t.setParams[N]),E)),new lC(i,r,c,{params:E,headers:b,context:D,reportProgress:p,responseType:o,withCredentials:d})}}var mo=(()=>((mo=mo||{})[mo.Sent=0]="Sent",mo[mo.UploadProgress=1]="UploadProgress",mo[mo.ResponseHeader=2]="ResponseHeader",mo[mo.DownloadProgress=3]="DownloadProgress",mo[mo.Response=4]="Response",mo[mo.User=5]="User",mo))();class XR extends class JW{constructor(t,e=200,i="OK"){this.headers=t.headers||new Rf,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(t={}){super(t),this.type=mo.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new XR({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}function JR(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let YV=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let o;if(e instanceof lC)o=e;else{let p,b;p=r.headers instanceof Rf?r.headers:new Rf(r.headers),r.params&&(b=r.params instanceof Of?r.params:new Of({fromObject:r.params})),o=new lC(e,i,void 0!==r.body?r.body:null,{headers:p,context:r.context,params:b,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const c=st(o).pipe(Wi(p=>this.handler.handle(p)));if(e instanceof lC||"events"===r.observe)return c;const d=c.pipe(gn(p=>p instanceof XR));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return d.pipe((0,et.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return d.pipe((0,et.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return d.pipe((0,et.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return d.pipe((0,et.U)(p=>p.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Of).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,JR(r,i))}post(e,i,r={}){return this.request("POST",e,JR(r,i))}put(e,i,r={}){return this.request("PUT",e,JR(r,i))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(qW))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const tY=["*"];let NS;function cC(n){var t;return(null===(t=function nY(){if(void 0===NS&&(NS=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(NS=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return NS}())||void 0===t?void 0:t.createHTML(n))||n}function ZV(n){return Error(`Unable to find icon with the name "${n}"`)}function KV(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function QV(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Wm{constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}}let FS=(()=>{class n{constructor(e,i,r,o){this._httpClient=e,this._sanitizer=i,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,o){return this._addSvgIconConfig(e,i,new Wm(r,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,o){const c=this._sanitizer.sanitize(l.q3G.HTML,r);if(!c)throw QV(r);const d=cC(c);return this._addSvgIconConfig(e,i,new Wm("",d,o))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new Wm(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){const o=this._sanitizer.sanitize(l.q3G.HTML,i);if(!o)throw QV(i);const c=cC(o);return this._addSvgIconSetConfig(e,new Wm("",c,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const i=this._sanitizer.sanitize(l.q3G.RESOURCE_URL,e);if(!i)throw KV(e);const r=this._cachedIconsByUrl.get(i);return r?st(LS(r)):this._loadSvgIconFromConfig(new Wm(e,null)).pipe((0,vi.b)(o=>this._cachedIconsByUrl.set(i,o)),(0,et.U)(o=>LS(o)))}getNamedSvgIcon(e,i=""){const r=XV(i,e);let o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,e),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);const c=this._iconSetConfigs.get(i);return c?this._getSvgFromIconSetConfigs(e,c):eo(ZV(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?st(LS(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe((0,et.U)(i=>LS(i)))}_getSvgFromIconSetConfigs(e,i){const r=this._extractIconWithNameFromAnySet(e,i);return r?st(r):j2(i.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(ko(d=>{const b=`Loading icon set URL: ${this._sanitizer.sanitize(l.q3G.RESOURCE_URL,c.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(b)),st(null)})))).pipe((0,et.U)(()=>{const c=this._extractIconWithNameFromAnySet(e,i);if(!c)throw ZV(e);return c}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){const o=i[r];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){const c=this._svgElementFromConfig(o),d=this._extractSvgIconFromSet(c,e,o.options);if(d)return d}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe((0,vi.b)(i=>e.svgText=i),(0,et.U)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?st(null):this._fetchIcon(e).pipe((0,vi.b)(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){const o=e.querySelector(`[id="${i}"]`);if(!o)return null;const c=o.cloneNode(!0);if(c.removeAttribute("id"),"svg"===c.nodeName.toLowerCase())return this._setSvgAttributes(c,r);if("symbol"===c.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(c),r);const d=this._svgElementFromString(cC("<svg></svg>"));return d.appendChild(c),this._setSvgAttributes(d,r)}_svgElementFromString(e){const i=this._document.createElement("DIV");i.innerHTML=e;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const i=this._svgElementFromString(cC("<svg></svg>")),r=e.attributes;for(let o=0;o<r.length;o++){const{name:c,value:d}=r[o];"id"!==c&&i.setAttribute(c,d)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){var i;const{url:r,options:o}=e,c=null!==(i=null==o?void 0:o.withCredentials)&&void 0!==i&&i;if(!this._httpClient)throw function iY(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const d=this._sanitizer.sanitize(l.q3G.RESOURCE_URL,r);if(!d)throw KV(r);const p=this._inProgressUrlFetches.get(d);if(p)return p;const b=this._httpClient.get(d,{responseType:"text",withCredentials:c}).pipe((0,et.U)(E=>cC(E)),cl(()=>this._inProgressUrlFetches.delete(d)),(0,Ry.B)());return this._inProgressUrlFetches.set(d,b),b}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(XV(e,i),r),this}_addSvgIconSetConfig(e,i){const r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){const i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){const o=this._resolvers[r](i,e);if(o)return oY(o)?new Wm(o.url,null,o.options):new Wm(o,null)}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(YV,8),l.LFG(rl),l.LFG(ie,8),l.LFG(l.qLn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function LS(n){return n.cloneNode(!0)}function XV(n,t){return n+":"+t}function oY(n){return!(!n.url||!n.options)}const sY=fR(class{constructor(n){this._elementRef=n}}),aY=new l.OlP("mat-icon-location",{providedIn:"root",factory:function lY(){const n=(0,l.f3M)(ie),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),JV=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],cY=JV.map(n=>`[${n}]`).join(", "),uY=/^url\(['"]?#(.*?)['"]?\)$/;let dY=(()=>{class n extends sY{constructor(e,i,r,o,c){super(e),this._iconRegistry=i,this._location=o,this._errorHandler=c,this._inline=!1,this._currentIconFetch=Wn.w0.EMPTY,r||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=Qn(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=e.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,i=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();i!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),i&&e.classList.add(i),this._previousFontSetClass=i),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(c=>{o.setAttribute(c.name,`url('${e}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(e){const i=e.querySelectorAll(cY),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)JV.forEach(c=>{const d=i[o],p=d.getAttribute(c),b=p?p.match(uY):null;if(b){let E=r.get(d);E||(E=[],r.set(d,E)),E.push({name:c,value:b[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe((0,Bn.q)(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${o.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(FS),l.$8M("aria-hidden"),l.Y36(aY),l.Y36(l.qLn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,i){2&e&&(l.uIk("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),l.ekj("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[l.qOj],ngContentSelectors:tY,decls:1,vars:0,template:function(e,i){1&e&&(l.F$t(),l.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),hY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Xn],Xn]}),n})(),fY=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-header"]],decls:30,vars:1,consts:[["color","primary"],["aria-label","Example icon-button with a menu","mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","","routerLink","/listInters"],["disabled","","mat-menu-item",""],["mat-menu-item",""],[1,"example-spacer"],["aria-label","Example icon-button with heart icon","mat-icon-button","","routerLink","/home",1,"example-icon","favorite-icon"],["aria-label","Example icon-button with share icon","mat-icon-button","","routerLink","/listInters",1,"example-icon"]],template:function(e,i){if(1&e&&(l.TgZ(0,"p")(1,"mat-toolbar",0)(2,"mat-toolbar-row")(3,"button",1)(4,"mat-icon"),l._uU(5,"menu"),l.qZA()(),l.TgZ(6,"mat-menu",null,2)(8,"button",3)(9,"mat-icon"),l._uU(10,"menu"),l.qZA(),l.TgZ(11,"span"),l._uU(12,"Liste interventions"),l.qZA()(),l.TgZ(13,"button",4)(14,"mat-icon"),l._uU(15,"voicemail"),l.qZA(),l.TgZ(16,"span"),l._uU(17,"Check voice mail"),l.qZA()(),l.TgZ(18,"button",5)(19,"mat-icon"),l._uU(20,"notifications_off"),l.qZA(),l.TgZ(21,"span"),l._uU(22,"Disable alerts"),l.qZA()()(),l._UZ(23,"span",6),l.TgZ(24,"button",7)(25,"mat-icon"),l._uU(26,"favorite"),l.qZA()(),l.TgZ(27,"button",8)(28,"mat-icon"),l._uU(29,"share"),l.qZA()()()()()),2&e){const r=l.MAs(7);l.xp6(3),l.Q6J("matMenuTriggerFor",r)}},directives:[AW,FV,_S,$W,dY,VW,PS,Dp],styles:[".example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),n})(),pY=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-footer"]],decls:2,vars:0,template:function(e,i){1&e&&(l.TgZ(0,"p"),l._uU(1,"footer works!"),l.qZA())},styles:[""]}),n})(),mY=(()=>{class n{constructor(e){this.appUpdate=e,this.title="techFibreApplication"}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(NV))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"main"],[1,"principale"]],template:function(e,i){1&e&&(l._UZ(0,"app-header"),l.TgZ(1,"div",0)(2,"div",1),l._UZ(3,"router-outlet"),l.qZA()(),l._UZ(4,"app-footer"))},directives:[fY,id,pY],styles:[".principale[_ngcontent-%COMP%]{margin-left:10%;margin-right:10%;padding-top:15px;padding-bottom:15px}.main[_ngcontent-%COMP%]{background-image:linear-gradient(to bottom right,red,blue)}"]}),n})();function eO(){return(0,Yn.e)((n,t)=>{let e,i=!1;n.subscribe((0,On.x)(t,r=>{const o=e;e=r,i&&t.next([o,r]),i=!0}))})}var lt,gY="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Fd={},tO=tO||{},Ht=gY||self;function BS(){}function nO(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function uC(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var iO="closure_uid_"+(1e9*Math.random()>>>0),vY=0;function bY(n,t,e){return n.call.apply(n.bind,arguments)}function yY(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function go(n,t,e){return(go=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bY:yY).apply(null,arguments)}function VS(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function _o(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(i,r,o){for(var c=Array(arguments.length-2),d=2;d<arguments.length;d++)c[d-2]=arguments[d];return t.prototype[r].apply(i,c)}}function Pf(){this.s=this.s,this.o=this.o}var CY={};Pf.prototype.s=!1,Pf.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function _Y(n){return Object.prototype.hasOwnProperty.call(n,iO)&&n[iO]||(n[iO]=++vY)}(this);delete CY[n]}},Pf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const eU=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},tU=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const i=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<i;o++)o in r&&t.call(e,r[o],o,n)};function nU(n){return Array.prototype.concat.apply([],arguments)}function rO(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function US(n){return/^[\s\xa0]*$/.test(n)}var ps,iU=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function fs(n,t){return-1!=n.indexOf(t)}function oO(n,t){return n<t?-1:n>t?1:0}e:{var rU=Ht.navigator;if(rU){var oU=rU.userAgent;if(oU){ps=oU;break e}}ps=""}function sO(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function sU(n){const t={};for(const e in n)t[e]=n[e];return t}var aU="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lU(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let o=0;o<aU.length;o++)e=aU[o],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function aO(n){return aO[" "](n),n}aO[" "]=BS;var jS,n,DY=fs(ps,"Opera"),Sb=fs(ps,"Trident")||fs(ps,"MSIE"),cU=fs(ps,"Edge"),lO=cU||Sb,uU=fs(ps,"Gecko")&&!(fs(ps.toLowerCase(),"webkit")&&!fs(ps,"Edge"))&&!(fs(ps,"Trident")||fs(ps,"MSIE"))&&!fs(ps,"Edge"),IY=fs(ps.toLowerCase(),"webkit")&&!fs(ps,"Edge");function dU(){var n=Ht.document;return n?n.documentMode:void 0}e:{var cO="",uO=(n=ps,uU?/rv:([^\);]+)(\)|;)/.exec(n):cU?/Edge\/([\d\.]+)/.exec(n):Sb?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):IY?/WebKit\/(\S+)/.exec(n):DY?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(uO&&(cO=uO?uO[1]:""),Sb){var dO=dU();if(null!=dO&&dO>parseFloat(cO)){jS=String(dO);break e}}jS=cO}var SY={};var MY=Ht.document&&Sb&&(dU()||parseInt(jS,10))||void 0,AY=function(){if(!Ht.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ht.addEventListener("test",BS,t),Ht.removeEventListener("test",BS,t)}catch(e){}return n}();function $o(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function dC(n,t){if($o.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(uU){e:{try{aO(t.nodeName);var r=!0;break e}catch(o){}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:kY[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&dC.Z.h.call(this)}}$o.prototype.h=function(){this.defaultPrevented=!0},_o(dC,$o);var kY={2:"touch",3:"pen",4:"mouse"};dC.prototype.h=function(){dC.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var hC="closure_listenable_"+(1e6*Math.random()|0),RY=0;function OY(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ia=r,this.key=++RY,this.ca=this.fa=!1}function HS(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function $S(n){this.src=n,this.g={},this.h=0}function fO(n,t){var e=t.type;if(e in n.g){var o,i=n.g[e],r=eU(i,t);(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(HS(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function pO(n,t,e,i){for(var r=0;r<n.length;++r){var o=n[r];if(!o.ca&&o.listener==t&&o.capture==!!e&&o.ia==i)return r}return-1}$S.prototype.add=function(n,t,e,i,r){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var c=pO(n,t,i,r);return-1<c?(t=n[c],e||(t.fa=!1)):((t=new OY(t,this.src,o,!!i,r)).fa=e,n.push(t)),t};var mO="closure_lm_"+(1e6*Math.random()|0),gO={};function fU(n,t,e,i,r){if(i&&i.once)return mU(n,t,e,i,r);if(Array.isArray(t)){for(var o=0;o<t.length;o++)fU(n,t[o],e,i,r);return null}return e=yO(e),n&&n[hC]?n.N(t,e,uC(i)?!!i.capture:!!i,r):pU(n,t,e,!1,i,r)}function pU(n,t,e,i,r,o){if(!t)throw Error("Invalid event type");var c=uC(r)?!!r.capture:!!r,d=vO(n);if(d||(n[mO]=d=new $S(n)),(e=d.add(t,e,i,c,o)).proxy)return e;if(i=function PY(){var t=NY;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)AY||(r=c),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(_U(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function mU(n,t,e,i,r){if(Array.isArray(t)){for(var o=0;o<t.length;o++)mU(n,t[o],e,i,r);return null}return e=yO(e),n&&n[hC]?n.O(t,e,uC(i)?!!i.capture:!!i,r):pU(n,t,e,!0,i,r)}function gU(n,t,e,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)gU(n,t[o],e,i,r);else i=uC(i)?!!i.capture:!!i,e=yO(e),n&&n[hC]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=pO(o=n.g[t],e,i,r))&&(HS(o[e]),Array.prototype.splice.call(o,e,1),0==o.length&&(delete n.g[t],n.h--))):n&&(n=vO(n))&&(t=n.g[t.toString()],n=-1,t&&(n=pO(t,e,i,r)),(e=-1<n?t[n]:null)&&_O(e))}function _O(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[hC])fO(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(_U(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=vO(t))?(fO(e,n),0==e.h&&(e.src=null,t[mO]=null)):HS(n)}}}function _U(n){return n in gO?gO[n]:gO[n]="on"+n}function NY(n,t){if(n.ca)n=!0;else{t=new dC(t,this);var e=n.listener,i=n.ia||n.src;n.fa&&_O(n),n=e.call(i,t)}return n}function vO(n){return(n=n[mO])instanceof $S?n:null}var bO="__closure_events_fn_"+(1e9*Math.random()>>>0);function yO(n){return"function"==typeof n?n:(n[bO]||(n[bO]=function(t){return n.handleEvent(t)}),n[bO])}function Vr(){Pf.call(this),this.i=new $S(this),this.P=this,this.I=null}function vo(n,t){var e,i=n.I;if(i)for(e=[];i;i=i.I)e.push(i);if(n=n.P,i=t.type||t,"string"==typeof t)t=new $o(t,n);else if(t instanceof $o)t.target=t.target||n;else{var r=t;lU(t=new $o(i,n),r)}if(r=!0,e)for(var o=e.length-1;0<=o;o--){var c=t.g=e[o];r=GS(c,i,!0,t)&&r}if(r=GS(c=t.g=n,i,!0,t)&&r,r=GS(c,i,!1,t)&&r,e)for(o=0;o<e.length;o++)r=GS(c=t.g=e[o],i,!1,t)&&r}function GS(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,o=0;o<t.length;++o){var c=t[o];if(c&&!c.ca&&c.capture==e){var d=c.listener,p=c.ia||c.src;c.fa&&fO(n.i,c),r=!1!==d.call(p,i)&&r}}return r&&!i.defaultPrevented}_o(Vr,Pf),Vr.prototype[hC]=!0,Vr.prototype.removeEventListener=function(n,t,e,i){gU(this,n,t,e,i)},Vr.prototype.M=function(){if(Vr.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)HS(e[i]);delete n.g[t],n.h--}}this.I=null},Vr.prototype.N=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},Vr.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var wO=Ht.JSON.stringify;function FY(){var n=bU;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var EO,vU=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new BY,n=>n.reset());class BY{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function VY(n){Ht.setTimeout(()=>{throw n},0)}function CO(n,t){EO||function UY(){var n=Ht.Promise.resolve(void 0);EO=function(){n.then(jY)}}(),xO||(EO(),xO=!0),bU.add(n,t)}var xO=!1,bU=new class LY{constructor(){this.h=this.g=null}add(t,e){const i=vU.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function jY(){for(var n;n=FY();){try{n.h.call(n.g)}catch(e){VY(e)}var t=vU;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}xO=!1}function qS(n,t){Vr.call(this),this.h=n||1,this.g=t||Ht,this.j=go(this.kb,this),this.l=Date.now()}function DO(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function IO(n,t,e){if("function"==typeof n)e&&(n=go(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=go(n.handleEvent,n)}return 2147483647<Number(t)?-1:Ht.setTimeout(n,t||0)}function yU(n){n.g=IO(()=>{n.g=null,n.i&&(n.i=!1,yU(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}_o(qS,Vr),(lt=qS.prototype).da=!1,lt.S=null,lt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),vo(this,"tick"),this.da&&(DO(this),this.start()))}},lt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},lt.M=function(){qS.Z.M.call(this),DO(this),delete this.g};class HY extends Pf{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:yU(this)}M(){super.M(),this.g&&(Ht.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fC(n){Pf.call(this),this.h=n,this.g={}}_o(fC,Pf);var wU=[];function CU(n,t,e,i){Array.isArray(e)||(e&&(wU[0]=e.toString()),e=wU);for(var r=0;r<e.length;r++){var o=fU(t,e[r],i||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function EU(n){sO(n.g,function(t,e){this.g.hasOwnProperty(e)&&_O(t)},n),n.g={}}function zS(){this.g=!0}function Tb(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function zY(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var c=1;c<r.length;c++)r[c]=""}}}return wO(e)}catch(d){return t}}(n,e)+(i?" "+i:"")})}fC.prototype.M=function(){fC.Z.M.call(this),EU(this)},fC.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zS.prototype.Aa=function(){this.g=!1},zS.prototype.info=function(){};var Ym={},xU=null;function WS(){return xU=xU||new Vr}function DU(n){$o.call(this,Ym.Ma,n)}function pC(n){const t=WS();vo(t,new DU(t,n))}function IU(n,t){$o.call(this,Ym.STAT_EVENT,n),this.stat=t}function ms(n){const t=WS();vo(t,new IU(t,n))}function SU(n,t){$o.call(this,Ym.Na,n),this.size=t}function mC(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ht.setTimeout(function(){n()},t)}Ym.Ma="serverreachability",_o(DU,$o),Ym.STAT_EVENT="statevent",_o(IU,$o),Ym.Na="timingevent",_o(SU,$o);var YS={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},TU={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function SO(){}function AU(){}SO.prototype.h=null;var AO,gC={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function TO(){$o.call(this,"d")}function MO(){$o.call(this,"c")}function ZS(){}function _C(n,t,e,i){this.l=n,this.j=t,this.m=e,this.X=i||1,this.V=new fC(this),this.P=WY,this.W=new qS(n=lO?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new kU}function kU(){this.i=null,this.g="",this.h=!1}_o(TO,$o),_o(MO,$o),_o(ZS,SO),ZS.prototype.g=function(){return new XMLHttpRequest},ZS.prototype.i=function(){return{}},AO=new ZS;var WY=45e3,kO={},KS={};function RO(n,t,e){n.K=1,n.v=tT(Ld(t)),n.s=e,n.U=!0,RU(n,null)}function RU(n,t){n.F=Date.now(),vC(n),n.A=Ld(n.v);var e=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),jU(e.h,"t",i),n.C=0,e=n.l.H,n.h=new kU,n.g=uj(n.l,e?t:null,!n.s),0<n.O&&(n.L=new HY(go(n.Ia,n,n.g),n.O)),CU(n.V,n.g,"readystatechange",n.gb),t=n.H?sU(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),pC(1),function $Y(n,t,e,i,r,o){n.info(function(){if(n.g)if(o)for(var c="",d=o.split("&"),p=0;p<d.length;p++){var b=d[p].split("=");if(1<b.length){var E=b[0];b=b[1];var D=E.split("_");c=2<=D.length&&"type"==D[1]?c+(E+"=")+b+"&":c+(E+"=redacted&")}}else c=null;else c=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function OU(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function PU(n,t,e){let r,i=!0;for(;!n.I&&n.C<e.length;){if(r=YY(n,e),r==KS){4==t&&(n.o=4,ms(14),i=!1),Tb(n.j,n.m,null,"[Incomplete Response]");break}if(r==kO){n.o=4,ms(15),Tb(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}Tb(n.j,n.m,r,null),OO(n,r)}OU(n)&&r!=KS&&r!=kO&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,ms(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),GO(t),t.L=!0,ms(11))):(Tb(n.j,n.m,e,"[Invalid Chunked Response]"),Zm(n),bC(n))}function YY(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?KS:(e=Number(t.substring(e,i)),isNaN(e)?kO:(i+=1)+e>t.length?KS:(t=t.substr(i,e),n.C=i+e,t))}function vC(n){n.Y=Date.now()+n.P,NU(n,n.P)}function NU(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=mC(go(n.eb,n),t)}function QS(n){n.B&&(Ht.clearTimeout(n.B),n.B=null)}function bC(n){0==n.l.G||n.I||sj(n.l,n)}function Zm(n){QS(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,DO(n.W),EU(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function OO(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||FO(e.i,n)))if(e.I=n.N,!n.J&&FO(e.i,n)&&3==e.G){try{var i=e.Ca.g.parse(t)}catch(b){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])e:if(e.u)e.ta=r[1],0<e.ta-e.U&&37500>r[2]&&e.N&&0==e.A&&!e.v&&(e.v=mC(go(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<n.F))break e;aT(e),oT(e)}$O(e),ms(18)}if(1>=GU(e.i)&&e.ka){try{e.ka()}catch(b){}e.ka=void 0}}else Xm(e,11)}else if((n.J||e.g==n)&&aT(e),!US(t))for(r=e.Ca.g.parse(t),t=0;t<r.length;t++){let b=r[t];if(e.U=b[0],b=b[1],2==e.G)if("c"==b[0]){e.J=b[1],e.la=b[2];const E=b[3];null!=E&&(e.ma=E,e.h.info("VER="+e.ma));const D=b[4];null!=D&&(e.za=D,e.h.info("SVER="+e.za));const R=b[5];null!=R&&"number"==typeof R&&0<R&&(e.K=i=1.5*R,e.h.info("backChannelRequestTimeoutMs_="+i)),i=e;const N=n.g;if(N){const B=N.g?N.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var o=i.i;!o.g&&(fs(B,"spdy")||fs(B,"quic")||fs(B,"h2"))&&(o.j=o.l,o.g=new Set,o.h&&(LO(o,o.h),o.h=null))}if(i.D){const K=N.g?N.g.getResponseHeader("X-HTTP-Session-Id"):null;K&&(i.sa=K,wi(i.F,i.D,K))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var c=n;if((i=e).oa=cj(i,i.H?i.la:null,i.W),c.J){qU(i.i,c);var d=c,p=i.K;p&&d.setTimeout(p),d.B&&(QS(d),vC(d)),i.g=c}else rj(i);0<e.l.length&&sT(e)}else"stop"!=b[0]&&"close"!=b[0]||Xm(e,7);else 3==e.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Xm(e,7):jO(e):"noop"!=b[0]&&e.j&&e.j.wa(b),e.A=0)}pC(4)}catch(b){}}function PO(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(nO(n)||"string"==typeof n)tU(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(nO(n)||"string"==typeof n){e=[];for(var i=n.length,r=0;r<i;r++)e.push(r)}else for(r in e=[],i=0,n)e[i++]=r;i=function ZY(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(nO(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length;for(var o=0;o<r;o++)t.call(void 0,i[o],e&&e[o],n)}}function Mb(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var i=0;i<e;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof Mb)for(e=n.T(),i=0;i<e.length;i++)this.set(e[i],n.get(e[i]));else for(i in n)this.set(i,n[i])}function NO(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var i=n.g[t];Km(n.h,i)&&(n.g[e++]=i),t++}n.g.length=e}if(n.i!=n.g.length){var r={};for(e=t=0;t<n.g.length;)Km(r,i=n.g[t])||(n.g[e++]=i,r[i]=1),t++;n.g.length=e}}function Km(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(lt=_C.prototype).setTimeout=function(n){this.P=n},lt.gb=function(n){n=n.target;const t=this.L;t&&3==Bd(n)?t.l():this.Ia(n)},lt.Ia=function(n){try{if(n==this.g)e:{const E=Bd(this.g);var t=this.g.Da();const D=this.g.ba();if(!(3>E)&&(3!=E||lO||this.g&&(this.h.h||this.g.ga()||JU(this.g)))){this.I||4!=E||7==t||pC(8==t||0>=D?3:2),QS(this);var e=this.g.ba();this.N=e;t:if(OU(this)){var i=JU(this.g);n="";var r=i.length,o=4==Bd(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Zm(this),bC(this);var c="";break t}this.h.i=new Ht.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:o&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==e,function GY(n,t,e,i,r,o,c){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+o+" "+c})}(this.j,this.u,this.A,this.m,this.X,E,e),this.i){if(this.$&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!US(d)){var b=d;break t}}b=null}if(!(e=b)){this.i=!1,this.o=3,ms(12),Zm(this),bC(this);break e}Tb(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,OO(this,e)}this.U?(PU(this,E,c),lO&&this.i&&3==E&&(CU(this.V,this.W,"tick",this.fb),this.W.start())):(Tb(this.j,this.m,c,null),OO(this,c)),4==E&&Zm(this),this.i&&!this.I&&(4==E?sj(this.l,this):(this.i=!1,vC(this)))}else 400==e&&0<c.indexOf("Unknown SID")?(this.o=3,ms(12)):(this.o=0,ms(13)),Zm(this),bC(this)}}}catch(E){}},lt.fb=function(){if(this.g){var n=Bd(this.g),t=this.g.ga();this.C<t.length&&(QS(this),PU(this,n,t),this.i&&4!=n&&vC(this))}},lt.cancel=function(){this.I=!0,Zm(this)},lt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function qY(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(pC(3),ms(17)),Zm(this),this.o=2,bC(this)):NU(this,this.Y-n)},(lt=Mb.prototype).R=function(){NO(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},lt.T=function(){return NO(this),this.g.concat()},lt.get=function(n,t){return Km(this.h,n)?this.h[n]:t},lt.set=function(n,t){Km(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},lt.forEach=function(n,t){for(var e=this.T(),i=0;i<e.length;i++){var r=e[i],o=this.get(r);n.call(t,o,r,this)}};var FU=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Qm(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Qm){this.g=void 0!==t?t:n.g,XS(this,n.j),this.s=n.s,JS(this,n.i),eT(this,n.m),this.l=n.l,t=n.h;var e=new CC;e.i=t.i,t.g&&(e.g=new Mb(t.g),e.h=t.h),LU(this,e),this.o=n.o}else n&&(e=String(n).match(FU))?(this.g=!!t,XS(this,e[1]||"",!0),this.s=yC(e[2]||""),JS(this,e[3]||"",!0),eT(this,e[4]),this.l=yC(e[5]||"",!0),LU(this,e[6]||"",!0),this.o=yC(e[7]||"")):(this.g=!!t,this.h=new CC(null,this.g))}function Ld(n){return new Qm(n)}function XS(n,t,e){n.j=e?yC(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function JS(n,t,e){n.i=e?yC(t,!0):t}function eT(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function LU(n,t,e){t instanceof CC?(n.h=t,function rZ(n,t){t&&!n.j&&(Nf(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(VU(this,i),jU(this,r,e))},n)),n.j=t}(n.h,n.g)):(e||(t=wC(t,nZ)),n.h=new CC(t,n.g))}function wi(n,t,e){n.h.set(t,e)}function tT(n){return wi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function yC(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function wC(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,JY),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function JY(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Qm.prototype.toString=function(){var n=[],t=this.j;t&&n.push(wC(t,BU,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(wC(t,BU,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(wC(e,"/"==e.charAt(0)?tZ:eZ,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",wC(e,iZ)),n.join("")};var BU=/[#\/\?@]/g,eZ=/[#\?:]/g,tZ=/[#\?]/g,nZ=/[#\?@]/g,iZ=/#/g;function CC(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function Nf(n){n.g||(n.g=new Mb,n.h=0,n.i&&function KY(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var o=n[e].substring(0,i);r=n[e].substring(i+1)}else o=n[e];t(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function VU(n,t){Nf(n),t=Ab(n,t),Km(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,Km((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&NO(n)))}function UU(n,t){return Nf(n),t=Ab(n,t),Km(n.g.h,t)}function jU(n,t,e){VU(n,t),0<e.length&&(n.i=null,n.g.set(Ab(n,t),rO(e)),n.h+=e.length)}function Ab(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function HU(n){this.l=n||sZ,n=Ht.PerformanceNavigationTiming?0<(n=Ht.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ht.g&&Ht.g.Ea&&Ht.g.Ea()&&Ht.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(lt=CC.prototype).add=function(n,t){Nf(this),this.i=null,n=Ab(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},lt.forEach=function(n,t){Nf(this),this.g.forEach(function(e,i){tU(e,function(r){n.call(t,r,i,this)},this)},this)},lt.T=function(){Nf(this);for(var n=this.g.R(),t=this.g.T(),e=[],i=0;i<t.length;i++)for(var r=n[i],o=0;o<r.length;o++)e.push(t[i]);return e},lt.R=function(n){Nf(this);var t=[];if("string"==typeof n)UU(this,n)&&(t=nU(t,this.g.get(Ab(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=nU(t,n[e])}return t},lt.set=function(n,t){return Nf(this),this.i=null,UU(this,n=Ab(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},lt.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var i=t[e],r=encodeURIComponent(String(i));i=this.R(i);for(var o=0;o<i.length;o++){var c=r;""!==i[o]&&(c+="="+encodeURIComponent(String(i[o]))),n.push(c)}}return this.i=n.join("&")};var sZ=10;function $U(n){return!!n.h||!!n.g&&n.g.size>=n.j}function GU(n){return n.h?1:n.g?n.g.size:0}function FO(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function LO(n,t){n.g?n.g.add(t):n.h=t}function qU(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function zU(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return rO(n.i)}function BO(){}function aZ(){this.g=new BO}function lZ(n,t,e){const i=e||"";try{PO(n,function(r,o){let c=r;uC(r)&&(c=wO(r)),t.push(i+o+"="+encodeURIComponent(c))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function nT(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(o){}}function EC(n){this.l=n.$b||null,this.j=n.ib||!1}function iT(n,t){Vr.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=VO,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}HU.prototype.cancel=function(){if(this.i=zU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},BO.prototype.stringify=function(n){return Ht.JSON.stringify(n,void 0)},BO.prototype.parse=function(n){return Ht.JSON.parse(n,void 0)},_o(EC,SO),EC.prototype.g=function(){return new iT(this.l,this.j)},EC.prototype.i=function(n){return function(){return n}}({}),_o(iT,Vr);var VO=0;function WU(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function xC(n){n.readyState=4,n.l=null,n.j=null,n.A=null,DC(n)}function DC(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(lt=iT.prototype).open=function(n,t){if(this.readyState!=VO)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,DC(this)},lt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||Ht).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xC(this)),this.readyState=VO},lt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,DC(this)),this.g&&(this.readyState=3,DC(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ht.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;WU(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},lt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?xC(this):DC(this),3==this.readyState&&WU(this)}},lt.Ua=function(n){this.g&&(this.response=this.responseText=n,xC(this))},lt.Ta=function(n){this.g&&(this.response=n,xC(this))},lt.ha=function(){this.g&&xC(this)},lt.setRequestHeader=function(n,t){this.v.append(n,t)},lt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},lt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(iT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var uZ=Ht.JSON.parse;function lr(n){Vr.call(this),this.headers=new Mb,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=YU,this.K=this.L=!1}_o(lr,Vr);var YU="",dZ=/^https?$/i,hZ=["POST","PUT"];function pZ(n){return"content-type"==n.toLowerCase()}function ZU(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,KU(n),rT(n)}function KU(n){n.D||(n.D=!0,vo(n,"complete"),vo(n,"error"))}function QU(n){if(n.h&&void 0!==tO&&(!n.C[1]||4!=Bd(n)||2!=n.ba()))if(n.v&&4==Bd(n))IO(n.Fa,0,n);else if(vo(n,"readystatechange"),4==Bd(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===d){var r=String(n.H).match(FU)[1]||null;if(!r&&Ht.self&&Ht.self.location){var o=Ht.self.location.protocol;r=o.substr(0,o.length-1)}i=!dZ.test(r?r.toLowerCase():"")}e=i}if(e)vo(n,"complete"),vo(n,"success");else{n.m=6;try{var c=2<Bd(n)?n.g.statusText:""}catch(p){c=""}n.j=c+" ["+n.ba()+"]",KU(n)}}finally{rT(n)}}}function rT(n,t){if(n.g){XU(n);const e=n.g,i=n.C[0]?BS:null;n.g=null,n.C=null,t||vo(n,"ready");try{e.onreadystatechange=i}catch(r){}}}function XU(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ht.clearTimeout(n.A),n.A=null)}function Bd(n){return n.g?n.g.readyState:0}function JU(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case YU:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(t){return null}}function UO(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=function mZ(n){let t="";return sO(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):wi(n,t,e))}function IC(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function ej(n){this.za=0,this.l=[],this.h=new zS,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=IC("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=IC("baseRetryDelayMs",5e3,n),this.$a=IC("retryDelaySeedMs",1e4,n),this.Ya=IC("forwardChannelMaxRetries",2,n),this.ra=IC("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new HU(n&&n.concurrentRequestLimit),this.Ca=new aZ,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function jO(n){if(tj(n),3==n.G){var t=n.V++,e=Ld(n.F);wi(e,"SID",n.J),wi(e,"RID",t),wi(e,"TYPE","terminate"),SC(n,e),(t=new _C(n,n.h,t,void 0)).K=2,t.v=tT(Ld(e)),e=!1,Ht.navigator&&Ht.navigator.sendBeacon&&(e=Ht.navigator.sendBeacon(t.v.toString(),"")),!e&&Ht.Image&&((new Image).src=t.v,e=!0),e||(t.g=uj(t.l,null),t.g.ea(t.v)),t.F=Date.now(),vC(t)}lj(n)}function oT(n){n.g&&(GO(n),n.g.cancel(),n.g=null)}function tj(n){oT(n),n.u&&(Ht.clearTimeout(n.u),n.u=null),aT(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ht.clearTimeout(n.m),n.m=null)}function HO(n,t){n.l.push(new class{constructor(n,t){this.h=n,this.g=t}}(n.Za++,t)),3==n.G&&sT(n)}function sT(n){$U(n.i)||n.m||(n.m=!0,CO(n.Ha,n),n.C=0)}function nj(n,t){var e;e=t?t.m:n.V++;const i=Ld(n.F);wi(i,"SID",n.J),wi(i,"RID",e),wi(i,"AID",n.U),SC(n,i),n.o&&n.s&&UO(i,n.o,n.s),e=new _C(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=ij(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),LO(n.i,e),RO(e,i,t)}function SC(n,t){n.j&&PO({},function(e,i){wi(t,i,e)})}function ij(n,t,e){e=Math.min(n.l.length,e);var i=n.j?go(n.j.Oa,n.j,n):null;e:{var r=n.l;let o=-1;for(;;){const c=["count="+e];-1==o?0<e?(o=r[0].h,c.push("ofs="+o)):o=0:c.push("ofs="+o);let d=!0;for(let p=0;p<e;p++){let b=r[p].h;const E=r[p].g;if(b-=o,0>b)o=Math.max(0,r[p].h-100),d=!1;else try{lZ(E,c,"req"+b+"_")}catch(D){i&&i(E)}}if(d){i=c.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,i}function rj(n){n.g||n.u||(n.Y=1,CO(n.Ga,n),n.A=0)}function $O(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=mC(go(n.Ga,n),aj(n,n.A)),n.A++,0))}function GO(n){null!=n.B&&(Ht.clearTimeout(n.B),n.B=null)}function oj(n){n.g=new _C(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=Ld(n.oa);wi(t,"RID","rpc"),wi(t,"SID",n.J),wi(t,"CI",n.N?"0":"1"),wi(t,"AID",n.U),SC(n,t),wi(t,"TYPE","xmlhttp"),n.o&&n.s&&UO(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=tT(Ld(t)),e.s=null,e.U=!0,RU(e,n)}function aT(n){null!=n.v&&(Ht.clearTimeout(n.v),n.v=null)}function sj(n,t){var e=null;if(n.g==t){aT(n),GO(n),n.g=null;var i=2}else{if(!FO(n.i,t))return;e=t.D,qU(n.i,t),i=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var r=n.C;vo(i=WS(),new SU(i,e,t,r)),sT(n)}else rj(n);else if(3==(r=t.o)||0==r&&0<n.I||!(1==i&&function gZ(n,t){return!(GU(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=mC(go(n.Ha,n,t),aj(n,n.C)),n.C++,0)))}(n,t)||2==i&&$O(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),r){case 1:Xm(n,5);break;case 4:Xm(n,10);break;case 3:Xm(n,6);break;default:Xm(n,2)}}function aj(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function Xm(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var i=go(n.jb,n);e||(e=new Qm("//www.google.com/images/cleardot.gif"),Ht.location&&"http"==Ht.location.protocol||XS(e,"https"),tT(e)),function cZ(n,t){const e=new zS;if(Ht.Image){const i=new Image;i.onload=VS(nT,e,i,"TestLoadImage: loaded",!0,t),i.onerror=VS(nT,e,i,"TestLoadImage: error",!1,t),i.onabort=VS(nT,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=VS(nT,e,i,"TestLoadImage: timeout",!1,t),Ht.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else ms(2);n.G=0,n.j&&n.j.va(t),lj(n),tj(n)}function lj(n){n.G=0,n.I=-1,n.j&&((0!=zU(n.i).length||0!=n.l.length)&&(n.i.i.length=0,rO(n.l),n.l.length=0),n.j.ua())}function cj(n,t,e){let i=function QY(n){return n instanceof Qm?Ld(n):new Qm(n,void 0)}(e);if(""!=i.i)t&&JS(i,t+"."+i.i),eT(i,i.m);else{const r=Ht.location;i=function XY(n,t,e,i){var r=new Qm(null,void 0);return n&&XS(r,n),t&&JS(r,t),e&&eT(r,e),i&&(r.l=i),r}(r.protocol,t?t+"."+r.hostname:r.hostname,+r.port,e)}return n.aa&&sO(n.aa,function(r,o){wi(i,o,r)}),e=n.sa,(t=n.D)&&e&&wi(i,t,e),wi(i,"VER",n.ma),SC(n,i),i}function uj(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new lr(e&&n.Ba&&!n.qa?new EC({ib:!0}):n.qa)).L=n.H,t}function dj(){}function lT(){if(Sb&&!(10<=Number(MY)))throw Error("Environmental error: no available transport.")}function qa(n,t){Vr.call(this),this.g=new ej(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!US(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!US(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new kb(this)}function hj(n){TO.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function fj(){MO.call(this),this.status=1}function kb(n){this.g=n}(lt=lr.prototype).ea=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():AO.g(),this.C=function MU(n){return n.h||(n.h=n.i())}(this.u?this.u:AO),this.g.onreadystatechange=go(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(o){return void ZU(this,o)}n=e||"";const r=new Mb(this.headers);i&&PO(i,function(o,c){r.set(c,o)}),i=function EY(n){e:{var t=pZ;const e=n.length,i="string"==typeof n?n.split(""):n;for(let r=0;r<e;r++)if(r in i&&t.call(void 0,i[r],r,n)){t=r;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(r.T()),e=Ht.FormData&&n instanceof Ht.FormData,!(0<=eU(hZ,t))||i||e||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(o,c){this.g.setRequestHeader(c,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{XU(this),0<this.B&&((this.K=function fZ(n){return Sb&&function TY(){return function xY(n){var t=SY;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}(function(){let n=0;const t=iU(String(jS)).split("."),e=iU("9").split("."),i=Math.max(t.length,e.length);for(let c=0;0==n&&c<i;c++){var r=t[c]||"",o=e[c]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==r[0].length&&0==o[0].length)break;n=oO(0==r[1].length?0:parseInt(r[1],10),0==o[1].length?0:parseInt(o[1],10))||oO(0==r[2].length,0==o[2].length)||oO(r[2],o[2]),r=r[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=go(this.pa,this)):this.A=IO(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){ZU(this,o)}},lt.pa=function(){void 0!==tO&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vo(this,"timeout"),this.abort(8))},lt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,vo(this,"complete"),vo(this,"abort"),rT(this))},lt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),rT(this,!0)),lr.Z.M.call(this)},lt.Fa=function(){this.s||(this.F||this.v||this.l?QU(this):this.cb())},lt.cb=function(){QU(this)},lt.ba=function(){try{return 2<Bd(this)?this.g.status:-1}catch(n){return-1}},lt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},lt.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),uZ(t)}},lt.Da=function(){return this.m},lt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(lt=ej.prototype).ma=8,lt.G=1,lt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(t){}},lt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new _C(this,this.h,n,void 0);let o=this.s;if(this.P&&(o?(o=sU(o),lU(o,this.P)):o=this.P),null===this.o&&(r.H=o),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var i=this.l[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=ij(this,r,t),wi(e=Ld(this.F),"RID",n),wi(e,"CVER",22),this.D&&wi(e,"X-HTTP-Session-Id",this.D),SC(this,e),this.o&&o&&UO(e,this.o,o),LO(this.i,r),this.Ra&&wi(e,"TYPE","init"),this.ja?(wi(e,"$req",t),wi(e,"SID","null"),r.$=!0,RO(r,e,null)):RO(r,e,t),this.G=2}}else 3==this.G&&(n?nj(this,n):0==this.l.length||$U(this.i)||nj(this))},lt.Ga=function(){if(this.u=null,oj(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=mC(go(this.bb,this),n)}},lt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ms(10),oT(this),oj(this))},lt.ab=function(){null!=this.v&&(this.v=null,oT(this),$O(this),ms(19))},lt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ms(2)):(this.h.info("Failed to ping google.com"),ms(1))},(lt=dj.prototype).xa=function(){},lt.wa=function(){},lt.va=function(){},lt.ua=function(){},lt.Oa=function(){},lT.prototype.g=function(n,t){return new qa(n,t)},_o(qa,Vr),qa.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),CO(go(n.hb,n,t))),ms(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=cj(n,null,n.W),sT(n)},qa.prototype.close=function(){jO(this.g)},qa.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,HO(this.g,t)}else this.v?((t={}).__data__=wO(n),HO(this.g,t)):HO(this.g,n)},qa.prototype.M=function(){this.g.j=null,delete this.j,jO(this.g),delete this.g,qa.Z.M.call(this)},_o(hj,TO),_o(fj,MO),_o(kb,dj),kb.prototype.xa=function(){vo(this.g,"a")},kb.prototype.wa=function(n){vo(this.g,new hj(n))},kb.prototype.va=function(n){vo(this.g,new fj(n))},kb.prototype.ua=function(){vo(this.g,"b")},lT.prototype.createWebChannel=lT.prototype.g,qa.prototype.send=qa.prototype.u,qa.prototype.open=qa.prototype.m,qa.prototype.close=qa.prototype.close,YS.NO_ERROR=0,YS.TIMEOUT=8,YS.HTTP_ERROR=6,TU.COMPLETE="complete",AU.EventType=gC,gC.OPEN="a",gC.CLOSE="b",gC.ERROR="c",gC.MESSAGE="d",Vr.prototype.listen=Vr.prototype.N,lr.prototype.listenOnce=lr.prototype.O,lr.prototype.getLastError=lr.prototype.La,lr.prototype.getLastErrorCode=lr.prototype.Da,lr.prototype.getStatus=lr.prototype.ba,lr.prototype.getResponseJson=lr.prototype.Qa,lr.prototype.getResponseText=lr.prototype.ga,lr.prototype.send=lr.prototype.ea;var _Z=Fd.createWebChannelTransport=function(){return new lT},vZ=Fd.getStatEventTarget=function(){return WS()},qO=Fd.ErrorCode=YS,bZ=Fd.EventType=TU,yZ=Fd.Event=Ym,pj=Fd.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},wZ=Fd.FetchXmlHttpFactory=EC,cT=Fd.WebChannel=AU,CZ=Fd.XhrIo=lr;const mj="@firebase/firestore";class bo{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}bo.UNAUTHENTICATED=new bo(null),bo.GOOGLE_CREDENTIALS=new bo("google-credentials-uid"),bo.FIRST_PARTY=new bo("first-party-uid"),bo.MOCK_USER=new bo("mock-user");let Rb="9.6.11";const Ff=new Ta.Yd("@firebase/firestore");function zO(){return Ff.logLevel}function Ue(n,...t){if(Ff.logLevel<=Ta.in.DEBUG){const e=t.map(WO);Ff.debug(`Firestore (${Rb}): ${n}`,...e)}}function cr(n,...t){if(Ff.logLevel<=Ta.in.ERROR){const e=t.map(WO);Ff.error(`Firestore (${Rb}): ${n}`,...e)}}function TC(n,...t){if(Ff.logLevel<=Ta.in.WARN){const e=t.map(WO);Ff.warn(`Firestore (${Rb}): ${n}`,...e)}}function WO(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(e){return n}}function ut(n="Unexpected state"){const t=`FIRESTORE (${Rb}) INTERNAL ASSERTION FAILED: `+n;throw cr(t),new Error(t)}function Lt(n,t){n||ut()}function Xe(n,t){return n}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends L.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ur{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class gj{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class DZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(bo.UNAUTHENTICATED))}shutdown(){}}class IZ{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class SZ{constructor(t){this.t=t,this.currentUser=bo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const o=b=>this.i!==r?(r=this.i,e(b)):Promise.resolve();let c=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ur,t.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const b=c;t.enqueueRetryable((0,fe.Z)(function*(){yield b.promise,yield o(i.currentUser)}))},p=b=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(b=>p(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?p(b):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ur)}},0),d()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Lt("string"==typeof i.accessToken),new gj(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Lt(null===t||"string"==typeof t),new bo(t)}}class TZ{constructor(t,e,i){this.type="FirstParty",this.user=bo.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const r=t.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class MZ{constructor(t,e,i){this.h=t,this.l=e,this.m=i}getToken(){return Promise.resolve(new TZ(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(bo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _j{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AZ{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const i=o=>{null!=o.error&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.p;return this.p=o.token,Ue("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};const r=o=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.g.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.g.getImmediate({optional:!0});o?r(o):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Lt("string"==typeof e.token),this.p=e.token,new _j(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class za{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.I(i),this.T=i=>e.writeSequenceNumber(i))}I(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function kZ(n){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}za.A=-1;class vj{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=kZ(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<e&&(i+=t.charAt(r[o]%t.length))}return i}}function zt(n,t){return n<t?-1:n>t?1:0}function Ob(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function bj(n){return n+"\0"}class Ki{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Pe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Pe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Pe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Pe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ki.fromMillis(Date.now())}static fromDate(t){return Ki.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new Ki(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?zt(this.nanoseconds,t.nanoseconds):zt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class kt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new kt(t)}static min(){return new kt(new Ki(0,0))}static max(){return new kt(new Ki(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function yj(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Jm(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function wj(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class MC{constructor(t,e,i){void 0===e?e=0:e>t.length&&ut(),void 0===i?i=t.length-e:i>t.length-e&&ut(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===MC.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof MC?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const o=t.get(r),c=e.get(r);if(o<c)return-1;if(o>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class _n extends MC{construct(t,e,i){return new _n(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Pe(me.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new _n(e)}static emptyPath(){return new _n([])}}const RZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jr extends MC{construct(t,e,i){return new jr(t,e,i)}static isValidIdentifier(t){return RZ.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jr.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new jr(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const o=()=>{if(0===i.length)throw new Pe(me.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const d=t[r];if("\\"===d){if(r+1===t.length)throw new Pe(me.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Pe(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=p,r+=2}else"`"===d?(c=!c,r++):"."!==d||c?(i+=d,r++):(o(),r++)}if(o(),c)throw new Pe(me.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new jr(e)}static emptyPath(){return new jr([])}}class Pb{constructor(t){this.fields=t,t.sort(jr.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Ob(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class Ir{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Ir(e)}static fromUint8Array(t){const e=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(t);return new Ir(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return zt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ir.EMPTY_BYTE_STRING=new Ir("");const PZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lf(n){if(Lt(!!n),"string"==typeof n){let t=0;const e=PZ.exec(n);if(Lt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ui(n.seconds),nanos:Ui(n.nanos)}}function Ui(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function eg(n){return"string"==typeof n?Ir.fromBase64String(n):Ir.fromUint8Array(n)}function YO(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=null==n?void 0:n.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function Cj(n){const t=n.mapValue.fields.__previous_value__;return YO(t)?Cj(t):t}function AC(n){const t=Lf(n.mapValue.fields.__local_write_time__.timestampValue);return new Ki(t.seconds,t.nanos)}class NZ{constructor(t,e,i,r,o,c,d,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class Vd{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Vd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Vd&&t.projectId===this.projectId&&t.database===this.database}}function tg(n){return null==n}function kC(n){return 0===n&&1/n==-1/0}function Ej(n){return"number"==typeof n&&Number.isInteger(n)&&!kC(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ke{constructor(t){this.path=t}static fromPath(t){return new Ke(_n.fromString(t))}static fromName(t){return new Ke(_n.fromString(t).popFirst(5))}static empty(){return new Ke(_n.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===_n.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return _n.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ke(new _n(t.slice()))}}const xj={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dj={nullValue:"NULL_VALUE"};function ng(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?YO(n)?4:Mj(n)?9:10:ut()}function xu(n,t){if(n===t)return!0;const e=ng(n);if(e!==ng(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return AC(n).isEqual(AC(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=Lf(i.timestampValue),c=Lf(r.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,eg(n.bytesValue).isEqual(eg(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return Ui(i.geoPointValue.latitude)===Ui(r.geoPointValue.latitude)&&Ui(i.geoPointValue.longitude)===Ui(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Ui(i.integerValue)===Ui(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=Ui(i.doubleValue),c=Ui(r.doubleValue);return o===c?kC(o)===kC(c):isNaN(o)&&isNaN(c)}return!1}(n,t);case 9:return Ob(n.arrayValue.values||[],t.arrayValue.values||[],xu);case 10:return function(i,r){const o=i.mapValue.fields||{},c=r.mapValue.fields||{};if(yj(o)!==yj(c))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(void 0===c[d]||!xu(o[d],c[d])))return!1;return!0}(n,t);default:return ut()}var r}function RC(n,t){return void 0!==(n.values||[]).find(e=>xu(e,t))}function Bf(n,t){if(n===t)return 0;const e=ng(n),i=ng(t);if(e!==i)return zt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return zt(n.booleanValue,t.booleanValue);case 2:return function(r,o){const c=Ui(r.integerValue||r.doubleValue),d=Ui(o.integerValue||o.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,t);case 3:return Ij(n.timestampValue,t.timestampValue);case 4:return Ij(AC(n),AC(t));case 5:return zt(n.stringValue,t.stringValue);case 6:return function(r,o){const c=eg(r),d=eg(o);return c.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(r,o){const c=r.split("/"),d=o.split("/");for(let p=0;p<c.length&&p<d.length;p++){const b=zt(c[p],d[p]);if(0!==b)return b}return zt(c.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,o){const c=zt(Ui(r.latitude),Ui(o.latitude));return 0!==c?c:zt(Ui(r.longitude),Ui(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,o){const c=r.values||[],d=o.values||[];for(let p=0;p<c.length&&p<d.length;++p){const b=Bf(c[p],d[p]);if(b)return b}return zt(c.length,d.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,o){const c=r.fields||{},d=Object.keys(c),p=o.fields||{},b=Object.keys(p);d.sort(),b.sort();for(let E=0;E<d.length&&E<b.length;++E){const D=zt(d[E],b[E]);if(0!==D)return D;const R=Bf(c[d[E]],p[b[E]]);if(0!==R)return R}return zt(d.length,b.length)}(n.mapValue,t.mapValue);default:throw ut()}}function Ij(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return zt(n,t);const e=Lf(n),i=Lf(t),r=zt(e.seconds,i.seconds);return 0!==r?r:zt(e.nanos,i.nanos)}function Nb(n){return ZO(n)}function ZO(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Lf(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?eg(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",o=!0;for(const c of i.values||[])o?o=!1:r+=",",r+=ZO(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let o="{",c=!0;for(const d of r)c?c=!1:o+=",",o+=`${d}:${ZO(i.fields[d])}`;return o+"}"}(n.mapValue):ut();var t}function ig(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function KO(n){return!!n&&"integerValue"in n}function OC(n){return!!n&&"arrayValue"in n}function Sj(n){return!!n&&"nullValue"in n}function Tj(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function uT(n){return!!n&&"mapValue"in n}function PC(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Jm(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=PC(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=PC(n.arrayValue.values[e]);return t}return Object.assign({},n)}function Mj(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function FZ(n){return"nullValue"in n?Dj:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ig(Vd.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ut()}function LZ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ig(Vd.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?xj:ut()}function Aj(n,t){return void 0===n?t:void 0===t||Bf(n,t)>0?n:t}function kj(n,t){return void 0===n?t:void 0===t||Bf(n,t)<0?n:t}class Go{constructor(t){this.value=t}static empty(){return new Go({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!uT(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=PC(e)}setAll(t){let e=jr.emptyPath(),i={},r=[];t.forEach((c,d)=>{if(!e.isImmediateParentOf(d)){const p=this.getFieldsMap(e);this.applyChanges(p,i,r),i={},r=[],e=d.popLast()}c?i[d.lastSegment()]=PC(c):r.push(d.lastSegment())});const o=this.getFieldsMap(e);this.applyChanges(o,i,r)}delete(t){const e=this.field(t.popLast());uT(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return xu(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];uT(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Jm(e,(r,o)=>t[r]=o);for(const r of i)delete t[r]}clone(){return new Go(PC(this.value))}}function Rj(n){const t=[];return Jm(n.fields,(e,i)=>{const r=new jr([e]);if(uT(i)){const o=Rj(i.mapValue).fields;if(0===o.length)t.push(r);else for(const c of o)t.push(r.child(c))}else t.push(r)}),new Pb(t)}class di{constructor(t,e,i,r,o,c){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.data=o,this.documentState=c}static newInvalidDocument(t){return new di(t,0,kt.min(),kt.min(),Go.empty(),0)}static newFoundDocument(t,e,i){return new di(t,1,e,kt.min(),i,0)}static newNoDocument(t,e){return new di(t,2,e,kt.min(),Go.empty(),0)}static newUnknownDocument(t,e){return new di(t,3,e,kt.min(),Go.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Go.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Go.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof di&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new di(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class dT{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function QO(n){return n.fields.find(t=>2===t.kind)}function rg(n){return n.fields.filter(t=>2!==t.kind)}dT.UNKNOWN_ID=-1;class hT{constructor(t,e){this.fieldPath=t,this.kind=e}}class NC{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new NC(0,Ud.min())}}function Oj(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=kt.fromTimestamp(1e9===i?new Ki(e+1,0):new Ki(e,i));return new Ud(r,Ke.empty(),t)}function BZ(n){return new Ud(n.readTime,n.key,-1)}class Ud{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Ud(kt.min(),Ke.empty(),-1)}static max(){return new Ud(kt.max(),Ke.empty(),-1)}}function VZ(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=Ke.comparator(n.documentKey,t.documentKey),0!==e?e:zt(n.largestBatchId,t.largestBatchId))}class UZ{constructor(t,e=null,i=[],r=[],o=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=c,this.endAt=d,this.P=null}}function Pj(n,t=null,e=[],i=[],r=null,o=null,c=null){return new UZ(n,t,e,i,r,o,c)}function og(n){const t=Xe(n);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+Nb(r.value);var r}).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),tg(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Nb(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Nb(i)).join(",")),t.P=e}return t.P}function FC(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!ZZ(n.orderBy[r],t.orderBy[r]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((e=n.filters[r]).op!==(i=t.filters[r]).op||!e.field.isEqual(i.field)||!xu(e.value,i.value))return!1;var e,i;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Vj(n.startAt,t.startAt)&&Vj(n.endAt,t.endAt)}function fT(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function pT(n,t){return n.filters.filter(e=>e instanceof yo&&e.field.isEqual(t))}function Nj(n,t,e){let i,r=!0;for(const o of pT(n,t)){let c,d=!0;switch(o.op){case"<":case"<=":c=FZ(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,d=!1;break;case"!=":case"not-in":c=Dj}Aj(i,c)===c&&(i=c,r=d)}if(null!==e)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const c=e.position[o];Aj(i,c)===c&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}function Fj(n,t,e){let i,r=!0;for(const o of pT(n,t)){let c,d=!0;switch(o.op){case">=":case">":c=LZ(o.value),d=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,d=!1;break;case"!=":case"not-in":c=xj}kj(i,c)===c&&(i=c,r=d)}if(null!==e)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const c=e.position[o];kj(i,c)===c&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}class yo extends class{}{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.V(t,e,i):new HZ(t,e,i):"array-contains"===e?new qZ(t,i):"in"===e?new zZ(t,i):"not-in"===e?new WZ(t,i):"array-contains-any"===e?new YZ(t,i):new yo(t,e,i)}static V(t,e,i){return"in"===e?new $Z(t,i):new GZ(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(Bf(e,this.value)):null!==e&&ng(this.value)===ng(e)&&this.v(Bf(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ut()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class HZ extends yo{constructor(t,e,i){super(t,e,i),this.key=Ke.fromName(i.referenceValue)}matches(t){const e=Ke.comparator(t.key,this.key);return this.v(e)}}class $Z extends yo{constructor(t,e){super(t,"in",e),this.keys=Lj(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class GZ extends yo{constructor(t,e){super(t,"not-in",e),this.keys=Lj(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Lj(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>Ke.fromName(i.referenceValue))}class qZ extends yo{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return OC(e)&&RC(e.arrayValue,this.value)}}class zZ extends yo{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&RC(this.value.arrayValue,e)}}class WZ extends yo{constructor(t,e){super(t,"not-in",e)}matches(t){if(RC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!RC(this.value.arrayValue,e)}}class YZ extends yo{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!OC(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>RC(this.value.arrayValue,i))}}class Vf{constructor(t,e){this.position=t,this.inclusive=e}}class Fb{constructor(t,e="asc"){this.field=t,this.dir=e}}function ZZ(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function Bj(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const o=t[r],c=n.position[r];if(i=o.field.isKeyField()?Ke.comparator(Ke.fromName(c.referenceValue),e.key):Bf(c,e.data.field(o.field)),"desc"===o.dir&&(i*=-1),0!==i)break}return i}function Vj(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!xu(n.position[e],t.position[e]))return!1;return!0}class jd{constructor(t,e=null,i=[],r=[],o=null,c="F",d=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=c,this.startAt=d,this.endAt=p,this.D=null,this.C=null}}function Uj(n,t,e,i,r,o,c,d){return new jd(n,t,e,i,r,o,c,d)}function Lb(n){return new jd(n)}function mT(n){return!tg(n.limit)&&"F"===n.limitType}function gT(n){return!tg(n.limit)&&"L"===n.limitType}function XO(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function JO(n){for(const t of n.filters)if(t.S())return t.field;return null}function eP(n){return null!==n.collectionGroup}function Bb(n){const t=Xe(n);if(null===t.D){t.D=[];const e=JO(t),i=XO(t);if(null!==e&&null===i)e.isKeyField()||t.D.push(new Fb(e)),t.D.push(new Fb(jr.keyField(),"asc"));else{let r=!1;for(const o of t.explicitOrderBy)t.D.push(o),o.field.isKeyField()&&(r=!0);if(!r){const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Fb(jr.keyField(),o))}}}return t.D}function Tl(n){const t=Xe(n);if(!t.C)if("F"===t.limitType)t.C=Pj(t.path,t.collectionGroup,Bb(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const o of Bb(t))e.push(new Fb(o.field,"desc"===o.dir?"asc":"desc"));const i=t.endAt?new Vf(t.endAt.position,!t.endAt.inclusive):null,r=t.startAt?new Vf(t.startAt.position,!t.startAt.inclusive):null;t.C=Pj(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t.C}function jj(n,t,e){return new jd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function LC(n,t){return FC(Tl(n),Tl(t))&&n.limitType===t.limitType}function Hj(n){return`${og(Tl(n))}|lt:${n.limitType}`}function tP(n){return`Query(target=${function jZ(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(i=e).field.canonicalString()} ${i.op} ${Nb(i.value)}`;var i}).join(", ")}]`),tg(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(i=e).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>Nb(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>Nb(e)).join(",")),`Target(${t})`}(Tl(n))}; limitType=${n.limitType})`}function nP(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):Ke.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of e.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,o,c){const d=Bj(r,o,c);return r.inclusive?d<=0:d<0}(e.startAt,Bb(e),i)||e.endAt&&!function(r,o,c){const d=Bj(r,o,c);return r.inclusive?d>=0:d>0}(e.endAt,Bb(e),i)));var e,i}function $j(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Gj(n){return(t,e)=>{let i=!1;for(const r of Bb(n)){const o=KZ(r,t,e);if(0!==o)return o;i=i||r.field.isKeyField()}return 0}}function KZ(n,t,e){const i=n.field.isKeyField()?Ke.comparator(t.key,e.key):function(r,o,c){const d=o.data.field(r),p=c.data.field(r);return null!==d&&null!==p?Bf(d,p):ut()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ut()}}function qj(n,t){if(n.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kC(t)?"-0":t}}function zj(n){return{integerValue:""+n}}function Wj(n,t){return Ej(t)?zj(t):qj(n,t)}class _T{constructor(){this._=void 0}}function QZ(n,t,e){return n instanceof Vb?function(i,r){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(o.fields.__previous_value__=r),{mapValue:o}}(e,t):n instanceof sg?Zj(n,t):n instanceof ag?Kj(n,t):function(i,r){const o=Yj(i,r),c=Qj(o)+Qj(i.k);return KO(o)&&KO(i.k)?zj(c):qj(i.M,c)}(n,t)}function XZ(n,t,e){return n instanceof sg?Zj(n,t):n instanceof ag?Kj(n,t):e}function Yj(n,t){return n instanceof Ub?KO(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class Vb extends _T{}class sg extends _T{constructor(t){super(),this.elements=t}}function Zj(n,t){const e=Xj(t);for(const i of n.elements)e.some(r=>xu(r,i))||e.push(i);return{arrayValue:{values:e}}}class ag extends _T{constructor(t){super(),this.elements=t}}function Kj(n,t){let e=Xj(t);for(const i of n.elements)e=e.filter(r=>!xu(r,i));return{arrayValue:{values:e}}}class Ub extends _T{constructor(t,e){super(),this.M=t,this.k=e}}function Qj(n){return Ui(n.integerValue||n.doubleValue)}function Xj(n){return OC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class BC{constructor(t,e){this.field=t,this.transform=e}}class e7{constructor(t,e){this.version=t,this.transformResults=e}}class ur{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ur}static exists(t){return new ur(void 0,t)}static updateTime(t){return new ur(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function vT(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class bT{}function t7(n,t,e){n instanceof VC?function(i,r,o){const c=i.value.clone(),d=nH(i.fieldTransforms,r,o.transformResults);c.setAll(d),r.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,t,e):n instanceof lg?function(i,r,o){if(!vT(i.precondition,r))return void r.convertToUnknownDocument(o.version);const c=nH(i.fieldTransforms,r,o.transformResults),d=r.data;d.setAll(tH(i)),d.setAll(c),r.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function iP(n,t,e){var r;n instanceof VC?function(i,r,o){if(!vT(i.precondition,r))return;const c=i.value.clone(),d=iH(i.fieldTransforms,o,r);c.setAll(d),r.convertToFoundDocument(eH(r),c).setHasLocalMutations()}(n,t,e):n instanceof lg?function(i,r,o){if(!vT(i.precondition,r))return;const c=iH(i.fieldTransforms,o,r),d=r.data;d.setAll(tH(i)),d.setAll(c),r.convertToFoundDocument(eH(r),d).setHasLocalMutations()}(n,t,e):vT(n.precondition,r=t)&&r.convertToNoDocument(kt.min())}function n7(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),o=Yj(i.transform,r||null);null!=o&&(null==e&&(e=Go.empty()),e.set(i.field,o))}return e||null}function Jj(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&Ob(e,i,(r,o)=>function JZ(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof sg&&i instanceof sg||e instanceof ag&&i instanceof ag?Ob(e.elements,i.elements,xu):e instanceof Ub&&i instanceof Ub?xu(e.k,i.k):e instanceof Vb&&i instanceof Vb);var e,i}(r,o))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}function eH(n){return n.isFoundDocument()?n.version:kt.min()}class VC extends bT{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}}class lg extends bT{constructor(t,e,i,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}}function tH(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function nH(n,t,e){const i=new Map;Lt(n.length===e.length);for(let r=0;r<e.length;r++){const o=n[r],c=o.transform,d=t.data.field(o.field);i.set(o.field,XZ(c,d,e[r]))}return i}function iH(n,t,e){const i=new Map;for(const r of n){const o=r.transform,c=e.data.field(r.field);i.set(r.field,QZ(o,c,t))}return i}class UC extends bT{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class rP extends bT{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class r7{constructor(t){this.count=t}}var dr,vn;function rH(n){switch(n){default:return ut();case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0}}function oH(n){if(void 0===n)return cr("GRPC error has no .code"),me.UNKNOWN;switch(n){case dr.OK:return me.OK;case dr.CANCELLED:return me.CANCELLED;case dr.UNKNOWN:return me.UNKNOWN;case dr.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case dr.INTERNAL:return me.INTERNAL;case dr.UNAVAILABLE:return me.UNAVAILABLE;case dr.UNAUTHENTICATED:return me.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case dr.NOT_FOUND:return me.NOT_FOUND;case dr.ALREADY_EXISTS:return me.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return me.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case dr.ABORTED:return me.ABORTED;case dr.OUT_OF_RANGE:return me.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return me.UNIMPLEMENTED;case dr.DATA_LOSS:return me.DATA_LOSS;default:return ut()}}(vn=dr||(dr={}))[vn.OK=0]="OK",vn[vn.CANCELLED=1]="CANCELLED",vn[vn.UNKNOWN=2]="UNKNOWN",vn[vn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vn[vn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vn[vn.NOT_FOUND=5]="NOT_FOUND",vn[vn.ALREADY_EXISTS=6]="ALREADY_EXISTS",vn[vn.PERMISSION_DENIED=7]="PERMISSION_DENIED",vn[vn.UNAUTHENTICATED=16]="UNAUTHENTICATED",vn[vn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vn[vn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vn[vn.ABORTED=10]="ABORTED",vn[vn.OUT_OF_RANGE=11]="OUT_OF_RANGE",vn[vn.UNIMPLEMENTED=12]="UNIMPLEMENTED",vn[vn.INTERNAL=13]="INTERNAL",vn[vn.UNAVAILABLE=14]="UNAVAILABLE",vn[vn.DATA_LOSS=15]="DATA_LOSS";class Uf{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,o]of i)if(this.equalsFn(r,t))return o}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Jm(this.inner,(e,i)=>{for(const[r,o]of i)t(r,o)})}isEmpty(){return wj(this.inner)}size(){return this.innerSize}}class Qi{constructor(t,e){this.comparator=t,this.root=e||wo.EMPTY}insert(t,e){return new Qi(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,wo.BLACK,null,null))}remove(t){return new Qi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,wo.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new yT(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new yT(this.root,t,this.comparator,!1)}getReverseIterator(){return new yT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new yT(this.root,t,this.comparator,!0)}}class yT{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class wo{constructor(t,e,i,r,o){this.key=t,this.value=e,this.color=null!=i?i:wo.RED,this.left=null!=r?r:wo.EMPTY,this.right=null!=o?o:wo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,o){return new wo(null!=t?t:this.key,null!=e?e:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=o?o:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===o?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return wo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return wo.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,wo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,wo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const t=this.left.check();if(t!==this.right.check())throw ut();return t+(this.isRed()?0:1)}}wo.EMPTY=null,wo.RED=!0,wo.BLACK=!1,wo.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(n,t,e,i,r){return this}insert(n,t,e){return new wo(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hi{constructor(t){this.comparator=t,this.data=new Qi(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new sH(this.data.getIterator())}getIteratorFrom(t){return new sH(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof hi)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(0!==this.comparator(r,o))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new hi(this.comparator);return e.data=t,e}}class sH{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function jb(n){return n.hasNext()?n.getNext():void 0}const o7=new Qi(Ke.comparator);function Ml(){return o7}const s7=new Qi(Ke.comparator);function oP(){return s7}function jC(){return new Uf(n=>n.toString(),(n,t)=>n.isEqual(t))}const a7=new Qi(Ke.comparator),l7=new hi(Ke.comparator);function An(...n){let t=l7;for(const e of n)t=t.add(e);return t}const c7=new hi(zt);function wT(){return c7}class HC{constructor(t,e,i,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e){const i=new Map;return i.set(t,$C.createSynthesizedTargetChangeForCurrentChange(t,e)),new HC(kt.min(),i,wT(),Ml(),An())}}class $C{constructor(t,e,i,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e){return new $C(Ir.EMPTY_BYTE_STRING,e,An(),An(),An())}}class CT{constructor(t,e,i,r){this.O=t,this.removedTargetIds=e,this.key=i,this.F=r}}class aH{constructor(t,e){this.targetId=t,this.$=e}}class lH{constructor(t,e,i=Ir.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class cH{constructor(){this.B=0,this.L=dH(),this.U=Ir.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(t){t.approximateByteSize()>0&&(this.K=!0,this.U=t)}H(){let t=An(),e=An(),i=An();return this.L.forEach((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:ut()}}),new $C(this.U,this.q,t,e,i)}J(){this.K=!1,this.L=dH()}Y(t,e){this.K=!0,this.L=this.L.insert(t,e)}X(t){this.K=!0,this.L=this.L.remove(t)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class u7{constructor(t){this.nt=t,this.st=new Map,this.it=Ml(),this.rt=uH(),this.ot=new hi(zt)}ut(t){for(const e of t.O)t.F&&t.F.isFoundDocument()?this.at(e,t.F):this.ct(e,t.key,t.F);for(const e of t.removedTargetIds)this.ct(e,t.key,t.F)}ht(t){this.forEachTarget(t,e=>{const i=this.lt(e);switch(t.state){case 0:this.ft(e)&&i.W(t.resumeToken);break;case 1:i.tt(),i.G||i.J(),i.W(t.resumeToken);break;case 2:i.tt(),i.G||this.removeTarget(e);break;case 3:this.ft(e)&&(i.et(),i.W(t.resumeToken));break;case 4:this.ft(e)&&(this.dt(e),i.W(t.resumeToken));break;default:ut()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.st.forEach((i,r)=>{this.ft(r)&&e(r)})}_t(t){const e=t.targetId,i=t.$.count,r=this.wt(e);if(r){const o=r.target;if(fT(o))if(0===i){const c=new Ke(o.path);this.ct(e,c,di.newNoDocument(c,kt.min()))}else Lt(1===i);else this.gt(e)!==i&&(this.dt(e),this.ot=this.ot.add(e))}}yt(t){const e=new Map;this.st.forEach((o,c)=>{const d=this.wt(c);if(d){if(o.current&&fT(d.target)){const p=new Ke(d.target.path);null!==this.it.get(p)||this.It(c,p)||this.ct(c,p,di.newNoDocument(p,t))}o.j&&(e.set(c,o.H()),o.J())}});let i=An();this.rt.forEach((o,c)=>{let d=!0;c.forEachWhile(p=>{const b=this.wt(p);return!b||2===b.purpose||(d=!1,!1)}),d&&(i=i.add(o))}),this.it.forEach((o,c)=>c.setReadTime(t));const r=new HC(t,e,this.ot,this.it,i);return this.it=Ml(),this.rt=uH(),this.ot=new hi(zt),r}at(t,e){if(!this.ft(t))return;const i=this.It(t,e.key)?2:0;this.lt(t).Y(e.key,i),this.it=this.it.insert(e.key,e),this.rt=this.rt.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,i){if(!this.ft(t))return;const r=this.lt(t);this.It(t,e)?r.Y(e,1):r.X(e),this.rt=this.rt.insert(e,this.Tt(e).delete(t)),i&&(this.it=this.it.insert(e,i))}removeTarget(t){this.st.delete(t)}gt(t){const e=this.lt(t).H();return this.nt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Z(t){this.lt(t).Z()}lt(t){let e=this.st.get(t);return e||(e=new cH,this.st.set(t,e)),e}Tt(t){let e=this.rt.get(t);return e||(e=new hi(zt),this.rt=this.rt.insert(t,e)),e}ft(t){const e=null!==this.wt(t);return e||Ue("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.st.get(t);return e&&e.G?null:this.nt.Et(t)}dt(t){this.st.set(t,new cH),this.nt.getRemoteKeysForTarget(t).forEach(e=>{this.ct(t,e,null)})}It(t,e){return this.nt.getRemoteKeysForTarget(t).has(e)}}function uH(){return new Qi(Ke.comparator)}function dH(){return new Qi(Ke.comparator)}const d7={asc:"ASCENDING",desc:"DESCENDING"},h7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class f7{constructor(t,e){this.databaseId=t,this.N=e}}function GC(n,t){return n.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function hH(n,t){return n.N?t.toBase64():t.toUint8Array()}function p7(n,t){return GC(n,t.toTimestamp())}function Hr(n){return Lt(!!n),kt.fromTimestamp(function(t){const e=Lf(t);return new Ki(e.seconds,e.nanos)}(n))}function sP(n,t){return(e=n,new _n(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function fH(n){const t=_n.fromString(n);return Lt(CH(t)),t}function qC(n,t){return sP(n.databaseId,t.path)}function Du(n,t){const e=fH(t);if(e.get(1)!==n.databaseId.projectId)throw new Pe(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Pe(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Ke(mH(e))}function aP(n,t){return sP(n.databaseId,t)}function pH(n){const t=fH(n);return 4===t.length?_n.emptyPath():mH(t)}function zC(n){return new _n(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function mH(n){return Lt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function gH(n,t,e){return{name:qC(n,t),fields:e.value.mapValue.fields}}function _H(n,t,e){const i=Du(n,t.name),r=Hr(t.updateTime),o=new Go({mapValue:{fields:t.fields}}),c=di.newFoundDocument(i,r,o);return e&&c.setHasCommittedMutations(),e?c.setHasCommittedMutations():c}function WC(n,t){let e;if(t instanceof VC)e={update:gH(n,t.key,t.value)};else if(t instanceof UC)e={delete:qC(n,t.key)};else if(t instanceof lg)e={update:gH(n,t.key,t.data),updateMask:E7(t.fieldMask)};else{if(!(t instanceof rP))return ut();e={verify:qC(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,o){const c=o.transform;if(c instanceof Vb)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof sg)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ag)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ub)return{fieldPath:o.field.canonicalString(),increment:c.k};throw ut()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:p7(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:ut()),e;var r}function lP(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?ur.updateTime(Hr(r.updateTime)):void 0!==r.exists?ur.exists(r.exists):ur.none():ur.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(o,c){let d=null;"setToServerValue"in c?(Lt("REQUEST_TIME"===c.setToServerValue),d=new Vb):"appendMissingElements"in c?d=new sg(c.appendMissingElements.values||[]):"removeAllFromArray"in c?d=new ag(c.removeAllFromArray.values||[]):"increment"in c?d=new Ub(o,c.increment):ut();const p=jr.fromServerFormat(c.fieldPath);return new BC(p,d)}(n,r)):[];var r;if(t.update){const r=Du(n,t.update.name),o=new Go({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=new Pb((t.updateMask.fieldPaths||[]).map(b=>jr.fromServerFormat(b)));return new lg(r,o,c,e,i)}return new VC(r,o,e,i)}if(t.delete){const r=Du(n,t.delete);return new UC(r,e)}if(t.verify){const r=Du(n,t.verify);return new rP(r,e)}return ut()}function vH(n,t){return{documents:[aP(n,t.path)]}}function bH(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=aP(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=aP(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0===p.length)return;const b=p.map(E=>function(D){if("=="===D.op){if(Tj(D.value))return{unaryFilter:{field:Hb(D.field),op:"IS_NAN"}};if(Sj(D.value))return{unaryFilter:{field:Hb(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(Tj(D.value))return{unaryFilter:{field:Hb(D.field),op:"IS_NOT_NAN"}};if(Sj(D.value))return{unaryFilter:{field:Hb(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hb(D.field),op:y7(D.op),value:D.value}}}(E));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(t.filters);r&&(e.structuredQuery.where=r);const o=function(p){if(0!==p.length)return p.map(b=>{return{field:Hb((E=b).field),direction:b7(E.dir)};var E})}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const c=(b=t.limit,n.N||tg(b)?b:{value:b});var b,d,p;return null!==c&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt={before:(d=t.startAt).inclusive,values:d.position}),t.endAt&&(e.structuredQuery.endAt={before:!(p=t.endAt).inclusive,values:p.position}),e}function yH(n){let t=pH(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Lt(1===i);const E=e.from[0];E.allDescendants?r=E.collectionId:t=t.child(E.collectionId)}let o=[];e.where&&(o=wH(e.where));let c=[];e.orderBy&&(c=e.orderBy.map(E=>{return new Fb($b((D=E).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let d=null;e.limit&&(d=function(E){let D;return D="object"==typeof E?E.value:E,tg(D)?null:D}(e.limit));let p=null;var E;e.startAt&&(p=new Vf((E=e.startAt).values||[],!!E.before));let b=null;return e.endAt&&(b=function(E){return new Vf(E.values||[],!E.before)}(e.endAt)),Uj(t,r,c,o,d,"F",p,b)}function wH(n){return n?void 0!==n.unaryFilter?[C7(n)]:void 0!==n.fieldFilter?[w7(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>wH(t)).reduce((t,e)=>t.concat(e)):ut():[]}function b7(n){return d7[n]}function y7(n){return h7[n]}function Hb(n){return{fieldPath:n.canonicalString()}}function $b(n){return jr.fromServerFormat(n.fieldPath)}function w7(n){return yo.create($b(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(n.fieldFilter.op),n.fieldFilter.value)}function C7(n){switch(n.unaryFilter.op){case"IS_NAN":const t=$b(n.unaryFilter.field);return yo.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=$b(n.unaryFilter.field);return yo.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=$b(n.unaryFilter.field);return yo.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=$b(n.unaryFilter.field);return yo.create(r,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}function E7(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function CH(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function gs(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=EH(t)),t=x7(n.get(e),t);return EH(t)}function x7(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=o}}return e}function EH(n){return n+"\x01\x01"}function Iu(n){const t=n.length;if(Lt(t>=2),2===t)return Lt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),_n.emptyPath();const e=t-2,i=[];let r="";for(let o=0;o<t;){const c=n.indexOf("\x01",o);switch((c<0||c>e)&&ut(),n.charAt(c+1)){case"\x01":const d=n.substring(o,c);let p;0===r.length?p=d:(r+=d,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(o,c),r+="\0";break;case"\x11":r+=n.substring(o,c+1);break;default:ut()}o=c+2}return new _n(i)}const xH=["userId","batchId"];function ET(n,t){return[n,gs(t)]}function DH(n,t,e){return[n,gs(t),e]}const D7={},I7=["prefixPath","collectionGroup","readTime","documentId"],S7=["prefixPath","collectionGroup","documentId"],T7=["collectionGroup","readTime","prefixPath","documentId"],M7=["canonicalId","targetId"],A7=["targetId","path"],k7=["path","targetId"],R7=["collectionId","parent"],O7=["indexId","uid"],P7=["uid","sequenceNumber"],N7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],F7=["indexId","uid","orderedDocumentKey"],L7=["userId","collectionPath","documentId"],B7=["userId","collectionPath","largestBatchId"],V7=["userId","collectionGroup","largestBatchId"],IH=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],U7=[...IH,"documentOverlays"],SH=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],j7=[...SH,"indexConfiguration","indexState","indexEntries"],TH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MH{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}class be{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new be((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof be?e:be.resolve(e)}catch(e){return be.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):be.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):be.reject(e)}static resolve(t){return new be((e,i)=>{e(t)})}static reject(t){return new be((e,i)=>{i(t)})}static waitFor(t){return new be((e,i)=>{let r=0,o=0,c=!1;t.forEach(d=>{++r,d.next(()=>{++o,c&&o===r&&e()},p=>i(p))}),c=!0,o===r&&e()})}static or(t){let e=be.resolve(!1);for(const i of t)e=e.next(r=>r?be.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,o)=>{i.push(e.call(this,r,o))}),this.waitFor(i)}}class xT{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.At=new Ur,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{e.error?this.At.reject(new YC(t,e.error)):this.At.resolve()},this.transaction.onerror=i=>{const r=cP(i.target.error);this.At.reject(new YC(t,r))}}static open(t,e,i,r){try{return new xT(e,t.transaction(r,i))}catch(o){throw new YC(e,o)}}get Rt(){return this.At.promise}abort(t){t&&this.At.reject(t),this.aborted||(Ue("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new $7(e)}}class mc{constructor(t,e,i){this.name=t,this.version=e,this.bt=i,12.2===mc.Vt((0,L.z$)())&&cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Ue("SimpleDb","Removing database:",t),ug(window.indexedDB.deleteDatabase(t)).toPromise()}static vt(){if(!(0,L.hl)())return!1;if(mc.St())return!0;const t=(0,L.z$)(),e=mc.Vt(t),i=0<e&&e<10,r=mc.Dt(t),o=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||o)}static St(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Ct)}static xt(t,e){return t.store(e)}static Vt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static Dt(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}Nt(t){var e=this;return(0,fe.Z)(function*(){return e.db||(Ue("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const o=indexedDB.open(e.name,e.version);o.onsuccess=c=>{i(c.target.result)},o.onblocked=()=>{r(new YC(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=c=>{const d=c.target.error;r("VersionError"===d.name?new Pe(me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Pe(me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new YC(t,d))},o.onupgradeneeded=c=>{Ue("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',c.oldVersion),e.bt.kt(c.target.result,o.transaction,c.oldVersion,e.version).next(()=>{Ue("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.Mt&&(e.db.onversionchange=i=>e.Mt(i)),e.db})()}Ot(t){this.Mt=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var o=this;return(0,fe.Z)(function*(){const c="readonly"===e;let d=0;for(;;){++d;try{o.db=yield o.Nt(t);const p=xT.open(o.db,t,c?"readonly":"readwrite",i),b=r(p).next(E=>(p.Pt(),E)).catch(E=>(p.abort(E),be.reject(E))).toPromise();return b.catch(()=>{}),yield p.Rt,b}catch(p){const b="FirebaseError"!==p.name&&d<3;if(Ue("SimpleDb","Transaction failed with error:",p.message,"Retrying:",b),o.close(),!b)return Promise.reject(p)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class H7{constructor(t){this.Ft=t,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(t){this.Ft=t}done(){this.$t=!0}Ut(t){this.Bt=t}delete(){return ug(this.Ft.delete())}}class YC extends Pe{constructor(t,e){super(me.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function cg(n){return"IndexedDbTransactionError"===n.name}class $7{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(Ue("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(Ue("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),ug(i)}add(t){return Ue("SimpleDb","ADD",this.store.name,t,t),ug(this.store.add(t))}get(t){return ug(this.store.get(t)).next(e=>(void 0===e&&(e=null),Ue("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Ue("SimpleDb","DELETE",this.store.name,t),ug(this.store.delete(t))}count(){return Ue("SimpleDb","COUNT",this.store.name),ug(this.store.count())}qt(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),o=[];return this.Kt(r,(c,d)=>{o.push(d)}).next(()=>o)}{const r=this.store.getAll(i.range);return new be((o,c)=>{r.onerror=d=>{c(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}}Gt(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new be((r,o)=>{i.onerror=c=>{o(c.target.error)},i.onsuccess=c=>{r(c.target.result)}})}Qt(t,e){Ue("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.jt=!1;const r=this.cursor(i);return this.Kt(r,(o,c,d)=>d.delete())}Wt(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.Kt(r,e)}zt(t){const e=this.cursor({});return new be((i,r)=>{e.onerror=o=>{const c=cP(o.target.error);r(c)},e.onsuccess=o=>{const c=o.target.result;c?t(c.primaryKey,c.value).next(d=>{d?c.continue():i()}):i()}})}Kt(t,e){const i=[];return new be((r,o)=>{t.onerror=c=>{o(c.target.error)},t.onsuccess=c=>{const d=c.target.result;if(!d)return void r();const p=new H7(d),b=e(d.primaryKey,d.value,p);if(b instanceof be){const E=b.catch(D=>(p.done(),be.reject(D)));i.push(E)}p.isDone?r():null===p.Lt?d.continue():d.continue(p.Lt)}}).next(()=>be.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.jt?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function ug(n){return new be((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=cP(i.target.error);e(r)}})}let AH=!1;function cP(n){const t=mc.Vt((0,L.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return AH||(AH=!0,setTimeout(()=>{throw i},0)),i}}return n}class kH extends MH{constructor(t,e){super(),this.Ht=t,this.currentSequenceNumber=e}}function $r(n,t){const e=Xe(n);return mc.xt(e.Ht,t)}class uP{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(t.key)&&t7(o,t,i[r])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&iP(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&iP(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(e=>{const i=t.get(e.key),r=i;this.applyToLocalView(r),i.isValidDocument()||r.convertToNoDocument(kt.min())})}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),An())}isEqual(t){return this.batchId===t.batchId&&Ob(this.mutations,t.mutations,(e,i)=>Jj(e,i))&&Ob(this.baseMutations,t.baseMutations,(e,i)=>Jj(e,i))}}class dP{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Lt(t.mutations.length===i.length);let r=a7;const o=t.mutations;for(let c=0;c<o.length;c++)r=r.insert(o[c].key,i[c].version);return new dP(t,e,i,r)}}class hP{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class jf{constructor(t,e,i,r,o=kt.min(),c=kt.min(),d=Ir.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d}withSequenceNumber(t){return new jf(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new jf(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new jf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class RH{constructor(t){this.Jt=t}}function OH(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:DT(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:qC(r=n.Jt,(o=t).key),fields:o.data.value.mapValue.fields,updateTime:GC(r,o.version.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:dg(t.version)};else{if(!t.isUnknownDocument())return ut();i.unknownDocument={path:e.path.toArray(),version:dg(t.version)}}var r,o;return i}function DT(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function dg(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function hg(n){const t=new Ki(n.seconds,n.nanoseconds);return kt.fromTimestamp(t)}function Gb(n,t){const e=(t.baseMutations||[]).map(o=>lP(n.Jt,o));for(let o=0;o<t.mutations.length-1;++o){const c=t.mutations[o];o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform&&(c.updateTransforms=t.mutations[o+1].transform.fieldTransforms,t.mutations.splice(o+1,1),++o)}const i=t.mutations.map(o=>lP(n.Jt,o)),r=Ki.fromMillis(t.localWriteTimeMs);return new uP(t.batchId,r,e,i)}function ZC(n){const t=hg(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?hg(n.lastLimboFreeSnapshotVersion):kt.min();let i;var r;return void 0!==n.query.documents?(Lt(1===(r=n.query).documents.length),i=Tl(Lb(pH(r.documents[0])))):i=Tl(yH(n.query)),new jf(i,n.targetId,0,n.lastListenSequenceNumber,t,e,Ir.fromBase64String(n.resumeToken))}function PH(n,t){const e=dg(t.snapshotVersion),i=dg(t.lastLimboFreeSnapshotVersion);let r;r=fT(t.target)?vH(n.Jt,t.target):bH(n.Jt,t.target);const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:og(t.target),readTime:e,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function fP(n){const t=yH({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?jj(t,t.limit,"L"):t}function pP(n,t){return new hP(t.largestBatchId,lP(n.Jt,t.overlayMutation))}function NH(n,t){const e=t.path.lastSegment();return[n,gs(t.path.popLast()),e]}class q7{getBundleMetadata(t,e){return FH(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:hg(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return FH(t).put({bundleId:(i=e).id,createTime:dg(Hr(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return LH(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:fP(r.bundledQuery),readTime:hg(r.readTime)};var r})}saveNamedQuery(t,e){return LH(t).put({name:(i=e).name,readTime:dg(Hr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function FH(n){return $r(n,"bundles")}function LH(n){return $r(n,"namedQueries")}class mP{constructor(t,e){this.M=t,this.userId=e}static Yt(t,e){return new mP(t,e.uid||"")}getOverlay(t,e){return KC(t).get(NH(this.userId,e)).next(i=>i?pP(this.M,i):null)}saveOverlays(t,e,i){const r=[];return i.forEach((o,c)=>{const d=new hP(e,c);r.push(this.Xt(t,d))}),be.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(c=>r.add(gs(c.getCollectionPath())));const o=[];return r.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);o.push(KC(t).Qt("collectionPathOverlayIndex",d))}),be.waitFor(o)}getOverlaysForCollection(t,e,i){const r=jC(),o=gs(e),c=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return KC(t).qt("collectionPathOverlayIndex",c).next(d=>{for(const p of d){const b=pP(this.M,p);r.set(b.getKey(),b)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const o=jC();let c;const d=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return KC(t).Wt({index:"collectionGroupOverlayIndex",range:d},(p,b,E)=>{const D=pP(this.M,b);o.size()<r||D.largestBatchId===c?(o.set(D.getKey(),D),c=D.largestBatchId):E.done()}).next(()=>o)}Xt(t,e){return KC(t).put(function(i,r,o){const[c,d,p]=NH(r,o.mutation.key);return{userId:r,collectionPath:d,documentId:p,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:WC(i.Jt,o.mutation)}}(this.M,this.userId,e))}}function KC(n){return $r(n,"documentOverlays")}class fg{constructor(){}Zt(t,e){this.te(t,e),e.ee()}te(t,e){if("nullValue"in t)this.ne(e,5);else if("booleanValue"in t)this.ne(e,10),e.se(t.booleanValue?1:0);else if("integerValue"in t)this.ne(e,15),e.se(Ui(t.integerValue));else if("doubleValue"in t){const i=Ui(t.doubleValue);isNaN(i)?this.ne(e,13):(this.ne(e,15),kC(i)?e.se(0):e.se(i))}else if("timestampValue"in t){const i=t.timestampValue;this.ne(e,20),"string"==typeof i?e.ie(i):(e.ie(`${i.seconds||""}`),e.se(i.nanos||0))}else if("stringValue"in t)this.re(t.stringValue,e),this.oe(e);else if("bytesValue"in t)this.ne(e,30),e.ue(eg(t.bytesValue)),this.oe(e);else if("referenceValue"in t)this.ae(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.ne(e,45),e.se(i.latitude||0),e.se(i.longitude||0)}else"mapValue"in t?Mj(t)?this.ne(e,Number.MAX_SAFE_INTEGER):(this.ce(t.mapValue,e),this.oe(e)):"arrayValue"in t?(this.he(t.arrayValue,e),this.oe(e)):ut()}re(t,e){this.ne(e,25),this.le(t,e)}le(t,e){e.ie(t)}ce(t,e){const i=t.fields||{};this.ne(e,55);for(const r of Object.keys(i))this.re(r,e),this.te(i[r],e)}he(t,e){const i=t.values||[];this.ne(e,50);for(const r of i)this.te(r,e)}ae(t,e){this.ne(e,37),Ke.fromName(t).path.forEach(i=>{this.ne(e,60),this.le(i,e)})}ne(t,e){t.se(e)}oe(t){t.se(2)}}function z7(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function BH(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const o=z7(255&e[r]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(t/8)}fg.fe=new fg;class W7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this._e(i.value),i=e.next();this.we()}me(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.ge(i.value),i=e.next();this.ye()}pe(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(e<"\ud800"||"\udbff"<e)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{const r=e.codePointAt(0);this._e(240|r>>>18),this._e(128|63&r>>>12),this._e(128|63&r>>>6),this._e(128|63&r)}}this.we()}Ie(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{const r=e.codePointAt(0);this.ge(240|r>>>18),this.ge(128|63&r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r)}}this.ye()}Te(t){const e=this.Ee(t),i=BH(e);this.Ae(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Re(t){const e=this.Ee(t),i=BH(e);this.Ae(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(t){this.Ae(t.length),this.buffer.set(t,this.position),this.position+=t.length}Se(){return this.buffer.slice(0,this.position)}Ee(t){const e=function(r){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,r,!1),new Uint8Array(o.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}_e(t){const e=255&t;0===e?(this.be(0),this.be(255)):255===e?(this.be(255),this.be(0)):this.be(e)}ge(t){const e=255&t;0===e?(this.ve(0),this.ve(255)):255===e?(this.ve(255),this.ve(0)):this.ve(t)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(t){this.Ae(1),this.buffer[this.position++]=t}ve(t){this.Ae(1),this.buffer[this.position++]=~t}Ae(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class Y7{constructor(t){this.De=t}ue(t){this.De.de(t)}ie(t){this.De.pe(t)}se(t){this.De.Te(t)}ee(){this.De.Pe()}}class Z7{constructor(t){this.De=t}ue(t){this.De.me(t)}ie(t){this.De.Ie(t)}se(t){this.De.Re(t)}ee(){this.De.Ve()}}class QC{constructor(){this.De=new W7,this.Ce=new Y7(this.De),this.xe=new Z7(this.De)}seed(t){this.De.seed(t)}Ne(t){return 0===t?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Hf{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new Hf(this.indexId,this.documentKey,this.arrayValue,i)}}function pg(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=VH(n.arrayValue,t.arrayValue),0!==e?e:(e=VH(n.directionalValue,t.directionalValue),0!==e?e:Ke.comparator(n.documentKey,t.documentKey)))}function VH(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class K7{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];for(const e of t.filters){const i=e;i.S()?this.Fe=i:this.Oe.push(i)}}$e(t){const e=QO(t);if(void 0!==e&&!this.Be(e))return!1;const i=rg(t);let r=0,o=0;for(;r<i.length&&this.Be(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Fe){const c=i[r];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[o++],c))return!1;++r}for(;r<i.length;++r){const c=i[r];if(o>=this.Me.length||!this.Ue(this.Me[o++],c))return!1}return!0}Be(t){for(const e of this.Oe)if(this.Le(e,t))return!0;return!1}Le(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Ue(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class Q7{constructor(){this.qe=new gP}addToCollectionParentIndex(t,e){return this.qe.add(e),be.resolve()}getCollectionParents(t,e){return be.resolve(this.qe.getEntries(e))}addFieldIndex(t,e){return be.resolve()}deleteFieldIndex(t,e){return be.resolve()}getDocumentsMatchingTarget(t,e){return be.resolve(null)}getFieldIndex(t,e){return be.resolve(null)}getFieldIndexes(t,e){return be.resolve([])}getNextCollectionGroupToUpdate(t){return be.resolve(null)}updateCollectionGroup(t,e,i){return be.resolve()}updateIndexEntries(t,e){return be.resolve()}}class gP{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new hi(_n.comparator),o=!r.has(i);return this.index[e]=r.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new hi(_n.comparator)).toArray()}}const qb=new Uint8Array(0);class X7{constructor(t,e){this.user=t,this.databaseId=e,this.Ke=new gP,this.Ge=new Uf(i=>og(i),(i,r)=>FC(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ke.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.Ke.add(e)});const o={collectionId:i,parent:gs(r)};return UH(t).put(o)}return be.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[bj(e),""],!1,!0);return UH(t).qt(r).next(o=>{for(const c of o){if(c.collectionId!==e)break;i.push(Iu(c.parent))}return i})}addFieldIndex(t,e){const i=IT(t),r={indexId:(o=e).indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var o;return delete r.indexId,i.add(r).next()}deleteFieldIndex(t,e){const i=IT(t),r=ST(t),o=XC(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=XC(t);let r=!0;const o=new Map;return be.forEach(this.Qe(e),c=>this.getFieldIndex(t,c).next(d=>{r&&(r=!!d),o.set(c,d)})).next(()=>{if(r){let c=An();const d=[];return be.forEach(o,(p,b)=>{var E;Ue("IndexedDbIndexManager",`Using index ${E=p,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(Ye=>`${Ye.fieldPath}:${Ye.kind}`).join(",")}`} to execute ${og(e)}`);const D=function(Ye,Ge){const Mt=QO(Ge);if(void 0===Mt)return null;for(const Ot of pT(Ye,Mt.fieldPath))switch(Ot.op){case"array-contains-any":return Ot.value.arrayValue.values||[];case"array-contains":return[Ot.value]}return null}(b,p),R=function(Ye,Ge){const Mt=new Map;for(const Ot of rg(Ge))for(const cn of pT(Ye,Ot.fieldPath))switch(cn.op){case"==":case"in":Mt.set(Ot.fieldPath.canonicalString(),cn.value);break;case"not-in":case"!=":return Mt.set(Ot.fieldPath.canonicalString(),cn.value),Array.from(Mt.values())}return null}(b,p),N=function(Ye,Ge){const Mt=[];let Ot=!0;for(const cn of rg(Ge)){const ki=0===cn.kind?Nj(Ye,cn.fieldPath,Ye.startAt):Fj(Ye,cn.fieldPath,Ye.startAt);if(!ki.value)return null;Mt.push(ki.value),Ot&&(Ot=ki.inclusive)}return new Vf(Mt,Ot)}(b,p),B=function(Ye,Ge){const Mt=[];let Ot=!0;for(const cn of rg(Ge)){const ki=0===cn.kind?Fj(Ye,cn.fieldPath,Ye.endAt):Nj(Ye,cn.fieldPath,Ye.endAt);if(!ki.value)return null;Mt.push(ki.value),Ot&&(Ot=ki.inclusive)}return new Vf(Mt,Ot)}(b,p),K=this.je(p,b,N),ce=this.je(p,b,B),He=this.We(p,b,R),We=this.ze(p.indexId,D,K,!!N&&N.inclusive,ce,!!B&&B.inclusive,He);return be.forEach(We,Ye=>i.Gt(Ye,e.limit).next(Ge=>{Ge.forEach(Mt=>{const Ot=Ke.fromSegments(Mt.documentKey);c.has(Ot)||(c=c.add(Ot),d.push(Ot))})}))}).next(()=>d)}return be.resolve(null)})}Qe(t){let e=this.Ge.get(t);return e||(e=[t],this.Ge.set(t,e),e)}ze(t,e,i,r,o,c,d){const p=(null!=e?e.length:1)*Math.max(null!=i?i.length:1,null!=o?o.length:1),b=p/(null!=e?e.length:1),E=[];for(let D=0;D<p;++D){const R=e?this.He(e[D/b]):qb,N=i?this.Je(t,R,i[D%b],r):this.Ye(t),B=o?this.Xe(t,R,o[D%b],c):this.Ye(t+1);E.push(...this.createRange(N,B,d.map(K=>this.Je(t,R,K,!0))))}return E}Je(t,e,i,r){const o=new Hf(t,Ke.empty(),e,i);return r?o:o.ke()}Xe(t,e,i,r){const o=new Hf(t,Ke.empty(),e,i);return r?o.ke():o}Ye(t){return new Hf(t,Ke.empty(),qb,qb)}getFieldIndex(t,e){const i=new K7(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(o=>{const c=o.filter(d=>i.$e(d));return c.sort((d,p)=>p.fields.length-d.fields.length),c.length>0?c[0]:null})}Ze(t,e){const i=new QC;for(const r of rg(t)){const o=e.data.field(r.fieldPath);if(null==o)return null;const c=i.Ne(r.kind);fg.fe.Zt(o,c)}return i.Se()}He(t){const e=new QC;return fg.fe.Zt(t,e.Ne(0)),e.Se()}tn(t,e){const i=new QC;return fg.fe.Zt(ig(this.databaseId,e),i.Ne(function(r){const o=rg(r);return 0===o.length?0:o[o.length-1].kind}(t))),i.Se()}We(t,e,i){if(null===i)return[];let r=[];r.push(new QC);let o=0;for(const c of rg(t)){const d=i[o++];for(const p of r)if(this.en(e,c.fieldPath)&&OC(d))r=this.nn(r,c,d);else{const b=p.Ne(c.kind);fg.fe.Zt(d,b)}}return this.sn(r)}je(t,e,i){return null==i?null:this.We(t,e,i.position)}sn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Se();return e}nn(t,e,i){const r=[...t],o=[];for(const c of i.arrayValue.values||[])for(const d of r){const p=new QC;p.seed(d.Se()),fg.fe.Zt(c,p.Ne(e.kind)),o.push(p)}return o}en(t,e){return!!t.filters.find(i=>i instanceof yo&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=IT(t),r=ST(t);return(e?i.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.qt()).next(o=>{const c=[];return be.forEach(o,d=>r.get([d.indexId,this.uid]).next(p=>{c.push(function(b,E){const D=E?new NC(E.sequenceNumber,new Ud(hg(E.readTime),new Ke(Iu(E.documentKey)),E.largestBatchId)):NC.empty(),R=b.fields.map(([N,B])=>new hT(jr.fromServerFormat(N),B));return new dT(b.indexId,b.collectionGroup,R,D)}(d,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==o?o:zt(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=IT(t),o=ST(t);return this.rn(t).next(c=>r.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>be.forEach(d,p=>{return o.put({indexId:p.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:dg((R=i).readTime),documentKey:gs(R.documentKey.path),largestBatchId:R.largestBatchId});var R})))}updateIndexEntries(t,e){const i=new Map;return be.forEach(e,(r,o)=>{const c=i.get(r.collectionGroup);return(c?be.resolve(c):this.getFieldIndexes(t,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),be.forEach(d,p=>this.on(t,r,p).next(b=>{const E=this.un(o,p);return b.isEqual(E)?be.resolve():this.an(t,o,p,b,E)}))))})}cn(t,e,i,r){return XC(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(i,e.key),documentKey:e.key.path.toArray()})}hn(t,e,i,r){return XC(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(i,e.key),e.key.path.toArray()])}on(t,e,i){const r=XC(t);let o=new hi(pg);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.tn(i,e)])},(c,d)=>{o=o.add(new Hf(i.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>o)}un(t,e){let i=new hi(pg);const r=this.Ze(e,t);if(null==r)return i;const o=QO(e);if(null!=o){const c=t.data.field(o.fieldPath);if(OC(c))for(const d of c.arrayValue.values||[])i=i.add(new Hf(e.indexId,t.key,this.He(d),r))}else i=i.add(new Hf(e.indexId,t.key,qb,r));return i}an(t,e,i,r,o){Ue("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(d,p,b,E,D){const R=d.getIterator(),N=p.getIterator();let B=jb(R),K=jb(N);for(;B||K;){let ce=!1,He=!1;if(B&&K){const We=b(B,K);We<0?He=!0:We>0&&(ce=!0)}else null!=B?He=!0:ce=!0;ce?(E(K),K=jb(N)):He?(D(B),B=jb(R)):(B=jb(R),K=jb(N))}}(r,o,pg,d=>{c.push(this.cn(t,e,i,d))},d=>{c.push(this.hn(t,e,i,d))}),be.waitFor(c)}rn(t){let e=1;return ST(t).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((c,d)=>pg(c,d)).filter((c,d,p)=>!d||0!==pg(c,p[d-1]));const r=[];r.push(t);for(const c of i){const d=pg(c,t),p=pg(c,e);if(0===d)r[0]=t.ke();else if(d>0&&p<0)r.push(c),r.push(c.ke());else if(p>0)break}r.push(e);const o=[];for(let c=0;c<r.length;c+=2)o.push(IDBKeyRange.bound([r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,qb,[]],[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,qb,[]]));return o}}function UH(n){return $r(n,"collectionParents")}function XC(n){return $r(n,"indexEntries")}function IT(n){return $r(n,"indexConfiguration")}function ST(n){return $r(n,"indexState")}const jH={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ta{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new ta(t,ta.DEFAULT_COLLECTION_PERCENTILE,ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function HH(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),o=[],c=IDBKeyRange.only(e.batchId);let d=0;const p=i.Wt({range:c},(E,D,R)=>(d++,R.delete()));o.push(p.next(()=>{Lt(1===d)}));const b=[];for(const E of e.mutations){const D=DH(t,E.key.path,e.batchId);o.push(r.delete(D)),b.push(E.key)}return be.waitFor(o).next(()=>b)}function TT(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw ut();t=n.noDocument}return JSON.stringify(t).length}ta.DEFAULT_COLLECTION_PERCENTILE=10,ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ta.DEFAULT=new ta(41943040,ta.DEFAULT_COLLECTION_PERCENTILE,ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ta.DISABLED=new ta(-1,0,0);class _P{constructor(t,e,i,r){this.userId=t,this.M=e,this.indexManager=i,this.referenceDelegate=r,this.ln={}}static Yt(t,e,i,r){Lt(""!==t.uid);const o=t.isAuthenticated()?t.uid:"";return new _P(o,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $f(t).Wt({index:"userMutationsIndex",range:i},(r,o,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const o=zb(t),c=$f(t);return c.add({}).next(d=>{Lt("number"==typeof d);const p=new uP(d,e,i,r),b=function(R,N,B){const K=B.baseMutations.map(He=>WC(R.Jt,He)),ce=B.mutations.map(He=>WC(R.Jt,He));return{userId:N,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:K,mutations:ce}}(this.M,this.userId,p),E=[];let D=new hi((R,N)=>zt(R.canonicalString(),N.canonicalString()));for(const R of r){const N=DH(this.userId,R.key.path,d);D=D.add(R.key.path.popLast()),E.push(c.put(b)),E.push(o.put(N,D7))}return D.forEach(R=>{E.push(this.indexManager.addToCollectionParentIndex(t,R))}),t.addOnCommittedListener(()=>{this.ln[d]=p.keys()}),be.waitFor(E).next(()=>p)})}lookupMutationBatch(t,e){return $f(t).get(e).next(i=>i?(Lt(i.userId===this.userId),Gb(this.M,i)):null)}fn(t,e){return this.ln[e]?be.resolve(this.ln[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.ln[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return $f(t).Wt({index:"userMutationsIndex",range:r},(c,d,p)=>{d.userId===this.userId&&(Lt(d.batchId>=i),o=Gb(this.M,d)),p.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return $f(t).Wt({index:"userMutationsIndex",range:e,reverse:!0},(r,o,c)=>{i=o.batchId,c.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $f(t).qt("userMutationsIndex",e).next(i=>i.map(r=>Gb(this.M,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=ET(this.userId,e.path),r=IDBKeyRange.lowerBound(i),o=[];return zb(t).Wt({range:r},(c,d,p)=>{const[b,E,D]=c,R=Iu(E);if(b===this.userId&&e.path.isEqual(R))return $f(t).get(D).next(N=>{if(!N)throw ut();Lt(N.userId===this.userId),o.push(Gb(this.M,N))});p.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new hi(zt);const r=[];return e.forEach(o=>{const c=ET(this.userId,o.path),d=IDBKeyRange.lowerBound(c),p=zb(t).Wt({range:d},(b,E,D)=>{const[R,N,B]=b,K=Iu(N);R===this.userId&&o.path.isEqual(K)?i=i.add(B):D.done()});r.push(p)}),be.waitFor(r).next(()=>this.dn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,o=ET(this.userId,i),c=IDBKeyRange.lowerBound(o);let d=new hi(zt);return zb(t).Wt({range:c},(p,b,E)=>{const[D,R,N]=p,B=Iu(R);D===this.userId&&i.isPrefixOf(B)?B.length===r&&(d=d.add(N)):E.done()}).next(()=>this.dn(t,d))}dn(t,e){const i=[],r=[];return e.forEach(o=>{r.push($f(t).get(o).next(c=>{if(null===c)throw ut();Lt(c.userId===this.userId),i.push(Gb(this.M,c))}))}),be.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return HH(t.Ht,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this._n(e.batchId)}),be.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}_n(t){delete this.ln[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return be.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return zb(t).Wt({range:i},(o,c,d)=>{if(o[0]===this.userId){const p=Iu(o[1]);r.push(p)}else d.done()}).next(()=>{Lt(0===r.length)})})}containsKey(t,e){return $H(t,this.userId,e)}wn(t){return GH(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $H(n,t,e){const i=ET(t,e.path),r=i[1],o=IDBKeyRange.lowerBound(i);let c=!1;return zb(n).Wt({range:o,jt:!0},(d,p,b)=>{const[E,D,R]=d;E===t&&D===r&&(c=!0),b.done()}).next(()=>c)}function $f(n){return $r(n,"mutations")}function zb(n){return $r(n,"documentMutations")}function GH(n){return $r(n,"mutationQueues")}class mg{constructor(t){this.mn=t}next(){return this.mn+=2,this.mn}static gn(){return new mg(0)}static yn(){return new mg(-1)}}class J7{constructor(t,e){this.referenceDelegate=t,this.M=e}allocateTargetId(t){return this.pn(t).next(e=>{const i=new mg(e.highestTargetId);return e.highestTargetId=i.next(),this.In(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.pn(t).next(e=>kt.fromTimestamp(new Ki(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.pn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.pn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.In(t,r)))}addTargetData(t,e){return this.Tn(t,e).next(()=>this.pn(t).next(i=>(i.targetCount+=1,this.En(e,i),this.In(t,i))))}updateTargetData(t,e){return this.Tn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Wb(t).delete(e.targetId)).next(()=>this.pn(t)).next(i=>(Lt(i.targetCount>0),i.targetCount-=1,this.In(t,i)))}removeTargets(t,e,i){let r=0;const o=[];return Wb(t).Wt((c,d)=>{const p=ZC(d);p.sequenceNumber<=e&&null===i.get(p.targetId)&&(r++,o.push(this.removeTargetData(t,p)))}).next(()=>be.waitFor(o)).next(()=>r)}forEachTarget(t,e){return Wb(t).Wt((i,r)=>{const o=ZC(r);e(o)})}pn(t){return qH(t).get("targetGlobalKey").next(e=>(Lt(null!==e),e))}In(t,e){return qH(t).put("targetGlobalKey",e)}Tn(t,e){return Wb(t).put(PH(this.M,e))}En(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.pn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=og(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return Wb(t).Wt({range:r,index:"queryTargetsIndex"},(c,d,p)=>{const b=ZC(d);FC(e,b.target)&&(o=b,p.done())}).next(()=>o)}addMatchingKeys(t,e,i){const r=[],o=Gf(t);return e.forEach(c=>{const d=gs(c.path);r.push(o.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(t,i,c))}),be.waitFor(r)}removeMatchingKeys(t,e,i){const r=Gf(t);return be.forEach(e,o=>{const c=gs(o.path);return be.waitFor([r.delete([i,c]),this.referenceDelegate.removeReference(t,i,o)])})}removeMatchingKeysForTargetId(t,e){const i=Gf(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=Gf(t);let o=An();return r.Wt({range:i,jt:!0},(c,d,p)=>{const b=Iu(c[1]),E=new Ke(b);o=o.add(E)}).next(()=>o)}containsKey(t,e){const i=gs(e.path),r=IDBKeyRange.bound([i],[bj(i)],!1,!0);let o=0;return Gf(t).Wt({index:"documentTargetsIndex",jt:!0,range:r},([c,d],p,b)=>{0!==c&&(o++,b.done())}).next(()=>o>0)}Et(t,e){return Wb(t).get(e).next(i=>i?ZC(i):null)}}function Wb(n){return $r(n,"targets")}function qH(n){return $r(n,"targetGlobal")}function Gf(n){return $r(n,"targetDocuments")}function gg(n){return vP.apply(this,arguments)}function vP(){return vP=(0,fe.Z)(function*(n){if(n.code!==me.FAILED_PRECONDITION||n.message!==TH)throw n;Ue("LocalStore","Unexpectedly lost primary lease")}),vP.apply(this,arguments)}function zH([n,t],[e,i]){const r=zt(n,e);return 0===r?zt(t,i):r}class eK{constructor(t){this.An=t,this.buffer=new hi(zH),this.Rn=0}Pn(){return++this.Rn}bn(t){const e=[t,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();zH(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class tK{constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.Vn=!1,this.vn=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(t)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(t){var e=this;const i=this.Vn?3e5:6e4;Ue("LruGarbageCollector",`Garbage collection scheduled in ${i}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",i,(0,fe.Z)(function*(){e.vn=null,e.Vn=!0;try{yield t.collectGarbage(e.garbageCollector)}catch(r){cg(r)?Ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield gg(r)}yield e.Sn(t)}))}}class nK{constructor(t,e){this.Dn=t,this.params=e}calculateTargetCount(t,e){return this.Dn.Cn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return be.resolve(za.A);const i=new eK(e);return this.Dn.forEachTarget(t,r=>i.bn(r.sequenceNumber)).next(()=>this.Dn.xn(t,r=>i.bn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Dn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Dn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(jH)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jH):this.Nn(t,e))}getCacheSize(t){return this.Dn.getCacheSize(t)}Nn(t,e){let i,r,o,c,d,p,b;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),r=this.params.maximumSequenceNumbersToCollect):r=D,c=Date.now(),this.nthSequenceNumber(t,r))).next(D=>(i=D,d=Date.now(),this.removeTargets(t,i,e))).next(D=>(o=D,p=Date.now(),this.removeOrphanedDocuments(t,i))).next(D=>(b=Date.now(),zO()<=Ta.in.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-E}ms\n\tDetermined least recently used ${r} in `+(d-c)+`ms\n\tRemoved ${o} targets in `+(p-d)+`ms\n\tRemoved ${D} documents in `+(b-p)+`ms\nTotal Duration: ${b-E}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:D})))}}class iK{constructor(t,e){this.db=t,this.garbageCollector=new nK(this,e)}Cn(t){const e=this.kn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}kn(t){let e=0;return this.xn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}xn(t,e){return this.Mn(t,(i,r)=>e(r))}addReference(t,e,i){return MT(t,i)}removeReference(t,e,i){return MT(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return MT(t,e)}On(t,e){return function(i,r){let o=!1;return GH(i).zt(c=>$H(i,c,r).next(d=>(d&&(o=!0),be.resolve(!d)))).next(()=>o)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let o=0;return this.Mn(t,(c,d)=>{if(d<=e){const p=this.On(t,c).next(b=>{if(!b)return o++,i.getEntry(t,c).next(()=>(i.removeEntry(c,kt.min()),Gf(t).delete([0,gs(c.path)])))});r.push(p)}}).next(()=>be.waitFor(r)).next(()=>i.apply(t)).next(()=>o)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return MT(t,e)}Mn(t,e){const i=Gf(t);let r,o=za.A;return i.Wt({index:"documentTargetsIndex"},([c,d],{path:p,sequenceNumber:b})=>{0===c?(o!==za.A&&e(new Ke(Iu(r)),o),o=b,r=p):o=za.A}).next(()=>{o!==za.A&&e(new Ke(Iu(r)),o)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function MT(n,t){return Gf(n).put((i=n.currentSequenceNumber,{targetId:0,path:gs(t.path),sequenceNumber:i}));var i}class WH{constructor(){this.changes=new Uf(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,di.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?be.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class rK{constructor(t){this.M=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return _g(t).put(i)}removeEntry(t,e,i){return _g(t).delete(function(r,o){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],DT(o),c[c.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Fn(t,i)))}getEntry(t,e){let i=di.newInvalidDocument(e);return _g(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(JC(e))},(r,o)=>{i=this.$n(e,o)}).next(()=>i)}Bn(t,e){let i={size:0,document:di.newInvalidDocument(e)};return _g(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(JC(e))},(r,o)=>{i={document:this.$n(e,o),size:TT(o)}}).next(()=>i)}getEntries(t,e){let i=Ml();return this.Ln(t,e,(r,o)=>{const c=this.$n(r,o);i=i.insert(r,c)}).next(()=>i)}Un(t,e){let i=Ml(),r=new Qi(Ke.comparator);return this.Ln(t,e,(o,c)=>{const d=this.$n(o,c);i=i.insert(o,d),r=r.insert(o,TT(c))}).next(()=>({documents:i,qn:r}))}Ln(t,e,i){if(e.isEmpty())return be.resolve();let r=new hi(KH);e.forEach(p=>r=r.add(p));const o=IDBKeyRange.bound(JC(r.first()),JC(r.last())),c=r.getIterator();let d=c.getNext();return _g(t).Wt({index:"documentKeyIndex",range:o},(p,b,E)=>{const D=Ke.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;d&&KH(d,D)<0;)i(d,null),d=c.getNext();d&&d.isEqual(D)&&(i(d,b),d=c.hasNext()?c.getNext():null),d?E.Ut(JC(d)):E.done()}).next(()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null})}getAllFromCollection(t,e,i){const r=[e.popLast().toArray(),e.lastSegment(),DT(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],o=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _g(t).qt(IDBKeyRange.bound(r,o,!0)).next(c=>{let d=Ml();for(const p of c){const b=this.$n(Ke.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);d=d.insert(b.key,b)}return d})}getAllFromCollectionGroup(t,e,i,r){let o=Ml();const c=ZH(e,i),d=ZH(e,Ud.max());return _g(t).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(p,b,E)=>{const D=this.$n(Ke.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);o=o.insert(D.key,D),o.size===r&&E.done()}).next(()=>o)}newChangeBuffer(t){return new oK(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return YH(t).get("remoteDocumentGlobalKey").next(e=>(Lt(!!e),e))}Fn(t,e){return YH(t).put("remoteDocumentGlobalKey",e)}$n(t,e){if(e){const i=function G7(n,t){let e;if(t.document)e=_H(n.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=Ke.fromSegments(t.noDocument.path),r=hg(t.noDocument.readTime);e=di.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return ut();{const i=Ke.fromSegments(t.unknownDocument.path),r=hg(t.unknownDocument.version);e=di.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new Ki(i[0],i[1]);return kt.fromTimestamp(r)}(t.readTime)),e}(this.M,e);if(!i.isNoDocument()||!i.version.isEqual(kt.min()))return i}return di.newInvalidDocument(t)}}class oK extends WH{constructor(t,e){super(),this.Kn=t,this.trackRemovals=e,this.Gn=new Uf(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new hi((o,c)=>zt(o.canonicalString(),c.canonicalString()));return this.changes.forEach((o,c)=>{const d=this.Gn.get(o);if(e.push(this.Kn.removeEntry(t,o,d.readTime)),c.isValidDocument()){const p=OH(this.Kn.M,c);r=r.add(o.path.popLast()),i+=TT(p)-d.size,e.push(this.Kn.addEntry(t,o,p))}else if(i-=d.size,this.trackRemovals){const p=OH(this.Kn.M,c.convertToNoDocument(kt.min()));e.push(this.Kn.addEntry(t,o,p))}}),r.forEach(o=>{e.push(this.Kn.indexManager.addToCollectionParentIndex(t,o))}),e.push(this.Kn.updateMetadata(t,i)),be.waitFor(e)}getFromCache(t,e){return this.Kn.Bn(t,e).next(i=>(this.Gn.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.Kn.Un(t,e).next(({documents:i,qn:r})=>(r.forEach((o,c)=>{this.Gn.set(o,{size:c,readTime:i.get(o).readTime})}),i))}}function YH(n){return $r(n,"remoteDocumentGlobal")}function _g(n){return $r(n,"remoteDocumentsV14")}function JC(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function ZH(n,t){const e=t.documentKey.path.toArray();return[n,DT(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function KH(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let o=0;o<e.length-2&&o<i.length-2;++o)if(r=zt(e[o],i[o]),r)return r;return r=zt(e.length,i.length),r||(r=zt(e[e.length-2],i[i.length-2]),r||zt(e[e.length-1],i[i.length-1]))}class sK{constructor(t){this.M=t}kt(t,e,i,r){const o=new xT("createOrUpgrade",e);var d;i<1&&r>=1&&(t.createObjectStore("owner"),(d=t).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xH,{unique:!0}),d.createObjectStore("documentMutations"),QH(t),function(d){d.createObjectStore("remoteDocuments")}(t));let c=be.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(t),QH(t)),c=c.next(()=>function(d){const p=d.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:kt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",b)}(o))),i<4&&r>=4&&(0!==i&&(c=c.next(()=>function(d,p){return p.store("mutations").qt().next(b=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xH,{unique:!0});const E=p.store("mutations"),D=b.map(R=>E.put(R));return be.waitFor(D)})}(t,o))),c=c.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(c=c.next(()=>this.Qn(o))),i<6&&r>=6&&(c=c.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(t),this.jn(o)))),i<7&&r>=7&&(c=c.next(()=>this.Wn(o))),i<8&&r>=8&&(c=c.next(()=>this.zn(t,o))),i<9&&r>=9&&(c=c.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(c=c.next(()=>this.Hn(o))),i<11&&r>=11&&(c=c.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(c=c.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:L7});p.createIndex("collectionPathOverlayIndex",B7,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",V7,{unique:!1})}(t)})),i<13&&r>=13&&(c=c.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:I7});p.createIndex("documentKeyIndex",S7),p.createIndex("collectionGroupIndex",T7)}(t)).next(()=>this.Jn(t,o)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(c=c.next(()=>{!function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:O7}).createIndex("sequenceNumberIndex",P7,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:N7}).createIndex("documentKeyIndex",F7,{unique:!1})}(t)})),c}jn(t){let e=0;return t.store("remoteDocuments").Wt((i,r)=>{e+=TT(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Qn(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.qt().next(r=>be.forEach(r,o=>{const c=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.qt("userMutationsIndex",c).next(d=>be.forEach(d,p=>{Lt(p.userId===o.userId);const b=Gb(this.M,p);return HH(t,o.userId,b).next(()=>{})}))}))}Wn(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const o=[];return i.Wt((c,d)=>{const p=new _n(c),b=[0,gs(p)];o.push(e.get(b).next(E=>E?be.resolve():e.put({targetId:0,path:gs(p),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>be.waitFor(o))})}zn(t,e){t.createObjectStore("collectionParents",{keyPath:R7});const i=e.store("collectionParents"),r=new gP,o=c=>{if(r.add(c)){const d=c.lastSegment(),p=c.popLast();return i.put({collectionId:d,parent:gs(p)})}};return e.store("remoteDocuments").Wt({jt:!0},(c,d)=>{const p=new _n(c);return o(p.popLast())}).next(()=>e.store("documentMutations").Wt({jt:!0},([c,d,p],b)=>{const E=Iu(d);return o(E.popLast())}))}Hn(t){const e=t.store("targets");return e.Wt((i,r)=>{const o=ZC(r),c=PH(this.M,o);return e.put(c)})}Jn(t,e){const i=e.store("remoteDocuments"),r=[];return i.Wt((o,c)=>{const d=e.store("remoteDocumentsV14"),p=(b=c,b.document?new Ke(_n.fromString(b.document.name).popFirst(5)):b.noDocument?Ke.fromSegments(b.noDocument.path):b.unknownDocument?Ke.fromSegments(b.unknownDocument.path):ut()).path.toArray();var b;const E={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};r.push(d.put(E))}).next(()=>be.waitFor(r))}}function QH(n){n.createObjectStore("targetDocuments",{keyPath:A7}).createIndex("documentTargetsIndex",k7,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",M7,{unique:!0}),n.createObjectStore("targetGlobal")}const bP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class yP{constructor(t,e,i,r,o,c,d,p,b,E,D=13){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Yn=o,this.window=c,this.document=d,this.Xn=b,this.Zn=E,this.ts=D,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=R=>Promise.resolve(),!yP.vt())throw new Pe(me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new iK(this,r),this.hs=e+"main",this.M=new RH(p),this.ls=new mc(this.hs,this.ts,new sK(this.M)),this.fs=new J7(this.referenceDelegate,this.M),this.ds=new rK(this.M),this._s=new q7,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===E&&cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(me.FAILED_PRECONDITION,bP);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.fs.getHighestSequenceNumber(t))}).then(t=>{this.es=new za(t,this.Xn)}).then(()=>{this.ns=!0}).catch(t=>(this.ls&&this.ls.close(),Promise.reject(t)))}Ts(t){var e=this;return this.cs=function(){var i=(0,fe.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ls.Ot(function(){var e=(0,fe.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Yn.enqueueAndForget((0,fe.Z)(function*(){e.started&&(yield e.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>AT(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(t).next(e=>{e||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(t)).next(e=>this.isPrimary&&!e?this.Rs(t).next(()=>!1):!!e&&this.Ps(t).next(()=>!0))).catch(t=>{if(cg(t))return Ue("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Yn.enqueueRetryable(()=>this.cs(t)),this.isPrimary=t})}Es(t){return eE(t).get("owner").next(e=>be.resolve(this.bs(e)))}Vs(t){return AT(t).delete(this.clientId)}vs(){var t=this;return(0,fe.Z)(function*(){if(t.isPrimary&&!t.Ss(t.us,18e5)){t.us=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=$r(i,"clientMetadata");return r.qt().next(o=>{const c=t.Ds(o,18e5),d=o.filter(p=>-1===c.indexOf(p));return be.forEach(d,p=>r.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(t.ws)for(const i of e)t.ws.removeItem(t.Cs(i.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(t){return!!t&&t.ownerId===this.clientId}As(t){return this.Zn?be.resolve(!0):eE(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)){if(this.bs(e)&&this.networkEnabled)return!0;if(!this.bs(e)){if(!e.allowTabSynchronization)throw new Pe(me.FAILED_PRECONDITION,bP);return!1}}return!(!this.networkEnabled||!this.inForeground)||AT(t).qt().next(i=>void 0===this.Ds(i,5e3).find(r=>{if(this.clientId!==r.clientId){const c=!this.inForeground&&r.inForeground,d=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||c&&d)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Ue("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,fe.Z)(function*(){t.ns=!1,t.Ns(),t.os&&(t.os.cancel(),t.os=null),t.ks(),t.Ms(),yield t.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new kH(e,za.A);return t.Rs(i).next(()=>t.Vs(i))}),t.ls.close(),t.Os()})()}Ds(t,e){return t.filter(i=>this.Ss(i.updateTimeMs,e)&&!this.xs(i.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",t=>AT(t).qt().next(e=>this.Ds(e,18e5).map(i=>i.clientId)))}get started(){return this.ns}getMutationQueue(t,e){return _P.Yt(t,this.M,e,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(t){return new X7(t,this.M.Jt.databaseId)}getDocumentOverlayCache(t){return mP.Yt(this.M,t)}getBundleCache(){return this._s}runTransaction(t,e,i){Ue("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",o=14===(c=this.ts)?j7:13===c?SH:12===c?U7:11===c?IH:void ut();var c;let d;return this.ls.runTransaction(t,r,o,p=>(d=new kH(p,this.es?this.es.next():za.A),"readwrite-primary"===e?this.Es(d).next(b=>!!b||this.As(d)).next(b=>{if(!b)throw cr(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Pe(me.FAILED_PRECONDITION,TH);return i(d)}).next(b=>this.Ps(d).next(()=>b)):this.$s(d).next(()=>i(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}$s(t){return eE(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)&&!this.bs(e)&&!(this.Zn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Pe(me.FAILED_PRECONDITION,bP)})}Ps(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return eE(t).put("owner",e)}static vt(){return mc.vt()}Rs(t){const e=eE(t);return e.get("owner").next(i=>this.bs(i)?(Ue("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):be.resolve())}Ss(t,e){const i=Date.now();return!(t<i-e||t>i&&(cr(`Detected an update time that is in the future: ${t} > ${i}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ss=()=>{this.Ns(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(t){var e;try{const i=null!==(null===(e=this.ws)||void 0===e?void 0:e.getItem(this.Cs(t)));return Ue("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return cr("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(t){cr("Failed to set zombie client id.",t)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(t){}}Cs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function eE(n){return $r(n,"owner")}function AT(n){return $r(n,"clientMetadata")}function wP(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class aK{constructor(t,e,i){this.ds=t,this.Bs=e,this.indexManager=i}Ls(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKey(t,e).next(i=>this.Us(t,e,i))}Us(t,e,i){return this.ds.getEntry(t,e).next(r=>{for(const o of i)o.applyToLocalView(r);return r})}qs(t,e){t.forEach((i,r)=>{for(const o of e)o.applyToLocalView(r)})}Ks(t,e){return this.ds.getEntries(t,e).next(i=>this.Gs(t,i).next(()=>i))}Gs(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(t,e).next(i=>this.qs(e,i))}Qs(t,e,i){return Ke.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.js(t,e.path):eP(e)?this.Ws(t,e,i):this.zs(t,e,i);var r}js(t,e){return this.Ls(t,new Ke(e)).next(i=>{let r=oP();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}Ws(t,e,i){const r=e.collectionGroup;let o=oP();return this.indexManager.getCollectionParents(t,r).next(c=>be.forEach(c,d=>{const p=(b=e,E=d.child(r),new jd(E,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,E;return this.zs(t,p,i).next(b=>{b.forEach((E,D)=>{o=o.insert(E,D)})})}).next(()=>o))}zs(t,e,i){let r;return this.ds.getAllFromCollection(t,e.path,i).next(o=>(r=o,this.Bs.getAllMutationBatchesAffectingQuery(t,e))).next(o=>{for(const c of o)for(const d of c.mutations){const p=d.key;let b=r.get(p);null==b&&(b=di.newInvalidDocument(p),r=r.insert(p,b)),iP(d,b,c.localWriteTime),b.isFoundDocument()||(r=r.remove(p))}}).next(()=>(r.forEach((o,c)=>{nP(e,c)||(r=r.remove(o))}),r))}}class CP{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Hs=i,this.Js=r}static Ys(t,e){let i=An(),r=An();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new CP(t,e.fromCache,i,r)}}class XH{Xs(t){this.Zs=t}Qs(t,e,i,r){return 0===(o=e).filters.length&&null===o.limit&&null==o.startAt&&null==o.endAt&&(0===o.explicitOrderBy.length||1===o.explicitOrderBy.length&&o.explicitOrderBy[0].field.isKeyField())||i.isEqual(kt.min())?this.ti(t,e):this.Zs.Ks(t,r).next(o=>{const c=this.ei(e,o);return(mT(e)||gT(e))&&this.ni(e.limitType,c,r,i)?this.ti(t,e):(zO()<=Ta.in.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),tP(e)),this.Zs.Qs(t,e,Oj(i,-1)).next(d=>(c.forEach(p=>{d=d.insert(p.key,p)}),d)))});var o}ei(t,e){let i=new hi(Gj(t));return e.forEach((r,o)=>{nP(t,o)&&(i=i.add(o))}),i}ni(t,e,i,r){if(i.size!==e.size)return!0;const o="F"===t?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ti(t,e){return zO()<=Ta.in.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",tP(e)),this.Zs.Qs(t,e,Ud.min())}}class lK{constructor(t,e,i,r){this.persistence=t,this.si=e,this.M=r,this.ii=new Qi(zt),this.ri=new Uf(o=>og(o),FC),this.oi=new Map,this.ui=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.ai(i)}ai(t){this.indexManager=this.persistence.getIndexManager(t),this.Bs=this.persistence.getMutationQueue(t,this.indexManager),this.ci=new aK(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ii))}}function JH(n,t,e,i){return new lK(n,t,e,i)}function e3(n,t){return EP.apply(this,arguments)}function EP(){return EP=(0,fe.Z)(function*(n,t){const e=Xe(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.Bs.getAllMutationBatches(i).next(o=>(r=o,e.ai(t),e.Bs.getAllMutationBatches(i))).next(o=>{const c=[],d=[];let p=An();for(const b of r){c.push(b.batchId);for(const E of b.mutations)p=p.add(E.key)}for(const b of o){d.push(b.batchId);for(const E of b.mutations)p=p.add(E.key)}return e.ci.Ks(i,p).next(b=>({hi:b,removedBatchIds:c,addedBatchIds:d}))})})}),EP.apply(this,arguments)}function cK(n,t){const e=Xe(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),o=e.ui.newChangeBuffer({trackRemovals:!0});return function(c,d,p,b){const E=p.batch,D=E.keys();let R=be.resolve();return D.forEach(N=>{R=R.next(()=>b.getEntry(d,N)).next(B=>{const K=p.docVersions.get(N);Lt(null!==K),B.version.compareTo(K)<0&&(E.applyToRemoteDocument(B,p),B.isValidDocument()&&(B.setReadTime(p.commitVersion),b.addEntry(B)))})}),R.next(()=>c.Bs.removeMutationBatch(d,E))}(e,i,t,o).next(()=>o.apply(i)).next(()=>e.Bs.performConsistencyCheck(i)).next(()=>e.ci.Ks(i,r))})}function t3(n){const t=Xe(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.fs.getLastRemoteSnapshotVersion(e))}function uK(n,t){const e=Xe(n),i=t.snapshotVersion;let r=e.ii;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=e.ui.newChangeBuffer({trackRemovals:!0});r=e.ii;const d=[];t.targetChanges.forEach((b,E)=>{const D=r.get(E);if(!D)return;d.push(e.fs.removeMatchingKeys(o,b.removedDocuments,E).next(()=>e.fs.addMatchingKeys(o,b.addedDocuments,E)));let R=D.withSequenceNumber(o.currentSequenceNumber);var N,B,K;t.targetMismatches.has(E)?R=R.withResumeToken(Ir.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):b.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(b.resumeToken,i)),r=r.insert(E,R),B=R,K=b,(0===(N=D).resumeToken.approximateByteSize()||B.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8||K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0)&&d.push(e.fs.updateTargetData(o,R))});let p=Ml();if(t.documentUpdates.forEach(b=>{t.resolvedLimboDocuments.has(b)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(o,b))}),d.push(n3(o,c,t.documentUpdates).next(b=>{p=b})),!i.isEqual(kt.min())){const b=e.fs.getLastRemoteSnapshotVersion(o).next(E=>e.fs.setTargetsMetadata(o,o.currentSequenceNumber,i));d.push(b)}return be.waitFor(d).next(()=>c.apply(o)).next(()=>e.ci.Gs(o,p)).next(()=>p)}).then(o=>(e.ii=r,o))}function n3(n,t,e){let i=An();return e.forEach(r=>i=i.add(r)),t.getEntries(n,i).next(r=>{let o=Ml();return e.forEach((c,d)=>{const p=r.get(c);d.isNoDocument()&&d.version.isEqual(kt.min())?(t.removeEntry(c,d.readTime),o=o.insert(c,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||0===d.version.compareTo(p.version)&&p.hasPendingWrites?(t.addEntry(d),o=o.insert(c,d)):Ue("LocalStore","Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",d.version)}),o})}function dK(n,t){const e=Xe(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.Bs.getNextMutationBatchAfterBatchId(i,t)))}function Yb(n,t){const e=Xe(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.fs.getTargetData(i,t).next(o=>o?(r=o,be.resolve(r)):e.fs.allocateTargetId(i).next(c=>(r=new jf(t,c,0,i.currentSequenceNumber),e.fs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.ii.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ii=e.ii.insert(i.targetId,i),e.ri.set(t,i.targetId)),i})}function Zb(n,t,e){return xP.apply(this,arguments)}function xP(){return xP=(0,fe.Z)(function*(n,t,e){const i=Xe(n),r=i.ii.get(t),o=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",o,c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!cg(c))throw c;Ue("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}i.ii=i.ii.remove(t),i.ri.delete(r.target)}),xP.apply(this,arguments)}function kT(n,t,e){const i=Xe(n);let r=kt.min(),o=An();return i.persistence.runTransaction("Execute query","readonly",c=>function(d,p,b){const E=Xe(d),D=E.ri.get(b);return void 0!==D?be.resolve(E.ii.get(D)):E.fs.getTargetData(p,b)}(i,c,Tl(t)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.fs.getMatchingKeysForTargetId(c,d.targetId).next(p=>{o=p})}).next(()=>i.si.Qs(c,t,e?r:kt.min(),e?o:An())).next(d=>(s3(i,$j(t),d),{documents:d,li:o})))}function r3(n,t){const e=Xe(n),i=Xe(e.fs),r=e.ii.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",o=>i.Et(o,t).next(c=>c?c.target:null))}function o3(n,t){const e=Xe(n),i=e.oi.get(t)||kt.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.ui.getAllFromCollectionGroup(r,t,Oj(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(s3(e,t,r),r))}function s3(n,t,e){let i=kt.min();e.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.oi.set(t,i)}function DP(){return DP=(0,fe.Z)(function*(n,t,e,i){const r=Xe(n);let o=An(),c=Ml();for(const b of e){const E=t.fi(b.metadata.name);b.document&&(o=o.add(E));const D=t.di(b);D.setReadTime(t._i(b.metadata.readTime)),c=c.insert(E,D)}const d=r.ui.newChangeBuffer({trackRemovals:!0}),p=yield Yb(r,(b=i,Tl(Lb(_n.fromString(`__bundle__/docs/${b}`)))));var b;return r.persistence.runTransaction("Apply bundle documents","readwrite",b=>n3(b,d,c).next(E=>(d.apply(b),E)).next(E=>r.fs.removeMatchingKeysForTargetId(b,p.targetId).next(()=>r.fs.addMatchingKeys(b,o,p.targetId)).next(()=>r.ci.Gs(b,E)).next(()=>E)))}),DP.apply(this,arguments)}function fK(n,t){return IP.apply(this,arguments)}function IP(){return IP=(0,fe.Z)(function*(n,t,e=An()){const i=yield Yb(n,Tl(fP(t.bundledQuery))),r=Xe(n);return r.persistence.runTransaction("Save named query","readwrite",o=>{const c=Hr(t.readTime);if(i.snapshotVersion.compareTo(c)>=0)return r._s.saveNamedQuery(o,t);const d=i.withResumeToken(Ir.EMPTY_BYTE_STRING,c);return r.ii=r.ii.insert(d.targetId,d),r.fs.updateTargetData(o,d).next(()=>r.fs.removeMatchingKeysForTargetId(o,i.targetId)).next(()=>r.fs.addMatchingKeys(o,e,i.targetId)).next(()=>r._s.saveNamedQuery(o,t))})}),IP.apply(this,arguments)}class pK{constructor(t){this.M=t,this.wi=new Map,this.mi=new Map}getBundleMetadata(t,e){return be.resolve(this.wi.get(e))}saveBundleMetadata(t,e){var i;return this.wi.set(e.id,{id:(i=e).id,version:i.version,createTime:Hr(i.createTime)}),be.resolve()}getNamedQuery(t,e){return be.resolve(this.mi.get(e))}saveNamedQuery(t,e){return this.mi.set(e.name,{name:(i=e).name,query:fP(i.bundledQuery),readTime:Hr(i.readTime)}),be.resolve();var i}}class mK{constructor(){this.overlays=new Qi(Ke.comparator),this.gi=new Map}getOverlay(t,e){return be.resolve(this.overlays.get(e))}saveOverlays(t,e,i){return i.forEach((r,o)=>{this.Xt(t,e,o)}),be.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.gi.get(i);return void 0!==r&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.gi.delete(i)),be.resolve()}getOverlaysForCollection(t,e,i){const r=jC(),o=e.length+1,c=new Ke(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,b=p.getKey();if(!e.isPrefixOf(b.path))break;b.path.length===o&&p.largestBatchId>i&&r.set(p.getKey(),p)}return be.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let o=new Qi((b,E)=>b-E);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===e&&b.largestBatchId>i){let E=o.get(b.largestBatchId);null===E&&(E=jC(),o=o.insert(b.largestBatchId,E)),E.set(b.getKey(),b)}}const d=jC(),p=o.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((b,E)=>d.set(b,E)),!(d.size()>=r)););return be.resolve(d)}Xt(t,e,i){if(null===i)return;const r=this.overlays.get(i.key);if(null!==r){const c=this.gi.get(r.largestBatchId).delete(i.key);this.gi.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new hP(e,i));let o=this.gi.get(e);void 0===o&&(o=An(),this.gi.set(e,o)),this.gi.set(e,o.add(i.key))}}class SP{constructor(){this.yi=new hi(Gr.pi),this.Ii=new hi(Gr.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(t,e){const i=new Gr(t,e);this.yi=this.yi.add(i),this.Ii=this.Ii.add(i)}Ei(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Ai(new Gr(t,e))}Ri(t,e){t.forEach(i=>this.removeReference(i,e))}Pi(t){const e=new Ke(new _n([])),i=new Gr(e,t),r=new Gr(e,t+1),o=[];return this.Ii.forEachInRange([i,r],c=>{this.Ai(c),o.push(c.key)}),o}bi(){this.yi.forEach(t=>this.Ai(t))}Ai(t){this.yi=this.yi.delete(t),this.Ii=this.Ii.delete(t)}Vi(t){const e=new Ke(new _n([])),i=new Gr(e,t),r=new Gr(e,t+1);let o=An();return this.Ii.forEachInRange([i,r],c=>{o=o.add(c.key)}),o}containsKey(t){const e=new Gr(t,0),i=this.yi.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class Gr{constructor(t,e){this.key=t,this.vi=e}static pi(t,e){return Ke.comparator(t.key,e.key)||zt(t.vi,e.vi)}static Ti(t,e){return zt(t.vi,e.vi)||Ke.comparator(t.key,e.key)}}class gK{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.Bs=[],this.Si=1,this.Di=new hi(Gr.pi)}checkEmpty(t){return be.resolve(0===this.Bs.length)}addMutationBatch(t,e,i,r){const o=this.Si;this.Si++;const c=new uP(o,e,i,r);this.Bs.push(c);for(const d of r)this.Di=this.Di.add(new Gr(d.key,o)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return be.resolve(c)}lookupMutationBatch(t,e){return be.resolve(this.Ci(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.xi(e+1),o=r<0?0:r;return be.resolve(this.Bs.length>o?this.Bs[o]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(t){return be.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Gr(e,0),r=new Gr(e,Number.POSITIVE_INFINITY),o=[];return this.Di.forEachInRange([i,r],c=>{const d=this.Ci(c.vi);o.push(d)}),be.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new hi(zt);return e.forEach(r=>{const o=new Gr(r,0),c=new Gr(r,Number.POSITIVE_INFINITY);this.Di.forEachInRange([o,c],d=>{i=i.add(d.vi)})}),be.resolve(this.Ni(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let o=i;Ke.isDocumentKey(o)||(o=o.child(""));const c=new Gr(new Ke(o),0);let d=new hi(zt);return this.Di.forEachWhile(p=>{const b=p.key.path;return!!i.isPrefixOf(b)&&(b.length===r&&(d=d.add(p.vi)),!0)},c),be.resolve(this.Ni(d))}Ni(t){const e=[];return t.forEach(i=>{const r=this.Ci(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){Lt(0===this.ki(e.batchId,"removed")),this.Bs.shift();let i=this.Di;return be.forEach(e.mutations,r=>{const o=new Gr(r.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Di=i})}_n(t){}containsKey(t,e){const i=new Gr(e,0),r=this.Di.firstAfterOrEqual(i);return be.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return be.resolve()}ki(t,e){return this.xi(t)}xi(t){return 0===this.Bs.length?0:t-this.Bs[0].batchId}Ci(t){const e=this.xi(t);return e<0||e>=this.Bs.length?null:this.Bs[e]}}class _K{constructor(t){this.Mi=t,this.docs=new Qi(Ke.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),o=r?r.size:0,c=this.Mi(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return be.resolve(i?i.document.mutableCopy():di.newInvalidDocument(e))}getEntries(t,e){let i=Ml();return e.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():di.newInvalidDocument(r))}),be.resolve(i)}getAllFromCollection(t,e,i){let r=Ml();const o=new Ke(e.child("")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:d,value:{document:p}}=c.getNext();if(!e.isPrefixOf(d.path))break;d.path.length>e.length+1||VZ(BZ(p),i)<=0||(r=r.insert(p.key,p.mutableCopy()))}return be.resolve(r)}getAllFromCollectionGroup(t,e,i,r){ut()}Oi(t,e){return be.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new vK(this)}getSize(t){return be.resolve(this.size)}}class vK extends WH{constructor(t){super(),this.Kn=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Kn.addEntry(t,r)):this.Kn.removeEntry(i)}),be.waitFor(e)}getFromCache(t,e){return this.Kn.getEntry(t,e)}getAllFromCache(t,e){return this.Kn.getEntries(t,e)}}class bK{constructor(t){this.persistence=t,this.Fi=new Uf(e=>og(e),FC),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new SP,this.targetCount=0,this.Li=mg.gn()}forEachTarget(t,e){return this.Fi.forEach((i,r)=>e(r)),be.resolve()}getLastRemoteSnapshotVersion(t){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return be.resolve(this.$i)}allocateTargetId(t){return this.highestTargetId=this.Li.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.$i&&(this.$i=e),be.resolve()}Tn(t){this.Fi.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Li=new mg(e),this.highestTargetId=e),t.sequenceNumber>this.$i&&(this.$i=t.sequenceNumber)}addTargetData(t,e){return this.Tn(e),this.targetCount+=1,be.resolve()}updateTargetData(t,e){return this.Tn(e),be.resolve()}removeTargetData(t,e){return this.Fi.delete(e.target),this.Bi.Pi(e.targetId),this.targetCount-=1,be.resolve()}removeTargets(t,e,i){let r=0;const o=[];return this.Fi.forEach((c,d)=>{d.sequenceNumber<=e&&null===i.get(d.targetId)&&(this.Fi.delete(c),o.push(this.removeMatchingKeysForTargetId(t,d.targetId)),r++)}),be.waitFor(o).next(()=>r)}getTargetCount(t){return be.resolve(this.targetCount)}getTargetData(t,e){const i=this.Fi.get(e)||null;return be.resolve(i)}addMatchingKeys(t,e,i){return this.Bi.Ei(e,i),be.resolve()}removeMatchingKeys(t,e,i){this.Bi.Ri(e,i);const r=this.persistence.referenceDelegate,o=[];return r&&e.forEach(c=>{o.push(r.markPotentiallyOrphaned(t,c))}),be.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.Bi.Pi(e),be.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Bi.Vi(e);return be.resolve(i)}containsKey(t,e){return be.resolve(this.Bi.containsKey(e))}}class yK{constructor(t,e){this.Ui={},this.overlays={},this.es=new za(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new bK(this),this.indexManager=new Q7,this.ds=new _K(i=>this.referenceDelegate.qi(i)),this.M=new RH(e),this._s=new pK(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new mK,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Ui[t.toKey()];return i||(i=new gK(e,this.referenceDelegate),this.Ui[t.toKey()]=i),i}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(t,e,i){Ue("MemoryPersistence","Starting transaction:",t);const r=new wK(this.es.next());return this.referenceDelegate.Ki(),i(r).next(o=>this.referenceDelegate.Gi(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Qi(t,e){return be.or(Object.values(this.Ui).map(i=>()=>i.containsKey(t,e)))}}class wK extends MH{constructor(t){super(),this.currentSequenceNumber=t}}class TP{constructor(t){this.persistence=t,this.ji=new SP,this.Wi=null}static zi(t){return new TP(t)}get Hi(){if(this.Wi)return this.Wi;throw ut()}addReference(t,e,i){return this.ji.addReference(i,e),this.Hi.delete(i.toString()),be.resolve()}removeReference(t,e,i){return this.ji.removeReference(i,e),this.Hi.add(i.toString()),be.resolve()}markPotentiallyOrphaned(t,e){return this.Hi.add(e.toString()),be.resolve()}removeTarget(t,e){this.ji.Pi(e.targetId).forEach(r=>this.Hi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(o=>this.Hi.add(o.toString()))}).next(()=>i.removeTargetData(t,e))}Ki(){this.Wi=new Set}Gi(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.Hi,i=>{const r=Ke.fromPath(i);return this.Ji(t,r).next(o=>{o||e.removeEntry(r,kt.min())})}).next(()=>(this.Wi=null,e.apply(t)))}updateLimboDocument(t,e){return this.Ji(t,e).next(i=>{i?this.Hi.delete(e.toString()):this.Hi.add(e.toString())})}qi(t){return 0}Ji(t,e){return be.or([()=>be.resolve(this.ji.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Qi(t,e)])}}function a3(n,t){return`firestore_clients_${n}_${t}`}function l3(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function MP(n,t){return`firestore_targets_${n}_${t}`}class RT{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Yi(t,e,i){const r=JSON.parse(i);let o,c="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(o=new Pe(r.error.code,r.error.message))),c?new RT(t,e,r.state,o):(cr("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}Xi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class tE{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Yi(t,e){const i=JSON.parse(e);let r,o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(r=new Pe(i.error.code,i.error.message))),o?new tE(t,i.state,r):(cr("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Xi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class OT{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Yi(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,o=wT();for(let c=0;r&&c<i.activeTargetIds.length;++c)r=Ej(i.activeTargetIds[c]),o=o.add(i.activeTargetIds[c]);return r?new OT(t,o):(cr("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class AP{constructor(t,e){this.clientId=t,this.onlineState=e}static Yi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new AP(e.clientId,e.onlineState):(cr("SharedClientState",`Failed to parse online state: ${t}`),null)}}class kP{constructor(){this.activeTargetIds=wT()}Zi(t){this.activeTargetIds=this.activeTargetIds.add(t)}tr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Xi(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class RP{constructor(t,e,i,r,o){this.window=t,this.Yn=e,this.persistenceKey=i,this.er=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Qi(zt),this.started=!1,this.rr=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ur=a3(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new kP),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,fe.Z)(function*(){const e=yield t.syncEngine.Fs();for(const r of e){if(r===t.er)continue;const o=t.getItem(a3(t.persistenceKey,r));if(o){const c=OT.Yi(r,o);c&&(t.ir=t.ir.insert(c.clientId,c))}}t.wr();const i=t.storage.getItem(t.dr);if(i){const r=t.mr(i);r&&t.gr(r)}for(const r of t.rr)t.sr(r);t.rr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.ar,JSON.stringify(t))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(t){let e=!1;return this.ir.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.pr(t,"pending")}updateMutationState(t,e,i){this.pr(t,e,i),this.Ir(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(MP(this.persistenceKey,t));if(i){const r=tE.Yi(t,i);r&&(e=r.state)}}return this.Tr.Zi(t),this.wr(),e}removeLocalQueryTarget(t){this.Tr.tr(t),this.wr()}isLocalQueryTarget(t){return this.Tr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(MP(this.persistenceKey,t))}updateQueryState(t,e,i){this.Er(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Ir(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Ar(t)}notifyBundleLoaded(t){this.Rr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Ue("SharedClientState","READ",t,e),e}setItem(t,e){Ue("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Ue("SharedClientState","REMOVE",t),this.storage.removeItem(t)}sr(t){var e=this;const i=t;if(i.storageArea===this.storage){if(Ue("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ur)return void cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,fe.Z)(function*(){if(e.started){if(null!==i.key)if(e.cr.test(i.key)){if(null==i.newValue){const r=e.Pr(i.key);return e.br(r,null)}{const r=e.Vr(i.key,i.newValue);if(r)return e.br(r.clientId,r)}}else if(e.hr.test(i.key)){if(null!==i.newValue){const r=e.vr(i.key,i.newValue);if(r)return e.Sr(r)}}else if(e.lr.test(i.key)){if(null!==i.newValue){const r=e.Dr(i.key,i.newValue);if(r)return e.Cr(r)}}else if(i.key===e.dr){if(null!==i.newValue){const r=e.mr(i.newValue);if(r)return e.gr(r)}}else if(i.key===e.ar){const r=function(o){let c=za.A;if(null!=o)try{const d=JSON.parse(o);Lt("number"==typeof d),c=d}catch(d){cr("SharedClientState","Failed to read sequence number from WebStorage",d)}return c}(i.newValue);r!==za.A&&e.sequenceNumberHandler(r)}else if(i.key===e._r){const r=e.Nr(i.newValue);yield Promise.all(r.map(o=>e.syncEngine.kr(o)))}}else e.rr.push(i)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(t,e,i){const r=new RT(this.currentUser,t,e,i),o=l3(this.persistenceKey,this.currentUser,t);this.setItem(o,r.Xi())}Ir(t){const e=l3(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Ar(t){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:t}))}Er(t,e,i){const r=MP(this.persistenceKey,t),o=new tE(t,e,i);this.setItem(r,o.Xi())}Rr(t){const e=JSON.stringify(Array.from(t));this.setItem(this._r,e)}Pr(t){const e=this.cr.exec(t);return e?e[1]:null}Vr(t,e){const i=this.Pr(t);return OT.Yi(i,e)}vr(t,e){const i=this.hr.exec(t),r=Number(i[1]);return RT.Yi(new bo(void 0!==i[2]?i[2]:null),r,e)}Dr(t,e){const i=this.lr.exec(t),r=Number(i[1]);return tE.Yi(r,e)}mr(t){return AP.Yi(t)}Nr(t){return JSON.parse(t)}Sr(t){var e=this;return(0,fe.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Mr(t.batchId,t.state,t.error);Ue("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Cr(t){return this.syncEngine.Or(t.targetId,t.state,t.error)}br(t,e){const i=e?this.ir.insert(t,e):this.ir.remove(t),r=this.yr(this.ir),o=this.yr(i),c=[],d=[];return o.forEach(p=>{r.has(p)||c.push(p)}),r.forEach(p=>{o.has(p)||d.push(p)}),this.syncEngine.Fr(c,d).then(()=>{this.ir=i})}gr(t){this.ir.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}yr(t){let e=wT();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class c3{constructor(){this.$r=new kP,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.$r.Zi(t),this.Br[t]||"not-current"}updateQueryState(t,e,i){this.Br[t]=e}removeLocalQueryTarget(t){this.$r.tr(t)}isLocalQueryTarget(t){return this.$r.activeTargetIds.has(t)}clearQueryState(t){delete this.Br[t]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(t){return this.$r.activeTargetIds.has(t)}start(){return this.$r=new kP,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class CK{Lr(t){}shutdown(){}}class u3{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(t){this.Qr.push(t)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Qr)t(0)}Gr(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Qr)t(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const EK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class xK{constructor(t){this.Wr=t.Wr,this.zr=t.zr}Hr(t){this.Jr=t}Yr(t){this.Xr=t}onMessage(t){this.Zr=t}close(){this.zr()}send(t){this.Wr(t)}eo(){this.Jr()}no(t){this.Xr(t)}so(t){this.Zr(t)}}class DK extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.io=(t.ssl?"https":"http")+"://"+t.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(t,e,i,r,o){const c=this.uo(t,e);Ue("RestConnection","Sending: ",c,i);const d={};return this.ao(d,r,o),this.co(t,c,d,i).then(p=>(Ue("RestConnection","Received: ",p),p),p=>{throw TC("RestConnection",`${t} failed with error: `,p,"url: ",c,"request:",i),p})}ho(t,e,i,r,o){return this.oo(t,e,i,r,o)}ao(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Rb,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,o)=>t[o]=r),i&&i.headers.forEach((r,o)=>t[o]=r)}uo(t,e){return`${this.io}/v1/${e}:${EK[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}co(t,e,i,r){return new Promise((o,c)=>{const d=new CZ;d.listenOnce(bZ.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case qO.NO_ERROR:const b=d.getResponseJson();Ue("Connection","XHR received:",JSON.stringify(b)),o(b);break;case qO.TIMEOUT:Ue("Connection",'RPC "'+t+'" timed out'),c(new Pe(me.DEADLINE_EXCEEDED,"Request time out"));break;case qO.HTTP_ERROR:const E=d.getStatus();if(Ue("Connection",'RPC "'+t+'" failed with status:',E,"response text:",d.getResponseText()),E>0){const D=d.getResponseJson().error;if(D&&D.status&&D.message){const R=function(N){const B=N.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(B)>=0?B:me.UNKNOWN}(D.status);c(new Pe(R,D.message))}else c(new Pe(me.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Pe(me.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Ue("Connection",'RPC "'+t+'" completed.')}});const p=JSON.stringify(r);d.send(e,"POST",p,i,15)})}lo(t,e,i){const r=[this.io,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=_Z(),c=vZ(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new wZ({})),this.ao(d.initMessageHeaders,e,i),(0,L.uI)()||(0,L.b$)()||(0,L.d)()||(0,L.w1)()||(0,L.Mn)()||(0,L.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const p=r.join("");Ue("Connection","Creating WebChannel: "+p,d);const b=o.createWebChannel(p,d);let E=!1,D=!1;const R=new xK({Wr:B=>{D?Ue("Connection","Not sending because WebChannel is closed:",B):(E||(Ue("Connection","Opening WebChannel transport."),b.open(),E=!0),Ue("Connection","WebChannel sending:",B),b.send(B))},zr:()=>b.close()}),N=(B,K,ce)=>{B.listen(K,He=>{try{ce(He)}catch(We){setTimeout(()=>{throw We},0)}})};return N(b,cT.EventType.OPEN,()=>{D||Ue("Connection","WebChannel transport opened.")}),N(b,cT.EventType.CLOSE,()=>{D||(D=!0,Ue("Connection","WebChannel transport closed"),R.no())}),N(b,cT.EventType.ERROR,B=>{D||(D=!0,TC("Connection","WebChannel transport errored:",B),R.no(new Pe(me.UNAVAILABLE,"The operation could not be completed")))}),N(b,cT.EventType.MESSAGE,B=>{var K;if(!D){const ce=B.data[0];Lt(!!ce);const He=ce,We=He.error||(null===(K=He[0])||void 0===K?void 0:K.error);if(We){Ue("Connection","WebChannel received error:",We);const Ye=We.status;let Ge=function(Ot){const cn=dr[Ot];if(void 0!==cn)return oH(cn)}(Ye),Mt=We.message;void 0===Ge&&(Ge=me.INTERNAL,Mt="Unknown error status: "+Ye+" with message "+We.message),D=!0,R.no(new Pe(Ge,Mt)),b.close()}else Ue("Connection","WebChannel received:",ce),R.so(ce)}}),N(c,yZ.STAT_EVENT,B=>{B.stat===pj.PROXY?Ue("Connection","Detected buffering proxy"):B.stat===pj.NOPROXY&&Ue("Connection","Detected no buffering proxy")}),setTimeout(()=>{R.eo()},0),R}}function d3(){return"undefined"!=typeof window?window:null}function PT(){return"undefined"!=typeof document?document:null}function nE(n){return new f7(n,!0)}class OP{constructor(t,e,i=1e3,r=1.5,o=6e4){this.Yn=t,this.timerId=e,this.fo=i,this._o=r,this.wo=o,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(t){this.cancel();const e=Math.floor(this.mo+this.Eo()),i=Math.max(0,Date.now()-this.po),r=Math.max(0,e-i);r>0&&Ue("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.mo} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,r,()=>(this.po=Date.now(),t())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class h3{constructor(t,e,i,r,o,c,d,p){this.Yn=t,this.Ro=i,this.Po=r,this.bo=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new OP(t,e)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var t=this;return(0,fe.Z)(function*(){t.Co()&&(yield t.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(t){this.$o(),this.stream.send(t)}Oo(){var t=this;return(0,fe.Z)(function*(){if(t.xo())return t.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(t,e){var i=this;return(0,fe.Z)(function*(){i.$o(),i.Bo(),i.Do.cancel(),i.Vo++,4!==t?i.Do.reset():e&&e.code===me.RESOURCE_EXHAUSTED?(cr(e.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),i.Do.Io()):e&&e.code===me.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Lo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Yr(e)})()}Lo(){}auth(){this.state=1;const t=this.Uo(this.Vo),e=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Vo===e&&this.qo(i,r)},i=>{t(()=>{const r=new Pe(me.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Ko(r)})})}qo(t,e){const i=this.Uo(this.Vo);this.stream=this.Go(t,e),this.stream.Hr(()=>{i(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(r=>{i(()=>this.Ko(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}No(){var t=this;this.state=5,this.Do.To((0,fe.Z)(function*(){t.state=0,t.start()}))}Ko(t){return Ue("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Uo(t){return e=>{this.Yn.enqueueAndForget(()=>this.Vo===t?e():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class IK extends h3{constructor(t,e,i,r,o,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.M=o}Go(t,e){return this.bo.lo("Listen",t,e)}onMessage(t){this.Do.reset();const e=function g7(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(p=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:ut(),r=t.targetChange.targetIds||[],o=function(p,b){return p.N?(Lt(void 0===b||"string"==typeof b),Ir.fromBase64String(b||"")):(Lt(void 0===b||b instanceof Uint8Array),Ir.fromUint8Array(b||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(p){const b=void 0===p.code?me.UNKNOWN:oH(p.code);return new Pe(b,p.message||"")}(c);e=new lH(i,r,o,d||null)}else if("documentChange"in t){const i=t.documentChange,r=Du(n,i.document.name),o=Hr(i.document.updateTime),c=new Go({mapValue:{fields:i.document.fields}}),d=di.newFoundDocument(r,o,c);e=new CT(i.targetIds||[],i.removedTargetIds||[],d.key,d)}else if("documentDelete"in t){const i=t.documentDelete,r=Du(n,i.document),o=i.readTime?Hr(i.readTime):kt.min(),c=di.newNoDocument(r,o);e=new CT([],i.removedTargetIds||[],c.key,c)}else if("documentRemove"in t){const i=t.documentRemove,r=Du(n,i.document);e=new CT([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return ut();{const i=t.filter,o=new r7(i.count||0);e=new aH(i.targetId,o)}}var p;return e}(this.M,t),i=function(r){if(!("targetChange"in r))return kt.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?kt.min():o.readTime?Hr(o.readTime):kt.min()}(t);return this.listener.Qo(e,i)}jo(t){const e={};e.database=zC(this.M),e.addTarget=function(r,o){let c;const d=o.target;return c=fT(d)?{documents:vH(r,d)}:{query:bH(r,d)},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?c.resumeToken=hH(r,o.resumeToken):o.snapshotVersion.compareTo(kt.min())>0&&(c.readTime=GC(r,o.snapshotVersion.toTimestamp())),c}(this.M,t);const i=function v7(n,t){const e=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ut()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Fo(e)}Wo(t){const e={};e.database=zC(this.M),e.removeTarget=t,this.Fo(e)}}class SK extends h3{constructor(t,e,i,r,o,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.M=o,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(t,e){return this.bo.lo("Write",t,e)}onMessage(t){if(Lt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.zo){this.Do.reset();const e=function _7(n,t){return n&&n.length>0?(Lt(void 0!==t),n.map(e=>function(i,r){let o=Hr(i.updateTime?i.updateTime:r);return o.isEqual(kt.min())&&(o=Hr(r)),new e7(o,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=Hr(t.commitTime);return this.listener.Yo(i,e)}return Lt(!t.writeResults||0===t.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const t={};t.database=zC(this.M),this.Fo(t)}Jo(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>WC(this.M,i))};this.Fo(e)}}class TK extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.bo=i,this.M=r,this.tu=!1}eu(){if(this.tu)throw new Pe(me.FAILED_PRECONDITION,"The client has already been terminated.")}oo(t,e,i){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.bo.oo(t,e,i,r,o)).catch(r=>{throw"FirebaseError"===r.name?(r.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Pe(me.UNKNOWN,r.toString())})}ho(t,e,i){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.bo.ho(t,e,i,r,o)).catch(r=>{throw"FirebaseError"===r.name?(r.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Pe(me.UNKNOWN,r.toString())})}terminate(){this.tu=!0}}class MK{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(t){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ou("Offline")))}set(t){this.cu(),this.nu=0,"Online"===t&&(this.iu=!1),this.ou(t)}ou(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}uu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(cr(e),this.iu=!1):Ue("OnlineStateTracker",e)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class AK{constructor(t,e,i,r,o){var c=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=o,this._u.Lr(d=>{i.enqueueAndForget((0,fe.Z)(function*(){var p;qf(c)&&(Ue("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,fe.Z)(function*(b){const E=Xe(b);E.fu.add(4),yield Kb(E),E.wu.set("Unknown"),E.fu.delete(4),yield iE(E)}),function(b){return p.apply(this,arguments)})(c))}))}),this.wu=new MK(i,r)}}function iE(n){return PP.apply(this,arguments)}function PP(){return PP=(0,fe.Z)(function*(n){if(qf(n))for(const t of n.du)yield t(!0)}),PP.apply(this,arguments)}function Kb(n){return NP.apply(this,arguments)}function NP(){return NP=(0,fe.Z)(function*(n){for(const t of n.du)yield t(!1)}),NP.apply(this,arguments)}function NT(n,t){const e=Xe(n);e.lu.has(t.targetId)||(e.lu.set(t.targetId,t),BP(e)?LP(e):Xb(e).xo()&&FP(e,t))}function rE(n,t){const e=Xe(n),i=Xb(e);e.lu.delete(t),i.xo()&&f3(e,t),0===e.lu.size&&(i.xo()?i.Mo():qf(e)&&e.wu.set("Unknown"))}function FP(n,t){n.mu.Z(t.targetId),Xb(n).jo(t)}function f3(n,t){n.mu.Z(t),Xb(n).Wo(t)}function LP(n){n.mu=new u7({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n.lu.get(t)||null}),Xb(n).start(),n.wu.ru()}function BP(n){return qf(n)&&!Xb(n).Co()&&n.lu.size>0}function qf(n){return 0===Xe(n).fu.size}function p3(n){n.mu=void 0}function kK(n){return VP.apply(this,arguments)}function VP(){return VP=(0,fe.Z)(function*(n){n.lu.forEach((t,e)=>{FP(n,t)})}),VP.apply(this,arguments)}function RK(n,t){return UP.apply(this,arguments)}function UP(){return UP=(0,fe.Z)(function*(n,t){p3(n),BP(n)?(n.wu.au(t),LP(n)):n.wu.set("Unknown")}),UP.apply(this,arguments)}function OK(n,t,e){return jP.apply(this,arguments)}function jP(){return jP=(0,fe.Z)(function*(n,t,e){if(n.wu.set("Online"),t instanceof lH&&2===t.state&&t.cause)try{yield(i=(0,fe.Z)(function*(r,o){const c=o.cause;for(const d of o.targetIds)r.lu.has(d)&&(yield r.remoteSyncer.rejectListen(d,c),r.lu.delete(d),r.mu.removeTarget(d))}),function(r,o){return i.apply(this,arguments)})(n,t)}catch(i){Ue("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield FT(n,i)}else if(t instanceof CT?n.mu.ut(t):t instanceof aH?n.mu._t(t):n.mu.ht(t),!e.isEqual(kt.min()))try{const i=yield t3(n.localStore);e.compareTo(i)>=0&&(yield function(r,o){const c=r.mu.yt(o);return c.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const b=r.lu.get(p);b&&r.lu.set(p,b.withResumeToken(d.resumeToken,o))}}),c.targetMismatches.forEach(d=>{const p=r.lu.get(d);if(!p)return;r.lu.set(d,p.withResumeToken(Ir.EMPTY_BYTE_STRING,p.snapshotVersion)),f3(r,d);const b=new jf(p.target,d,1,p.sequenceNumber);FP(r,b)}),r.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(i){Ue("RemoteStore","Failed to raise snapshot:",i),yield FT(n,i)}var i}),jP.apply(this,arguments)}function FT(n,t,e){return HP.apply(this,arguments)}function HP(){return HP=(0,fe.Z)(function*(n,t,e){if(!cg(t))throw t;n.fu.add(1),yield Kb(n),n.wu.set("Offline"),e||(e=()=>t3(n.localStore)),n.asyncQueue.enqueueRetryable((0,fe.Z)(function*(){Ue("RemoteStore","Retrying IndexedDB access"),yield e(),n.fu.delete(1),yield iE(n)}))}),HP.apply(this,arguments)}function m3(n,t){return t().catch(e=>FT(n,e,t))}function Qb(n){return $P.apply(this,arguments)}function $P(){return $P=(0,fe.Z)(function*(n){const t=Xe(n),e=zf(t);let i=t.hu.length>0?t.hu[t.hu.length-1].batchId:-1;for(;PK(t);)try{const r=yield dK(t.localStore,i);if(null===r){0===t.hu.length&&e.Mo();break}i=r.batchId,NK(t,r)}catch(r){yield FT(t,r)}g3(t)&&_3(t)}),$P.apply(this,arguments)}function PK(n){return qf(n)&&n.hu.length<10}function NK(n,t){n.hu.push(t);const e=zf(n);e.xo()&&e.Ho&&e.Jo(t.mutations)}function g3(n){return qf(n)&&!zf(n).Co()&&n.hu.length>0}function _3(n){zf(n).start()}function FK(n){return GP.apply(this,arguments)}function GP(){return GP=(0,fe.Z)(function*(n){zf(n).Zo()}),GP.apply(this,arguments)}function LK(n){return qP.apply(this,arguments)}function qP(){return qP=(0,fe.Z)(function*(n){const t=zf(n);for(const e of n.hu)t.Jo(e.mutations)}),qP.apply(this,arguments)}function BK(n,t,e){return zP.apply(this,arguments)}function zP(){return zP=(0,fe.Z)(function*(n,t,e){const i=n.hu.shift(),r=dP.from(i,t,e);yield m3(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Qb(n)}),zP.apply(this,arguments)}function VK(n,t){return WP.apply(this,arguments)}function WP(){return WP=(0,fe.Z)(function*(n,t){var e;t&&zf(n).Ho&&(yield(e=(0,fe.Z)(function*(i,r){if(rH(o=r.code)&&o!==me.ABORTED){const c=i.hu.shift();zf(i).ko(),yield m3(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,r)),yield Qb(i)}var o}),function(i,r){return e.apply(this,arguments)})(n,t)),g3(n)&&_3(n)}),WP.apply(this,arguments)}function v3(n,t){return YP.apply(this,arguments)}function YP(){return YP=(0,fe.Z)(function*(n,t){const e=Xe(n);e.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const i=qf(e);e.fu.add(3),yield Kb(e),i&&e.wu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.fu.delete(3),yield iE(e)}),YP.apply(this,arguments)}function ZP(n,t){return KP.apply(this,arguments)}function KP(){return KP=(0,fe.Z)(function*(n,t){const e=Xe(n);t?(e.fu.delete(2),yield iE(e)):t||(e.fu.add(2),yield Kb(e),e.wu.set("Unknown"))}),KP.apply(this,arguments)}function Xb(n){return n.gu||(n.gu=function(t,e,i){const r=Xe(t);return r.eu(),new IK(e,r.bo,r.authCredentials,r.appCheckCredentials,r.M,i)}(n.datastore,n.asyncQueue,{Hr:kK.bind(null,n),Yr:RK.bind(null,n),Qo:OK.bind(null,n)}),n.du.push(function(){var t=(0,fe.Z)(function*(e){e?(n.gu.ko(),BP(n)?LP(n):n.wu.set("Unknown")):(yield n.gu.stop(),p3(n))});return function(e){return t.apply(this,arguments)}}())),n.gu}function zf(n){return n.yu||(n.yu=function(t,e,i){const r=Xe(t);return r.eu(),new SK(e,r.bo,r.authCredentials,r.appCheckCredentials,r.M,i)}(n.datastore,n.asyncQueue,{Hr:FK.bind(null,n),Yr:VK.bind(null,n),Xo:LK.bind(null,n),Yo:BK.bind(null,n)}),n.du.push(function(){var t=(0,fe.Z)(function*(e){e?(n.yu.ko(),yield Qb(n)):(yield n.yu.stop(),n.hu.length>0&&(Ue("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(e){return t.apply(this,arguments)}}())),n.yu}class QP{constructor(t,e,i,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(t,e,i,r,o){const c=Date.now()+i,d=new QP(t,e,c,r,o);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(me.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jb(n,t){if(cr("AsyncQueue",`${t}: ${n}`),cg(n))return new Pe(me.UNAVAILABLE,`${t}: ${n}`);throw n}class ey{constructor(t){this.comparator=t?(e,i)=>t(e,i)||Ke.comparator(e.key,i.key):(e,i)=>Ke.comparator(e.key,i.key),this.keyedMap=oP(),this.sortedSet=new Qi(this.comparator)}static emptySet(t){return new ey(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof ey)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new ey;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class b3{constructor(){this.pu=new Qi(Ke.comparator)}track(t){const e=t.doc.key,i=this.pu.get(e);i?0!==t.type&&3===i.type?this.pu=this.pu.insert(e,t):3===t.type&&1!==i.type?this.pu=this.pu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.pu=this.pu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.pu=this.pu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.pu=this.pu.remove(e):1===t.type&&2===i.type?this.pu=this.pu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.pu=this.pu.insert(e,{type:2,doc:t.doc}):ut():this.pu=this.pu.insert(e,t)}Iu(){const t=[];return this.pu.inorderTraversal((e,i)=>{t.push(i)}),t}}class ty{constructor(t,e,i,r,o,c,d,p){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p}static fromInitialDocuments(t,e,i,r){const o=[];return e.forEach(c=>{o.push({type:0,doc:c})}),new ty(t,e,ey.emptySet(e),o,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&LC(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class UK{constructor(){this.Tu=void 0,this.listeners=[]}}class jK{constructor(){this.queries=new Uf(t=>Hj(t),LC),this.onlineState="Unknown",this.Eu=new Set}}function XP(n,t){return JP.apply(this,arguments)}function JP(){return JP=(0,fe.Z)(function*(n,t){const e=Xe(n),i=t.query;let r=!1,o=e.queries.get(i);if(o||(r=!0,o=new UK),r)try{o.Tu=yield e.onListen(i)}catch(c){const d=Jb(c,`Initialization of query '${tP(t.query)}' failed`);return void t.onError(d)}e.queries.set(i,o),o.listeners.push(t),t.Au(e.onlineState),o.Tu&&t.Ru(o.Tu)&&nN(e)}),JP.apply(this,arguments)}function eN(n,t){return tN.apply(this,arguments)}function tN(){return tN=(0,fe.Z)(function*(n,t){const e=Xe(n),i=t.query;let r=!1;const o=e.queries.get(i);if(o){const c=o.listeners.indexOf(t);c>=0&&(o.listeners.splice(c,1),r=0===o.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),tN.apply(this,arguments)}function HK(n,t){const e=Xe(n);let i=!1;for(const r of t){const c=e.queries.get(r.query);if(c){for(const d of c.listeners)d.Ru(r)&&(i=!0);c.Tu=r}}i&&nN(e)}function $K(n,t,e){const i=Xe(n),r=i.queries.get(t);if(r)for(const o of r.listeners)o.onError(e);i.queries.delete(t)}function nN(n){n.Eu.forEach(t=>{t.next()})}class iN{constructor(t,e,i){this.query=t,this.Pu=e,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=i||{}}Ru(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new ty(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.bu?this.vu(t)&&(this.Pu.next(t),e=!0):this.Su(t,this.onlineState)&&(this.Du(t),e=!0),this.Vu=t,e}onError(t){this.Pu.error(t)}Au(t){this.onlineState=t;let e=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,t)&&(this.Du(this.Vu),e=!0),e}Su(t,e){return!t.fromCache||!(this.options.Cu&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}vu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(t){t=ty.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.bu=!0,this.Pu.next(t)}}class GK{constructor(t,e){this.payload=t,this.byteLength=e}xu(){return"metadata"in this.payload}}class y3{constructor(t){this.M=t}fi(t){return Du(this.M,t)}di(t){return t.metadata.exists?_H(this.M,t.document,!1):di.newNoDocument(this.fi(t.metadata.name),this._i(t.metadata.readTime))}_i(t){return Hr(t)}}class qK{constructor(t,e,i){this.Nu=t,this.localStore=e,this.M=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=w3(t)}ku(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const i=_n.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Mu(t){const e=new Map,i=new y3(this.M);for(const r of t)if(r.metadata.queries){const o=i.fi(r.metadata.name);for(const c of r.metadata.queries){const d=(e.get(c)||An()).add(o);e.set(c,d)}}return e}complete(){var t=this;return(0,fe.Z)(function*(){const e=yield function hK(n,t,e,i){return DP.apply(this,arguments)}(t.localStore,new y3(t.M),t.documents,t.Nu.id),i=t.Mu(t.documents);for(const r of t.queries)yield fK(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Ou:t.collectionGroups,Fu:e}})()}}function w3(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class C3{constructor(t){this.key=t}}class E3{constructor(t){this.key=t}}class x3{constructor(t,e){this.query=t,this.$u=e,this.Bu=null,this.current=!1,this.Lu=An(),this.mutatedKeys=An(),this.Uu=Gj(t),this.qu=new ey(this.Uu)}get Ku(){return this.$u}Gu(t,e){const i=e?e.Qu:new b3,r=e?e.qu:this.qu;let o=e?e.mutatedKeys:this.mutatedKeys,c=r,d=!1;const p=mT(this.query)&&r.size===this.query.limit?r.last():null,b=gT(this.query)&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((E,D)=>{const R=r.get(E),N=nP(this.query,D)?D:null,B=!!R&&this.mutatedKeys.has(R.key),K=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let ce=!1;R&&N?R.data.isEqual(N.data)?B!==K&&(i.track({type:3,doc:N}),ce=!0):this.ju(R,N)||(i.track({type:2,doc:N}),ce=!0,(p&&this.Uu(N,p)>0||b&&this.Uu(N,b)<0)&&(d=!0)):!R&&N?(i.track({type:0,doc:N}),ce=!0):R&&!N&&(i.track({type:1,doc:R}),ce=!0,(p||b)&&(d=!0)),ce&&(N?(c=c.add(N),o=K?o.add(E):o.delete(E)):(c=c.delete(E),o=o.delete(E)))}),mT(this.query)||gT(this.query))for(;c.size>this.query.limit;){const E=mT(this.query)?c.last():c.first();c=c.delete(E.key),o=o.delete(E.key),i.track({type:1,doc:E})}return{qu:c,Qu:i,ni:d,mutatedKeys:o}}ju(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.qu;this.qu=t.qu,this.mutatedKeys=t.mutatedKeys;const o=t.Qu.Iu();o.sort((b,E)=>function(D,R){const N=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return N(D)-N(R)}(b.type,E.type)||this.Uu(b.doc,E.doc)),this.Wu(i);const c=e?this.zu():[],d=0===this.Lu.size&&this.current?1:0,p=d!==this.Bu;return this.Bu=d,0!==o.length||p?{snapshot:new ty(this.query,t.qu,r,o,t.mutatedKeys,0===d,p,!1),Hu:c}:{Hu:c}}Au(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new b3,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(t){return!this.$u.has(t)&&!!this.qu.has(t)&&!this.qu.get(t).hasLocalMutations}Wu(t){t&&(t.addedDocuments.forEach(e=>this.$u=this.$u.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.$u=this.$u.delete(e)),this.current=t.current)}zu(){if(!this.current)return[];const t=this.Lu;this.Lu=An(),this.qu.forEach(i=>{this.Ju(i.key)&&(this.Lu=this.Lu.add(i.key))});const e=[];return t.forEach(i=>{this.Lu.has(i)||e.push(new E3(i))}),this.Lu.forEach(i=>{t.has(i)||e.push(new C3(i))}),e}Yu(t){this.$u=t.li,this.Lu=An();const e=this.Gu(t.documents);return this.applyChanges(e,!0)}Xu(){return ty.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class zK{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class WK{constructor(t){this.key=t,this.Zu=!1}}class YK{constructor(t,e,i,r,o,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.ta={},this.ea=new Uf(d=>Hj(d),LC),this.na=new Map,this.sa=new Set,this.ia=new Qi(Ke.comparator),this.ra=new Map,this.oa=new SP,this.ua={},this.aa=new Map,this.ca=mg.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function ZK(n,t){return rN.apply(this,arguments)}function rN(){return rN=(0,fe.Z)(function*(n,t){const e=SN(n);let i,r;const o=e.ea.get(t);if(o)i=o.targetId,e.sharedClientState.addLocalQueryTarget(i),r=o.view.Xu();else{const c=yield Yb(e.localStore,Tl(t));e.isPrimaryClient&&NT(e.remoteStore,c);const d=e.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,r=yield oN(e,t,i,"current"===d)}return r}),rN.apply(this,arguments)}function oN(n,t,e,i){return sN.apply(this,arguments)}function sN(){return sN=(0,fe.Z)(function*(n,t,e,i){n.la=(E,D,R)=>{return(N=(0,fe.Z)(function*(B,K,ce,He){let We=K.view.Gu(ce);We.ni&&(We=yield kT(B.localStore,K.query,!1).then(({documents:Mt})=>K.view.Gu(Mt,We)));const Ye=He&&He.targetChanges.get(K.targetId),Ge=K.view.applyChanges(We,B.isPrimaryClient,Ye);return gN(B,K.targetId,Ge.Hu),Ge.snapshot}),function(B,K,ce,He){return N.apply(this,arguments)})(n,E,D,R);var N};const r=yield kT(n.localStore,t,!0),o=new x3(t,r.li),c=o.Gu(r.documents),d=$C.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState),p=o.applyChanges(c,n.isPrimaryClient,d);gN(n,e,p.Hu);const b=new zK(t,e,o);return n.ea.set(t,b),n.na.has(e)?n.na.get(e).push(t):n.na.set(e,[t]),p.snapshot}),sN.apply(this,arguments)}function KK(n,t){return aN.apply(this,arguments)}function aN(){return aN=(0,fe.Z)(function*(n,t){const e=Xe(n),i=e.ea.get(t),r=e.na.get(i.targetId);if(r.length>1)return e.na.set(i.targetId,r.filter(o=>!LC(o,t))),void e.ea.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Zb(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),rE(e.remoteStore,i.targetId),ny(e,i.targetId)}).catch(gg))):(ny(e,i.targetId),yield Zb(e.localStore,i.targetId,!0))}),aN.apply(this,arguments)}function lN(){return lN=(0,fe.Z)(function*(n,t,e){const i=TN(n);try{const r=yield function(o,c){const d=Xe(o),p=Ki.now(),b=c.reduce((D,R)=>D.add(R.key),An());let E;return d.persistence.runTransaction("Locally write mutations","readwrite",D=>d.ci.Ks(D,b).next(R=>{E=R;const N=[];for(const B of c){const K=n7(B,E.get(B.key));null!=K&&N.push(new lg(B.key,K,Rj(K.value.mapValue),ur.exists(!0)))}return d.Bs.addMutationBatch(D,p,N,c)})).then(D=>(D.applyToLocalDocumentSet(E),{batchId:D.batchId,changes:E}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(o,c,d){let p=o.ua[o.currentUser.toKey()];p||(p=new Qi(zt)),p=p.insert(c,d),o.ua[o.currentUser.toKey()]=p}(i,r.batchId,e),yield Hd(i,r.changes),yield Qb(i.remoteStore)}catch(r){const o=Jb(r,"Failed to persist write");e.reject(o)}}),lN.apply(this,arguments)}function D3(n,t){return cN.apply(this,arguments)}function cN(){return cN=(0,fe.Z)(function*(n,t){const e=Xe(n);try{const i=yield uK(e.localStore,t);t.targetChanges.forEach((r,o)=>{const c=e.ra.get(o);c&&(Lt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.Zu=!0:r.modifiedDocuments.size>0?Lt(c.Zu):r.removedDocuments.size>0&&(Lt(c.Zu),c.Zu=!1))}),yield Hd(e,i,t)}catch(i){yield gg(i)}}),cN.apply(this,arguments)}function I3(n,t,e){const i=Xe(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.ea.forEach((o,c)=>{const d=c.view.Au(t);d.snapshot&&r.push(d.snapshot)}),function(o,c){const d=Xe(o);d.onlineState=c;let p=!1;d.queries.forEach((b,E)=>{for(const D of E.listeners)D.Au(c)&&(p=!0)}),p&&nN(d)}(i.eventManager,t),r.length&&i.ta.Qo(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function XK(n,t,e){return uN.apply(this,arguments)}function uN(){return uN=(0,fe.Z)(function*(n,t,e){const i=Xe(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.ra.get(t),o=r&&r.key;if(o){let c=new Qi(Ke.comparator);c=c.insert(o,di.newNoDocument(o,kt.min()));const d=An().add(o),p=new HC(kt.min(),new Map,new hi(zt),c,d);yield D3(i,p),i.ia=i.ia.remove(o),i.ra.delete(t),_N(i)}else yield Zb(i.localStore,t,!1).then(()=>ny(i,t,e)).catch(gg)}),uN.apply(this,arguments)}function JK(n,t){return dN.apply(this,arguments)}function dN(){return dN=(0,fe.Z)(function*(n,t){const e=Xe(n),i=t.batch.batchId;try{const r=yield cK(e.localStore,t);mN(e,i,null),pN(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield Hd(e,r)}catch(r){yield gg(r)}}),dN.apply(this,arguments)}function e9(n,t,e){return hN.apply(this,arguments)}function hN(){return hN=(0,fe.Z)(function*(n,t,e){const i=Xe(n);try{const r=yield function(o,c){const d=Xe(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let b;return d.Bs.lookupMutationBatch(p,c).next(E=>(Lt(null!==E),b=E.keys(),d.Bs.removeMutationBatch(p,E))).next(()=>d.Bs.performConsistencyCheck(p)).next(()=>d.ci.Ks(p,b))})}(i.localStore,t);mN(i,t,e),pN(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield Hd(i,r)}catch(r){yield gg(r)}}),hN.apply(this,arguments)}function fN(){return fN=(0,fe.Z)(function*(n,t){const e=Xe(n);qf(e.remoteStore)||Ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(o){const c=Xe(o);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>c.Bs.getHighestUnacknowledgedBatchId(d))}(e.localStore);if(-1===i)return void t.resolve();const r=e.aa.get(i)||[];r.push(t),e.aa.set(i,r)}catch(i){const r=Jb(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),fN.apply(this,arguments)}function pN(n,t){(n.aa.get(t)||[]).forEach(e=>{e.resolve()}),n.aa.delete(t)}function mN(n,t,e){const i=Xe(n);let r=i.ua[i.currentUser.toKey()];if(r){const o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),i.ua[i.currentUser.toKey()]=r}}function ny(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.na.get(t))n.ea.delete(i),e&&n.ta.fa(i,e);n.na.delete(t),n.isPrimaryClient&&n.oa.Pi(t).forEach(i=>{n.oa.containsKey(i)||S3(n,i)})}function S3(n,t){n.sa.delete(t.path.canonicalString());const e=n.ia.get(t);null!==e&&(rE(n.remoteStore,e),n.ia=n.ia.remove(t),n.ra.delete(e),_N(n))}function gN(n,t,e){for(const i of e)i instanceof C3?(n.oa.addReference(i.key,t),n9(n,i)):i instanceof E3?(Ue("SyncEngine","Document no longer in limbo: "+i.key),n.oa.removeReference(i.key,t),n.oa.containsKey(i.key)||S3(n,i.key)):ut()}function n9(n,t){const e=t.key,i=e.path.canonicalString();n.ia.get(e)||n.sa.has(i)||(Ue("SyncEngine","New document in limbo: "+e),n.sa.add(i),_N(n))}function _N(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const t=n.sa.values().next().value;n.sa.delete(t);const e=new Ke(_n.fromString(t)),i=n.ca.next();n.ra.set(i,new WK(e)),n.ia=n.ia.insert(e,i),NT(n.remoteStore,new jf(Tl(Lb(e.path)),i,2,za.A))}}function Hd(n,t,e){return vN.apply(this,arguments)}function vN(){return vN=(0,fe.Z)(function*(n,t,e){const i=Xe(n),r=[],o=[],c=[];var d;i.ea.isEmpty()||(i.ea.forEach((d,p)=>{c.push(i.la(p,t,e).then(b=>{if(b){i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,b.fromCache?"not-current":"current"),r.push(b);const E=CP.Ys(p.targetId,b);o.push(E)}}))}),yield Promise.all(c),i.ta.Qo(r),yield(d=(0,fe.Z)(function*(p,b){const E=Xe(p);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>be.forEach(b,R=>be.forEach(R.Hs,N=>E.persistence.referenceDelegate.addReference(D,R.targetId,N)).next(()=>be.forEach(R.Js,N=>E.persistence.referenceDelegate.removeReference(D,R.targetId,N)))))}catch(D){if(!cg(D))throw D;Ue("LocalStore","Failed to update sequence numbers: "+D)}for(const D of b){const R=D.targetId;if(!D.fromCache){const N=E.ii.get(R),K=N.withLastLimboFreeSnapshotVersion(N.snapshotVersion);E.ii=E.ii.insert(R,K)}}}),function(p,b){return d.apply(this,arguments)})(i.localStore,o))}),vN.apply(this,arguments)}function r9(n,t){return bN.apply(this,arguments)}function bN(){return bN=(0,fe.Z)(function*(n,t){const e=Xe(n);if(!e.currentUser.isEqual(t)){Ue("SyncEngine","User change. New user:",t.toKey());const i=yield e3(e.localStore,t);e.currentUser=t,(r=e).aa.forEach(c=>{c.forEach(d=>{d.reject(new Pe(me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.aa.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Hd(e,i.hi)}var r}),bN.apply(this,arguments)}function o9(n,t){const e=Xe(n),i=e.ra.get(t);if(i&&i.Zu)return An().add(i.key);{let r=An();const o=e.na.get(t);if(!o)return r;for(const c of o){const d=e.ea.get(c);r=r.unionWith(d.view.Ku)}return r}}function s9(n,t){return yN.apply(this,arguments)}function yN(){return yN=(0,fe.Z)(function*(n,t){const e=Xe(n),i=yield kT(e.localStore,t.query,!0),r=t.view.Yu(i);return e.isPrimaryClient&&gN(e,t.targetId,r.Hu),r}),yN.apply(this,arguments)}function a9(n,t){return wN.apply(this,arguments)}function wN(){return wN=(0,fe.Z)(function*(n,t){const e=Xe(n);return o3(e.localStore,t).then(i=>Hd(e,i))}),wN.apply(this,arguments)}function l9(n,t,e,i){return CN.apply(this,arguments)}function CN(){return CN=(0,fe.Z)(function*(n,t,e,i){const r=Xe(n),o=yield function(c,d){const p=Xe(c),b=Xe(p.Bs);return p.persistence.runTransaction("Lookup mutation documents","readonly",E=>b.fn(E,d).next(D=>D?p.ci.Ks(E,D):be.resolve(null)))}(r.localStore,t);var d;null!==o?("pending"===e?yield Qb(r.remoteStore):"acknowledged"===e||"rejected"===e?(mN(r,t,i||null),pN(r,t),d=t,Xe(Xe(r.localStore).Bs)._n(d)):ut(),yield Hd(r,o)):Ue("SyncEngine","Cannot apply mutation batch with id: "+t)}),CN.apply(this,arguments)}function EN(){return EN=(0,fe.Z)(function*(n,t){const e=Xe(n);if(SN(e),TN(e),!0===t&&!0!==e.ha){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield T3(e,i.toArray());e.ha=!0,yield ZP(e.remoteStore,!0);for(const o of r)NT(e.remoteStore,o)}else if(!1===t&&!1!==e.ha){const i=[];let r=Promise.resolve();e.na.forEach((o,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):r=r.then(()=>(ny(e,c),Zb(e.localStore,c,!0))),rE(e.remoteStore,c)}),yield r,yield T3(e,i),function(o){const c=Xe(o);c.ra.forEach((d,p)=>{rE(c.remoteStore,p)}),c.oa.bi(),c.ra=new Map,c.ia=new Qi(Ke.comparator)}(e),e.ha=!1,yield ZP(e.remoteStore,!1)}}),EN.apply(this,arguments)}function T3(n,t,e){return xN.apply(this,arguments)}function xN(){return xN=(0,fe.Z)(function*(n,t,e){const i=Xe(n),r=[],o=[];for(const c of t){let d;const p=i.na.get(c);if(p&&0!==p.length){d=yield Yb(i.localStore,Tl(p[0]));for(const b of p){const E=i.ea.get(b),D=yield s9(i,E);D.snapshot&&o.push(D.snapshot)}}else{const b=yield r3(i.localStore,c);d=yield Yb(i.localStore,b),yield oN(i,M3(b),c,!1)}r.push(d)}return i.ta.Qo(o),r}),xN.apply(this,arguments)}function M3(n){return Uj(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function u9(n){const t=Xe(n);return Xe(Xe(t.localStore).persistence).Fs()}function d9(n,t,e,i){return DN.apply(this,arguments)}function DN(){return DN=(0,fe.Z)(function*(n,t,e,i){const r=Xe(n);if(r.ha)return void Ue("SyncEngine","Ignoring unexpected query state notification.");const o=r.na.get(t);if(o&&o.length>0)switch(e){case"current":case"not-current":{const c=yield o3(r.localStore,$j(o[0])),d=HC.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield Hd(r,c,d);break}case"rejected":yield Zb(r.localStore,t,!0),ny(r,t,i);break;default:ut()}}),DN.apply(this,arguments)}function h9(n,t,e){return IN.apply(this,arguments)}function IN(){return IN=(0,fe.Z)(function*(n,t,e){const i=SN(n);if(i.ha){for(const r of t){if(i.na.has(r)){Ue("SyncEngine","Adding an already active target "+r);continue}const o=yield r3(i.localStore,r),c=yield Yb(i.localStore,o);yield oN(i,M3(o),c.targetId,!1),NT(i.remoteStore,c)}for(const r of e)i.na.has(r)&&(yield Zb(i.localStore,r,!1).then(()=>{rE(i.remoteStore,r),ny(i,r)}).catch(gg))}}),IN.apply(this,arguments)}function SN(n){const t=Xe(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=D3.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=o9.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=XK.bind(null,t),t.ta.Qo=HK.bind(null,t.eventManager),t.ta.fa=$K.bind(null,t.eventManager),t}function TN(n){const t=Xe(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=JK.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=e9.bind(null,t),t}class A3{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,fe.Z)(function*(){e.M=nE(t.databaseInfo.databaseId),e.sharedClientState=e._a(t),e.persistence=e.wa(t),yield e.persistence.start(),e.gcScheduler=e.ma(t),e.localStore=e.ga(t)})()}ma(t){return null}ga(t){return JH(this.persistence,new XH,t.initialUser,this.M)}wa(t){return new yK(TP.zi,this.M)}_a(t){return new c3}terminate(){var t=this;return(0,fe.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class k3 extends A3{constructor(t,e,i){super(),this.ya=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,fe.Z)(function*(){yield e().call(i,t),yield i.ya.initialize(i,t),yield TN(i.ya.syncEngine),yield Qb(i.ya.remoteStore),yield i.persistence.Ts(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(i.localStore),Promise.resolve()))})()}ga(t){return JH(this.persistence,new XH,t.initialUser,this.M)}ma(t){return new tK(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)}wa(t){const e=wP(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?ta.withCacheSize(this.cacheSizeBytes):ta.DEFAULT;return new yP(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,d3(),PT(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(t){return new c3}}class p9 extends k3{constructor(t,e){super(t,e,!1),this.ya=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,fe.Z)(function*(){yield e().call(i,t);const r=i.ya.syncEngine;i.sharedClientState instanceof RP&&(i.sharedClientState.syncEngine={Mr:l9.bind(null,r),Or:d9.bind(null,r),Fr:h9.bind(null,r),Fs:u9.bind(null,r),kr:a9.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Ts(function(){var o=(0,fe.Z)(function*(c){yield function c9(n,t){return EN.apply(this,arguments)}(i.ya.syncEngine,c),i.gcScheduler&&(c&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):c||i.gcScheduler.stop())});return function(c){return o.apply(this,arguments)}}())})()}_a(t){const e=d3();if(!RP.vt(e))throw new Pe(me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=wP(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new RP(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class MN{initialize(t,e){var i=this;return(0,fe.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>I3(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=r9.bind(null,i.syncEngine),yield ZP(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new jK}createDatastore(t){const e=nE(t.databaseInfo.databaseId),i=new DK(t.databaseInfo);return new TK(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,o=d=>I3(this.syncEngine,d,0),c=u3.vt()?new u3:new CK,new AK(e,i,r,o,c);var e,i,r,o,c}createSyncEngine(t,e){return function(i,r,o,c,d,p,b){const E=new YK(i,r,o,c,d,p);return b&&(E.ha=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,fe.Z)(function*(e){const i=Xe(e);Ue("RemoteStore","RemoteStore shutting down."),i.fu.add(5),yield Kb(i),i._u.shutdown(),i.wu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function R3(n,t=10240){let e=0;return{read:()=>(0,fe.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,fe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class LT{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.pa(this.observer.next,t)}error(t){this.observer.error?this.pa(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Ia(){this.muted=!0}pa(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class m9{constructor(t,e){this.Ta=t,this.M=e,this.metadata=new Ur,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(i=>{i&&i.xu()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Ta.cancel()}getMetadata(){var t=this;return(0,fe.Z)(function*(){return t.metadata.promise})()}da(){var t=this;return(0,fe.Z)(function*(){return yield t.getMetadata(),t.Aa()})()}Aa(){var t=this;return(0,fe.Z)(function*(){const e=yield t.Ra();if(null===e)return null;const i=t.Ea.decode(e),r=Number(i);isNaN(r)&&t.Pa(`length string (${i}) is not valid number`);const o=yield t.ba(r);return new GK(JSON.parse(o),e.length+r)})()}Va(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Ra(){var t=this;return(0,fe.Z)(function*(){for(;t.Va()<0&&!(yield t.va()););if(0===t.buffer.length)return null;const e=t.Va();e<0&&t.Pa("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}ba(t){var e=this;return(0,fe.Z)(function*(){for(;e.buffer.length<t;)(yield e.va())&&e.Pa("Reached the end of bundle when more is expected.");const i=e.Ea.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Pa(t){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${t}`)}va(){var t=this;return(0,fe.Z)(function*(){const e=yield t.Ta.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class g9{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,fe.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Pe(me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,fe.Z)(function*(o,c){const d=Xe(o),p=zC(d.M)+"/documents",b={documents:c.map(N=>qC(d.M,N))},E=yield d.ho("BatchGetDocuments",p,b),D=new Map;E.forEach(N=>{const B=function m7(n,t){return"found"in t?function(e,i){Lt(!!i.found);const r=Du(e,i.found.name),o=Hr(i.found.updateTime),c=new Go({mapValue:{fields:i.found.fields}});return di.newFoundDocument(r,o,c)}(n,t):"missing"in t?function(e,i){Lt(!!i.missing),Lt(!!i.readTime);const r=Du(e,i.missing),o=Hr(i.readTime);return di.newNoDocument(r,o)}(n,t):ut()}(d.M,N);D.set(B.key.toString(),B)});const R=[];return c.forEach(N=>{const B=D.get(N.toString());Lt(!!B),R.push(B)}),R}),function(o,c){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new UC(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,fe.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const o=Ke.fromPath(r);t.mutations.push(new rP(o,t.precondition(o)))}),yield(i=(0,fe.Z)(function*(r,o){const c=Xe(r),d=zC(c.M)+"/documents",p={writes:o.map(b=>WC(c.M,b))};yield c.oo("Commit",d,p)}),function(r,o){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw ut();e=kt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Pe(me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ur.updateTime(e):ur.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(kt.min()))throw new Pe(me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ur.updateTime(e)}return ur.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class _9{constructor(t,e,i,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=i,this.deferred=r,this.Sa=5,this.Do=new OP(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var t=this;this.Do.To((0,fe.Z)(function*(){const e=new g9(t.datastore),i=t.Ca(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(o=>{t.xa(o)}))}).catch(r=>{t.xa(r)})}))}Ca(t){try{const e=this.updateFunction(t);return!tg(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}xa(t){this.Sa>0&&this.Na(t)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(t)}Na(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!rH(e)}return!1}}class v9{constructor(t,e,i,r){var o=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=bo.UNAUTHENTICATED,this.clientId=vj.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var c=(0,fe.Z)(function*(d){Ue("FirestoreClient","Received user=",d.uid),yield o.authCredentialListener(d),o.user=d});return function(d){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(i,c=>(Ue("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var t=this;return(0,fe.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=Jb(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function O3(n,t){return AN.apply(this,arguments)}function AN(){return AN=(0,fe.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,fe.Z)(function*(o){i.isEqual(o)||(yield e3(t.localStore,o),i=o)});return function(o){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),AN.apply(this,arguments)}function P3(n,t){return kN.apply(this,arguments)}function kN(){return kN=(0,fe.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield RN(n);Ue("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>v3(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>v3(t.remoteStore,o)),n.onlineComponents=t}),kN.apply(this,arguments)}function RN(n){return ON.apply(this,arguments)}function ON(){return ON=(0,fe.Z)(function*(n){return n.offlineComponents||(Ue("FirestoreClient","Using default OfflineComponentProvider"),yield O3(n,new A3)),n.offlineComponents}),ON.apply(this,arguments)}function BT(n){return PN.apply(this,arguments)}function PN(){return PN=(0,fe.Z)(function*(n){return n.onlineComponents||(Ue("FirestoreClient","Using default OnlineComponentProvider"),yield P3(n,new MN)),n.onlineComponents}),PN.apply(this,arguments)}function N3(n){return RN(n).then(t=>t.persistence)}function NN(n){return RN(n).then(t=>t.localStore)}function F3(n){return BT(n).then(t=>t.remoteStore)}function FN(n){return BT(n).then(t=>t.syncEngine)}function iy(n){return LN.apply(this,arguments)}function LN(){return LN=(0,fe.Z)(function*(n){const t=yield BT(n),e=t.eventManager;return e.onListen=ZK.bind(null,t.syncEngine),e.onUnlisten=KK.bind(null,t.syncEngine),e}),LN.apply(this,arguments)}function L3(n,t,e={}){const i=new Ur;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(r,o,c,d,p){const b=new LT({next:D=>{o.enqueueAndForget(()=>eN(r,E));const R=D.docs.has(c);!R&&D.fromCache?p.reject(new Pe(me.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&D.fromCache&&d&&"server"===d.source?p.reject(new Pe(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(D)},error:D=>p.reject(D)}),E=new iN(Lb(c.path),b,{includeMetadataChanges:!0,Cu:!0});return XP(r,E)}(yield iy(n),n.asyncQueue,t,e,i)})),i.promise}function B3(n,t,e={}){const i=new Ur;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(r,o,c,d,p){const b=new LT({next:D=>{o.enqueueAndForget(()=>eN(r,E)),D.fromCache&&"server"===d.source?p.reject(new Pe(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(D)},error:D=>p.reject(D)}),E=new iN(c,b,{includeMetadataChanges:!0,Cu:!0});return XP(r,E)}(yield iy(n),n.asyncQueue,t,e,i)})),i.promise}const V3=new Map;function BN(n,t,e){if(!e)throw new Pe(me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function U3(n,t,e,i){if(!0===t&&!0===i)throw new Pe(me.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function j3(n){if(!Ke.isDocumentKey(n))throw new Pe(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function H3(n){if(Ke.isDocumentKey(n))throw new Pe(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function VT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":ut()}function dn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Pe(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=VT(n);throw new Pe(me.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function $3(n,t){if(t<=0)throw new Pe(me.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class G3{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Pe(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Pe(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,U3("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class oE{constructor(t,e,i){this._authCredentials=e,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new G3({}),this._settingsFrozen=!1,t instanceof Vd?this._databaseId=t:(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new Pe(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vd(r.options.projectId)}(t))}get app(){if(!this._app)throw new Pe(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Pe(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new G3(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new DZ;switch(e.type){case"gapi":const i=e.client;return Lt(!("object"!=typeof i||null===i||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new MZ(i,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Pe(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=V3.get(t);e&&(Ue("ComponentProvider","Removing Datastore"),V3.delete(t),e.terminate())}(this),Promise.resolve()}}class fi{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Su(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new fi(this.firestore,t,this._key)}}class qo{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new qo(this.firestore,t,this._query)}}class Su extends qo{constructor(t,e,i){super(t,e,Lb(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new fi(this.firestore,null,new Ke(t))}withConverter(t){return new Su(this.firestore,t,this._path)}}function q3(n,t,...e){if(n=(0,L.m9)(n),BN("collection","path",t),n instanceof oE){const i=_n.fromString(t,...e);return H3(i),new Su(n,null,i)}{if(!(n instanceof fi||n instanceof Su))throw new Pe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(_n.fromString(t,...e));return H3(i),new Su(n.firestore,null,i)}}function UT(n,t,...e){if(n=(0,L.m9)(n),1===arguments.length&&(t=vj.R()),BN("doc","path",t),n instanceof oE){const i=_n.fromString(t,...e);return j3(i),new fi(n,null,new Ke(i))}{if(!(n instanceof fi||n instanceof Su))throw new Pe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(_n.fromString(t,...e));return j3(i),new fi(n.firestore,n instanceof Su?n.converter:null,new Ke(i))}}function z3(n,t){return n=(0,L.m9)(n),t=(0,L.m9)(t),(n instanceof fi||n instanceof Su)&&(t instanceof fi||t instanceof Su)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function W3(n,t){return n=(0,L.m9)(n),t=(0,L.m9)(t),n instanceof qo&&t instanceof qo&&n.firestore===t.firestore&&LC(n._query,t._query)&&n.converter===t.converter}class M9{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new OP(this,"async_queue_retry"),this.qa=()=>{const e=PT();e&&Ue("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Do.Ao()};const t=PT();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Ka(),this.Ga(t)}enterRestrictedMode(t){if(!this.Oa){this.Oa=!0,this.La=t||!1;const e=PT();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.qa)}}enqueue(t){if(this.Ka(),this.Oa)return new Promise(()=>{});const e=new Ur;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ma.push(t),this.Qa()))}Qa(){var t=this;return(0,fe.Z)(function*(){if(0!==t.Ma.length){try{yield t.Ma[0](),t.Ma.shift(),t.Do.reset()}catch(e){if(!cg(e))throw e;Ue("AsyncQueue","Operation failed with retryable error: "+e)}t.Ma.length>0&&t.Do.To(()=>t.Qa())}})()}Ga(t){const e=this.ka.then(()=>(this.Ba=!0,t().catch(i=>{throw this.$a=i,this.Ba=!1,cr("INTERNAL UNHANDLED ERROR: ",function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),c}(i)),i}).then(i=>(this.Ba=!1,i))));return this.ka=e,e}enqueueAfterDelay(t,e,i){this.Ka(),this.Ua.indexOf(t)>-1&&(e=0);const r=QP.createAndSchedule(this,t,e,i,o=>this.ja(o));return this.Fa.push(r),r}Ka(){this.$a&&ut()}verifyOperationInProgress(){}Wa(){var t=this;return(0,fe.Z)(function*(){let e;do{e=t.ka,yield e}while(e!==t.ka)})()}za(t){for(const e of this.Fa)if(e.timerId===t)return!0;return!1}Ha(t){return this.Wa().then(()=>{this.Fa.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.Fa)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Wa()})}Ja(t){this.Ua.push(t)}ja(t){const e=this.Fa.indexOf(t);this.Fa.splice(e,1)}}function VN(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class A9{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ur,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Ci extends oE{constructor(t,e,i){super(t,e,i),this.type="firestore",this._queue=new M9,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Y3(this),this._firestoreClient.terminate()}}function hr(n){return n._firestoreClient||Y3(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Y3(n){var t;const e=n._freezeSettings(),i=(o=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new NZ(n._databaseId,o,n._persistenceKey,(d=e).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var o,d;n._firestoreClient=new v9(n._authCredentials,n._appCheckCredentials,n._queue,i)}function Z3(n,t,e){const i=new Ur;return n.asyncQueue.enqueue((0,fe.Z)(function*(){try{yield O3(n,e),yield P3(n,t),i.resolve()}catch(r){if(!("FirebaseError"===(o=r).name?o.code===me.FAILED_PRECONDITION||o.code===me.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&o instanceof DOMException)||22===o.code||20===o.code||11===o.code))throw r;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r)}var o})).then(()=>i.promise)}function K3(n){if(n._initialized||n._terminated)throw new Pe(me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class $d{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Pe(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jr(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Tu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Tu(Ir.fromBase64String(t))}catch(e){throw new Pe(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Tu(Ir.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class vg{constructor(t){this._methodName=t}}class jT{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Pe(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Pe(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return zt(this._lat,t._lat)||zt(this._long,t._long)}}const U9=/^__.*__$/;class j9{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new lg(t,this.data,this.fieldMask,e,this.fieldTransforms):new VC(t,this.data,e,this.fieldTransforms)}}class Q3{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new lg(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function X3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class HT{constructor(t,e,i,r,o,c){this.settings=t,this.databaseId=e,this.M=i,this.ignoreUndefinedProperties=r,void 0===o&&this.Ya(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(t){return new HT(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Za({path:i,ec:!1});return r.nc(t),r}sc(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Za({path:i,ec:!1});return r.Ya(),r}ic(t){return this.Za({path:void 0,ec:!0})}rc(t){return qT(t,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}Ya(){if(this.path)for(let t=0;t<this.path.length;t++)this.nc(this.path.get(t))}nc(t){if(0===t.length)throw this.rc("Document fields must not be empty");if(X3(this.Xa)&&U9.test(t))throw this.rc('Document fields cannot begin and end with "__"')}}class H9{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.M=i||nE(t)}ac(t,e,i,r=!1){return new HT({Xa:t,methodName:e,uc:i,path:jr.emptyPath(),ec:!1,oc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function bg(n){const t=n._freezeSettings(),e=nE(n._databaseId);return new H9(n._databaseId,!!t.ignoreUndefinedProperties,e)}function $T(n,t,e,i,r,o={}){const c=n.ac(o.merge||o.mergeFields?2:0,t,e,r);$N("Data must be an object, but it was:",c,i);const d=t5(i,c);let p,b;if(o.merge)p=new Pb(c.fieldMask),b=c.fieldTransforms;else if(o.mergeFields){const E=[];for(const D of o.mergeFields){const R=GN(t,D,e);if(!c.contains(R))throw new Pe(me.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);r5(E,R)||E.push(R)}p=new Pb(E),b=c.fieldTransforms.filter(D=>p.covers(D.field))}else p=null,b=c.fieldTransforms;return new j9(new Go(d),p,b)}class sE extends vg{_toFieldTransform(t){if(2!==t.Xa)throw t.rc(1===t.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof sE}}function J3(n,t,e){return new HT({Xa:3,uc:t.settings.uc,methodName:n._methodName,ec:e},t.databaseId,t.M,t.ignoreUndefinedProperties)}class UN extends vg{_toFieldTransform(t){return new BC(t.path,new Vb)}isEqual(t){return t instanceof UN}}class $9 extends vg{constructor(t,e){super(t),this.cc=e}_toFieldTransform(t){const e=J3(this,t,!0),i=this.cc.map(o=>yg(o,e)),r=new sg(i);return new BC(t.path,r)}isEqual(t){return this===t}}class G9 extends vg{constructor(t,e){super(t),this.cc=e}_toFieldTransform(t){const e=J3(this,t,!0),i=this.cc.map(o=>yg(o,e)),r=new ag(i);return new BC(t.path,r)}isEqual(t){return this===t}}class q9 extends vg{constructor(t,e){super(t),this.hc=e}_toFieldTransform(t){const e=new Ub(t.M,Wj(t.M,this.hc));return new BC(t.path,e)}isEqual(t){return this===t}}function jN(n,t,e,i){const r=n.ac(1,t,e);$N("Data must be an object, but it was:",r,i);const o=[],c=Go.empty();Jm(i,(p,b)=>{const E=GT(t,p,e);b=(0,L.m9)(b);const D=r.sc(E);if(b instanceof sE)o.push(E);else{const R=yg(b,D);null!=R&&(o.push(E),c.set(E,R))}});const d=new Pb(o);return new Q3(c,d,r.fieldTransforms)}function HN(n,t,e,i,r,o){const c=n.ac(1,t,e),d=[GN(t,i,e)],p=[r];if(o.length%2!=0)throw new Pe(me.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<o.length;R+=2)d.push(GN(t,o[R])),p.push(o[R+1]);const b=[],E=Go.empty();for(let R=d.length-1;R>=0;--R)if(!r5(b,d[R])){const N=d[R];let B=p[R];B=(0,L.m9)(B);const K=c.sc(N);if(B instanceof sE)b.push(N);else{const ce=yg(B,K);null!=ce&&(b.push(N),E.set(N,ce))}}const D=new Pb(b);return new Q3(E,D,c.fieldTransforms)}function e5(n,t,e,i=!1){return yg(e,n.ac(i?4:3,t))}function yg(n,t){if(n5(n=(0,L.m9)(n)))return $N("Unsupported field value:",t,n),t5(n,t);if(n instanceof vg)return function(e,i){if(!X3(i.Xa))throw i.rc(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.rc(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.ec&&4!==t.Xa)throw t.rc("Nested arrays are not supported");return function(e,i){const r=[];let o=0;for(const c of e){let d=yg(c,i.ic(o));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),o++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,L.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Wj(i.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=Ki.fromDate(e);return{timestampValue:GC(i.M,r)}}if(e instanceof Ki){const r=new Ki(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:GC(i.M,r)}}if(e instanceof jT)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Tu)return{bytesValue:hH(i.M,e._byteString)};if(e instanceof fi){const r=i.databaseId,o=e.firestore._databaseId;if(!o.isEqual(r))throw i.rc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:sP(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.rc(`Unsupported field value: ${VT(e)}`)}(n,t)}function t5(n,t){const e={};return wj(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Jm(n,(i,r)=>{const o=yg(r,t.tc(i));null!=o&&(e[i]=o)}),{mapValue:{fields:e}}}function n5(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ki||n instanceof jT||n instanceof Tu||n instanceof fi||n instanceof vg)}function $N(n,t,e){if(!n5(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=VT(e);throw t.rc("an object"===i?n+" a custom object":n+" "+i)}var i}function GN(n,t,e){if((t=(0,L.m9)(t))instanceof $d)return t._internalPath;if("string"==typeof t)return GT(n,t);throw qT("Field path arguments must be of type string or ",n,!1,void 0,e)}const z9=new RegExp("[~\\*/\\[\\]]");function GT(n,t,e){if(t.search(z9)>=0)throw qT(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new $d(...t.split("."))._internalPath}catch(i){throw qT(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function qT(n,t,e,i,r){const o=i&&!i.isEmpty(),c=void 0!==r;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(o||c)&&(p+=" (found",o&&(p+=` in field ${i}`),c&&(p+=` in document ${r}`),p+=")"),new Pe(me.INVALID_ARGUMENT,d+n+p)}function r5(n,t){return n.some(e=>e.isEqual(t))}class aE{constructor(t,e,i,r,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new fi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new W9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(zT("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class W9 extends aE{data(){return super.data()}}function zT(n,t){return"string"==typeof t?GT(n,t):t instanceof $d?t._internalPath:t._delegate._internalPath}class wg{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Gd extends aE{constructor(t,e,i,r,o,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new lE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(zT("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class lE extends Gd{data(t={}){return super.data(t)}}class Wf{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new wg(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new lE(this._firestore,this._userDataWriter,i.key,i,new wg(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Pe(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>({type:"added",doc:new lE(i._firestore,i._userDataWriter,c.doc.key,c.doc,new wg(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>r||3!==c.type).map(c=>{const d=new lE(i._firestore,i._userDataWriter,c.doc.key,c.doc,new wg(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,b=-1;return 0!==c.type&&(p=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),1!==c.type&&(o=o.add(c.doc),b=o.indexOf(c.doc.key)),{type:Y9(c.type),doc:d,oldIndex:p,newIndex:b}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Y9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function o5(n,t){return n instanceof Gd&&t instanceof Gd?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof Wf&&t instanceof Wf&&n._firestore===t._firestore&&W3(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function s5(n){if(gT(n)&&0===n.explicitOrderBy.length)throw new Pe(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cE{}function Yf(n,...t){for(const e of t)n=e._apply(n);return n}class Z9 extends cE{constructor(t,e,i){super(),this.lc=t,this.fc=e,this.dc=i,this.type="where"}_apply(t){const e=bg(t.firestore),i=function(r,o,c,d,p,b,E){let D;if(p.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Pe(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){h5(E,b);const N=[];for(const B of E)N.push(d5(d,r,B));D={arrayValue:{values:N}}}else D=d5(d,r,E)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||h5(E,b),D=e5(c,"where",E,"in"===b||"not-in"===b);const R=yo.create(p,b,D);return function(N,B){if(B.S()){const ce=JO(N);if(null!==ce&&!ce.isEqual(B.field))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ce.toString()}' and '${B.field.toString()}'`);const He=XO(N);null!==He&&f5(0,B.field,He)}const K=function(ce,He){for(const We of ce.filters)if(He.indexOf(We.op)>=0)return We.op;return null}(N,function(ce){switch(ce){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(B.op));if(null!==K)throw new Pe(me.INVALID_ARGUMENT,K===B.op?`Invalid query. You cannot use more than one '${B.op.toString()}' filter.`:`Invalid query. You cannot use '${B.op.toString()}' filters with '${K.toString()}' filters.`)}(r,R),R}(t._query,0,e,t.firestore._databaseId,this.lc,this.fc,this.dc);return new qo(t.firestore,t.converter,function(r,o){const c=r.filters.concat([o]);return new jd(r.path,r.collectionGroup,r.explicitOrderBy.slice(),c,r.limit,r.limitType,r.startAt,r.endAt)}(t._query,i))}}class Q9 extends cE{constructor(t,e){super(),this.lc=t,this._c=e,this.type="orderBy"}_apply(t){const e=function(i,r,o){if(null!==i.startAt)throw new Pe(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Pe(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Fb(r,o);return function(d,p){if(null===XO(d)){const b=JO(d);null!==b&&f5(0,b,p.field)}}(i,c),c}(t._query,this.lc,this._c);return new qo(t.firestore,t.converter,function(i,r){const o=i.explicitOrderBy.concat([r]);return new jd(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class a5 extends cE{constructor(t,e,i){super(),this.type=t,this.wc=e,this.mc=i}_apply(t){return new qo(t.firestore,t.converter,jj(t._query,this.wc,this.mc))}}class l5 extends cE{constructor(t,e,i){super(),this.type=t,this.gc=e,this.yc=i}_apply(t){const e=u5(t,this.type,this.gc,this.yc);return new qo(t.firestore,t.converter,(r=e,new jd((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class c5 extends cE{constructor(t,e,i){super(),this.type=t,this.gc=e,this.yc=i}_apply(t){const e=u5(t,this.type,this.gc,this.yc);return new qo(t.firestore,t.converter,(r=e,new jd((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function u5(n,t,e,i){if(e[0]=(0,L.m9)(e[0]),e[0]instanceof aE)return function(r,o,c,d,p){if(!d)throw new Pe(me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const E of Bb(r))if(E.field.isKeyField())b.push(ig(o,d.key));else{const D=d.data.field(E.field);if(YO(D))throw new Pe(me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const R=E.field.canonicalString();throw new Pe(me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}b.push(D)}return new Vf(b,p)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=bg(n.firestore);return function(o,c,d,p,b,E){const D=o.explicitOrderBy;if(b.length>D.length)throw new Pe(me.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let N=0;N<b.length;N++){const B=b[N];if(D[N].field.isKeyField()){if("string"!=typeof B)throw new Pe(me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof B}`);if(!eP(o)&&-1!==B.indexOf("/"))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${B}' contains a slash.`);const K=o.path.child(_n.fromString(B));if(!Ke.isDocumentKey(K))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${K}' is not because it contains an odd number of segments.`);const ce=new Ke(K);R.push(ig(c,ce))}else{const K=e5(d,p,B);R.push(K)}}return new Vf(R,E)}(n._query,n.firestore._databaseId,r,t,e,i)}}function d5(n,t,e){if("string"==typeof(e=(0,L.m9)(e))){if(""===e)throw new Pe(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eP(t)&&-1!==e.indexOf("/"))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(_n.fromString(e));if(!Ke.isDocumentKey(i))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ig(n,new Ke(i))}if(e instanceof fi)return ig(n,e._key);throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${VT(e)}.`)}function h5(n,t){if(!Array.isArray(n)||0===n.length)throw new Pe(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Pe(me.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function f5(n,t,e){if(!e.isEqual(t))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class qN{convertValue(t,e="none"){switch(ng(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ui(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(eg(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ut()}}convertObject(t,e){const i={};return Jm(t.fields,(r,o)=>{i[r]=this.convertValue(o,e)}),i}convertGeoPoint(t){return new jT(Ui(t.latitude),Ui(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Cj(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(AC(t));default:return null}}convertTimestamp(t){const e=Lf(t);return new Ki(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=_n.fromString(t);Lt(CH(i));const r=new Vd(i.get(1),i.get(3)),o=new Ke(i.popFirst(5));return r.isEqual(e)||cr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}function WT(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class oQ extends qN{constructor(t){super(),this.firestore=t}convertBytes(t){return new Tu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new fi(this.firestore,null,e)}}class p5{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=bg(t)}set(t,e,i){this._verifyNotCommitted();const r=Zf(t,this._firestore),o=WT(r.converter,e,i),c=$T(this._dataReader,"WriteBatch.set",r._key,o,null!==r.converter,i);return this._mutations.push(c.toMutation(r._key,ur.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const o=Zf(t,this._firestore);let c;return c="string"==typeof(e=(0,L.m9)(e))||e instanceof $d?HN(this._dataReader,"WriteBatch.update",o._key,e,i,r):jN(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(c.toMutation(o._key,ur.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Zf(t,this._firestore);return this._mutations=this._mutations.concat(new UC(e._key,ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zf(n,t){if((n=(0,L.m9)(n)).firestore!==t)throw new Pe(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Cg extends qN{constructor(t){super(),this.firestore=t}convertBytes(t){return new Tu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new fi(this.firestore,null,e)}}function m5(n,t,e){n=dn(n,fi);const i=dn(n.firestore,Ci),r=WT(n.converter,t,e);return ry(i,[$T(bg(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,ur.none())])}function g5(n,t,e,...i){n=dn(n,fi);const r=dn(n.firestore,Ci),o=bg(r);let c;return c="string"==typeof(t=(0,L.m9)(t))||t instanceof $d?HN(o,"updateDoc",n._key,t,e,i):jN(o,"updateDoc",n._key,t),ry(r,[c.toMutation(n._key,ur.exists(!0))])}function _5(n,...t){var e,i,r;n=(0,L.m9)(n);let o={includeMetadataChanges:!1},c=0;"object"!=typeof t[c]||VN(t[c])||(o=t[c],c++);const d={includeMetadataChanges:o.includeMetadataChanges};if(VN(t[c])){const D=t[c];t[c]=null===(e=D.next)||void 0===e?void 0:e.bind(D),t[c+1]=null===(i=D.error)||void 0===i?void 0:i.bind(D),t[c+2]=null===(r=D.complete)||void 0===r?void 0:r.bind(D)}let p,b,E;if(n instanceof fi)b=dn(n.firestore,Ci),E=Lb(n._key.path),p={next:D=>{t[c]&&t[c](zN(b,n,D))},error:t[c+1],complete:t[c+2]};else{const D=dn(n,qo);b=dn(D.firestore,Ci),E=D._query;const R=new Cg(b);p={next:N=>{t[c]&&t[c](new Wf(b,R,D,N))},error:t[c+1],complete:t[c+2]},s5(n._query)}return function(D,R,N,B){const K=new LT(B),ce=new iN(R,K,N);return D.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return XP(yield iy(D),ce)})),()=>{K.Ia(),D.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return eN(yield iy(D),ce)}))}}(hr(b),E,d,p)}function ry(n,t){return function(e,i){const r=new Ur;return e.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function QK(n,t,e){return lN.apply(this,arguments)}(yield FN(e),i,r)})),r.promise}(hr(n),t)}function zN(n,t,e){const i=e.docs.get(t._key),r=new Cg(n);return new Gd(n,r,t._key,i,new wg(e.hasPendingWrites,e.fromCache),t.converter)}class mQ extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=bg(t)}get(t){const e=Zf(t,this._firestore),i=new oQ(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return ut();const o=r[0];if(o.isFoundDocument())return new aE(this._firestore,i,o.key,o,e.converter);if(o.isNoDocument())return new aE(this._firestore,i,e._key,null,e.converter);throw ut()})}set(t,e,i){const r=Zf(t,this._firestore),o=WT(r.converter,e,i),c=$T(this._dataReader,"Transaction.set",r._key,o,null!==r.converter,i);return this._transaction.set(r._key,c),this}update(t,e,i,...r){const o=Zf(t,this._firestore);let c;return c="string"==typeof(e=(0,L.m9)(e))||e instanceof $d?HN(this._dataReader,"Transaction.update",o._key,e,i,r):jN(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,c),this}delete(t){const e=Zf(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Zf(t,this._firestore),i=new Cg(this._firestore);return super.get(t).then(r=>new Gd(this._firestore,i,e._key,r._document,new wg(!1,!1),e.converter))}}function WN(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function b5(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function y5(){if(!function OZ(){return"undefined"!=typeof atob}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){Rb=so.SDK_VERSION,(0,so._registerComponent)(new Sa.wA("firestore",(e,{options:i})=>{const r=e.getProvider("app").getImmediate(),o=new Ci(r,new SZ(e.getProvider("auth-internal")),new AZ(e.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC")),(0,so.registerVersion)(mj,"3.4.8",n),(0,so.registerVersion)(mj,"3.4.8","esm2017")}();class uE{constructor(t){this._delegate=t}static fromBase64String(t){return y5(),new uE(Tu.fromBase64String(t))}static fromUint8Array(t){return b5(),new uE(Tu.fromUint8Array(t))}toBase64(){return y5(),this._delegate.toBase64()}toUint8Array(){return b5(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function YN(n){return function xQ(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class DQ{enableIndexedDbPersistence(t,e){return function R9(n,t){K3(n=dn(n,Ci));const e=hr(n),i=n._freezeSettings(),r=new MN;return Z3(e,r,new k3(r,i.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function O9(n){K3(n=dn(n,Ci));const t=hr(n),e=n._freezeSettings(),i=new MN;return Z3(t,i,new p9(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function P9(n){if(n._initialized&&!n._terminated)throw new Pe(me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Ur;return n._queue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{yield(e=(0,fe.Z)(function*(i){if(!mc.vt())return Promise.resolve();const r=i+"main";yield mc.delete(r)}),function(i){return e.apply(this,arguments)})(wP(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class w5{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof Vd||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&TC("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function S9(n,t,e,i={}){var r;const o=(n=dn(n,oE))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&TC("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let c,d;if("string"==typeof i.mockUserToken)c=i.mockUserToken,d=bo.MOCK_USER;else{c=(0,L.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Pe(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new bo(p)}n._authCredentials=new IZ(new gj(c,d))}}(this._delegate,t,e,i)}enableNetwork(){return function F9(n){return function b9(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const t=yield N3(n),e=yield F3(n);return t.setNetworkEnabled(!0),function(i){const r=Xe(i);return r.fu.delete(0),iE(r)}(e)}))}(hr(n=dn(n,Ci)))}(this._delegate)}disableNetwork(){return function L9(n){return function y9(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const t=yield N3(n),e=yield F3(n);return t.setNetworkEnabled(!1),(i=(0,fe.Z)(function*(r){const o=Xe(r);o.fu.add(0),yield Kb(o),o.wu.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(hr(n=dn(n,Ci)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,U3("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function N9(n){return function(t){const e=new Ur;return t.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function t9(n,t){return fN.apply(this,arguments)}(yield FN(t),e)})),e.promise}(hr(n=dn(n,Ci)))}(this._delegate)}onSnapshotsInSync(t){return function pQ(n,t){return function E9(n,t){const e=new LT(t);return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return i=yield iy(n),r=e,Xe(i).Eu.add(r),void r.next();var i,r})),()=>{e.Ia(),n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return i=yield iy(n),r=e,void Xe(i).Eu.delete(r);var i,r}))}}(hr(n=dn(n,Ci)),VN(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new oy(this,q3(this._delegate,t))}catch(e){throw _s(e,"collection()","Firestore.collection()")}}doc(t){try{return new Al(this,UT(this._delegate,t))}catch(e){throw _s(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new vs(this,function T9(n,t){if(n=dn(n,oE),BN("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Pe(me.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new qo(n,null,(e=t,new jd(_n.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw _s(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function gQ(n,t){return function x9(n,t){const e=new Ur;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){const i=yield(r=n,BT(r).then(o=>o.datastore));var r;new _9(n.asyncQueue,i,t,e).run()})),e.promise}(hr(n=dn(n,Ci)),e=>t(new mQ(n,e)))}(this._delegate,e=>t(new C5(this,e)))}batch(){return hr(this._delegate),new E5(new p5(this._delegate,t=>ry(this._delegate,t)))}loadBundle(t){return function B9(n,t){const e=hr(n=dn(n,Ci)),i=new A9;return function D9(n,t,e,i){const r=function(o,c){let d;return d="string"==typeof o?(new TextEncoder).encode(o):o,p=function(p,b){if(p instanceof Uint8Array)return R3(p,b);if(p instanceof ArrayBuffer)return R3(new Uint8Array(p),b);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new m9(p,c);var p}(e,nE(t));n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){!function f9(n,t,e){const i=Xe(n);var r;(r=(0,fe.Z)(function*(o,c,d){try{const p=yield c.getMetadata();if(yield function(R,N){const B=Xe(R),K=Hr(N.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",ce=>B._s.getBundleMetadata(ce,N.id)).then(ce=>!!ce&&ce.createTime.compareTo(K)>=0)}(o.localStore,p))return yield c.close(),d._completeWith({taskState:"Success",documentsLoaded:(R=p).totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}),Promise.resolve(new Set);d._updateProgress(w3(p));const b=new qK(p,o.localStore,c.M);let E=yield c.da();for(;E;){const R=yield b.ku(E);R&&d._updateProgress(R),E=yield c.da()}const D=yield b.complete();return yield Hd(o,D.Fu,void 0),yield function(R,N){const B=Xe(R);return B.persistence.runTransaction("Save bundle","readwrite",K=>B._s.saveBundleMetadata(K,N))}(o.localStore,p),d._completeWith(D.progress),Promise.resolve(D.Ou)}catch(p){return TC("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var R}),function(o,c,d){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield FN(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function V9(n,t){return function I9(n,t){return n.asyncQueue.enqueue((0,fe.Z)(function*(){return function(e,i){const r=Xe(e);return r.persistence.runTransaction("Get named query","readonly",o=>r._s.getNamedQuery(o,i))}(yield NN(n),t)}))}(hr(n=dn(n,Ci)),t).then(e=>e?new qo(n,null,e.query):null)}(this._delegate,t).then(e=>e?new vs(this,e):null)}}class YT extends qN{constructor(t){super(),this.firestore=t}convertBytes(t){return new uE(new Tu(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Al.forKey(e,this.firestore,null)}}class C5{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new YT(t)}get(t){const e=xg(t);return this._delegate.get(e).then(i=>new dE(this._firestore,new Gd(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=xg(t);return i?(WN("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const o=xg(t);return 2===arguments.length?this._delegate.update(o,e):this._delegate.update(o,e,i,...r),this}delete(t){const e=xg(t);return this._delegate.delete(e),this}}class E5{constructor(t){this._delegate=t}set(t,e,i){const r=xg(t);return i?(WN("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const o=xg(t);return 2===arguments.length?this._delegate.update(o,e):this._delegate.update(o,e,i,...r),this}delete(t){const e=xg(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Eg{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new lE(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new hE(this._firestore,i),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=Eg.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let o=r.get(e);return o||(o=new Eg(t,new YT(t),e),r.set(e,o)),o}}Eg.INSTANCES=new WeakMap;class Al{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new YT(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Al(e,new fi(e._delegate,i,new Ke(t)))}static forKey(t,e,i){return new Al(e,new fi(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new oy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new oy(this.firestore,q3(this._delegate,t))}catch(e){throw _s(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,L.m9)(t))instanceof fi&&z3(this._delegate,t)}set(t,e){e=WN("DocumentReference.set",e);try{return e?m5(this._delegate,t,e):m5(this._delegate,t)}catch(i){throw _s(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?g5(this._delegate,t):g5(this._delegate,t,e,...i)}catch(r){throw _s(r,"updateDoc()","DocumentReference.update()")}}delete(){return function hQ(n){return ry(dn(n.firestore,Ci),[new UC(n._key,ur.none())])}(this._delegate)}onSnapshot(...t){const e=x5(t),i=D5(t,r=>new dE(this.firestore,new Gd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return _5(this._delegate,e,i)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function aQ(n){n=dn(n,fi);const t=dn(n.firestore,Ci),e=hr(t),i=new Cg(t);return function w9(n,t){const e=new Ur;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(i=(0,fe.Z)(function*(r,o,c){try{const d=yield function(p,b){const E=Xe(p);return E.persistence.runTransaction("read document","readonly",D=>E.ci.Ls(D,b))}(r,o);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new Pe(me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=Jb(d,`Failed to get document '${o} from cache`);c.reject(p)}}),function(r,o,c){return i.apply(this,arguments)})(yield NN(n),t,e);var i})),e.promise}(e,n._key).then(r=>new Gd(t,i,n._key,r,new wg(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==t?void 0:t.source)?function lQ(n){n=dn(n,fi);const t=dn(n.firestore,Ci);return L3(hr(t),n._key,{source:"server"}).then(e=>zN(t,n,e))}(this._delegate):function sQ(n){n=dn(n,fi);const t=dn(n.firestore,Ci);return L3(hr(t),n._key).then(e=>zN(t,n,e))}(this._delegate),e.then(i=>new dE(this.firestore,new Gd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new Al(this.firestore,this._delegate.withConverter(t?Eg.getInstance(this.firestore,t):null))}}function _s(n,t,e){return n.message=n.message.replace(t,e),n}function x5(n){for(const t of n)if("object"==typeof t&&!YN(t))return t;return{}}function D5(n,t){var e,i;let r;return r=YN(n[0])?n[0]:YN(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{r.next&&r.next(t(o))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class dE{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Al(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return o5(this._delegate,t._delegate)}}class hE extends dE{data(t){const e=this._delegate.data(t);return function xZ(n,t){n||ut()}(void 0!==e),e}}class vs{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new YT(t)}where(t,e,i){try{return new vs(this.firestore,Yf(this._delegate,function K9(n,t,e){const i=t,r=zT("where",n);return new Z9(r,i,e)}(t,e,i)))}catch(r){throw _s(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new vs(this.firestore,Yf(this._delegate,function X9(n,t="asc"){const e=t,i=zT("orderBy",n);return new Q9(i,e)}(t,e)))}catch(i){throw _s(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new vs(this.firestore,Yf(this._delegate,function J9(n){return $3("limit",n),new a5("limit",n,"F")}(t)))}catch(e){throw _s(e,"limit()","Query.limit()")}}limitToLast(t){try{return new vs(this.firestore,Yf(this._delegate,function eQ(n){return $3("limitToLast",n),new a5("limitToLast",n,"L")}(t)))}catch(e){throw _s(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new vs(this.firestore,Yf(this._delegate,function tQ(...n){return new l5("startAt",n,!0)}(...t)))}catch(e){throw _s(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new vs(this.firestore,Yf(this._delegate,function nQ(...n){return new l5("startAfter",n,!1)}(...t)))}catch(e){throw _s(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new vs(this.firestore,Yf(this._delegate,function iQ(...n){return new c5("endBefore",n,!1)}(...t)))}catch(e){throw _s(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new vs(this.firestore,Yf(this._delegate,function rQ(...n){return new c5("endAt",n,!0)}(...t)))}catch(e){throw _s(e,"endAt()","Query.endAt()")}}isEqual(t){return W3(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function uQ(n){n=dn(n,qo);const t=dn(n.firestore,Ci),e=hr(t),i=new Cg(t);return function C9(n,t){const e=new Ur;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(i=(0,fe.Z)(function*(r,o,c){try{const d=yield kT(r,o,!0),p=new x3(o,d.li),b=p.Gu(d.documents),E=p.applyChanges(b,!1);c.resolve(E.snapshot)}catch(d){const p=Jb(d,`Failed to execute query '${o} against cache`);c.reject(p)}}),function(r,o,c){return i.apply(this,arguments)})(yield NN(n),t,e);var i})),e.promise}(e,n._query).then(r=>new Wf(t,i,n,r))}(this._delegate):"server"===(null==t?void 0:t.source)?function dQ(n){n=dn(n,qo);const t=dn(n.firestore,Ci),e=hr(t),i=new Cg(t);return B3(e,n._query,{source:"server"}).then(r=>new Wf(t,i,n,r))}(this._delegate):function cQ(n){n=dn(n,qo);const t=dn(n.firestore,Ci),e=hr(t),i=new Cg(t);return s5(n._query),B3(e,n._query).then(r=>new Wf(t,i,n,r))}(this._delegate),e.then(i=>new ZN(this.firestore,new Wf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=x5(t),i=D5(t,r=>new ZN(this.firestore,new Wf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return _5(this._delegate,e,i)}withConverter(t){return new vs(this.firestore,this._delegate.withConverter(t?Eg.getInstance(this.firestore,t):null))}}class SQ{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new hE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ZN{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new vs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new hE(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new SQ(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new hE(this._firestore,i))})}isEqual(t){return o5(this._delegate,t._delegate)}}class oy extends vs{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Al(this.firestore,t):null}doc(t){try{return new Al(this.firestore,void 0===t?UT(this._delegate):UT(this._delegate,t))}catch(e){throw _s(e,"doc()","CollectionReference.doc()")}}add(t){return function fQ(n,t){const e=dn(n.firestore,Ci),i=UT(n),r=WT(n.converter,t);return ry(e,[$T(bg(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,ur.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new Al(this.firestore,e))}isEqual(t){return z3(this._delegate,t._delegate)}withConverter(t){return new oy(this.firestore,this._delegate.withConverter(t?Eg.getInstance(this.firestore,t):null))}}function xg(n){return dn(n,fi)}class KN{constructor(...t){this._delegate=new $d(...t)}static documentId(){return new KN(jr.keyField().canonicalString())}isEqual(t){return(t=(0,L.m9)(t))instanceof $d&&this._delegate._internalPath.isEqual(t._internalPath)}}class Dg{constructor(t){this._delegate=t}static serverTimestamp(){const t=function vQ(){return new UN("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new Dg(t)}static delete(){const t=function _Q(){return new sE("deleteField")}();return t._methodName="FieldValue.delete",new Dg(t)}static arrayUnion(...t){const e=function bQ(...n){return new $9("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Dg(e)}static arrayRemove(...t){const e=function yQ(...n){return new G9("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Dg(e)}static increment(t){const e=function wQ(n){return new q9("increment",n)}(t);return e._methodName="FieldValue.increment",new Dg(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const TQ={Firestore:w5,GeoPoint:jT,Timestamp:Ki,Blob:uE,Transaction:C5,WriteBatch:E5,DocumentReference:Al,DocumentSnapshot:dE,Query:vs,QueryDocumentSnapshot:hE,QuerySnapshot:ZN,CollectionReference:oy,FieldPath:KN,FieldValue:Dg,setLogLevel:function IQ(n){!function EZ(n){Ff.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function I5(n,t){return function kQ(n,t=Ph.z){return new zn.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=i&&i()}})}(n,t)}function QN(n,t){return I5(n,t).pipe((0,et.U)(e=>({payload:e,type:"query"})))}function ZT(n,t){return QN(n,t).pipe(Bi(void 0),eO(),(0,et.U)(([e,i])=>{const r=i.payload.docChanges(),o=r.map(c=>({type:c.type,payload:c}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((c,d)=>{const p=r.find(E=>E.doc.ref.isEqual(c.ref)),b=null==e?void 0:e.payload.docs.find(E=>E.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||o.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:c}})}),o}))}function S5(n,t,e){return ZT(n,e).pipe(Ti((i,r)=>function OQ(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function PQ(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return XN(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return XN(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return XN(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(o=>o.payload),t),[]),Oy(),(0,et.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function XN(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function T5(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function AQ(n){(function MQ(n,t){n.INTERNAL.registerComponent(new Sa.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},TQ)))})(n,(t,e)=>new w5(t,e,new DQ)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(Py.Z);class M5{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=ZT(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,et.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(Bi(void 0),eO(),gn(([i,r])=>r.length>0||!i),(0,et.U)(([i,r])=>r),wn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ti((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=T5(t);return S5(this.query,e,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(t={}){return QN(this.query,this.afs.schedulers.outsideAngular).pipe((0,et.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),wn.iC)}get(t){return(0,Dn.D)(this.query.get(t)).pipe(wn.iC)}add(t){return this.ref.add(t)}doc(t){return new A5(this.ref.doc(t),this.afs)}}class A5{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:o}=O5(i,e);return new M5(r,o,this.afs)}snapshotChanges(){return function RQ(n,t){return I5(n,t).pipe(Bi(void 0),eO(),(0,et.U)(([e,i])=>i.exists?(null==e?void 0:e.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,et.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Dn.D)(this.ref.get(t)).pipe(wn.iC)}}class NQ{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?ZT(this.query,this.afs.schedulers.outsideAngular).pipe((0,et.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),gn(e=>e.length>0),wn.iC):ZT(this.query,this.afs.schedulers.outsideAngular).pipe(wn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ti((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=T5(t);return S5(this.query,e,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(t={}){return QN(this.query,this.afs.schedulers.outsideAngular).pipe((0,et.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),wn.iC)}get(t){return(0,Dn.D)(this.query.get(t)).pipe(wn.iC)}}const k5=new l.OlP("angularfire2.enableFirestorePersistence"),R5=new l.OlP("angularfire2.firestore.persistenceSettings"),FQ=new l.OlP("angularfire2.firestore.settings"),LQ=new l.OlP("angularfire2.firestore.use-emulator");function O5(n,t=(e=>e)){return{query:t(n),ref:n}}let BQ=(()=>{class n{constructor(e,i,r,o,c,d,p,b,E,D,R,N,B,K,ce,He,We){this.schedulers=p;const Ye=(0,Yi.on)(e,d,i),Ge=E;D&&Gv(Ye,d,R,B,K,ce,N,He),[this.firestore,this.persistenceEnabled$]=(0,Yi.cc)(`${Ye.name}.firestore`,"AngularFirestore",Ye.name,()=>{const Mt=d.runOutsideAngular(()=>Ye.firestore());if(o&&Mt.settings(o),Ge&&Mt.useEmulator(...Ge),r&&!Li(c)){const Ot=()=>{try{return(0,Dn.D)(Mt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(cn){return"undefined"!=typeof console&&console.warn(cn),st(!1)}};return[Mt,d.runOutsideAngular(Ot)]}return[Mt,st(!1)]},[o,Ge,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:o,query:c}=O5(r,i),d=this.schedulers.ngZone.run(()=>o);return new M5(d,c,this)}collectionGroup(e,i){const r=i||(c=>c),o=this.firestore.collectionGroup(e);return new NQ(r(o),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new A5(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Yi.Dh),l.LFG(Yi.xv,8),l.LFG(k5,8),l.LFG(FQ,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(wn.HU),l.LFG(R5,8),l.LFG(LQ,8),l.LFG(yw,8),l.LFG(vw,8),l.LFG(Uv,8),l.LFG(bw,8),l.LFG(jv,8),l.LFG(Hv,8),l.LFG($v,8),l.LFG(ff,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),VQ=(()=>{class n{constructor(){oo.Z.registerVersion("angularfire",wn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:k5,useValue:!0},{provide:R5,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[BQ]}),n})(),XQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Zw,Xn],Xn]}),n})();const iX={provide:new l.OlP("mat-select-scroll-strategy"),deps:[xb],useFactory:function nX(n){return()=>n.scrollStrategies.reposition()}};let rX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[iX],imports:[[kn,HR,_R,Xn],rC,mV,_R,Xn]}),n})();const B5=["*"],aX=["input"],lX=function(n,t,e,i){return{"custom-control custom-checkbox":n,"form-check":t,"custom-control-inline":e,"form-check-inline":i}},cX=function(n,t,e){return{"filled-in":n,"custom-control-input":t,"form-check-input":e}},uX=function(n,t,e,i,r){return{"custom-control-label":n,"form-check-label":t,"label-before":e,"checkbox-rounded":i,disabled:r}};let KT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),QT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[kn]]}),n})();const fX={provide:Ho,useExisting:(0,l.Gpc)(()=>pX),multi:!0};let pX=(()=>{class n{constructor(){this.btnCheckboxTrue=!0,this.btnCheckboxFalse=!1,this.state=!1,this.onChange=Function.prototype,this.onTouched=Function.prototype}onClick(){this.isDisabled||(this.toggle(!this.state),this.onChange(this.value))}ngOnInit(){this.toggle(this.trueValue===this.value)}get trueValue(){return void 0===this.btnCheckboxTrue||this.btnCheckboxTrue}get falseValue(){return void 0!==this.btnCheckboxFalse&&this.btnCheckboxFalse}toggle(e){this.state=e,this.value=this.state?this.trueValue:this.falseValue}writeValue(e){this.state=this.trueValue===e,this.value=e?this.trueValue:this.falseValue}setDisabledState(e){this.isDisabled=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","mdbCheckbox",""]],hostVars:2,hostBindings:function(e,i){1&e&&l.NdJ("click",function(){return i.onClick()}),2&e&&l.ekj("active",i.state)},inputs:{btnCheckboxTrue:"btnCheckboxTrue",btnCheckboxFalse:"btnCheckboxFalse"},features:[l._Bn([fX])]}),n})();const mX={provide:Ho,useExisting:(0,l.Gpc)(()=>gX),multi:!0};let gX=(()=>{class n{constructor(e,i){this.el=e,this.renderer=i,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.radioElementsArray=[],this._uncheckable=!1,this.disabled=!1}get uncheckable(){return this._uncheckable}set uncheckable(e){this._uncheckable=Qn(e)}get isActive(){return this.mdbRadio===this.value}onClick(e){if(!this.disabled){try{this.el.nativeElement.parentElement.childNodes.forEach(i=>{this.radioElementsArray.push(i)}),this.radioElementsArray.forEach(i=>{this.renderer.removeClass(i,"active")}),this.renderer.addClass(e.target,"active")}catch(i){}this.el.nativeElement.attributes.disabled||(this.value=this.uncheckable&&this.mdbRadio===this.value?void 0:this.mdbRadio,this.onTouched(),this.onChange(this.value))}}ngOnInit(){this.uncheckable=void 0!==this.uncheckable}onBlur(){this.onTouched()}writeValue(e){this.value=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","mdbRadio",""]],hostVars:4,hostBindings:function(e,i){1&e&&l.NdJ("click",function(o){return i.onClick(o)}),2&e&&l.ekj("disabled",i.disabled)("active",i.isActive)},inputs:{mdbRadio:"mdbRadio",uncheckable:"uncheckable",value:"value",disabled:"disabled"},features:[l._Bn([mX])]}),n})(),fE=(()=>{class n{static forRoot(){return{ngModule:n,providers:[]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),XT=(()=>{class n{static forRoot(){return{ngModule:n,providers:[]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[kn]]}),n})();var qr="undefined"!=typeof window&&window||{},Ig=qr.document;function pE(){return"bs4"===qr.__theme}let _X=(()=>{class n{constructor(){this.interval=5e3,this.noPause=!1,this.noWrap=!1,this.keyboard=!1}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),JT=(()=>{class n{static forRoot(){return{ngModule:n,providers:[]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[_X],imports:[[kn,fE]]}),n})(),eM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const CX={provide:Ho,useExisting:(0,l.Gpc)(()=>DX),multi:!0};let EX=0;class xX{}let DX=(()=>{class n{constructor(e){this._cdRef=e,this.defaultId="mdb-checkbox-"+ ++EX,this.checkboxId=this.defaultId,this._required=!1,this._checked=!1,this._filledIn=!1,this._indeterminate=!1,this._disabled=!1,this._rounded=!1,this.checkboxPosition="left",this._default=!1,this._inline=!1,this.change=new l.vpe,this.checkboxClicked=new pt.x,this.onChange=i=>{},this.onTouched=()=>{}}get required(){return this._required}set required(e){this._required=Qn(e)}get checked(){return this._checked}set checked(e){this._checked=Qn(e)}get filledIn(){return this._filledIn}set filledIn(e){this._filledIn=Qn(e)}get indeterminate(){return this._indeterminate}set indeterminate(e){this._indeterminate=Qn(e)}get disabled(){return this._disabled}set disabled(e){this._disabled=Qn(e)}get rounded(){return this._rounded}set rounded(e){this._rounded=Qn(e)}get default(){return this._default}set default(e){this._default=Qn(e)}get inline(){return this._inline}set inline(e){this._inline=Qn(e)}get tabIndex(){return this._tabIndex}set tabIndex(e){this._tabIndex=function L1(n,t=0){return function T4(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}(e)}onLabelClick(e){e.stopPropagation(),this.checkboxClicked.next(!0)}onDocumentClick(){this.checkboxClicked.next(!1)}ngOnInit(){this.indeterminate&&!this.filledIn&&!this.rounded&&(this.inputEl.indeterminate=!0)}ngOnChanges(e){e.hasOwnProperty("checked")&&(this.checked=e.checked.currentValue)}get changeEvent(){const e=new xX;return e.element=this,e.checked=this.checked,e}toggle(){this.disabled||(this.checked=!this.checked,this.indeterminate=!1,this.onChange(this.checked),this._cdRef.markForCheck())}onCheckboxClick(e){e.stopPropagation(),this.toggle()}onCheckboxChange(e){e.stopPropagation(),S1(0).subscribe(()=>this.change.emit(this.changeEvent))}onBlur(){this.checkboxClicked.pipe((0,Bn.q)(1)).subscribe(e=>{e||this.onTouched()})}writeValue(e){this.value=e,this.checked=!!e,this._cdRef.markForCheck()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mdb-checkbox"]],viewQuery:function(e,i){if(1&e&&l.Gf(aX,7),2&e){let r;l.iGM(r=l.CRH())&&(i.inputEl=r.first)}},hostBindings:function(e,i){1&e&&l.NdJ("click",function(o){return i.onLabelClick(o)})("click",function(){return i.onDocumentClick()},!1,l.evT)},inputs:{class:"class",checkboxId:"checkboxId",required:"required",name:"name",value:"value",checked:"checked",filledIn:"filledIn",indeterminate:"indeterminate",disabled:"disabled",rounded:"rounded",checkboxPosition:"checkboxPosition",default:"default",inline:"inline",tabIndex:"tabIndex"},outputs:{change:"change"},features:[l._Bn([CX]),l.TTD],ngContentSelectors:B5,decls:5,vars:27,consts:[[3,"ngClass"],["type","checkbox",1,"custom-control-input",3,"ngClass","id","checked","disabled","required","indeterminate","tabIndex","blur","click","change"],["input",""]],template:function(e,i){1&e&&(l.F$t(),l.TgZ(0,"div",0)(1,"input",1,2),l.NdJ("blur",function(){return i.onBlur()})("click",function(o){return i.onCheckboxClick(o)})("change",function(o){return i.onCheckboxChange(o)}),l.qZA(),l.TgZ(3,"label",0),l.Hsn(4),l.qZA()()),2&e&&(l.Q6J("ngClass",l.l5B(12,lX,i.default,!i.default,i.inline,i.inline&&!i.default)),l.xp6(1),l.Q6J("ngClass",l.kEZ(17,cX,i.filledIn||i.rounded,i.default,!i.default))("id",i.checkboxId)("checked",i.checked)("disabled",i.disabled)("required",i.required)("indeterminate",i.indeterminate)("tabIndex",i.tabIndex),l.uIk("name",i.name)("value",i.value),l.xp6(2),l.Q6J("ngClass",l.qbA(21,uX,i.default,!i.default,"right"===i.checkboxPosition,i.rounded,i.disabled)),l.uIk("for",i.checkboxId))},directives:[Mr],encapsulation:2,changeDetection:0}),n})(),tM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[kn,zB]]}),n})(),nM=(()=>{class n{static forRoot(){return{ngModule:n,providers:[]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),IX=(()=>{class n{constructor(){this.direction="down",this.isOpenChange=new l.vpe,this.isDisabledChange=new l.vpe,this.toggleClick=new l.vpe,this.dropdownMenu=new Promise(e=>{this.resolveDropdownMenu=e})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class SX{constructor(t,e){this.open=t,this.close=e||t}isManual(){return"manual"===this.open||"manual"===this.close}}const TX={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};"undefined"!=typeof window&&window,"undefined"==typeof console||console;class gE{constructor(t,e,i){this.nodes=t,this.viewRef=e,this.componentRef=i}}class PX{constructor(t,e,i,r,o,c,d,p){this._viewContainerRef=t,this._renderer=e,this._elementRef=i,this._injector=r,this._componentFactoryResolver=o,this._ngZone=c,this._applicationRef=d,this._posService=p,this.onBeforeShow=new l.vpe,this.onShown=new l.vpe,this.onBeforeHide=new l.vpe,this.onHidden=new l.vpe,this.shown=new l.vpe,this.hidden=new l.vpe,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return!this._isHiding&&!!this._componentRef}attach(t){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(t),this}to(t){return this.container=t||this.container,this}position(t){return this.attachment=t.attachment||this.attachment,this._elementRef=t.target||this._elementRef,this}provide(t){return this._providers.push(t),this}show(t={}){if(this._subscribePositioning(),this._innerComponent=null,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(t.content,t.data);const e=l.zs3.create({providers:this._providers,parent:this._injector});if(this._componentRef=this._componentFactory.create(e,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,t),this.container instanceof l.SBq&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),"string"==typeof this.container&&"undefined"!=typeof document){const i=document.querySelector(this.container)||document.querySelector(this.containerDefaultSelector);i&&i.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(){if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);const t=this._componentRef.location.nativeElement;return t.parentNode.removeChild(t),this._contentRef.componentRef&&this._contentRef.componentRef.destroy(),this._componentRef.destroy(),this._viewContainerRef&&this._contentRef.viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._contentRef=null,this._componentRef=null,this._removeGlobalListener(),this.onHidden.emit(),this}toggle(){this.isShown?this.hide():this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(t){this.triggers=t.triggers||this.triggers,this._listenOpts.outsideClick=t.outsideClick,this._listenOpts.outsideEsc=t.outsideEsc,t.target=t.target||this._elementRef.nativeElement;const e=this._listenOpts.hide=()=>t.hide?t.hide():void this.hide(),i=this._listenOpts.show=o=>{t.show?t.show(o):this.show(o),o()};return this._unregisterListenersFn=function MX(n,t){const e=function H5(n,t=TX){const e=(n||"").trim();if(0===e.length)return[];const i=e.split(/\s+/).map(o=>o.split(":")).map(o=>{const c=t[o[0]]||o;return new SX(c[0],c[1])}),r=i.filter(o=>o.isManual());if(r.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(1===r.length&&i.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return i}(t.triggers),i=t.target;if(1===e.length&&e[0].isManual())return Function.prototype;const r=[],o=[],c=()=>{o.forEach(d=>r.push(d())),o.length=0};return e.forEach(d=>{const p=d.open===d.close,b=p?t.toggle:t.show;p||o.push(()=>n.listen(i,d.close,t.hide)),r.push(n.listen(i,d.open,()=>b(c)))}),()=>{r.forEach(d=>d())}}(this._renderer,{target:t.target,triggers:t.triggers,show:i,hide:e,toggle:o=>{this.isShown?e():i(o)}}),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=null)}attachInline(t,e){return this._inlineViewRef=t.createEmbeddedView(e),this}_registerOutsideClick(){if(this._componentRef&&this._componentRef.location){if(this._listenOpts&&this._listenOpts.outsideClick){const t=this._componentRef.location.nativeElement;setTimeout(()=>{this._globalListener=function AX(n,t){return t.outsideClick?n.listen("document","click",e=>{t.target&&t.target.contains(e.target)||t.targets&&t.targets.some(i=>i.contains(e.target))||t.hide()}):Function.prototype}(this._renderer,{targets:[t,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide()})})}this._listenOpts.outsideEsc&&(this._globalListener=function kX(n,t){return t.outsideEsc?n.listen("document","keyup.esc",e=>{t.target&&t.target.contains(e.target)||t.targets&&t.targets.some(i=>i.contains(e.target))||t.hide()}):Function.prototype}(this._renderer,{targets:[this._componentRef.location.nativeElement,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide()}))}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{this._posService.position({element:this._componentRef.location,target:this._elementRef,attachment:this.attachment,appendToBody:"body"===this.container})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{!this._componentRef||this._posService.calcPosition()}))}_unsubscribePositioning(){!this._zoneSubscription||(this._zoneSubscription.unsubscribe(),this._zoneSubscription=null)}_getContentRef(t,e){if(!t)return new gE([]);if(t instanceof l.Rgc){if(this._viewContainerRef){const r=this._viewContainerRef.createEmbeddedView(t);return r.markForCheck(),new gE([r.rootNodes],r)}const i=t.createEmbeddedView({});return this._applicationRef.attachView(i),new gE([i.rootNodes],i)}if("function"==typeof t){const i=this._componentFactoryResolver.resolveComponentFactory(t),r=l.zs3.create({providers:this._providers,parent:this._injector}),o=i.create(r);return Object.assign(o.instance,e),this._applicationRef.attachView(o.hostView),new gE([[o.location.nativeElement]],o.hostView,o)}return new gE([[this._renderer.createText(`${t}`)]])}}function Sg(n,t){if(1!==n.nodeType)return[];const i=n.ownerDocument.defaultView.getComputedStyle(n,null);return t?i[t]:i}function tF(n){return"HTML"===n.nodeName?n:n.parentNode||n.host}function nF(n){if(!n)return document.body;switch(n.nodeName){case"HTML":case"BODY":return n.ownerDocument.body;case"#document":return n.body}const{overflow:t,overflowX:e,overflowY:i}=Sg(n);return/(auto|scroll|overlay)/.test(String(t)+String(i)+String(e))?n:nF(tF(n))}const G5="undefined"!=typeof window&&"undefined"!=typeof document,q5=G5&&!(!window.MSInputMethodContext||!document.documentMode),z5=G5&&!(!window.MSInputMethodContext||!/MSIE 10/.test(navigator.userAgent));function sy(n){return 11===n?q5:10===n?z5:q5||z5}function iF(n){if(!n)return document.documentElement;const t=sy(10)?document.body:null;let i,e=n.offsetParent||null;for(;e===t&&n.nextElementSibling&&"BODY"!==n.nodeName;)i=n.nextElementSibling,e=i.offsetParent;const r=e&&e.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(e.nodeName)&&"static"===Sg(e,"position")?iF(e):e:i?i.ownerDocument.documentElement:document.documentElement}function rF(n){return null!==n.parentNode?rF(n.parentNode):n}function iM(n,t){if(!(n&&n.nodeType&&t&&t.nodeType))return document.documentElement;const e=n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,i=e?n:t,r=e?t:n,o=document.createRange();o.setStart(i,0),o.setEnd(r,0);const{commonAncestorContainer:c}=o;if(n!==c&&t!==c||i.contains(r))return function NX(n){const{nodeName:t}=n;return"BODY"!==t&&("HTML"===t||iF(n.firstElementChild)===n)}(c)?c:iF(c);const d=rF(n);return d.host?iM(d.host,t):iM(n,rF(t).host)}function W5(n,t){const e="x"===t?"Left":"Top",i="Left"===e?"Right":"Bottom";return parseFloat(n[`border${e}Width`])+parseFloat(n[`border${i}Width`])}function Y5(n,t,e,i){return Math.max(t[`offset${n}`],t[`scroll${n}`],e[`client${n}`],e[`offset${n}`],e[`scroll${n}`],sy(10)?parseInt(e[`offset${n}`],10)+parseInt(i["margin"+("Height"===n?"Top":"Left")],10)+parseInt(i["margin"+("Height"===n?"Bottom":"Right")],10):0)}function Z5(n){const t=n.body,e=n.documentElement,i=sy(10)&&getComputedStyle(e);return{height:Y5("Height",t,e,i),width:Y5("Width",t,e,i)}}function ay(n,t="top"){const e="top"===t?"scrollTop":"scrollLeft",i=n.nodeName;if("BODY"===i||"HTML"===i){const r=n.ownerDocument.documentElement;return(n.ownerDocument.scrollingElement||r)[e]}return n[e]}function _E(n){return Object.assign(Object.assign({},n),{right:n.left+n.width,bottom:n.top+n.height})}function K5(n){let t={};try{if(sy(10)){t=n.getBoundingClientRect();const p=ay(n,"top"),b=ay(n,"left");t.top+=p,t.left+=b,t.bottom+=p,t.right+=b}else t=n.getBoundingClientRect()}catch(p){return}const e={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},i="HTML"===n.nodeName?Z5(n.ownerDocument):{};let c=n.offsetWidth-(i.width||n.clientWidth||e.right-e.left),d=n.offsetHeight-(i.height||n.clientHeight||e.bottom-e.top);if(c||d){const p=Sg(n);c-=W5(p,"x"),d-=W5(p,"y"),e.width-=c,e.height-=d}return _E(e)}function oF(n,t,e=!1){const i=sy(10),r="HTML"===t.nodeName,o=K5(n),c=K5(t),d=nF(n),p=Sg(t),b=parseFloat(p.borderTopWidth),E=parseFloat(p.borderLeftWidth);e&&r&&(c.top=Math.max(c.top,0),c.left=Math.max(c.left,0));let D=_E({top:o.top-c.top-b,left:o.left-c.left-E,width:o.width,height:o.height});if(D.marginTop=0,D.marginLeft=0,!i&&r){const R=parseFloat(p.marginTop),N=parseFloat(p.marginLeft);D.top-=b-R,D.bottom-=b-R,D.left-=E-N,D.right-=E-N,D.marginTop=R,D.marginLeft=N}return(i&&!e?t.contains(d):t===d&&"BODY"!==d.nodeName)&&(D=function FX(n,t,e=!1){const i=ay(t,"top"),r=ay(t,"left"),o=e?-1:1;return n.top+=i*o,n.bottom+=i*o,n.left+=r*o,n.right+=r*o,n}(D,t)),D}function Q5(n){const t=n.nodeName;return"BODY"!==t&&"HTML"!==t&&("fixed"===Sg(n,"position")||Q5(tF(n)))}function X5(n){if(!n||!n.parentElement||sy())return document.documentElement;let t=n.parentElement;for(;t&&"none"===Sg(t,"transform");)t=t.parentElement;return t||document.documentElement}function sF(n,t,e=0,i,r=!1){let o={top:0,left:0};const c=r?X5(n):iM(n,t);if("viewport"===i)o=function LX(n,t=!1){const e=n.ownerDocument.documentElement,i=oF(n,e),r=Math.max(e.clientWidth,window.innerWidth||0),o=Math.max(e.clientHeight,window.innerHeight||0),c=t?0:ay(e),d=t?0:ay(e,"left");return _E({top:c-Number(i.top)+Number(i.marginTop),left:d-Number(i.left)+Number(i.marginLeft),width:r,height:o})}(c,r);else{let d;"scrollParent"===i?(d=nF(tF(t)),"BODY"===d.nodeName&&(d=n.ownerDocument.documentElement)):d="window"===i?n.ownerDocument.documentElement:i;const p=oF(d,c,r);if("HTML"!==d.nodeName||Q5(c))o=p;else{const{height:b,width:E}=Z5(n.ownerDocument);o.top+=p.top-p.marginTop,o.bottom=Number(b)+Number(p.top),o.left+=p.left-p.marginLeft,o.right=Number(E)+Number(p.left)}}return o.left+=e,o.top+=e,o.right-=e,o.bottom-=e,o}function BX({width:n,height:t}){return n*t}function aF(n,t,e,i,r=["top","left","bottom","right"],o="viewport",c=0){if(-1===n.indexOf("auto"))return n;const d=sF(e,i,c,o),p={top:{width:d.width,height:t.top-d.top},right:{width:d.right-t.right,height:d.height},bottom:{width:d.width,height:d.bottom-t.bottom},left:{width:t.left-d.left,height:d.height}},b=Object.keys(p).map(N=>Object.assign(Object.assign({key:N},p[N]),{area:BX(p[N])})).sort((N,B)=>B.area-N.area);let E=b.filter(({width:N,height:B})=>N>=e.clientWidth&&B>=e.clientHeight);E=r.reduce((N,B)=>Object.assign(Object.assign({},N),{[B]:E[B]}),{});const D=E.length>0?E[0].key:b[0].key,R=n.split(" ")[1];return e.className=e.className.replace(/auto/g,D),D+(R?`-${R}`:"")}function J5(n){const e=n.ownerDocument.defaultView.getComputedStyle(n),i=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),r=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:Number(n.offsetWidth)+r,height:Number(n.offsetHeight)+i}}function e6(n,t,e=null){return oF(t,e?X5(n):iM(n,t),e)}function lF(n,t,e){const i=e.split(" ")[0],r=J5(n),o={width:r.width,height:r.height},c=-1!==["right","left"].indexOf(i),d=c?"top":"left",p=c?"left":"top",b=c?"height":"width",E=c?"width":"height";return o[d]=t[d]+t[b]/2-r[b]/2,o[p]=i===p?t[p]-r[E]:t[function UX(n){const t={left:"right",right:"left",bottom:"top",top:"bottom"};return n.replace(/left|right|bottom|top/g,e=>t[e])}(p)],o}function t6(n,t){return n&&n.modifiers&&n.modifiers[t]&&n.modifiers[t].enabled}function n6(n,t,e){Object.keys(t).forEach(i=>{let r="";-1!==["width","height","top","right","bottom","left"].indexOf(i)&&function HX(n){return""!==n&&!isNaN(parseFloat(n))&&isFinite(n)}(t[i])&&(r="px"),e?e.setStyle(n,i,`${String(t[i])}${r}`):n.style[i]=String(t[i])+r})}function GX(n){let t=n.offsets.target;const e=n.instance.target.querySelector(".arrow");if(!e)return n;const i=-1!==["left","right"].indexOf(n.placement),r=i?"height":"width",o=i?"Top":"Left",c=o.toLowerCase(),d=i?"left":"top",p=i?"bottom":"right",b=J5(e)[r];n.offsets.host[p]-b<t[c]&&(t[c]-=t[c]-(n.offsets.host[p]-b)),Number(n.offsets.host[c])+Number(b)>t[p]&&(t[c]+=Number(n.offsets.host[c])+Number(b)-Number(t[p])),t=_E(t);const E=Number(n.offsets.host[c])+Number(n.offsets.host[r]/2-b/2),D=Sg(n.instance.target),R=parseFloat(D[`margin${o}`]),N=parseFloat(D[`border${o}Width`]);let B=E-t[c]-R-N;return B=Math.max(Math.min(t[r]-b,B),0),n.offsets.arrow={[c]:Math.round(B),[d]:""},n.instance.arrow=e,n}function qX(n){if(n.offsets.target=_E(n.offsets.target),!t6(n.options,"flip"))return n.offsets.target=Object.assign(Object.assign({},n.offsets.target),lF(n.instance.target,n.offsets.host,n.placement)),n;const t=sF(n.instance.target,n.instance.host,0,"viewport",!1);let e=n.placement.split(" ")[0],i=n.placement.split(" ")[1]||"";const r=n.offsets.host,o=n.instance.target,c=n.instance.host,d=i?aF("auto",r,o,c,["top","bottom"]):aF("auto",r,o,c),p=[e,d];return p.forEach((b,E)=>{if(e!==b||p.length===E+1)return n;e=n.placement.split(" ")[0];const D="left"===e&&Math.floor(n.offsets.target.right)>Math.floor(n.offsets.host.left)||"right"===e&&Math.floor(n.offsets.target.left)<Math.floor(n.offsets.host.right)||"top"===e&&Math.floor(n.offsets.target.bottom)>Math.floor(n.offsets.host.top)||"bottom"===e&&Math.floor(n.offsets.target.top)<Math.floor(n.offsets.host.bottom),R=Math.floor(n.offsets.target.left)<Math.floor(t.left),N=Math.floor(n.offsets.target.right)>Math.floor(t.right),B=Math.floor(n.offsets.target.top)<Math.floor(t.top),K=Math.floor(n.offsets.target.bottom)>Math.floor(t.bottom),ce="left"===e&&R||"right"===e&&N||"top"===e&&B||"bottom"===e&&K,He=-1!==["top","bottom"].indexOf(e),We=He&&"left"===i&&R||He&&"right"===i&&N||!He&&"left"===i&&B||!He&&"right"===i&&K;(D||ce||We)&&((D||ce)&&(e=p[E+1]),We&&(i=function jX(n){return"right"===n?"left":"left"===n?"right":n}(i)),n.placement=e+(i?` ${i}`:""),n.offsets.target=Object.assign(Object.assign({},n.offsets.target),lF(n.instance.target,n.offsets.host,n.placement)))}),n}function WX(n){if(!t6(n.options,"preventOverflow"))return n;const t="transform",e=n.instance.target.style,{top:i,left:r,[t]:o}=e;e.top="",e.left="",e[t]="";const c=sF(n.instance.target,n.instance.host,0,"scrollParent",!1);e.top=i,e.left=r,e[t]=o;const p={primary(E){let D=n.offsets.target[E];return n.offsets.target[E]<c[E]&&(D=Math.max(n.offsets.target[E],c[E])),{[E]:D}},secondary(E){const D="right"===E?"left":"top";let R=n.offsets.target[D];return n.offsets.target[E]>c[E]&&(R=Math.min(n.offsets.target[D],c[E]-("right"===E?n.offsets.target.width:n.offsets.target.height))),{[D]:R}}};let b;return["left","right","top","bottom"].forEach(E=>{b=-1!==["left","top"].indexOf(E)?"primary":"secondary",n.offsets.target=Object.assign(Object.assign({},n.offsets.target),p[b](E))}),n}function YX(n){const t=n.placement,e=t.split(" ")[0],i=t.split(" ")[1];if(i){const{host:r,target:o}=n.offsets,c=-1!==["bottom","top"].indexOf(e),d=c?"left":"top",p=c?"width":"height",b={left:{[d]:r[d]},right:{[d]:r[d]+r[p]-r[p]}};n.offsets.target=Object.assign(Object.assign({},o),b[i])}return n}const KX=new class ZX{position(t,e){return this.offset(t,e)}offset(t,e){return e6(e,t)}positionElements(t,e,i,r,o){return[qX,YX,WX,GX].reduce((d,p)=>p(d),function zX(n,t,e,i){const r=e6(n,t),o=!!e.match(/auto/g);let c=e.match(/auto\s(left|right|top|bottom)/g)?e.split(" ")[1]||"":e;const d=lF(n,r,c);return c=aF(c,r,n,t),{options:i,instance:{target:n,host:t,arrow:null},offsets:{target:d,host:r,arrow:null},positionFixed:!1,placement:c,placementAuto:o}}(e,t,i,o))}};let vE=(()=>{class n{constructor(e,i,r){this._ngZone=r,this.update$$=new pt.x,this.positionElements=new Map,Ii(i)&&this._ngZone.runOutsideAngular(()=>{(0,Ia.T)(Tm(window,"scroll"),Tm(window,"resize"),st(0,KB),this.update$$).subscribe(()=>{this.positionElements.forEach(o=>{!function QX(n,t,e,i,r,o){!function $X(n,t){const e=n.instance.target,i=function VX(n){return{width:n.offsets.target.width,height:n.offsets.target.height,left:Math.floor(n.offsets.target.left),top:Math.round(n.offsets.target.top),bottom:Math.round(n.offsets.target.bottom),right:Math.floor(n.offsets.target.right)}}(n);n6(e,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${i.left}px, ${i.top}px, 0px)`},t),n.instance.arrow&&n6(n.instance.arrow,n.offsets.arrow,t),n.placementAuto&&(t?(t.setAttribute(e,"class",e.className.replace(/bs-popover-auto/g,`bs-popover-${n.placement}`)),t.setAttribute(e,"class",e.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${n.placement}`)),t.setAttribute(e,"class",e.className.replace(/\sauto/g,`s${n.placement}`)),e.className.match(/popover/g)&&t.addClass(e,"popover-auto"),e.className.match(/tooltip/g)&&t.addClass(e,"tooltip-auto")):(e.className=e.className.replace(/bs-popover-auto/g,`bs-popover-${n.placement}`),e.className=e.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${n.placement}`),e.className=e.className.replace(/\sauto/g,`s${n.placement}`),e.className.match(/popover/g)&&e.classList.add("popover-auto"),e.className.match(/tooltip/g)&&e.classList.add("tooltip-auto"))),t?t.setAttribute(e,"class",e.className.replace(/left|right|top|bottom/g,`${n.placement.split(" ")[0]}`)):e.className=e.className.replace(/left|right|top|bottom/g,`${n.placement.split(" ")[0]}`)}(KX.positionElements(n,t,e,i,r),o)}(rM(o.target),rM(o.element),o.attachment,o.appendToBody,this.options,e.createRenderer(null,null))})})})}position(e){this.addPositionElement(e)}addPositionElement(e){this.positionElements.set(rM(e.element),e)}calcPosition(){this.update$$.next()}deletePositionElement(e){this.positionElements.delete(rM(e))}setOptions(e){this.options=e}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.FYo),l.LFG(l.Lbi),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function rM(n){return n&&"string"==typeof n?document.querySelector(n):n instanceof l.SBq?n.nativeElement:n}let bE=(()=>{class n{constructor(e,i,r,o,c){this._componentFactoryResolver=e,this._ngZone=i,this._injector=r,this._posService=o,this._applicationRef=c}createLoader(e,i,r){return new PX(i,r,e,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l._Vd),l.LFG(l.R0b),l.LFG(l.zs3),l.LFG(vE),l.LFG(l.z2F))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),XX=(()=>{class n{constructor(){this.autoClose=!0}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),oM=(()=>{class n{static forRoot(e){return{ngModule:n,providers:[bE,vE,IX,{provide:XX,useValue:e||{autoClose:!0}}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();let sM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[kn]]}),n})(),aM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[kn]]}),n})(),lM=(()=>{class n{static forRoot(){return{ngModule:n,providers:[]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),r6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),o6=(()=>{class n{hide(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const s6={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,scroll:!1,data:{}};let JX=(()=>{class n{constructor(e,i){this.element=e,this.renderer=i,this.classNameBackDrop=!0,this._isShown=!1}get isAnimated(){return this._isAnimated}set isAnimated(e){this._isAnimated=e}get isShown(){return this._isShown}set isShown(e){this._isShown=e,e?(this.renderer.addClass(this.element.nativeElement,"in"),pE()||this.renderer.addClass(this.element.nativeElement,"show")):(this.renderer.removeClass(this.element.nativeElement,"in"),pE()||this.renderer.removeClass(this.element.nativeElement,"show"))}ngOnInit(){this.renderer.addClass(this.element.nativeElement,"fade"),class i6{constructor(){}static reflow(t){}static getStyles(t){let e=t.ownerDocument.defaultView;return(!e||!e.opener)&&(e=qr),e.getComputedStyle(t)}focusTrapModal(t,e){let i,r,o;i=e.nativeElement.querySelectorAll("a[href], button, textarea, input, select, form, mdb-select, mdb-auto-completer, mdb-checkbox, mdb-range-input"),r=i[0],o=i[i.length-1],("Tab"===t.key||9===t.keyCode)&&(t.shiftKey?Ig&&Ig.activeElement===r&&(o.focus(),t.preventDefault()):Ig&&Ig.activeElement===o&&(r.focus(),t.preventDefault()))}getClosestEl(t,e){for(;t&&t!==Ig;t=t.parentNode)if(t.matches&&t.matches(e))return t;return null}getCoords(t){const e=t.getBoundingClientRect(),i=Ig.body,r=Ig.documentElement,E=e.left+(qr.pageXOffset||r.scrollLeft||i.scrollLeft)-(r.clientLeft||i.clientLeft||0);return{top:Math.round(e.top+(qr.pageYOffset||r.scrollTop||i.scrollTop)-(r.clientTop||i.clientTop||0)),left:Math.round(E)}}}.reflow(this.element.nativeElement),this.isShown=!0}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mdb-modal-backdrop"]],hostVars:2,hostBindings:function(e,i){2&e&&l.ekj("modal-backdrop",i.classNameBackDrop)},decls:0,vars:0,template:function(e,i){},encapsulation:2}),n})(),eJ=(()=>{class n{constructor(e,i,r){this._renderer=r,this.modalClass="modal",this.tabindex=-1,this.role="dialog",this.modal=!0,this.isShown=!1,this.isModalHiding=!1,this._element=i,this.config=Object.assign({},e)}onClick(e){this.config.ignoreBackdropClick||"static"===this.config.backdrop||e.target!==this._element.nativeElement||(this.mdbModalService.setDismissReason("backdrop-click"),this.hide())}onEsc(){this.config.keyboard&&this.level===this.mdbModalService.getModalsCount()&&(this.mdbModalService.setDismissReason("esc"),this.hide())}ngOnInit(){this.config.animated&&this._renderer.addClass(this._element.nativeElement,"fade"),this._renderer.setStyle(this._element.nativeElement,"display","block"),window&&-1!==window.navigator.userAgent.indexOf("Edge")&&this.config&&-1===this.config.toString().indexOf("side-modal")||window&&-1!==window.navigator.userAgent.indexOf("Edge")&&this.config&&-1===this.config.toString().indexOf("modal-full-height")?(this.isShown=!0,this._renderer.addClass(this._element.nativeElement,pE()?"in":"show"),this._renderer.setStyle(this._element.nativeElement,"transition","transform 0.3s ease-out"),this._renderer.setStyle(this._element.nativeElement,"transform","translate(0, 25px)")):setTimeout(()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,pE()?"in":"show")},this.isAnimated?150:0),document&&document.body&&(1===this.mdbModalService.getModalsCount()&&(this.mdbModalService.checkScrollbar(),this.mdbModalService.setScrollbar()),this._renderer.addClass(document.body,"modal-open")),this.config.containerClass&&this.updateContainerClass(),this.config.scroll&&this._renderer.setStyle(this._element.nativeElement,"overflow-y","auto")}focusModalElement(){this.config.focus&&this._element.nativeElement.focus()}updateContainerClass(){if(this.config.containerClass){const i=this.config.containerClass.split(" ");for(let r=0;r<i.length;r++)this._renderer.addClass(this._element.nativeElement,i[r])}}ngOnDestroy(){this.isShown&&this.hide()}hide(){if(this.isModalHiding||!this.isShown)return;this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,pE()?"in":"show");const e=Array.from(this._element.nativeElement.querySelectorAll("iframe")),i=Array.from(this._element.nativeElement.querySelectorAll("video"));e.forEach(r=>{const o=r.getAttribute("src");this._renderer.setAttribute(r,"src",o)}),i.forEach(r=>{r.pause()}),setTimeout(()=>{this.isShown=!1,document&&document.body&&1===this.mdbModalService.getModalsCount()&&this._renderer.removeClass(document.body,"modal-open"),this.mdbModalService.hide(this.level),this.isModalHiding=!1},this.isAnimated?300:0)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(r6),l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mdb-modal-container"]],hostVars:4,hostBindings:function(e,i){1&e&&l.NdJ("click",function(o){return i.onClick(o)})("keydown.esc",function(){return i.onEsc()},!1,l.Jf7),2&e&&(l.Ikx("tabindex",i.tabindex),l.uIk("role",i.role),l.ekj("modal",i.modal))},ngContentSelectors:B5,decls:3,vars:2,consts:[["role","document","cdkTrapFocus",""],[1,"modal-content","modal-dynamic"]],template:function(e,i){1&e&&(l.F$t(),l.TgZ(0,"div",0)(1,"div",1),l.Hsn(2),l.qZA()()),2&e&&l.Tol("modal-dialog"+(i.config.class?" "+i.config.class:""))},directives:[z4],styles:[".img-fluid,.modal-dialog.cascading-modal.modal-avatar .modal-header,.video-fluid{max-width:100%;height:auto}.flex-center{display:flex;justify-content:center;align-items:center;height:100%}.flex-center p{margin:0}.flex-center ul{text-align:center}.flex-center ul li{margin-bottom:1rem}.flex-center ul li:last-of-type{margin-bottom:0}.hr-light{border-top:1px solid #fff}.hr-dark{border-top:1px solid #666}.w-responsive{width:75%}@media (max-width: 740px){.w-responsive{width:100%}}.collapsible-body{display:none}.jumbotron{box-shadow:0 2px 5px #00000029,0 2px 10px #0000001f;border-radius:.125rem;background-color:#fff}.bg-primary{background-color:#4285f4!important}a.bg-primary:hover,a.bg-primary:focus,button.bg-primary:hover,button.bg-primary:focus{background-color:#1266f1!important}.border-primary{border-color:#4285f4!important}.bg-danger{background-color:#ff3547!important}a.bg-danger:hover,a.bg-danger:focus,button.bg-danger:hover,button.bg-danger:focus{background-color:#ff0219!important}.border-danger{border-color:#ff3547!important}.bg-warning{background-color:#fb3!important}a.bg-warning:hover,a.bg-warning:focus,button.bg-warning:hover,button.bg-warning:focus{background-color:#fa0!important}.border-warning{border-color:#fb3!important}.bg-success{background-color:#00c851!important}a.bg-success:hover,a.bg-success:focus,button.bg-success:hover,button.bg-success:focus{background-color:#00953c!important}.border-success{border-color:#00c851!important}.bg-info{background-color:#33b5e5!important}a.bg-info:hover,a.bg-info:focus,button.bg-info:hover,button.bg-info:focus{background-color:#1a9bcb!important}.border-info{border-color:#33b5e5!important}.bg-default{background-color:#2bbbad!important}a.bg-default:hover,a.bg-default:focus,button.bg-default:hover,button.bg-default:focus{background-color:#219287!important}.border-default{border-color:#2bbbad!important}.bg-secondary{background-color:#a6c!important}a.bg-secondary:hover,a.bg-secondary:focus,button.bg-secondary:hover,button.bg-secondary:focus{background-color:#9540bf!important}.border-secondary{border-color:#a6c!important}.bg-dark{background-color:#212121!important}a.bg-dark:hover,a.bg-dark:focus,button.bg-dark:hover,button.bg-dark:focus{background-color:#080808!important}.border-dark{border-color:#212121!important}.bg-light{background-color:#e0e0e0!important}a.bg-light:hover,a.bg-light:focus,button.bg-light:hover,button.bg-light:focus{background-color:#c7c7c7!important}.border-light{border-color:#e0e0e0!important}.card-img-100{width:100px;height:100px}.card-img-64{width:64px;height:64px}.mml-1{margin-left:-.25rem!important}.flex-1{flex:1}body.modal-open{overflow:auto}body.scrollable{overflow-y:auto}.modal-dialog .modal-content{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;border:0;border-radius:.125rem}.modal-dialog .modal-content .modal-header{border-top-left-radius:.125rem;border-top-right-radius:.125rem}.modal-dialog.cascading-modal{margin-top:10%}.modal-dialog.cascading-modal .close{opacity:1;text-shadow:none;color:#fff;outline:0}.modal-dialog.cascading-modal .modal-header{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;margin:-2rem 1rem 1rem;border:none;border-radius:.125rem;padding:1.5rem;text-align:center}.modal-dialog.cascading-modal .modal-header .close{margin-right:1rem}.modal-dialog.cascading-modal .modal-header .title{margin-bottom:0;width:100%;font-size:1.25rem}.modal-dialog.cascading-modal .modal-header .title .fas,.modal-dialog.cascading-modal .modal-header .title .fab,.modal-dialog.cascading-modal .modal-header .title .far{margin-right:9px}.modal-dialog.cascading-modal .modal-header .social-buttons{margin-top:1.5rem}.modal-dialog.cascading-modal .modal-header .social-buttons a{font-size:1rem}.modal-dialog.cascading-modal .modal-c-tabs .md-tabs{box-shadow:0 2px 5px #00000029,0 2px 10px #0000001f;margin:-1.5rem 1rem 0;display:flex}.modal-dialog.cascading-modal .modal-c-tabs .md-tabs li{flex:1}.modal-dialog.cascading-modal .modal-c-tabs .md-tabs li a{text-align:center}.modal-dialog.cascading-modal .modal-c-tabs .tab-content{padding:1.7rem 0 0;box-shadow:unset}.modal-dialog.cascading-modal .modal-body,.modal-dialog.cascading-modal .modal-footer{padding-left:2rem;padding-right:2rem;color:#616161}.modal-dialog.cascading-modal .modal-body .additional-option,.modal-dialog.cascading-modal .modal-footer .additional-option{margin-top:1rem;text-align:center}.modal-dialog.cascading-modal.modal-avatar{margin-top:6rem}.modal-dialog.cascading-modal.modal-avatar .modal-header{box-shadow:none;margin:-6rem 0 -1rem}.modal-dialog.cascading-modal.modal-avatar .modal-header img{width:130px;box-shadow:0 8px 17px #0003,0 6px 20px #00000030;margin-left:auto;margin-right:auto}.modal-dialog.modal-notify .heading{margin:0;padding:.3rem;font-size:1.15rem;color:#fff}.modal-dialog.modal-notify .modal-header{box-shadow:0 2px 5px #00000029,0 2px 10px #0000001f;border:0}.modal-dialog.modal-notify .close{opacity:1}.modal-dialog.modal-notify .modal-body{padding:1.5rem;color:#616161}.modal-dialog.modal-notify.modal-primary .modal-header{background-color:#4285f4}.modal-dialog.modal-notify.modal-primary .fas,.modal-dialog.modal-notify.modal-primary .fab,.modal-dialog.modal-notify.modal-primary .far{color:#4285f4}.modal-dialog.modal-notify.modal-primary .badge{background-color:#4285f4}.modal-dialog.modal-notify.modal-primary .btn .fas,.modal-dialog.modal-notify.modal-primary .btn .fab,.modal-dialog.modal-notify.modal-primary .btn .far{color:#fff}.modal-dialog.modal-notify.modal-primary .btn.btn-outline-primary .fas,.modal-dialog.modal-notify.modal-primary .btn.btn-outline-primary .fab,.modal-dialog.modal-notify.modal-primary .btn.btn-outline-primary .far{color:#4285f4}.modal-dialog.modal-notify.modal-danger .modal-header{background-color:#ff3547}.modal-dialog.modal-notify.modal-danger .fas,.modal-dialog.modal-notify.modal-danger .fab,.modal-dialog.modal-notify.modal-danger .far{color:#ff3547}.modal-dialog.modal-notify.modal-danger .badge{background-color:#ff3547}.modal-dialog.modal-notify.modal-danger .btn .fas,.modal-dialog.modal-notify.modal-danger .btn .fab,.modal-dialog.modal-notify.modal-danger .btn .far{color:#fff}.modal-dialog.modal-notify.modal-danger .btn.btn-outline-danger .fas,.modal-dialog.modal-notify.modal-danger .btn.btn-outline-danger .fab,.modal-dialog.modal-notify.modal-danger .btn.btn-outline-danger .far{color:#ff3547}.modal-dialog.modal-notify.modal-warning .modal-header{background-color:#fb3}.modal-dialog.modal-notify.modal-warning .fas,.modal-dialog.modal-notify.modal-warning .fab,.modal-dialog.modal-notify.modal-warning .far{color:#fb3}.modal-dialog.modal-notify.modal-warning .badge{background-color:#fb3}.modal-dialog.modal-notify.modal-warning .btn .fas,.modal-dialog.modal-notify.modal-warning .btn .fab,.modal-dialog.modal-notify.modal-warning .btn .far{color:#fff}.modal-dialog.modal-notify.modal-warning .btn.btn-outline-warning .fas,.modal-dialog.modal-notify.modal-warning .btn.btn-outline-warning .fab,.modal-dialog.modal-notify.modal-warning .btn.btn-outline-warning .far{color:#fb3}.modal-dialog.modal-notify.modal-success .modal-header{background-color:#00c851}.modal-dialog.modal-notify.modal-success .fas,.modal-dialog.modal-notify.modal-success .fab,.modal-dialog.modal-notify.modal-success .far{color:#00c851}.modal-dialog.modal-notify.modal-success .badge{background-color:#00c851}.modal-dialog.modal-notify.modal-success .btn .fas,.modal-dialog.modal-notify.modal-success .btn .fab,.modal-dialog.modal-notify.modal-success .btn .far{color:#fff}.modal-dialog.modal-notify.modal-success .btn.btn-outline-success .fas,.modal-dialog.modal-notify.modal-success .btn.btn-outline-success .fab,.modal-dialog.modal-notify.modal-success .btn.btn-outline-success .far{color:#00c851}.modal-dialog.modal-notify.modal-info .modal-header{background-color:#33b5e5}.modal-dialog.modal-notify.modal-info .fas,.modal-dialog.modal-notify.modal-info .fab,.modal-dialog.modal-notify.modal-info .far{color:#33b5e5}.modal-dialog.modal-notify.modal-info .badge{background-color:#33b5e5}.modal-dialog.modal-notify.modal-info .btn .fas,.modal-dialog.modal-notify.modal-info .btn .fab,.modal-dialog.modal-notify.modal-info .btn .far{color:#fff}.modal-dialog.modal-notify.modal-info .btn.btn-outline-info .fas,.modal-dialog.modal-notify.modal-info .btn.btn-outline-info .fab,.modal-dialog.modal-notify.modal-info .btn.btn-outline-info .far{color:#33b5e5}.modal{padding-right:0!important}@media (min-width: 768px){.modal .modal-dialog.modal-top{top:0}.modal .modal-dialog.modal-left{left:0}.modal .modal-dialog.modal-right{right:0}.modal .modal-dialog.modal-bottom{bottom:0}.modal .modal-dialog.modal-top-left{top:10px;left:10px}.modal .modal-dialog.modal-top-right{top:10px;right:10px}.modal .modal-dialog.modal-bottom-left{bottom:10px;left:10px}.modal .modal-dialog.modal-bottom-right{bottom:10px;right:10px}}.modal.fade.top:not(.show) .modal-dialog{transform:translate3d(0,-25%,0)}.modal.fade.left:not(.show) .modal-dialog{transform:translate3d(-25%,0,0)}.modal.fade.right:not(.show) .modal-dialog{transform:translate3d(25%,0,0)}.modal.fade.bottom:not(.show) .modal-dialog{transform:translate3d(0,25%,0)}@media (min-width: 992px){.modal.modal-scrolling{position:relative}.modal.modal-scrolling .modal-dialog{position:fixed;z-index:1050}.modal.modal-content-clickable{top:auto;bottom:auto}.modal.modal-content-clickable .modal-dialog{position:fixed}.modal .modal-fluid{width:100%;max-width:100%}.modal .modal-fluid .modal-content{width:100%}.modal .modal-frame{position:absolute;margin:0!important;width:100%;max-width:100%!important}.modal .modal-frame.modal-bottom{bottom:0}.modal .modal-frame.modal-dialog{height:inherit}.modal .modal-full-height{position:absolute;display:flex;margin:0;width:400px;height:auto;min-height:100%;top:0;right:0}.modal .modal-full-height.modal-top,.modal .modal-full-height.modal-bottom{display:block;width:100%;max-width:100%;height:auto}.modal .modal-full-height.modal-top{bottom:auto}.modal .modal-full-height.modal-bottom{min-height:0;top:auto}.modal .modal-full-height .modal-content{width:100%}.modal .modal-full-height.modal-lg{width:90%;max-width:90%}}@media (min-width: 992px) and (min-width: 992px){.modal .modal-full-height.modal-lg{width:800px;max-width:800px}}@media (min-width: 992px) and (min-width: 1200px){.modal .modal-full-height.modal-lg{width:1000px;max-width:1000px}}@media (min-width: 992px){.modal .modal-side{position:absolute;bottom:10px;right:10px;margin:0;width:400px}}body.scrollable{overflow-y:auto}.modal-dialog .modal-content{border:0}.modal{padding-right:0!important}@media (min-width: 768px){.modal .modal-dialog.modal-top{top:0;left:0;right:0}.modal .modal-dialog.modal-left{left:0}.modal .modal-dialog.modal-right{right:0}.modal .modal-dialog.modal-bottom>.modal-content{position:absolute;bottom:0}.modal .modal-dialog.modal-top-left{top:10px;left:10px}.modal .modal-dialog.modal-top-right{top:10px;right:10px}.modal .modal-dialog.modal-bottom-left{left:10px;bottom:10px}.modal .modal-dialog.modal-bottom-right{right:10px;bottom:10px}}.modal .modal-side.modal-top{top:0}.modal .modal-side.modal-left{left:0}.modal .modal-side.modal-right{right:0}.modal .modal-side.modal-bottom{bottom:0}.modal .modal-side.modal-top-left{top:10px;left:10px}.modal .modal-side.modal-top-right{top:10px;right:10px}.modal .modal-side.modal-bottom-left{left:10px;bottom:10px}.modal .modal-side.modal-bottom-right{right:10px;bottom:10px}.modal.fade.top:not(.show) .modal-dialog{transform:translate3d(0,-25%,0)}.modal.fade.left:not(.show) .modal-dialog{transform:translate3d(-25%,0,0)}.modal.fade.right:not(.show) .modal-dialog{transform:translate3d(25%,0,0)}.modal.fade.bottom:not(.show) .modal-dialog{transform:translate3d(0,25%,0)}.modal.fade.in{opacity:1}.modal.fade.in .modal-dialog{transform:translate(0)}.modal.fade.in .modal-dialog .relative{display:inline-block}.modal.modal-scrolling{position:relative}.modal.modal-scrolling .modal-dialog{position:fixed;z-index:1050}.modal.modal-content-clickable{top:auto;bottom:auto}.modal.modal-content-clickable .modal-dialog{position:fixed}.modal .modal-fluid{width:100%;max-width:100%}.modal .modal-fluid .modal-content{width:100%}.modal .modal-frame{position:absolute;width:100%;max-width:100%;margin:0}@media (max-width: 767px){.modal .modal-frame{padding:.5rem}}.modal .modal-frame.modal-bottom{bottom:0}.modal .modal-full-height{display:flex;position:absolute;width:400px;min-height:100%;margin:0;top:0;right:0}@media (max-width: 576px){.modal .modal-full-height{width:100%;padding:.5rem}}@media (max-width: 992px){.modal .modal-full-height{width:100%;height:unset;position:unset}}@media (max-width: 992px){.modal .modal-full-height.modal-top,.modal .modal-full-height.modal-left,.modal .modal-full-height.modal-right{margin:1.75rem auto;min-height:unset}}@media (max-width: 768px){.modal .modal-full-height.modal-bottom{margin-top:1.75rem}}@media (min-width: 768px) and (max-width: 992px){.modal .modal-full-height.modal-bottom{margin-bottom:1.75rem}.modal .modal-full-height.modal-bottom .modal-content{bottom:1rem}}@media (max-width: 992px){.modal .modal-full-height.modal-top,.modal .modal-full-height.modal-bottom,.modal .modal-full-height.modal-left,.modal .modal-full-height.modal-right{margin-left:auto;margin-right:auto}}.modal .modal-full-height.modal-top,.modal .modal-full-height.modal-bottom{display:block;width:100%;height:auto}.modal .modal-full-height.modal-top{bottom:auto}.modal .modal-full-height.modal-bottom{bottom:0}.modal .modal-full-height .modal-content{width:100%}.modal .modal-full-height.modal-lg{max-width:90%;width:90%}@media (min-width: 992px){.modal .modal-full-height.modal-lg{max-width:800px;width:800px}}@media (min-width: 1200px){.modal .modal-full-height.modal-lg{max-width:1000px;width:1000px}}.modal .modal-side{position:absolute;right:10px;bottom:10px;margin:0;min-width:100px}@media (max-width: 768px){.modal .modal-side{padding-left:.5rem}}.modal-dialog.cascading-modal{margin-top:10%}.modal-dialog.cascading-modal .modal-header{text-align:center;margin:-2rem 1rem 1rem;padding:1.5rem;border:none;flex-direction:column}.modal-dialog.cascading-modal .modal-header .close{margin-right:2.5rem}.modal-dialog.cascading-modal .modal-header.white-text .close{color:#fff;opacity:1}.modal-dialog.cascading-modal .modal-header .title{width:100%;margin-bottom:0;font-size:1.25rem}.modal-dialog.cascading-modal .modal-header .title .fa{margin-right:9px}.modal-dialog.cascading-modal .modal-header .social-buttons{margin-top:1.5rem}.modal-dialog.cascading-modal .modal-header .social-buttons a{font-size:1rem}.modal-dialog.cascading-modal .modal-c-tabs .md-tabs{margin:-1.5rem 1rem 0}.modal-dialog.cascading-modal .modal-c-tabs .tab-content{padding:1.7rem 0 0}.modal-dialog.cascading-modal .modal-body,.modal-dialog.cascading-modal .modal-footer{color:#616161;padding-right:2rem;padding-left:2rem}.modal-dialog.cascading-modal .modal-body .additional-option,.modal-dialog.cascading-modal .modal-footer .additional-option{text-align:center;margin-top:1rem}.modal-dialog.cascading-modal.modal-avatar{margin-top:6rem}.modal-dialog.cascading-modal.modal-avatar .modal-header{margin:-6rem 2rem -1rem}.modal-dialog.cascading-modal.modal-avatar .modal-header img{width:130px}.modal-dialog.modal-notify .heading{margin:0;padding:.3rem;color:#fff;font-size:1.15rem}.modal-dialog.modal-notify .modal-header{border:0}.modal-dialog.modal-notify .close{opacity:1}.modal-dialog.modal-notify .modal-body{padding:1.5rem;color:#616161}.modal-dialog.modal-notify .btn-outline-secondary-modal{background-color:transparent}.modal-dialog.modal-notify.modal-info .modal-header{background-color:#5394ff}.modal-dialog.modal-notify.modal-info .fa{color:#5394ff}.modal-dialog.modal-notify.modal-info .badge{background-color:#5394ff}.modal-dialog.modal-notify.modal-info .btn-primary-modal{background:#5394ff}.modal-dialog.modal-notify.modal-info .btn-primary-modal:hover,.modal-dialog.modal-notify.modal-info .btn-primary-modal:focus,.modal-dialog.modal-notify.modal-info .btn-primary-modal:active{background-color:#6da4ff!important}.modal-dialog.modal-notify.modal-info .btn-primary-modal.active{background-color:#0059ec!important}.modal-dialog.modal-notify.modal-info .btn-outline-secondary-modal{border:2px solid #5394ff;color:#5394ff!important}.modal-dialog.modal-notify.modal-warning .modal-header{background-color:#ff8e38}.modal-dialog.modal-notify.modal-warning .fa{color:#ff8e38}.modal-dialog.modal-notify.modal-warning .badge{background-color:#ff8e38}.modal-dialog.modal-notify.modal-warning .btn-primary-modal{background:#ff8e38}.modal-dialog.modal-notify.modal-warning .btn-primary-modal:hover,.modal-dialog.modal-notify.modal-warning .btn-primary-modal:focus,.modal-dialog.modal-notify.modal-warning .btn-primary-modal:active{background-color:#ff9c52!important}.modal-dialog.modal-notify.modal-warning .btn-primary-modal.active{background-color:#d15a00!important}.modal-dialog.modal-notify.modal-warning .btn-outline-secondary-modal{border:2px solid #ff8e38;color:#ff8e38!important}.modal-dialog.modal-notify.modal-success .modal-header{background-color:#01d36b}.modal-dialog.modal-notify.modal-success .fa{color:#01d36b}.modal-dialog.modal-notify.modal-success .badge{background-color:#01d36b}.modal-dialog.modal-notify.modal-success .btn-primary-modal{background:#01d36b}.modal-dialog.modal-notify.modal-success .btn-primary-modal:hover,.modal-dialog.modal-notify.modal-success .btn-primary-modal:focus,.modal-dialog.modal-notify.modal-success .btn-primary-modal:active{background-color:#01ec78!important}.modal-dialog.modal-notify.modal-success .btn-primary-modal.active{background-color:#016d38!important}.modal-dialog.modal-notify.modal-success .btn-outline-secondary-modal{border:2px solid #01d36b;color:#01d36b!important}.modal-dialog.modal-notify.modal-danger .modal-header{background-color:#ff4b4b}.modal-dialog.modal-notify.modal-danger .fa{color:#ff4b4b}.modal-dialog.modal-notify.modal-danger .badge{background-color:#ff4b4b}.modal-dialog.modal-notify.modal-danger .btn-primary-modal{background:#ff4b4b}.modal-dialog.modal-notify.modal-danger .btn-primary-modal:hover,.modal-dialog.modal-notify.modal-danger .btn-primary-modal:focus,.modal-dialog.modal-notify.modal-danger .btn-primary-modal:active{background-color:#ff6565!important}.modal-dialog.modal-notify.modal-danger .btn-primary-modal.active{background-color:#e40000!important}.modal-dialog.modal-notify.modal-danger .btn-outline-secondary-modal{border:2px solid #ff4b4b;color:#ff4b4b!important}.modal-sm .modal-content{margin:0 auto;max-width:300px}@media (min-width: 768px){.modal-sm{max-width:300px}}.modal .modal-fluid,.modal .modal-frame{width:100%;max-width:100%}.modal-ext .modal-content .modal-header{text-align:center}.modal-ext .modal-content .options{float:left}.modal-ext .modal-content .modal-body .text-xs-center fieldset{margin-top:20px}.modal-ext .modal-content .call{margin-top:1rem}.modal-ext .modal-content .modal-body{padding:2rem 2rem 1rem}.modal-content:not(.card-image) .close{position:absolute;right:15px}.modal-cart li p{margin:5px;font-weight:400}.modal-cart li p .badge{margin-left:10px;margin-top:3px;font-weight:400;position:absolute}.modal-cart li p .quantity{font-size:16px;margin-right:7px;font-weight:300}.modal-cart .cartPageLink{margin-left:10px}.modal-cart .cartPageLink a{text-decoration:underline;color:#666}.modal-cart .total{float:right;font-weight:400}.cf-phone{margin-left:7px}.side-modal{position:fixed;width:400px;height:100%;width:100%;z-index:9999}.side-modal .modal-dialog{position:absolute;bottom:10px;right:10px;width:400px;margin:10px}@media (max-width: 760px){.side-modal .modal-dialog{display:none}}.side-modal .modal-header{padding:1rem}.side-modal .modal-header .heading{margin:0;padding:0}.side-modal .modal-content{border:none}.modal-dynamic>:first-child{display:flex;flex-direction:column;height:100%}.side-modal.fade:not(.show) .modal-dialog{transform:translate3d(25%,0,0)}.transparent-bd{opacity:0!important}.modal-backdrop.in,.modal-backdrop{opacity:.5}#exampleModalScroll{overflow-x:hidden;overflow-y:auto}.modal-open .modal{overflow-x:hidden;overflow-y:hidden}.form-dark .card-image{background-size:100%}\n"],encapsulation:2}),n})(),tJ=(()=>{class n{constructor(e,i){this.clf=i,this.config=s6,this.open=new l.vpe,this.opened=new l.vpe,this.close=new l.vpe,this.closed=new l.vpe,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.lastDismissReason="",this.loaders=[],this._backdropLoader=this.clf.createLoader(this.el,this.vcr,this.renderer),this.renderer=e.createRenderer(null,null)}show(e,i){return this.modalsCount++,this._createLoaders(),this.config=Object.assign({},s6,i),this._showBackdrop(),this.lastDismissReason=null,this._showModal(e)}hide(e){1===this.modalsCount&&(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1?this.modalsCount-1:0,setTimeout(()=>{this._hideModal(e),this.removeLoaders(e)},this.config.animated?150:0)}_showBackdrop(){const e=this.config.backdrop||"static"===this.config.backdrop,i=!this.backdropRef||!this.backdropRef.instance.isShown;1===this.modalsCount&&(this.removeBackdrop(),e&&i&&(this._backdropLoader.attach(JX).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){this.backdropRef&&(this.backdropRef.instance.isShown=!1,setTimeout(()=>this.removeBackdrop(),this.config.animated?150:0))}_showModal(e){const i=this.loaders[this.loaders.length-1],r=new o6,o=i.provide({provide:r6,useValue:this.config}).provide({provide:o6,useValue:r}).attach(eJ).to("body").show({content:e,isAnimated:this.config.animated,data:this.config.data,mdbModalService:this});return o.instance.focusModalElement(),o.instance.level=this.getModalsCount(),r.hide=()=>{o.instance.hide()},r.content=i.getInnerComponent()||null,r}_hideModal(e){const i=this.loaders[e-1];i&&i.hide()}getModalsCount(){return this.modalsCount}setDismissReason(e){this.lastDismissReason=e}removeBackdrop(){this._backdropLoader.hide(),this.backdropRef=null}checkScrollbar(){this.isBodyOverflowing=document.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){!document||(this.originalBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")||"0",10))}resetScrollbar(){document.body.style.paddingRight=this.originalBodyPadding+"px"}getScrollbarWidth(){const e=this.renderer.createElement("div");this.renderer.addClass(e,"modal-scrollbar-measure"),this.renderer.appendChild(document.body,e);const i=e.offsetWidth-e.clientWidth;return this.renderer.removeChild(document.body,e),i}_createLoaders(){const e=this.clf.createLoader(this.el,this.vcr,this.renderer);this.copyEvent(e.onBeforeShow,this.open),this.copyEvent(e.onShown,this.opened),this.copyEvent(e.onBeforeHide,this.close),this.copyEvent(e.onHidden,this.closed),this.loaders.push(e)}removeLoaders(e){this.loaders.splice(e-1,1),this.loaders.forEach((i,r)=>{i.instance.level=r+1})}copyEvent(e,i){e.subscribe(()=>{i.emit(this.lastDismissReason)})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.FYo),l.LFG(bE))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),uM=(()=>{class n{static forRoot(){return{ngModule:n,providers:[tJ,bE,vE]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[$L]]}),n})(),nJ=(()=>{class n{constructor(){this.navbarLinkClicks=new pt.x}getNavbarLinkClicks(){return this.navbarLinkClicks.asObservable()}setNavbarLinkClicks(){this.navbarLinkClicks.next()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),dM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[nJ],imports:[[kn]]}),n})(),iJ=(()=>{class n{constructor(){this.placement="top",this.triggers="click"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),hM=(()=>{class n{static forRoot(){return{ngModule:n,providers:[iJ,bE,vE]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[kn]]}),n})(),rJ=(()=>{class n{constructor(){this._dataSource=[],this._dataSourceChanged=new pt.x}addRow(e){this.getDataSource().push(e)}addRowAfter(e,i){this.getDataSource().splice(e,0,i)}removeRow(e){this.getDataSource().splice(e,1)}rowRemoved(){return new zn.y(i=>{i.next(!0)})}removeLastRow(){this.getDataSource().pop()}getDataSource(){return this._dataSource}setDataSource(e){this._dataSource=e,this._dataSourceChanged.next(this.getDataSource())}dataSourceChange(){return this._dataSourceChanged}filterLocalDataBy(e){return this.getDataSource().filter(i=>Object.keys(i).some(r=>{if(i[r])return i[r].toString().toLowerCase().includes(e)}))}searchLocalDataBy(e){return e?e?this.filterLocalDataBy(e.toLowerCase()):void 0:this.getDataSource()}searchDataObservable(e){return new zn.y(r=>{r.next(this.searchLocalDataBy(e))})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[rJ],imports:[[kn]]}),n})(),oJ=(()=>{class n{constructor(){this.placement="top",this.triggers="hover focus"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),pM=(()=>{class n{static forRoot(){return{ngModule:n,providers:[oJ,bE,vE]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[kn]]}),n})(),mM=(()=>{class n{static forRoot(){return{ngModule:n,providers:[]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),gM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[kn]]}),n})(),sJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[fE,mM.forRoot(),lM.forRoot(),dM,oM.forRoot(),JT.forRoot(),eM,nM.forRoot(),uM.forRoot(),pM.forRoot(),hM.forRoot(),sM,XT.forRoot(),tM,fM,KT,QT,aM,gM],fE,XT,mM,lM,dM,oM,JT,eM,nM,uM,pM,hM,sM,tM,fM,KT,QT,aM,gM]}),n})(),aJ=(()=>{class n{static forRoot(){return{ngModule:sJ}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[fE,XT,mM,lM,dM,oM,JT,eM,nM,uM,pM,hM,sM,tM,fM,KT,QT,aM,gM]}),n})();new l.OlP("ngx-mat-file-input.config");let cJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Rm]}),n})();const fr=void 0,dJ=["fr",[["AM","PM"],fr,fr],fr,[["D","L","M","M","J","V","S"],["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],["di","lu","ma","me","je","ve","sa"]],fr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c."],["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"]],fr,[["av. J.-C.","ap. J.-C."],fr,["avant J\xe9sus-Christ","apr\xe8s J\xe9sus-Christ"]],1,[6,0],["dd/MM/y","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}","{1}, {0}","{1} '\xe0' {0}",fr],[",","\u202f",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0\xa0%","#,##0.00\xa0\xa4","#E0"],"EUR","\u20ac","euro",{ARS:["$AR","$"],AUD:["$AU","$"],BEF:["FB"],BMD:["$BM","$"],BND:["$BN","$"],BZD:["$BZ","$"],CAD:["$CA","$"],CLP:["$CL","$"],CNY:[fr,"\xa5"],COP:["$CO","$"],CYP:["\xa3CY"],EGP:[fr,"\xa3E"],FJD:["$FJ","$"],FKP:["\xa3FK","\xa3"],FRF:["F"],GBP:["\xa3GB","\xa3"],GIP:["\xa3GI","\xa3"],HKD:[fr,"$"],IEP:["\xa3IE"],ILP:["\xa3IL"],ITL:["\u20a4IT"],JPY:[fr,"\xa5"],KMF:[fr,"FC"],LBP:["\xa3LB","\xa3L"],MTP:["\xa3MT"],MXN:["$MX","$"],NAD:["$NA","$"],NIO:[fr,"$C"],NZD:["$NZ","$"],PHP:[fr,"\u20b1"],RHD:["$RH"],RON:[fr,"L"],RWF:[fr,"FR"],SBD:["$SB","$"],SGD:["$SG","$"],SRD:["$SR","$"],TOP:[fr,"$T"],TTD:["$TT","$"],TWD:[fr,"NT$"],USD:["$US","$"],UYU:["$UY","$"],WST:["$WS"],XCD:[fr,"$"],XPF:["FCFP"],ZMW:[fr,"Kw"]},"ltr",function uJ(n){const e=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length,r=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return 0===e||1===e?1:0===r&&0!==e&&e%1e6==0&&0===i||!(r>=0&&r<=5)?4:5}];let hJ=(()=>{class n{constructor(){!function Pt(n,t,e){(0,l.dwT)(n,t,e)}(dJ)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[mY]}),n.\u0275inj=l.cJS({providers:[{provide:l.soG,useValue:"fr-FR"},yL,SL,Zv,NV,DV,k1,Sm],imports:[[tl,XG,IW,WB,j6,Yi.hO.initializeApp({apiKey:"AIzaSyBiOIRHpkgxTpgUkT_Z3UJv7ccWHAcEvWM",authDomain:"technicien-fibre-project.firebaseapp.com",databaseURL:"https://technicien-fibre-project-default-rtdb.europe-west1.firebasedatabase.app",projectId:"technicien-fibre-project",storageBucket:"technicien-fibre-project.appspot.com",messagingSenderId:"440216714195",appId:"1:440216714195:web:d15cac034a4fb5192f8d26",measurementId:"G-RCY150N2EK"}),VQ,kW,hY,U2,zB,XQ,mV,_R,rX,cq,cJ,aJ.forRoot(),A8,_z,GW,CW,l4.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"})]]}),n})();try{self["workbox:window:6.5.2"]&&_()}catch(n){}function c6(n,t){return new Promise(function(e){var i=new MessageChannel;i.port1.onmessage=function(r){e(r.data)},n.postMessage(t,[i.port2])})}function d6(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}try{self["workbox:core:6.5.2"]&&_()}catch(n){}var cF=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})};function uF(n,t){var e=location.href;return new URL(n,e).href===new URL(t,e).href}var yE=function(n,t){this.type=n,Object.assign(this,t)};function _M(n,t,e){return e?t?t(n):n:(n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n)}function pJ(){}var mJ={type:"SKIP_WAITING"};function h6(n,t){if(!t)return n&&n.then?n.then(pJ):Promise.resolve()}var gJ=function(n){var t,e;function i(p,b){var E,D;return void 0===b&&(b={}),(E=n.call(this)||this).nn={},E.tn=0,E.rn=new cF,E.en=new cF,E.on=new cF,E.un=0,E.an=new Set,E.cn=function(){var R=E.fn,N=R.installing;E.tn>0||!uF(N.scriptURL,E.sn.toString())||performance.now()>E.un+6e4?(E.vn=N,R.removeEventListener("updatefound",E.cn)):(E.hn=N,E.an.add(N),E.rn.resolve(N)),++E.tn,N.addEventListener("statechange",E.ln)},E.ln=function(R){var N=E.fn,B=R.target,K=B.state,ce=B===E.vn,He={sw:B,isExternal:ce,originalEvent:R};!ce&&E.mn&&(He.isUpdate=!0),E.dispatchEvent(new yE(K,He)),"installed"===K?E.wn=self.setTimeout(function(){"installed"===K&&N.waiting===B&&E.dispatchEvent(new yE("waiting",He))},200):"activating"===K&&(clearTimeout(E.wn),ce||E.en.resolve(B))},E.dn=function(R){var N=E.hn,B=N!==navigator.serviceWorker.controller;E.dispatchEvent(new yE("controlling",{isExternal:B,originalEvent:R,sw:N,isUpdate:E.mn})),B||E.on.resolve(N)},E.gn=(D=function(R){var N=R.data,B=R.ports,K=R.source;return _M(E.getSW(),function(){E.an.has(K)&&E.dispatchEvent(new yE("message",{data:N,originalEvent:R,ports:B,sw:K}))})},function(){for(var R=[],N=0;N<arguments.length;N++)R[N]=arguments[N];try{return Promise.resolve(D.apply(this,R))}catch(B){return Promise.reject(B)}}),E.sn=p,E.nn=b,navigator.serviceWorker.addEventListener("message",E.gn),E}e=n,(t=i).prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e;var o,d=i.prototype;return d.register=function(p){var N,B,b=(void 0===p?{}:p).immediate,E=void 0!==b&&b;try{var D=this;return N=function(){return D.mn=Boolean(navigator.serviceWorker.controller),D.yn=D.pn(),_M(D.bn(),function(R){D.fn=R,D.yn&&(D.hn=D.yn,D.en.resolve(D.yn),D.on.resolve(D.yn),D.yn.addEventListener("statechange",D.ln,{once:!0}));var N=D.fn.waiting;return N&&uF(N.scriptURL,D.sn.toString())&&(D.hn=N,Promise.resolve().then(function(){D.dispatchEvent(new yE("waiting",{sw:N,wasWaitingBeforeRegister:!0}))}).then(function(){})),D.hn&&(D.rn.resolve(D.hn),D.an.add(D.hn)),D.fn.addEventListener("updatefound",D.cn),navigator.serviceWorker.addEventListener("controllerchange",D.dn),D.fn})},(B=function(){if(!E&&"complete"!==document.readyState)return h6(new Promise(function(R){return window.addEventListener("load",R)}))}())&&B.then?B.then(N):N()}catch(R){return Promise.reject(R)}},d.update=function(){try{return this.fn?h6(this.fn.update()):void 0}catch(p){return Promise.reject(p)}},d.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},d.messageSW=function(p){try{return _M(this.getSW(),function(b){return c6(b,p)})}catch(b){return Promise.reject(b)}},d.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&c6(this.fn.waiting,mJ)},d.pn=function(){var p=navigator.serviceWorker.controller;return p&&uF(p.scriptURL,this.sn.toString())?p:void 0},d.bn=function(){try{var p=this;return function(b,E){try{var D=_M(navigator.serviceWorker.register(p.sn,p.nn),function(b){return p.un=performance.now(),b})}catch(R){return E(R)}return D&&D.then?D.then(void 0,E):D}(0,function(b){throw b})}catch(b){return Promise.reject(b)}},(o=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&function u6(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}(i.prototype,o),i}(function(){function n(){this.Pn=new Map}var t=n.prototype;return t.addEventListener=function(e,i){this.Sn(e).add(i)},t.removeEventListener=function(e,i){this.Sn(e).delete(i)},t.dispatchEvent=function(e){e.target=this;for(var i,r=function fJ(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(r,o){if(r){if("string"==typeof r)return d6(r,o);var c=Object.prototype.toString.call(r).slice(8,-1);return"Object"===c&&r.constructor&&(c=r.constructor.name),"Map"===c||"Set"===c?Array.from(r):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?d6(r,o):void 0}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0;return function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(e=n[Symbol.iterator]()).next.bind(e)}(this.Sn(e.type));!(i=r()).done;)(0,i.value)(e)},t.Sn=function(e){return this.Pn.has(e)||this.Pn.set(e,new Set),this.Pn.get(e)},n}());(0,l.G48)(),Bu().bootstrapModule(hJ).then(n=>function _J(){if("serviceWorker"in navigator){const n=new gJ("service-worker.js");n.addEventListener("activated",t=>{t.isUpdate?console.log("Service worker activated!"):console.log("Service worker activated for the first time!")}),n.addEventListener("waiting",t=>{console.log("A new service worker has installed, but it can't activateuntil all tabs running the current version have fully unloaded.")}),n.addEventListener("installed",t=>{t.isUpdate?console.log("Service worker installed"):console.log("Service worker installed for the first time")}),n.register()}}()).catch(n=>console.error(n))},5867:(dt,Ie,V)=>{V.d(Ie,{C6:()=>l.getApps,Mq:()=>l.getApp});var l=V(9681);(0,l.registerVersion)("firebase","9.6.11","app")},127:(dt,Ie,V)=>{V.d(Ie,{Z:()=>l.Z});var l=V(3942);l.Z.registerVersion("firebase","9.6.11","app-compat")},820:(dt,Ie,V)=>{V.r(Ie);var l=V(5861),ee=V(3942),U=V(2090),ue=V(9681),re=V(655),ye=V(1877),ie=V(4859);const Fe=function Qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},je=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},_e=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ot=new ye.Yd("@firebase/auth");function Je(y,...m){ot.logLevel<=ye.in.ERROR&&ot.error(`Auth (${ue.SDK_VERSION}): ${y}`,...m)}function Me(y,...m){throw qe(y,...m)}function Ee(y,...m){return qe(y,...m)}function xe(y,m,v){const C=Object.assign(Object.assign({},je()),{[m]:v});return new U.LL("auth","Firebase",C).create(m,{appName:y.name})}function Ze(y,m,v){if(!(m instanceof v))throw v.name!==m.constructor.name&&Me(y,"argument-error"),xe(y,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qe(y,...m){if("string"!=typeof y){const v=m[0],C=[...m.slice(1)];return C[0]&&(C[0].appName=y.name),y._errorFactory.create(v,...C)}return _e.create(y,...m)}function se(y,m,...v){if(!y)throw qe(m,...v)}function X(y){const m="INTERNAL ASSERTION FAILED: "+y;throw Je(m),new Error(m)}function ae(y,m){y||X(m)}const we=new Map;function le(y){ae(y instanceof Function,"Expected a class definition");let m=we.get(y);return m?(ae(m instanceof y,"Instance stored in cache mismatched with class"),m):(m=new y,we.set(y,m),m)}function At(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function on(){return"http:"===Jn()||"https:"===Jn()}function Jn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class bn{constructor(m,v){this.shortDelay=m,this.longDelay=v,ae(v>m,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function ht(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(on()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function yn(y,m){ae(y.emulator,"Emulator should always be set here");const{url:v}=y.emulator;return m?`${v}${m.startsWith("/")?m.slice(1):m}`:v}class Wr{static initialize(m,v,C){this.fetchImpl=m,v&&(this.headersImpl=v),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void X("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void X("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void X("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const un={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Eo=new bn(3e4,6e4);function sn(y,m){return y.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:y.tenantId}):m}function Wt(y,m,v,C){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,l.Z)(function*(y,m,v,C,k={}){return pr(y,k,(0,l.Z)(function*(){let F={},Z={};C&&("GET"===m?Z=C:F={body:JSON.stringify(C)});const ve=(0,U.xO)(Object.assign({key:y.config.apiKey},Z)).slice(1),Ve=yield y._getAdditionalHeaders();return Ve["Content-Type"]="application/json",y.languageCode&&(Ve["X-Firebase-Locale"]=y.languageCode),Wr.fetch()(Ji(y,y.config.apiHost,v,ve),Object.assign({method:m,headers:Ve,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function pr(y,m,v){return ws.apply(this,arguments)}function ws(){return(ws=(0,l.Z)(function*(y,m,v){y._canInitEmulator=!1;const C=Object.assign(Object.assign({},un),m);try{const k=new Wo(y),F=yield Promise.race([v(),k.promise]);k.clearNetworkTimeout();const Z=yield F.json();if("needConfirmation"in Z)throw Do(y,"account-exists-with-different-credential",Z);if(F.ok&&!("errorMessage"in Z))return Z;{const ve=F.ok?Z.errorMessage:Z.error.message,[Ve,it]=ve.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw Do(y,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Ve)throw Do(y,"email-already-in-use",Z);const wt=C[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(it)throw xe(y,wt,it);Me(y,wt)}}catch(k){if(k instanceof U.ZR)throw k;Me(y,"network-request-failed")}})).apply(this,arguments)}function Xi(y,m,v,C){return xo.apply(this,arguments)}function xo(){return(xo=(0,l.Z)(function*(y,m,v,C,k={}){const F=yield Wt(y,m,v,C,k);return"mfaPendingCredential"in F&&Me(y,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function Ji(y,m,v,C){const k=`${m}${v}?${C}`;return y.config.emulator?yn(y.config,k):`${y.config.apiScheme}://${k}`}class Wo{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((v,C)=>{this.timer=setTimeout(()=>C(Ee(this.auth,"network-request-failed")),Eo.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Do(y,m,v){const C={appName:y.name};v.email&&(C.email=v.email),v.phoneNumber&&(C.phoneNumber=v.phoneNumber);const k=Ee(y,m,C);return k.customData._tokenResponse=v,k}function mr(){return(mr=(0,l.Z)(function*(y,m){return Wt(y,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Ei(y,m){return pi.apply(this,arguments)}function pi(){return(pi=(0,l.Z)(function*(y,m){return Wt(y,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Sr(y,m){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,l.Z)(function*(y,m){return Wt(y,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Sn(y){if(y)try{const m=new Date(Number(y));if(!isNaN(m.getTime()))return m.toUTCString()}catch(m){}}function Za(){return(Za=(0,l.Z)(function*(y,m=!1){const v=(0,U.m9)(y),C=yield v.getIdToken(m),k=ct(C);se(k&&k.exp&&k.auth_time&&k.iat,v.auth,"internal-error");const F="object"==typeof k.firebase?k.firebase:void 0,Z=null==F?void 0:F.sign_in_provider;return{claims:k,token:C,authTime:Sn(Yt(k.auth_time)),issuedAtTime:Sn(Yt(k.iat)),expirationTime:Sn(Yt(k.exp)),signInProvider:Z||null,signInSecondFactor:(null==F?void 0:F.sign_in_second_factor)||null}})).apply(this,arguments)}function Yt(y){return 1e3*Number(y)}function ct(y){const[m,v,C]=y.split(".");if(void 0===m||void 0===v||void 0===C)return Je("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,U.tV)(v);return k?JSON.parse(k):(Je("Failed to decode base64 JWT payload"),null)}catch(k){return Je("Caught error parsing JWT payload as JSON",k),null}}function Pi(y,m){return Io.apply(this,arguments)}function Io(){return(Io=(0,l.Z)(function*(y,m,v=!1){if(v)return m;try{return yield m}catch(C){throw C instanceof U.ZR&&Zt(C)&&y.auth.currentUser===y&&(yield y.auth.signOut()),C}})).apply(this,arguments)}function Zt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class na{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var v;if(m){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const k=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(m=!1){var v=this;if(!this.isRunning)return;const C=this.getInterval(m);this.timerId=setTimeout((0,l.Z)(function*(){yield v.iteration()}),C)}iteration(){var m=this;return(0,l.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===v.code&&m.schedule(!0))}m.schedule()})()}}class ji{constructor(m,v){this.createdAt=m,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sn(this.lastLoginAt),this.creationTime=Sn(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ni(y){return bt.apply(this,arguments)}function bt(){return(bt=(0,l.Z)(function*(y){var m;const v=y.auth,C=yield y.getIdToken(),k=yield Pi(y,Sr(v,{idToken:C}));se(null==k?void 0:k.users.length,v,"internal-error");const F=k.users[0];y._notifyReloadListener(F);const Z=(null===(m=F.providerUserInfo)||void 0===m?void 0:m.length)?Ae(F.providerUserInfo):[],ve=tt(y.providerData,Z),wt=!!y.isAnonymous&&!(y.email&&F.passwordHash||(null==ve?void 0:ve.length)),mt={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:ve,metadata:new ji(F.createdAt,F.lastLoginAt),isAnonymous:wt};Object.assign(y,mt)})).apply(this,arguments)}function Gt(){return(Gt=(0,l.Z)(function*(y){const m=(0,U.m9)(y);yield Ni(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function tt(y,m){return[...y.filter(C=>!m.some(k=>k.providerId===C.providerId)),...m]}function Ae(y){return y.map(m=>{var{providerId:v}=m,C=(0,re._T)(m,["providerId"]);return{providerId:v,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function yt(){return(yt=(0,l.Z)(function*(y,m){const v=yield pr(y,{},(0,l.Z)(function*(){const C=(0,U.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:k,apiKey:F}=y.config,Z=Ji(y,k,"/v1/token",`key=${F}`),ve=yield y._getAdditionalHeaders();return ve["Content-Type"]="application/x-www-form-urlencoded",Wr.fetch()(Z,{method:"POST",headers:ve,body:C})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class qt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){se(m.idToken,"internal-error"),se(void 0!==m.idToken,"internal-error"),se(void 0!==m.refreshToken,"internal-error");const v="expiresIn"in m&&void 0!==m.expiresIn?Number(m.expiresIn):function It(y){const m=ct(y);return se(m,"internal-error"),se(void 0!==m.exp,"internal-error"),se(void 0!==m.iat,"internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,v)}getToken(m,v=!1){var C=this;return(0,l.Z)(function*(){return se(!C.accessToken||C.refreshToken,m,"user-token-expired"),v||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(m,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,v){var C=this;return(0,l.Z)(function*(){const{accessToken:k,refreshToken:F,expiresIn:Z}=yield function nt(y,m){return yt.apply(this,arguments)}(m,v);C.updateTokensAndExpiration(k,F,Number(Z))})()}updateTokensAndExpiration(m,v,C){this.refreshToken=v||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(m,v){const{refreshToken:C,accessToken:k,expirationTime:F}=v,Z=new qt;return C&&(se("string"==typeof C,"internal-error",{appName:m}),Z.refreshToken=C),k&&(se("string"==typeof k,"internal-error",{appName:m}),Z.accessToken=k),F&&(se("number"==typeof F,"internal-error",{appName:m}),Z.expirationTime=F),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new qt,this.toJSON())}_performRefresh(){return X("not implemented")}}function $t(y,m){se("string"==typeof y||void 0===y,"internal-error",{appName:m})}class q{constructor(m){var{uid:v,auth:C,stsTokenManager:k}=m,F=(0,re._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new na(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=C,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new ji(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(m){var v=this;return(0,l.Z)(function*(){const C=yield Pi(v,v.stsTokenManager.getToken(v.auth,m));return se(C,v.auth,"internal-error"),v.accessToken!==C&&(v.accessToken=C,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),C})()}getIdTokenResult(m){return function Yo(y){return Za.apply(this,arguments)}(this,m)}reload(){return function Hi(y){return Gt.apply(this,arguments)}(this)}_assign(m){this!==m&&(se(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(v=>Object.assign({},v)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new q(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,v=!1){var C=this;return(0,l.Z)(function*(){let k=!1;m.idToken&&m.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(m),k=!0),v&&(yield Ni(C)),yield C.auth._persistUserIfCurrent(C),k&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var m=this;return(0,l.Z)(function*(){const v=yield m.getIdToken();return yield Pi(m,function gt(y,m){return mr.apply(this,arguments)}(m.auth,{idToken:v})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,v){var C,k,F,Z,ve,Ve,it,wt;const mt=null!==(C=v.displayName)&&void 0!==C?C:void 0,yi=null!==(k=v.email)&&void 0!==k?k:void 0,Er=null!==(F=v.phoneNumber)&&void 0!==F?F:void 0,ld=null!==(Z=v.photoURL)&&void 0!==Z?Z:void 0,cd=null!==(ve=v.tenantId)&&void 0!==ve?ve:void 0,au=null!==(Ve=v._redirectEventId)&&void 0!==Ve?Ve:void 0,Ah=null!==(it=v.createdAt)&&void 0!==it?it:void 0,Ep=null!==(wt=v.lastLoginAt)&&void 0!==wt?wt:void 0,{uid:s_,emailVerified:tc,isAnonymous:ud,providerData:kh,stsTokenManager:a_}=v;se(s_&&a_,m,"internal-error");const Vn=qt.fromJSON(this.name,a_);se("string"==typeof s_,m,"internal-error"),$t(mt,m.name),$t(yi,m.name),se("boolean"==typeof tc,m,"internal-error"),se("boolean"==typeof ud,m,"internal-error"),$t(Er,m.name),$t(ld,m.name),$t(cd,m.name),$t(au,m.name),$t(Ah,m.name),$t(Ep,m.name);const xp=new q({uid:s_,auth:m,email:yi,emailVerified:tc,displayName:mt,isAnonymous:ud,photoURL:ld,phoneNumber:Er,tenantId:cd,stsTokenManager:Vn,createdAt:Ah,lastLoginAt:Ep});return kh&&Array.isArray(kh)&&(xp.providerData=kh.map(l_=>Object.assign({},l_))),au&&(xp._redirectEventId=au),xp}static _fromIdTokenResponse(m,v,C=!1){return(0,l.Z)(function*(){const k=new qt;k.updateFromServerResponse(v);const F=new q({uid:v.localId,auth:m,stsTokenManager:k,isAnonymous:C});return yield Ni(F),F})()}}const Y=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(v,C){var k=this;return(0,l.Z)(function*(){k.storage[v]=C})()}_get(v){var C=this;return(0,l.Z)(function*(){const k=C.storage[v];return void 0===k?null:k})()}_remove(v){var C=this;return(0,l.Z)(function*(){delete C.storage[v]})()}_addListener(v,C){}_removeListener(v,C){}}return y.type="NONE",y})();function pe(y,m,v){return`firebase:${y}:${m}:${v}`}class te{constructor(m,v,C){this.persistence=m,this.auth=v,this.userKey=C;const{config:k,name:F}=this.auth;this.fullUserKey=pe(this.userKey,k.apiKey,F),this.fullPersistenceKey=pe("persistence",k.apiKey,F),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,l.Z)(function*(){const v=yield m.persistence._get(m.fullUserKey);return v?q._fromJSON(m.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var v=this;return(0,l.Z)(function*(){if(v.persistence===m)return;const C=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=m,C?v.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,v,C="authUser"){return(0,l.Z)(function*(){if(!v.length)return new te(le(Y),m,C);const k=(yield Promise.all(v.map(function(){var it=(0,l.Z)(function*(wt){if(yield wt._isAvailable())return wt});return function(wt){return it.apply(this,arguments)}}()))).filter(it=>it);let F=k[0]||le(Y);const Z=pe(C,m.config.apiKey,m.name);let ve=null;for(const it of v)try{const wt=yield it._get(Z);if(wt){const mt=q._fromJSON(m,wt);it!==F&&(ve=mt),F=it;break}}catch(wt){}const Ve=k.filter(it=>it._shouldAllowMigration);return F._shouldAllowMigration&&Ve.length?(F=Ve[0],ve&&(yield F._set(Z,ve.toJSON())),yield Promise.all(v.map(function(){var it=(0,l.Z)(function*(wt){if(wt!==F)try{yield wt._remove(Z)}catch(mt){}});return function(wt){return it.apply(this,arguments)}}())),new te(F,m,C)):new te(F,m,C)})()}}function $e(y){const m=y.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(en(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(xt(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Bt(m))return"Blackberry";if(En(m))return"Webos";if(rn(m))return"Safari";if((m.includes("chrome/")||$i(m))&&!m.includes("edge/"))return"Chrome";if(Gn(m))return"Android";{const C=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==C?void 0:C.length))return C[1]}return"Other"}function xt(y=(0,U.z$)()){return/firefox\//i.test(y)}function rn(y=(0,U.z$)()){const m=y.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function $i(y=(0,U.z$)()){return/crios\//i.test(y)}function en(y=(0,U.z$)()){return/iemobile/i.test(y)}function Gn(y=(0,U.z$)()){return/android/i.test(y)}function Bt(y=(0,U.z$)()){return/blackberry/i.test(y)}function En(y=(0,U.z$)()){return/webos/i.test(y)}function Di(y=(0,U.z$)()){return/iphone|ipad|ipod/i.test(y)}function Zo(y=(0,U.z$)()){return Di(y)||Gn(y)||En(y)||Bt(y)||/windows phone/i.test(y)||en(y)}function Rl(y,m=[]){let v;switch(y){case"Browser":v=$e((0,U.z$)());break;case"Worker":v=`${$e((0,U.z$)())}-${y}`;break;default:v=y}const C=m.length?m.join(","):"FirebaseCore-web";return`${v}/JsCore/${ue.SDK_VERSION}/${C}`}class Tr{constructor(m,v,C){this.app=m,this.heartbeatServiceProvider=v,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ut(this),this.idTokenSubscription=new Ut(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_e,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(m,v){var C=this;return v&&(this._popupRedirectResolver=le(v)),this._initializationPromise=this.queue((0,l.Z)(function*(){var k,F;if(!C._deleted&&(C.persistenceManager=yield te.create(C,m),!C._deleted)){if(null===(k=C._popupRedirectResolver)||void 0===k?void 0:k._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch(Z){}yield C.initializeCurrentUser(v),C.lastNotifiedUid=(null===(F=C.currentUser)||void 0===F?void 0:F.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,l.Z)(function*(){if(m._deleted)return;const v=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||v){if(m.currentUser&&v&&m.currentUser.uid===v.uid)return m._currentUser._assign(v),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(v)}})()}initializeCurrentUser(m){var v=this;return(0,l.Z)(function*(){var C;let k=yield v.assertedPersistence.getCurrentUser();if(m&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const F=null===(C=v.redirectUser)||void 0===C?void 0:C._redirectEventId,Z=null==k?void 0:k._redirectEventId,ve=yield v.tryRedirectSignIn(m);(!F||F===Z)&&(null==ve?void 0:ve.user)&&(k=ve.user)}return k?k._redirectEventId?(se(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===k._redirectEventId?v.directlySetCurrentUser(k):v.reloadAndSetCurrentUserOrClear(k)):v.reloadAndSetCurrentUserOrClear(k):v.directlySetCurrentUser(null)})()}tryRedirectSignIn(m){var v=this;return(0,l.Z)(function*(){let C=null;try{C=yield v._popupRedirectResolver._completeRedirectFn(v,m,!0)}catch(k){yield v._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(m){var v=this;return(0,l.Z)(function*(){try{yield Ni(m)}catch(C){if("auth/network-request-failed"!==C.code)return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function vt(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var m=this;return(0,l.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var v=this;return(0,l.Z)(function*(){const C=m?(0,U.m9)(m):null;return C&&se(C.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(C&&C._clone(v))})()}_updateCurrentUser(m){var v=this;return(0,l.Z)(function*(){if(!v._deleted)return m&&se(v.tenantId===m.tenantId,v,"tenant-id-mismatch"),v.queue((0,l.Z)(function*(){yield v.directlySetCurrentUser(m),v.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,l.Z)(function*(){return(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null)})()}setPersistence(m){var v=this;return this.queue((0,l.Z)(function*(){yield v.assertedPersistence.setPersistence(le(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new U.LL("auth","Firebase",m())}onAuthStateChanged(m,v,C){return this.registerStateListener(this.authStateSubscription,m,v,C)}onIdTokenChanged(m,v,C){return this.registerStateListener(this.idTokenSubscription,m,v,C)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,v){var C=this;return(0,l.Z)(function*(){const k=yield C.getOrInitRedirectPersistenceManager(v);return null===m?k.removeCurrentUser():k.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var v=this;return(0,l.Z)(function*(){if(!v.redirectPersistenceManager){const C=m&&le(m)||v._popupRedirectResolver;se(C,v,"argument-error"),v.redirectPersistenceManager=yield te.create(v,[le(C._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(m){var v=this;return(0,l.Z)(function*(){var C,k;return v._isInitialized&&(yield v.queue((0,l.Z)(function*(){}))),(null===(C=v._currentUser)||void 0===C?void 0:C._redirectEventId)===m?v._currentUser:(null===(k=v.redirectUser)||void 0===k?void 0:k._redirectEventId)===m?v.redirectUser:null})()}_persistUserIfCurrent(m){var v=this;return(0,l.Z)(function*(){if(m===v.currentUser)return v.queue((0,l.Z)(function*(){return v.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(v=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,v,C,k){if(this._deleted)return()=>{};const F="function"==typeof v?v:v.next.bind(v),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return se(Z,this,"internal-error"),Z.then(()=>F(this.currentUser)),"function"==typeof v?m.addObserver(v,C,k):m.addObserver(v)}directlySetCurrentUser(m){var v=this;return(0,l.Z)(function*(){v.currentUser&&v.currentUser!==m&&(v._currentUser._stopProactiveRefresh(),m&&v.isProactiveRefreshEnabled&&m._startProactiveRefresh()),v.currentUser=m,m?yield v.assertedPersistence.setCurrentUser(m):yield v.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Rl(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,l.Z)(function*(){var v;const C={"X-Client-Version":m.clientVersion};m.app.options.appId&&(C["X-Firebase-gmpid"]=m.app.options.appId);const k=yield null===(v=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();return k&&(C["X-Firebase-Client"]=k),C})()}}function Le(y){return(0,U.m9)(y)}class Ut{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,U.ne)(v=>this.observer=v)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Fi(y){const m=y.indexOf(":");return m<0?"":y.substr(0,m+1)}function oi(y){if(!y)return null;const m=Number(y);return isNaN(m)?null:m}class hn{constructor(m,v){this.providerId=m,this.signInMethod=v}toJSON(){return X("not implemented")}_getIdTokenResponse(m){return X("not implemented")}_linkToIdToken(m,v){return X("not implemented")}_getReauthenticationResolver(m){return X("not implemented")}}function ei(y,m){return xs.apply(this,arguments)}function xs(){return(xs=(0,l.Z)(function*(y,m){return Wt(y,"POST","/v1/accounts:resetPassword",sn(y,m))})).apply(this,arguments)}function Pt(y,m){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,l.Z)(function*(y,m){return Wt(y,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Mr(y,m){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,l.Z)(function*(y,m){return Wt(y,"POST","/v1/accounts:update",sn(y,m))})).apply(this,arguments)}function gi(){return(gi=(0,l.Z)(function*(y,m){return Xi(y,"POST","/v1/accounts:signInWithPassword",sn(y,m))})).apply(this,arguments)}function Ko(y,m){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,l.Z)(function*(y,m){return Wt(y,"POST","/v1/accounts:sendOobCode",sn(y,m))})).apply(this,arguments)}function ti(y,m){return fn.apply(this,arguments)}function fn(){return(fn=(0,l.Z)(function*(y,m){return Ko(y,m)})).apply(this,arguments)}function _c(y,m){return vc.apply(this,arguments)}function vc(){return(vc=(0,l.Z)(function*(y,m){return Ko(y,m)})).apply(this,arguments)}function Ar(y,m){return gr.apply(this,arguments)}function gr(){return(gr=(0,l.Z)(function*(y,m){return Ko(y,m)})).apply(this,arguments)}function zd(y,m){return Is.apply(this,arguments)}function Is(){return(Is=(0,l.Z)(function*(y,m){return Ko(y,m)})).apply(this,arguments)}function _r(){return(_r=(0,l.Z)(function*(y,m){return Xi(y,"POST","/v1/accounts:signInWithEmailLink",sn(y,m))})).apply(this,arguments)}function Wd(){return(Wd=(0,l.Z)(function*(y,m){return Xi(y,"POST","/v1/accounts:signInWithEmailLink",sn(y,m))})).apply(this,arguments)}class yc extends hn{constructor(m,v,C,k=null){super("password",C),this._email=m,this._password=v,this._tenantId=k}static _fromEmailAndPassword(m,v){return new yc(m,v,"password")}static _fromEmailAndCode(m,v,C=null){return new yc(m,v,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const v="string"==typeof m?JSON.parse(m):m;if((null==v?void 0:v.email)&&(null==v?void 0:v.password)){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(m){var v=this;return(0,l.Z)(function*(){switch(v.signInMethod){case"password":return function Ds(y,m){return gi.apply(this,arguments)}(m,{returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function bc(y,m){return _r.apply(this,arguments)}(m,{email:v._email,oobCode:v._password});default:Me(m,"internal-error")}})()}_linkToIdToken(m,v){var C=this;return(0,l.Z)(function*(){switch(C.signInMethod){case"password":return Pt(m,{idToken:v,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function Pl(y,m){return Wd.apply(this,arguments)}(m,{idToken:v,email:C._email,oobCode:C._password});default:Me(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function si(y,m){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,l.Z)(function*(y,m){return Xi(y,"POST","/v1/accounts:signInWithIdp",sn(y,m))})).apply(this,arguments)}class Xo extends hn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const v=new Xo(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(v.idToken=m.idToken),m.accessToken&&(v.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(v.nonce=m.nonce),m.pendingToken&&(v.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(v.accessToken=m.oauthToken,v.secret=m.oauthTokenSecret):Me("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const v="string"==typeof m?JSON.parse(m):m,{providerId:C,signInMethod:k}=v,F=(0,re._T)(v,["providerId","signInMethod"]);if(!C||!k)return null;const Z=new Xo(C,k);return Z.idToken=F.idToken||void 0,Z.accessToken=F.accessToken||void 0,Z.secret=F.secret,Z.nonce=F.nonce,Z.pendingToken=F.pendingToken||null,Z}_getIdTokenResponse(m){return si(m,this.buildRequest())}_linkToIdToken(m,v){const C=this.buildRequest();return C.idToken=v,si(m,C)}_getReauthenticationResolver(m){const v=this.buildRequest();return v.autoCreate=!1,si(m,v)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),m.postBody=(0,U.xO)(v)}return m}}function Rg(y,m){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,l.Z)(function*(y,m){return Wt(y,"POST","/v1/accounts:sendVerificationCode",sn(y,m))})).apply(this,arguments)}function Ss(){return(Ss=(0,l.Z)(function*(y,m){return Xi(y,"POST","/v1/accounts:signInWithPhoneNumber",sn(y,m))})).apply(this,arguments)}function Kd(){return(Kd=(0,l.Z)(function*(y,m){const v=yield Xi(y,"POST","/v1/accounts:signInWithPhoneNumber",sn(y,m));if(v.temporaryProof)throw Do(y,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const Pg={USER_NOT_FOUND:"user-not-found"};function Qd(){return(Qd=(0,l.Z)(function*(y,m){return Xi(y,"POST","/v1/accounts:signInWithPhoneNumber",sn(y,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Pg)})).apply(this,arguments)}class Qa extends hn{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,v){return new Qa({verificationId:m,verificationCode:v})}static _fromTokenResponse(m,v){return new Qa({phoneNumber:m,temporaryProof:v})}_getIdTokenResponse(m){return function Au(y,m){return Ss.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,v){return function Og(y,m){return Kd.apply(this,arguments)}(m,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Nl(y,m){return Qd.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:v,verificationId:C,verificationCode:k}=this.params;return m&&v?{temporaryProof:m,phoneNumber:v}:{sessionInfo:C,code:k}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:v,verificationCode:C,phoneNumber:k,temporaryProof:F}=m;return C||v||k||F?new Qa({verificationId:v,verificationCode:C,phoneNumber:k,temporaryProof:F}):null}}class ra{constructor(m){var v,C,k,F,Z,ve;const Ve=(0,U.zd)((0,U.pd)(m)),it=null!==(v=Ve.apiKey)&&void 0!==v?v:null,wt=null!==(C=Ve.oobCode)&&void 0!==C?C:null,mt=function ly(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=Ve.mode)&&void 0!==k?k:null);se(it&&wt&&mt,"argument-error"),this.apiKey=it,this.operation=mt,this.code=wt,this.continueUrl=null!==(F=Ve.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(Z=Ve.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(ve=Ve.tenantId)&&void 0!==ve?ve:null}static parseLink(m){const v=function wc(y){const m=(0,U.zd)((0,U.pd)(y)).link,v=m?(0,U.zd)((0,U.pd)(m)).deep_link_id:null,C=(0,U.zd)((0,U.pd)(y)).deep_link_id;return(C?(0,U.zd)((0,U.pd)(C)).link:null)||C||v||m||y}(m);try{return new ra(v)}catch(C){return null}}}let ku=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(v,C){return yc._fromEmailAndPassword(v,C)}static credentialWithLink(v,C){const k=ra.parseLink(C);return se(k,"argument-error"),yc._fromEmailAndCode(v,k.code,k.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Ts{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class vr extends Ts{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Xa extends vr{static credentialFromJSON(m){const v="string"==typeof m?JSON.parse(m):m;return se("providerId"in v&&"signInMethod"in v,"argument-error"),Xo._fromParams(v)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return se(m.idToken||m.accessToken,"argument-error"),Xo._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Xa.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Xa.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:v,oauthAccessToken:C,oauthTokenSecret:k,pendingToken:F,nonce:Z,providerId:ve}=m;if(!C&&!k&&!v&&!F||!ve)return null;try{return new Xa(ve)._credential({idToken:v,accessToken:C,nonce:Z,pendingToken:F})}catch(Ve){return null}}}let oa=(()=>{class y extends vr{constructor(){super("facebook.com")}static credential(v){return Xo._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return y.credentialFromTaggedObject(v)}static credentialFromError(v){return y.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return y.credential(v.oauthAccessToken)}catch(C){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Fl=(()=>{class y extends vr{constructor(){super("google.com"),this.addScope("profile")}static credential(v,C){return Xo._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:C})}static credentialFromResult(v){return y.credentialFromTaggedObject(v)}static credentialFromError(v){return y.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:C,oauthAccessToken:k}=v;if(!C&&!k)return null;try{return y.credential(C,k)}catch(F){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Xd=(()=>{class y extends vr{constructor(){super("github.com")}static credential(v){return Xo._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return y.credentialFromTaggedObject(v)}static credentialFromError(v){return y.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return y.credential(v.oauthAccessToken)}catch(C){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class kn extends hn{constructor(m,v){super(m,m),this.pendingToken=v}_getIdTokenResponse(m){return si(m,this.buildRequest())}_linkToIdToken(m,v){const C=this.buildRequest();return C.idToken=v,si(m,C)}_getReauthenticationResolver(m){const v=this.buildRequest();return v.autoCreate=!1,si(m,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const v="string"==typeof m?JSON.parse(m):m,{providerId:C,signInMethod:k,pendingToken:F}=v;return C&&k&&F&&C===k?new kn(C,F):null}static _create(m,v){return new kn(m,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class kr extends Ts{constructor(m){se(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return kr.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return kr.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const v=kn.fromJSON(m);return se(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:v,providerId:C}=m;if(!v||!C)return null;try{return kn._create(C,v)}catch(k){return null}}}let Cc=(()=>{class y extends vr{constructor(){super("twitter.com")}static credential(v,C){return Xo._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:C})}static credentialFromResult(v){return y.credentialFromTaggedObject(v)}static credentialFromError(v){return y.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:C,oauthTokenSecret:k}=v;if(!C||!k)return null;try{return y.credential(C,k)}catch(F){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Ec(y,m){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,l.Z)(function*(y,m){return Xi(y,"POST","/v1/accounts:signUp",sn(y,m))})).apply(this,arguments)}class Li{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,v,C,k=!1){return(0,l.Z)(function*(){const F=yield q._fromIdTokenResponse(m,C,k),Z=Jf(C);return new Li({user:F,providerId:Z,_tokenResponse:C,operationType:v})})()}static _forOperation(m,v,C){return(0,l.Z)(function*(){yield m._updateTokensIfNecessary(C,!0);const k=Jf(C);return new Li({user:m,providerId:k,_tokenResponse:C,operationType:v})})()}}function Jf(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Jd(){return(Jd=(0,l.Z)(function*(y){var m;const v=Le(y);if(yield v._initializationPromise,null===(m=v.currentUser)||void 0===m?void 0:m.isAnonymous)return new Li({user:v.currentUser,providerId:null,operationType:"signIn"});const C=yield Ec(v,{returnSecureToken:!0}),k=yield Li._fromIdTokenResponse(v,"signIn",C,!0);return yield v._updateCurrentUser(k.user),k})).apply(this,arguments)}class Dc extends U.ZR{constructor(m,v,C,k){var F;super(v.code,v.message),this.operationType=C,this.user=k,Object.setPrototypeOf(this,Dc.prototype),this.customData={appName:m.name,tenantId:null!==(F=m.tenantId)&&void 0!==F?F:void 0,_serverResponse:v.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(m,v,C,k){return new Dc(m,v,C,k)}}function Ic(y,m,v,C){return("reauthenticate"===m?v._getReauthenticationResolver(y):v._getIdTokenResponse(y)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?Dc._fromErrorAndOperation(y,F,m,C):F})}function Jo(y){return new Set(y.map(({providerId:m})=>m).filter(m=>!!m))}function Ru(){return(Ru=(0,l.Z)(function*(y,m){const v=(0,U.m9)(y);yield As(!0,v,m);const{providerUserInfo:C}=yield Ei(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[m]}),k=Jo(C||[]);return v.providerData=v.providerData.filter(F=>k.has(F.providerId)),k.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function Tn(y,m){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,l.Z)(function*(y,m,v=!1){const C=yield Pi(y,m._linkToIdToken(y.auth,yield y.getIdToken()),v);return Li._forOperation(y,"link",C)})).apply(this,arguments)}function As(y,m,v){return pn.apply(this,arguments)}function pn(){return(pn=(0,l.Z)(function*(y,m,v){yield Ni(m);const k=!1===y?"provider-already-linked":"no-such-provider";se(Jo(m.providerData).has(v)===y,m.auth,k)})).apply(this,arguments)}function eh(y,m){return sa.apply(this,arguments)}function sa(){return(sa=(0,l.Z)(function*(y,m,v=!1){const{auth:C}=y,k="reauthenticate";try{const F=yield Pi(y,Ic(C,k,m,y),v);se(F.idToken,C,"internal-error");const Z=ct(F.idToken);se(Z,C,"internal-error");const{sub:ve}=Z;return se(y.uid===ve,C,"user-mismatch"),Li._forOperation(y,k,F)}catch(F){throw"auth/user-not-found"===(null==F?void 0:F.code)&&Me(C,"user-mismatch"),F}})).apply(this,arguments)}function aa(y,m){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,l.Z)(function*(y,m,v=!1){const C="signIn",k=yield Ic(y,C,m),F=yield Li._fromIdTokenResponse(y,C,k);return v||(yield y._updateCurrentUser(F.user)),F})).apply(this,arguments)}function ni(y,m){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,l.Z)(function*(y,m){return aa(Le(y),m)})).apply(this,arguments)}function Yr(y,m){return qi.apply(this,arguments)}function qi(){return(qi=(0,l.Z)(function*(y,m){const v=(0,U.m9)(y);return yield As(!1,v,m.providerId),Tn(v,m)})).apply(this,arguments)}function ks(y,m){return es.apply(this,arguments)}function es(){return(es=(0,l.Z)(function*(y,m){return eh((0,U.m9)(y),m)})).apply(this,arguments)}function Sc(y,m){return br.apply(this,arguments)}function br(){return(br=(0,l.Z)(function*(y,m){return Xi(y,"POST","/v1/accounts:signInWithCustomToken",sn(y,m))})).apply(this,arguments)}function Os(){return(Os=(0,l.Z)(function*(y,m){const v=Le(y),C=yield Sc(v,{token:m,returnSecureToken:!0}),k=yield Li._fromIdTokenResponse(v,"signIn",C);return yield v._updateCurrentUser(k.user),k})).apply(this,arguments)}class Et{constructor(m,v){this.factorId=m,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(m,v){return"phoneInfo"in v?el._fromServerResponse(m,v):Me(m,"internal-error")}}class el extends Et{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,v){return new el(v)}}function Tc(y,m,v){var C;se((null===(C=v.url)||void 0===C?void 0:C.length)>0,y,"invalid-continue-uri"),se(void 0===v.dynamicLinkDomain||v.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),m.continueUrl=v.url,m.dynamicLinkDomain=v.dynamicLinkDomain,m.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(se(v.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),m.iOSBundleId=v.iOS.bundleId),v.android&&(se(v.android.packageName.length>0,y,"missing-android-pkg-name"),m.androidInstallApp=v.android.installApp,m.androidMinimumVersionCode=v.android.minimumVersion,m.androidPackageName=v.android.packageName)}function Ac(){return(Ac=(0,l.Z)(function*(y,m,v){const C=(0,U.m9)(y),k={requestType:"PASSWORD_RESET",email:m};v&&Tc(C,k,v),yield _c(C,k)})).apply(this,arguments)}function kc(){return(kc=(0,l.Z)(function*(y,m,v){yield ei((0,U.m9)(y),{oobCode:m,newPassword:v})})).apply(this,arguments)}function la(){return(la=(0,l.Z)(function*(y,m){yield Mr((0,U.m9)(y),{oobCode:m})})).apply(this,arguments)}function Te(y,m){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,l.Z)(function*(y,m){const v=(0,U.m9)(y),C=yield ei(v,{oobCode:m}),k=C.requestType;switch(se(k,v,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":se(C.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":se(C.mfaInfo,v,"internal-error");default:se(C.email,v,"internal-error")}let F=null;return C.mfaInfo&&(F=Et._fromServerResponse(Le(v),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:F},operation:k}})).apply(this,arguments)}function Rn(){return(Rn=(0,l.Z)(function*(y,m){const{data:v}=yield Te((0,U.m9)(y),m);return v.email})).apply(this,arguments)}function Ps(){return(Ps=(0,l.Z)(function*(y,m,v){const C=Le(y),k=yield Ec(C,{returnSecureToken:!0,email:m,password:v}),F=yield Li._fromIdTokenResponse(C,"signIn",k);return yield C._updateCurrentUser(F.user),F})).apply(this,arguments)}function Vl(){return(Vl=(0,l.Z)(function*(y,m,v){const C=(0,U.m9)(y),k={requestType:"EMAIL_SIGNIN",email:m};se(v.handleCodeInApp,C,"argument-error"),v&&Tc(C,k,v),yield Ar(C,k)})).apply(this,arguments)}function Rc(){return(Rc=(0,l.Z)(function*(y,m,v){const C=(0,U.m9)(y),k=ku.credentialWithLink(m,v||At());return se(k._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),ni(C,k)})).apply(this,arguments)}function Ul(y,m){return _i.apply(this,arguments)}function _i(){return(_i=(0,l.Z)(function*(y,m){return Wt(y,"POST","/v1/accounts:createAuthUri",sn(y,m))})).apply(this,arguments)}function Oc(){return(Oc=(0,l.Z)(function*(y,m){const C={identifier:m,continueUri:on()?At():"http://localhost"},{signinMethods:k}=yield Ul((0,U.m9)(y),C);return k||[]})).apply(this,arguments)}function Kr(){return(Kr=(0,l.Z)(function*(y,m){const v=(0,U.m9)(y),k={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};m&&Tc(v.auth,k,m);const{email:F}=yield ti(v.auth,k);F!==y.email&&(yield y.reload())})).apply(this,arguments)}function jl(){return(jl=(0,l.Z)(function*(y,m,v){const C=(0,U.m9)(y),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:m};v&&Tc(C.auth,F,v);const{email:Z}=yield zd(C.auth,F);Z!==y.email&&(yield y.reload())})).apply(this,arguments)}function Bu(y,m){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,l.Z)(function*(y,m){return Wt(y,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Pc(){return(Pc=(0,l.Z)(function*(y,{displayName:m,photoURL:v}){if(void 0===m&&void 0===v)return;const C=(0,U.m9)(y),F={idToken:yield C.getIdToken(),displayName:m,photoUrl:v,returnSecureToken:!0},Z=yield Pi(C,Bu(C.auth,F));C.displayName=Z.displayName||null,C.photoURL=Z.photoUrl||null;const ve=C.providerData.find(({providerId:Ve})=>"password"===Ve);ve&&(ve.displayName=C.displayName,ve.photoURL=C.photoURL),yield C._updateTokensIfNecessary(Z)})).apply(this,arguments)}function ih(y,m,v){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,l.Z)(function*(y,m,v){const{auth:C}=y,F={idToken:yield y.getIdToken(),returnSecureToken:!0};m&&(F.email=m),v&&(F.password=v);const Z=yield Pi(y,Pt(C,F));yield y._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class ua{constructor(m,v,C={}){this.isNewUser=m,this.providerId=v,this.profile=C}}class rh extends ua{constructor(m,v,C,k){super(m,v,C),this.username=k}}class oh extends ua{constructor(m,v){super(m,"facebook.com",v)}}class $l extends rh{constructor(m,v){super(m,"github.com",v,"string"==typeof(null==v?void 0:v.login)?null==v?void 0:v.login:null)}}class Qr extends ua{constructor(m,v){super(m,"google.com",v)}}class Uu extends rh{constructor(m,v,C){super(m,"twitter.com",v,C)}}function tp(y){const{user:m,_tokenResponse:v}=y;return m.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function Fc(y){var m,v;if(!y)return null;const{providerId:C}=y,k=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},F=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!C&&(null==y?void 0:y.idToken)){const Z=null===(v=null===(m=ct(y.idToken))||void 0===m?void 0:m.firebase)||void 0===v?void 0:v.sign_in_provider;if(Z)return new ua(F,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!C)return null;switch(C){case"facebook.com":return new oh(F,k);case"github.com":return new $l(F,k);case"google.com":return new Qr(F,k);case"twitter.com":return new Uu(F,k,y.screenName||null);case"custom":case"anonymous":return new ua(F,null);default:return new ua(F,C,k)}}(v)}class nl{constructor(m,v){this.type=m,this.credential=v}static _fromIdtoken(m){return new nl("enroll",m)}static _fromMfaPendingCredential(m){return new nl("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var v,C;if(null==m?void 0:m.multiFactorSession){if(null===(v=m.multiFactorSession)||void 0===v?void 0:v.pendingCredential)return nl._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null===(C=m.multiFactorSession)||void 0===C?void 0:C.idToken)return nl._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Gl{constructor(m,v,C){this.session=m,this.hints=v,this.signInResolver=C}static _fromError(m,v){const C=Le(m),k=v.customData._serverResponse,F=(k.mfaInfo||[]).map(ve=>Et._fromServerResponse(C,ve));se(k.mfaPendingCredential,C,"internal-error");const Z=nl._fromMfaPendingCredential(k.mfaPendingCredential);return new Gl(Z,F,function(){var ve=(0,l.Z)(function*(Ve){const it=yield Ve._process(C,Z);delete k.mfaInfo,delete k.mfaPendingCredential;const wt=Object.assign(Object.assign({},k),{idToken:it.idToken,refreshToken:it.refreshToken});switch(v.operationType){case"signIn":const mt=yield Li._fromIdTokenResponse(C,v.operationType,wt);return yield C._updateCurrentUser(mt.user),mt;case"reauthenticate":return se(v.user,C,"internal-error"),Li._forOperation(v.user,v.operationType,wt);default:Me(C,"internal-error")}});return function(Ve){return ve.apply(this,arguments)}}())}resolveSignIn(m){var v=this;return(0,l.Z)(function*(){return v.signInResolver(m)})()}}function ii(y,m){return Wt(y,"POST","/v2/accounts/mfaEnrollment:start",sn(y,m))}class sh{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(C=>Et._fromServerResponse(m.auth,C)))})}static _fromUser(m){return new sh(m)}getSession(){var m=this;return(0,l.Z)(function*(){return nl._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,v){var C=this;return(0,l.Z)(function*(){const k=m,F=yield C.getSession(),Z=yield Pi(C.user,k._process(C.user.auth,F,v));return yield C.user._updateTokensIfNecessary(Z),C.user.reload()})()}unenroll(m){var v=this;return(0,l.Z)(function*(){const C="string"==typeof m?m:m.uid,k=yield v.user.getIdToken(),F=yield Pi(v.user,function np(y,m){return Wt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",sn(y,m))}(v.user.auth,{idToken:k,mfaEnrollmentId:C}));v.enrolledFactors=v.enrolledFactors.filter(({uid:Z})=>Z!==C),yield v.user._updateTokensIfNecessary(F);try{yield v.user.reload()}catch(Z){if("auth/user-token-expired"!==Z.code)throw Z}})()}}const ts=new WeakMap,$u="__sak";class rl{constructor(m,v){this.storageRetriever=m,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem($u,"1"),this.storage.removeItem($u),Promise.resolve(!0)):Promise.resolve(!1)}catch(m){return Promise.resolve(!1)}}_set(m,v){return this.storage.setItem(m,JSON.stringify(v)),Promise.resolve()}_get(m){const v=this.storage.getItem(m);return Promise.resolve(v?JSON.parse(v):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const qn=(()=>{class y extends rl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,C)=>this.onStorageEvent(v,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ql(){const y=(0,U.z$)();return rn(y)||Di(y)}()&&function mi(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Zo(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const C of Object.keys(this.listeners)){const k=this.storage.getItem(C),F=this.localCache[C];k!==F&&v(C,F,k)}}onStorageEvent(v,C=!1){if(!v.key)return void this.forAllChangedKeys((ve,Ve,it)=>{this.notifyListeners(ve,it)});const k=v.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ve=this.storage.getItem(k);if(v.newValue!==ve)null!==v.newValue?this.storage.setItem(k,v.newValue):this.storage.removeItem(k);else if(this.localCache[k]===v.newValue&&!C)return}const F=()=>{const ve=this.storage.getItem(k);!C&&this.localCache[k]===ve||this.notifyListeners(k,ve)},Z=this.storage.getItem(k);!function kl(){return(0,U.w1)()&&10===document.documentMode}()||Z===v.newValue||v.newValue===v.oldValue?F():setTimeout(F,10)}notifyListeners(v,C){this.localCache[v]=C;const k=this.listeners[v];if(k)for(const F of Array.from(k))F(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,C,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:C,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(C)}_removeListener(v,C){this.listeners[v]&&(this.listeners[v].delete(C),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,C){var k=()=>super._set,F=this;return(0,l.Z)(function*(){yield k().call(F,v,C),F.localCache[v]=JSON.stringify(C)})()}_get(v){var C=()=>super._get,k=this;return(0,l.Z)(function*(){const F=yield C().call(k,v);return k.localCache[v]=JSON.stringify(F),F})()}_remove(v){var C=()=>super._remove,k=this;return(0,l.Z)(function*(){yield C().call(k,v),delete k.localCache[v]})()}}return y.type="LOCAL",y})(),pt=(()=>{class y extends rl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,C){}_removeListener(v,C){}}return y.type="SESSION",y})();let zn=(()=>{class y{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const C=this.receivers.find(F=>F.isListeningto(v));if(C)return C;const k=new y(v);return this.receivers.push(k),k}isListeningto(v){return this.eventTarget===v}handleEvent(v){var C=this;return(0,l.Z)(function*(){const k=v,{eventId:F,eventType:Z,data:ve}=k.data,Ve=C.handlersMap[Z];if(!(null==Ve?void 0:Ve.size))return;k.ports[0].postMessage({status:"ack",eventId:F,eventType:Z});const it=Array.from(Ve).map(function(){var mt=(0,l.Z)(function*(yi){return yi(k.origin,ve)});return function(yi){return mt.apply(this,arguments)}}()),wt=yield function er(y){return Promise.all(y.map(function(){var m=(0,l.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(C){return{fulfilled:!1,reason:C}}});return function(v){return m.apply(this,arguments)}}()))}(it);k.ports[0].postMessage({status:"done",eventId:F,eventType:Z,response:wt})})()}_subscribe(v,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(C)}_unsubscribe(v,C){this.handlersMap[v]&&C&&this.handlersMap[v].delete(C),(!C||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Fs(y="",m=10){let v="";for(let C=0;C<m;C++)v+=Math.floor(10*Math.random());return y+v}class ah{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,v,C=50){var k=this;return(0,l.Z)(function*(){const F="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let Z,ve;return new Promise((Ve,it)=>{const wt=Fs("",20);F.port1.start();const mt=setTimeout(()=>{it(new Error("unsupported_event"))},C);ve={messageChannel:F,onMessage(yi){const Er=yi;if(Er.data.eventId===wt)switch(Er.data.status){case"ack":clearTimeout(mt),Z=setTimeout(()=>{it(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Ve(Er.data.response);break;default:clearTimeout(mt),clearTimeout(Z),it(new Error("invalid_response"))}}},k.handlers.add(ve),F.port1.addEventListener("message",ve.onMessage),k.target.postMessage({eventType:m,eventId:wt,data:v},[F.port2])}).finally(()=>{ve&&k.removeMessageHandler(ve)})})()}}function Ln(){return window}function sl(){return void 0!==Ln().WorkerGlobalScope&&"function"==typeof Ln().importScripts}function Rr(){return(Rr=(0,l.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Gu="firebaseLocalStorageDb",fa="firebaseLocalStorage",On="fbase_key";class Xr{constructor(m){this.request=m}toPromise(){return new Promise((m,v)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function al(y,m){return y.transaction([fa],m?"readwrite":"readonly").objectStore(fa)}function Ls(){const y=indexedDB.open(Gu,1);return new Promise((m,v)=>{y.addEventListener("error",()=>{v(y.error)}),y.addEventListener("upgradeneeded",()=>{const C=y.result;try{C.createObjectStore(fa,{keyPath:On})}catch(k){v(k)}}),y.addEventListener("success",(0,l.Z)(function*(){const C=y.result;C.objectStoreNames.contains(fa)?m(C):(C.close(),yield function Jr(){const y=indexedDB.deleteDatabase(Gu);return new Xr(y).toPromise()}(),m(yield Ls()))}))})}function Si(y,m,v){return eo.apply(this,arguments)}function eo(){return(eo=(0,l.Z)(function*(y,m,v){const C=al(y,!0).put({[On]:m,value:v});return new Xr(C).toPromise()})).apply(this,arguments)}function Bs(){return(Bs=(0,l.Z)(function*(y,m){const v=al(y,!1).get(m),C=yield new Xr(v).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Mo(y,m){const v=al(y,!0).delete(m);return new Xr(v).toPromise()}const Or=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,l.Z)(function*(){return v.db||(v.db=yield Ls()),v.db})()}_withRetries(v){var C=this;return(0,l.Z)(function*(){let k=0;for(;;)try{const F=yield C._openDb();return yield v(F)}catch(F){if(k++>3)throw F;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,l.Z)(function*(){return sl()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,l.Z)(function*(){v.receiver=zn._getInstance(function Lg(){return sl()?self:null}()),v.receiver._subscribe("keyChanged",function(){var C=(0,l.Z)(function*(k,F){return{keyProcessed:(yield v._poll()).includes(F.key)}});return function(k,F){return C.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var C=(0,l.Z)(function*(k,F){return["keyChanged"]});return function(k,F){return C.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,l.Z)(function*(){var C,k;if(v.activeServiceWorker=yield function ha(){return Rr.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new ah(v.activeServiceWorker);const F=yield v.sender._send("ping",{},800);!F||(null===(C=F[0])||void 0===C?void 0:C.fulfilled)&&(null===(k=F[0])||void 0===k?void 0:k.value.includes("keyChanged"))&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var C=this;return(0,l.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function et(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:v},C.serviceWorkerReceiverAvailable?800:50)}catch(k){}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const v=yield Ls();return yield Si(v,$u,"1"),yield Mo(v,$u),!0}catch(v){}return!1})()}_withPendingWrite(v){var C=this;return(0,l.Z)(function*(){C.pendingWrites++;try{yield v()}finally{C.pendingWrites--}})()}_set(v,C){var k=this;return(0,l.Z)(function*(){return k._withPendingWrite((0,l.Z)(function*(){return yield k._withRetries(F=>Si(F,v,C)),k.localCache[v]=C,k.notifyServiceWorker(v)}))})()}_get(v){var C=this;return(0,l.Z)(function*(){const k=yield C._withRetries(F=>function qu(y,m){return Bs.apply(this,arguments)}(F,v));return C.localCache[v]=k,k})()}_remove(v){var C=this;return(0,l.Z)(function*(){return C._withPendingWrite((0,l.Z)(function*(){return yield C._withRetries(k=>Mo(k,v)),delete C.localCache[v],C.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,l.Z)(function*(){const C=yield v._withRetries(Z=>{const ve=al(Z,!1).getAll();return new Xr(ve).toPromise()});if(!C)return[];if(0!==v.pendingWrites)return[];const k=[],F=new Set;for(const{fbase_key:Z,value:ve}of C)F.add(Z),JSON.stringify(v.localCache[Z])!==JSON.stringify(ve)&&(v.notifyListeners(Z,ve),k.push(Z));for(const Z of Object.keys(v.localCache))v.localCache[Z]&&!F.has(Z)&&(v.notifyListeners(Z,null),k.push(Z));return k})()}notifyListeners(v,C){this.localCache[v]=C;const k=this.listeners[v];if(k)for(const F of Array.from(k))F(C)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(C)}_removeListener(v,C){this.listeners[v]&&(this.listeners[v].delete(C),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Ao(y,m){return Wt(y,"POST","/v2/accounts/mfaSignIn:start",sn(y,m))}function ma(){return(ma=(0,l.Z)(function*(y){return(yield Wt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function mn(y){return new Promise((m,v)=>{const C=document.createElement("script");C.setAttribute("src",y),C.onload=m,C.onerror=k=>{const F=Ee("internal-error");F.customData=k,v(F)},C.type="text/javascript",C.charset="UTF-8",function ga(){var y,m;return null!==(m=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==m?m:document}().appendChild(C)})}function Bn(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Ti=1e12;class gn{constructor(m){this.auth=m,this.counter=Ti,this._widgets=new Map}render(m,v){const C=this.counter;return this._widgets.set(C,new ko(m,this.auth.name,v||{})),this.counter++,C}reset(m){var v;const C=m||Ti;null===(v=this._widgets.get(C))||void 0===v||v.delete(),this._widgets.delete(C)}getResponse(m){var v;return(null===(v=this._widgets.get(m||Ti))||void 0===v?void 0:v.getResponse())||""}execute(m){var v=this;return(0,l.Z)(function*(){var C;return null===(C=v._widgets.get(m||Ti))||void 0===C||C.execute(),""})()}}class ko{constructor(m,v,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof m?document.getElementById(m):m;se(k,"argument-error",{appName:v}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ri(y){const m=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<y;C++)m.push(v.charAt(Math.floor(Math.random()*v.length)));return m.join("")}(50);const{callback:m,"expired-callback":v}=this.params;if(m)try{m(this.responseToken)}catch(C){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch(C){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Wi=Bn("rcb"),ip=new bn(3e4,6e4);class Zn{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ln().grecaptcha}load(m,v=""){return se(function op(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(v),m,"argument-error"),this.shouldResolveImmediately(v)?Promise.resolve(Ln().grecaptcha):new Promise((C,k)=>{const F=Ln().setTimeout(()=>{k(Ee(m,"network-request-failed"))},ip.get());Ln()[Wi]=()=>{Ln().clearTimeout(F),delete Ln()[Wi];const ve=Ln().grecaptcha;if(!ve)return void k(Ee(m,"internal-error"));const Ve=ve.render;ve.render=(it,wt)=>{const mt=Ve(it,wt);return this.counter++,mt},this.hostLanguage=v,C(ve)},mn(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:Wi,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(F),k(Ee(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){return!!Ln().grecaptcha&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Bg{load(m){return(0,l.Z)(function*(){return new gn(m)})()}clearedOneInstance(){}}const Vs="recaptcha",vi={theme:"light",type:"image"};class cl{constructor(m,v=Object.assign({},vi),C){this.parameters=v,this.type=Vs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Le(C),this.isInvisible="invisible"===this.parameters.size,se("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof m?document.getElementById(m):m;se(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Bg:new Zn,this.validateStartingState()}verify(){var m=this;return(0,l.Z)(function*(){m.assertNotDestroyed();const v=yield m.render(),C=m.getAssertedRecaptcha();return C.getResponse(v)||new Promise(F=>{const Z=ve=>{!ve||(m.tokenChangeListeners.delete(Z),F(ve))};m.tokenChangeListeners.add(Z),m.isInvisible&&C.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){se(!this.parameters.sitekey,this.auth,"argument-error"),se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),se("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return v=>{if(this.tokenChangeListeners.forEach(C=>C(v)),"function"==typeof m)m(v);else if("string"==typeof m){const C=Ln()[m];"function"==typeof C&&C(v)}}}assertNotDestroyed(){se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,l.Z)(function*(){if(yield m.init(),!m.widgetId){let v=m.container;if(!m.isInvisible){const C=document.createElement("div");v.appendChild(C),v=C}m.widgetId=m.getAssertedRecaptcha().render(v,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,l.Z)(function*(){se(on()&&!sl(),m.auth,"internal-error"),yield function Us(){let y=null;return new Promise(m=>{"complete"!==document.readyState?(y=()=>m(),window.addEventListener("load",y)):m()}).catch(m=>{throw y&&window.removeEventListener("load",y),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const v=yield function Yn(y){return ma.apply(this,arguments)}(m.auth);se(v,m.auth,"internal-error"),m.parameters.sitekey=v})()}getAssertedRecaptcha(){return se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class $c{constructor(m,v){this.verificationId=m,this.onConfirmation=v}confirm(m){const v=Qa._fromVerification(this.verificationId,m);return this.onConfirmation(v)}}function zu(){return(zu=(0,l.Z)(function*(y,m,v){const C=Le(y),k=yield Wl(C,m,(0,U.m9)(v));return new $c(k,F=>ni(C,F))})).apply(this,arguments)}function Gc(){return(Gc=(0,l.Z)(function*(y,m,v){const C=(0,U.m9)(y);yield As(!1,C,"phone");const k=yield Wl(C.auth,m,(0,U.m9)(v));return new $c(k,F=>Yr(C,F))})).apply(this,arguments)}function lh(){return(lh=(0,l.Z)(function*(y,m,v){const C=(0,U.m9)(y),k=yield Wl(C.auth,m,(0,U.m9)(v));return new $c(k,F=>ks(C,F))})).apply(this,arguments)}function Wl(y,m,v){return tr.apply(this,arguments)}function tr(){return(tr=(0,l.Z)(function*(y,m,v){var C;const k=yield v.verify();try{let F;if(se("string"==typeof k,y,"argument-error"),se(v.type===Vs,y,"argument-error"),F="string"==typeof m?{phoneNumber:m}:m,"session"in F){const Z=F.session;if("phoneNumber"in F)return se("enroll"===Z.type,y,"internal-error"),(yield ii(y,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{se("signin"===Z.type,y,"internal-error");const ve=(null===(C=F.multiFactorHint)||void 0===C?void 0:C.uid)||F.multiFactorUid;return se(ve,y,"missing-multi-factor-info"),(yield Ao(y,{mfaPendingCredential:Z.credential,mfaEnrollmentId:ve,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield Rg(y,{phoneNumber:F.phoneNumber,recaptchaToken:k});return Z}}finally{v._reset()}})).apply(this,arguments)}function _a(){return(_a=(0,l.Z)(function*(y,m){yield Tn((0,U.m9)(y),m)})).apply(this,arguments)}let Ro=(()=>{class y{constructor(v){this.providerId=y.PROVIDER_ID,this.auth=Le(v)}verifyPhoneNumber(v,C){return Wl(this.auth,v,(0,U.m9)(C))}static credential(v,C){return Qa._fromVerification(v,C)}static credentialFromResult(v){return y.credentialFromTaggedObject(v)}static credentialFromError(v){return y.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:C,temporaryProof:k}=v;return C&&k?Qa._fromTokenResponse(C,k):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function yr(y,m){return m?le(m):(se(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class ul extends hn{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return si(m,this._buildIdpRequest())}_linkToIdToken(m,v){return si(m,this._buildIdpRequest(v))}_getReauthenticationResolver(m){return si(m,this._buildIdpRequest())}_buildIdpRequest(m){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(v.idToken=m),v}}function Wu(y){return aa(y.auth,new ul(y),y.bypassAuthState)}function qc(y){const{auth:m,user:v}=y;return se(v,m,"internal-error"),eh(v,new ul(y),y.bypassAuthState)}function jt(y){return sp.apply(this,arguments)}function sp(){return(sp=(0,l.Z)(function*(y){const{auth:m,user:v}=y;return se(v,m,"internal-error"),Tn(v,new ul(y),y.bypassAuthState)})).apply(this,arguments)}class va{constructor(m,v,C,k,F=!1){this.auth=m,this.resolver=C,this.user=k,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var m=this;return new Promise(function(){var v=(0,l.Z)(function*(C,k){m.pendingPromise={resolve:C,reject:k};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(F){m.reject(F)}});return function(C,k){return v.apply(this,arguments)}}())}onAuthEvent(m){var v=this;return(0,l.Z)(function*(){const{urlResponse:C,sessionId:k,postBody:F,tenantId:Z,error:ve,type:Ve}=m;if(ve)return void v.reject(ve);const it={auth:v.auth,requestUri:C,sessionId:k,tenantId:Z||void 0,postBody:F||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(Ve)(it))}catch(wt){v.reject(wt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Wu;case"linkViaPopup":case"linkViaRedirect":return jt;case"reauthViaPopup":case"reauthViaRedirect":return qc;default:Me(this.auth,"internal-error")}}resolve(m){ae(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){ae(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wr=new bn(2e3,1e4);function js(){return(js=(0,l.Z)(function*(y,m,v){const C=Le(y);Ze(y,m,Ts);const k=yr(C,v);return new Po(C,"signInViaPopup",m,k).executeNotNull()})).apply(this,arguments)}function Kl(){return(Kl=(0,l.Z)(function*(y,m,v){const C=(0,U.m9)(y);Ze(C.auth,m,Ts);const k=yr(C.auth,v);return new Po(C.auth,"reauthViaPopup",m,k,C).executeNotNull()})).apply(this,arguments)}function zc(){return(zc=(0,l.Z)(function*(y,m,v){const C=(0,U.m9)(y);Ze(C.auth,m,Ts);const k=yr(C.auth,v);return new Po(C.auth,"linkViaPopup",m,k,C).executeNotNull()})).apply(this,arguments)}let Po=(()=>{class y extends va{constructor(v,C,k,F,Z){super(v,C,F,Z),this.provider=k,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var v=this;return(0,l.Z)(function*(){const C=yield v.execute();return se(C,v.auth,"internal-error"),C})()}onExecution(){var v=this;return(0,l.Z)(function*(){ae(1===v.filter.length,"Popup operations only handle one event");const C=Fs();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],C),v.authWindow.associatedEvent=C,v.resolver._originValidation(v.auth).catch(k=>{v.reject(k)}),v.resolver._isIframeWebStorageSupported(v.auth,k=>{k||v.reject(Ee(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const v=()=>{var C,k;this.pollId=(null===(k=null===(C=this.authWindow)||void 0===C?void 0:C.window)||void 0===k?void 0:k.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(v,wr.get())};v()}}return y.currentPopupAction=null,y})();const is=new Map;class bi extends va{constructor(m,v,C=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,C),this.eventId=null}execute(){var m=()=>super.execute,v=this;return(0,l.Z)(function*(){let C=is.get(v.auth._key());if(!C){try{const F=(yield function no(y,m){return ba.apply(this,arguments)}(v.resolver,v.auth))?yield m().call(v):null;C=()=>Promise.resolve(F)}catch(k){C=()=>Promise.reject(k)}is.set(v.auth._key(),C)}return v.bypassAuthState||is.set(v.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(m){var v=()=>super.onAuthEvent,C=this;return(0,l.Z)(function*(){if("signInViaRedirect"===m.type)return v().call(C,m);if("unknown"!==m.type){if(m.eventId){const k=yield C.auth._redirectUserForId(m.eventId);if(k)return C.user=k,v().call(C,m);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function ba(){return(ba=(0,l.Z)(function*(y,m){const v=T(m),C=S(y);if(!(yield C._isAvailable()))return!1;const k="true"===(yield C._get(v));return yield C._remove(v),k})).apply(this,arguments)}function uh(y,m){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,l.Z)(function*(y,m){return S(y)._set(T(m),"true")})).apply(this,arguments)}function S(y){return le(y._redirectPersistence)}function T(y){return pe("pendingRedirect",y.config.apiKey,y.name)}function Q(){return(Q=(0,l.Z)(function*(y,m,v){const C=Le(y);Ze(y,m,Ts);const k=yr(C,v);return yield uh(k,C),k._openRedirect(C,m,"signInViaRedirect")})).apply(this,arguments)}function Oe(){return(Oe=(0,l.Z)(function*(y,m,v){const C=(0,U.m9)(y);Ze(C.auth,m,Ts);const k=yr(C.auth,v);yield uh(k,C.auth);const F=yield ya(C);return k._openRedirect(C.auth,m,"reauthViaRedirect",F)})).apply(this,arguments)}function Ft(){return(Ft=(0,l.Z)(function*(y,m,v){const C=(0,U.m9)(y);Ze(C.auth,m,Ts);const k=yr(C.auth,v);yield As(!1,C,m.providerId),yield uh(k,C.auth);const F=yield ya(C);return k._openRedirect(C.auth,m,"linkViaRedirect",F)})).apply(this,arguments)}function Mi(){return(Mi=(0,l.Z)(function*(y,m){return yield Le(y)._initializationPromise,Mn(y,m,!1)})).apply(this,arguments)}function Mn(y,m){return dl.apply(this,arguments)}function dl(){return(dl=(0,l.Z)(function*(y,m,v=!1){const C=Le(y),k=yr(C,m),Z=yield new bi(C,k,v).execute();return Z&&!v&&(delete Z.user._redirectEventId,yield C._persistUserIfCurrent(Z.user),yield C._setRedirectUser(null,m)),Z})).apply(this,arguments)}function ya(y){return io.apply(this,arguments)}function io(){return(io=(0,l.Z)(function*(y){const m=Fs(`${y.uid}:::`);return y._redirectEventId=m,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),m})).apply(this,arguments)}class nr{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let v=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(m,C)&&(v=!0,this.sendToConsumer(m,C),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function dh(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hl(y);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=m,v=!0)),v}sendToConsumer(m,v){var C;if(m.error&&!hl(m)){const k=(null===(C=m.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";v.onError(Ee(this.auth,k))}else v.onAuthEvent(m)}isEventForConsumer(m,v){const C=null===v.eventId||!!m.eventId&&m.eventId===v.eventId;return v.filter.includes(m.type)&&C}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wc(m))}saveEventToCache(m){this.cachedEventUids.add(Wc(m)),this.lastProcessedEventTime=Date.now()}}function Wc(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(m=>m).join("-")}function hl({type:y,error:m}){return"unknown"===y&&"auth/no-auth-event"===(null==m?void 0:m.code)}function hh(y){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,l.Z)(function*(y,m={}){return Wt(y,"GET","/v1/projects",m)})).apply(this,arguments)}const fh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vg=/^https?/;function Zc(){return(Zc=(0,l.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:m}=yield hh(y);for(const v of m)try{if(Kc(v))return}catch(C){}Me(y,"unauthorized-domain")})).apply(this,arguments)}function Kc(y){const m=At(),{protocol:v,hostname:C}=new URL(m);if(y.startsWith("chrome-extension://")){const Z=new URL(y);return""===Z.hostname&&""===C?"chrome-extension:"===v&&y.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===v&&Z.hostname===C}if(!Vg.test(v))return!1;if(fh.test(y))return C===y;const k=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(C)}const Zu=new bn(3e4,6e4);function Ug(){const y=Ln().___jsl;if(null==y?void 0:y.H)for(const m of Object.keys(y.H))if(y.H[m].r=y.H[m].r||[],y.H[m].L=y.H[m].L||[],y.H[m].r=[...y.H[m].L],y.CP)for(let v=0;v<y.CP.length;v++)y.CP[v]=null}let Ku=null;function jg(y){return Ku=Ku||function EE(y){return new Promise((m,v)=>{var C,k,F;function Z(){Ug(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{Ug(),v(Ee(y,"network-request-failed"))},timeout:Zu.get()})}if(null===(k=null===(C=Ln().gapi)||void 0===C?void 0:C.iframes)||void 0===k?void 0:k.Iframe)m(gapi.iframes.getContext());else{if(!(null===(F=Ln().gapi)||void 0===F?void 0:F.load)){const ve=Bn("iframefcb");return Ln()[ve]=()=>{gapi.load?Z():v(Ee(y,"network-request-failed"))},mn(`https://apis.google.com/js/api.js?onload=${ve}`).catch(Ve=>v(Ve))}Z()}}).catch(m=>{throw Ku=null,m})}(y),Ku}const Hg=new bn(5e3,15e3),Qc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Qu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ph(y){const m=y.config;se(m.authDomain,y,"auth-domain-config-required");const v=m.emulator?yn(m,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,C={apiKey:m.apiKey,appName:y.name,v:ue.SDK_VERSION},k=Qu.get(y.config.apiHost);k&&(C.eid=k);const F=y._getFrameworks();return F.length&&(C.fw=F.join(",")),`${v}?${(0,U.xO)(C).slice(1)}`}function Ca(){return Ca=(0,l.Z)(function*(y){const m=yield jg(y),v=Ln().gapi;return se(v,y,"internal-error"),m.open({where:document.body,url:ph(y),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qc,dontclear:!0},C=>new Promise(function(){var k=(0,l.Z)(function*(F,Z){yield C.restyle({setHideOnLeave:!1});const ve=Ee(y,"network-request-failed"),Ve=Ln().setTimeout(()=>{Z(ve)},Hg.get());function it(){Ln().clearTimeout(Ve),F(C)}C.ping(it).then(it,()=>{Z(ve)})});return function(F,Z){return k.apply(this,arguments)}}()))}),Ca.apply(this,arguments)}const $g={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class _h{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(m){}}}function lp(y,m,v,C,k,F){se(y.config.authDomain,y,"auth-domain-config-required"),se(y.config.apiKey,y,"invalid-api-key");const Z={apiKey:y.config.apiKey,appName:y.name,authType:v,redirectUrl:C,v:ue.SDK_VERSION,eventId:k};if(m instanceof Ts){m.setDefaultLanguage(y.languageCode),Z.providerId=m.providerId||"",(0,U.xb)(m.getCustomParameters())||(Z.customParameters=JSON.stringify(m.getCustomParameters()));for(const[Ve,it]of Object.entries(F||{}))Z[Ve]=it}if(m instanceof vr){const Ve=m.getScopes().filter(it=>""!==it);Ve.length>0&&(Z.scopes=Ve.join(","))}y.tenantId&&(Z.tid=y.tenantId);const ve=Z;for(const Ve of Object.keys(ve))void 0===ve[Ve]&&delete ve[Ve];return`${function fy({config:y}){return y.emulator?yn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,U.xO)(ve).slice(1)}`}const cp="webStorageSupport";class yh extends class bh{constructor(m){this.factorId=m}_process(m,v,C){switch(v.type){case"enroll":return this._finalizeEnroll(m,v.credential,C);case"signin":return this._finalizeSignIn(m,v.credential);default:return X("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new yh(m)}_finalizeEnroll(m,v,C){return function Hu(y,m){return Wt(y,"POST","/v2/accounts/mfaEnrollment:finalize",sn(y,m))}(m,{idToken:v,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,v){return function Wn(y,m){return Wt(y,"POST","/v2/accounts/mfaSignIn:finalize",sn(y,m))}(m,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Gg=(()=>{class y{constructor(){}static assertion(v){return yh._fromCredential(v)}}return y.FACTOR_ID="phone",y})();var qg="@firebase/auth",wh="0.19.12";class py{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var v=this;return(0,l.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const v=this.auth.onIdTokenChanged(C=>{var k;m((null===(k=C)||void 0===k?void 0:k.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,v),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const v=this.internalListeners.get(m);!v||(this.internalListeners.delete(m),v(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function $s(){return window}function up(){return(up=(0,l.Z)(function*(y,m,v){var C;const{BuildInfo:k}=$s();ae(m.sessionId,"AuthEvent did not contain a session ID");const F=yield xa(m.sessionId),Z={};return Di()?Z.ibi=k.packageName:Gn()?Z.apn=k.packageName:Me(y,"operation-not-supported-in-this-environment"),k.displayName&&(Z.appDisplayName=k.displayName),Z.sessionId=F,lp(y,v,m.type,void 0,null!==(C=m.eventId)&&void 0!==C?C:void 0,Z)})).apply(this,arguments)}function Ju(){return(Ju=(0,l.Z)(function*(y){const{BuildInfo:m}=$s(),v={};Di()?v.iosBundleId=m.packageName:Gn()?v.androidPackageName=m.packageName:Me(y,"operation-not-supported-in-this-environment"),yield hh(y,v)})).apply(this,arguments)}function Ch(){return(Ch=(0,l.Z)(function*(y,m,v){const{cordova:C}=$s();let k=()=>{};try{yield new Promise((F,Z)=>{let ve=null;function Ve(){var mt;F();const yi=null===(mt=C.plugins.browsertab)||void 0===mt?void 0:mt.close;"function"==typeof yi&&yi(),"function"==typeof(null==v?void 0:v.close)&&v.close()}function it(){ve||(ve=window.setTimeout(()=>{Z(Ee(y,"redirect-cancelled-by-user"))},2e3))}function wt(){"visible"===(null==document?void 0:document.visibilityState)&&it()}m.addPassiveListener(Ve),document.addEventListener("resume",it,!1),Gn()&&document.addEventListener("visibilitychange",wt,!1),k=()=>{m.removePassiveListener(Ve),document.removeEventListener("resume",it,!1),document.removeEventListener("visibilitychange",wt,!1),ve&&window.clearTimeout(ve)}})}finally{k()}})).apply(this,arguments)}function xa(y){return Yg.apply(this,arguments)}function Yg(){return(Yg=(0,l.Z)(function*(y){const m=eu(y),v=yield crypto.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(v)).map(k=>k.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function eu(y){if(ae(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const m=new ArrayBuffer(y.length),v=new Uint8Array(m);for(let C=0;C<y.length;C++)v[C]=y.charCodeAt(C);return v}!function my(y){(0,ue._registerComponent)(new ie.wA("auth",(m,{options:v})=>{const C=m.getProvider("app").getImmediate(),k=m.getProvider("heartbeat"),{apiKey:F,authDomain:Z}=C.options;return((ve,Ve)=>{se(F&&!F.includes(":"),"invalid-api-key",{appName:ve.name}),se(!(null==Z?void 0:Z.includes(":")),"argument-error",{appName:ve.name});const it={apiKey:F,authDomain:Z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rl(y)},wt=new Tr(ve,Ve,it);return function de(y,m){const v=(null==m?void 0:m.persistence)||[],C=(Array.isArray(v)?v:[v]).map(le);(null==m?void 0:m.errorMap)&&y._updateErrorMap(m.errorMap),y._initializeWithPersistence(C,null==m?void 0:m.popupRedirectResolver)}(wt,v),wt})(C,k)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,v,C)=>{m.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new ie.wA("auth-internal",m=>{const v=Le(m.getProvider("auth").getImmediate());return new py(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(qg,wh,function zg(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ue.registerVersion)(qg,wh,"esm2017")}("Browser");class dp extends nr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(m=>{this.resolveInialized=m})}addPassiveListener(m){this.passiveListeners.add(m)}removePassiveListener(m){this.passiveListeners.delete(m)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(m){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(m)),super.onEvent(m)}initialized(){var m=this;return(0,l.Z)(function*(){yield m.initPromise})()}}function td(y){return tu.apply(this,arguments)}function tu(){return(tu=(0,l.Z)(function*(y){const m=yield id()._get(pp(y));return m&&(yield id()._remove(pp(y))),m})).apply(this,arguments)}function nd(){const y=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<20;v++){const C=Math.floor(Math.random()*m.length);y.push(m.charAt(C))}return y.join("")}function id(){return le(qn)}function pp(y){return pe("authEvent",y.config.apiKey,y.name)}function Xl(y){if(!(null==y?void 0:y.includes("?")))return{};const[m,...v]=y.split("?");return(0,U.zd)(v.join("?"))}function Kn(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function Dh(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function e_(y=(0,U.z$)()){return!("file:"!==Dh()&&"ionic:"!==Dh()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jl(){try{const y=self.localStorage,m=Fs();if(y)return y.setItem(m,"1"),y.removeItem(m),!function gp(y=(0,U.z$)()){return function t_(){return(0,U.w1)()&&11===(null==document?void 0:document.documentMode)}()||function by(y=(0,U.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,U.hl)()}catch(y){return li()&&(0,U.hl)()}return!1}function li(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function iu(){return(function vy(){return"http:"===Dh()||"https:"===Dh()}()||(0,U.ru)()||e_())&&!function Ih(){return(0,U.b$)()||(0,U.UG)()}()&&Jl()&&!li()}function _p(){return e_()&&"undefined"!=typeof document}function Vi(){return(Vi=(0,l.Z)(function*(){return!!_p()&&new Promise(y=>{const m=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(m),y(!0)})})})).apply(this,arguments)}const Cr={LOCAL:"local",NONE:"none",SESSION:"session"},ec=se,i_="persistence";function ru(y){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,l.Z)(function*(y){yield y._initializationPromise;const m=ou(),v=pe(i_,y.config.apiKey,y.name);m&&m.setItem(v,y._getPersistence())})).apply(this,arguments)}function ou(){var y;try{return(null===(y=function od(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(m){return null}}const wy=se;class Lo{constructor(){this.browserResolver=le(class No{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pt,this._completeRedirectFn=Mn}_openPopup(m,v,C,k){var F=this;return(0,l.Z)(function*(){var Z;ae(null===(Z=F.eventManagers[m._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const ve=lp(m,v,C,At(),k);return function vh(y,m,v,C=500,k=600){const F=Math.max((window.screen.availHeight-k)/2,0).toString(),Z=Math.max((window.screen.availWidth-C)/2,0).toString();let ve="";const Ve=Object.assign(Object.assign({},$g),{width:C.toString(),height:k.toString(),top:F,left:Z}),it=(0,U.z$)().toLowerCase();v&&(ve=$i(it)?"_blank":v),xt(it)&&(m=m||"http://localhost",Ve.scrollbars="yes");const wt=Object.entries(Ve).reduce((yi,[Er,ld])=>`${yi}${Er}=${ld},`,"");if(function gc(y=(0,U.z$)()){var m;return Di(y)&&!!(null===(m=window.navigator)||void 0===m?void 0:m.standalone)}(it)&&"_self"!==ve)return function Ea(y,m){const v=document.createElement("a");v.href=y,v.target=m;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(C)}(m||"",ve),new _h(null);const mt=window.open(m||"",ve,wt);se(mt,y,"popup-blocked");try{mt.focus()}catch(yi){}return new _h(mt)}(m,ve,Fs())})()}_openRedirect(m,v,C,k){var F=this;return(0,l.Z)(function*(){return yield F._originValidation(m),function ol(y){Ln().location.href=y}(lp(m,v,C,At(),k)),new Promise(()=>{})})()}_initialize(m){const v=m._key();if(this.eventManagers[v]){const{manager:k,promise:F}=this.eventManagers[v];return k?Promise.resolve(k):(ae(F,"If manager is not set, promise should be"),F)}const C=this.initAndGetManager(m);return this.eventManagers[v]={promise:C},C.catch(()=>{delete this.eventManagers[v]}),C}initAndGetManager(m){var v=this;return(0,l.Z)(function*(){const C=yield function Xc(y){return Ca.apply(this,arguments)}(m),k=new nr(m);return C.register("authEvent",F=>(se(null==F?void 0:F.authEvent,m,"invalid-auth-event"),{status:k.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[m._key()]={manager:k},v.iframes[m._key()]=C,k})()}_isIframeWebStorageSupported(m,v){this.iframes[m._key()].send(cp,{type:cp},k=>{var F;const Z=null===(F=null==k?void 0:k[0])||void 0===F?void 0:F[cp];void 0!==Z&&v(!!Z),Me(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const v=m._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function dy(y){return Zc.apply(this,arguments)}(m)),this.originValidationPromises[v]}get _shouldInitProactively(){return Zo()||rn()||Di()}}),this.cordovaResolver=le(class rd{constructor(){this._redirectPersistence=pt,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Mn}_initialize(m){var v=this;return(0,l.Z)(function*(){const C=m._key();let k=v.eventManagers.get(C);return k||(k=new dp(m),v.eventManagers.set(C,k),v.attachCallbackListeners(m,k)),k})()}_openPopup(m){Me(m,"operation-not-supported-in-this-environment")}_openRedirect(m,v,C,k){var F=this;return(0,l.Z)(function*(){!function Eh(y){var m,v,C,k,F,Z,ve,Ve,it,wt;const mt=$s();se("function"==typeof(null===(m=null==mt?void 0:mt.universalLinks)||void 0===m?void 0:m.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),se(void 0!==(null===(v=null==mt?void 0:mt.BuildInfo)||void 0===v?void 0:v.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),se("function"==typeof(null===(F=null===(k=null===(C=null==mt?void 0:mt.cordova)||void 0===C?void 0:C.plugins)||void 0===k?void 0:k.browsertab)||void 0===F?void 0:F.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),se("function"==typeof(null===(Ve=null===(ve=null===(Z=null==mt?void 0:mt.cordova)||void 0===Z?void 0:Z.plugins)||void 0===ve?void 0:ve.browsertab)||void 0===Ve?void 0:Ve.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),se("function"==typeof(null===(wt=null===(it=null==mt?void 0:mt.cordova)||void 0===it?void 0:it.InAppBrowser)||void 0===wt?void 0:wt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(m);const Z=yield F._initialize(m);yield Z.initialized(),Z.resetRedirect(),function Yu(){is.clear()}(),yield F._originValidation(m);const ve=function hp(y,m,v=null){return{type:m,eventId:v,urlResponse:null,sessionId:nd(),postBody:null,tenantId:y.tenantId,error:Ee(y,"no-auth-event")}}(m,C,k);yield function fp(y,m){return id()._set(pp(y),m)}(m,ve);const Ve=yield function Wg(y,m,v){return up.apply(this,arguments)}(m,ve,v),it=yield function Gs(y){const{cordova:m}=$s();return new Promise(v=>{m.plugins.browsertab.isAvailable(C=>{let k=null;C?m.plugins.browsertab.openUrl(y):k=m.InAppBrowser.open(y,function ia(y=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),v(k)})})}(Ve);return function ed(y,m,v){return Ch.apply(this,arguments)}(m,Z,it)})()}_isIframeWebStorageSupported(m,v){throw new Error("Method not implemented.")}_originValidation(m){const v=m._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Jc(y){return Ju.apply(this,arguments)}(m)),this.originValidationPromises[v]}attachCallbackListeners(m,v){const{universalLinks:C,handleOpenURL:k,BuildInfo:F}=$s(),Z=setTimeout((0,l.Z)(function*(){yield td(m),v.onEvent(Kn())}),500),ve=function(){var wt=(0,l.Z)(function*(mt){clearTimeout(Z);const yi=yield td(m);let Er=null;yi&&(null==mt?void 0:mt.url)&&(Er=function Zg(y,m){var v,C;const k=function mp(y){const m=Xl(y),v=m.link?decodeURIComponent(m.link):void 0,C=Xl(v).link,k=m.deep_link_id?decodeURIComponent(m.deep_link_id):void 0;return Xl(k).link||k||C||v||y}(m);if(k.includes("/__/auth/callback")){const F=Xl(k),Z=F.firebaseError?function Kg(y){try{return JSON.parse(y)}catch(m){return null}}(decodeURIComponent(F.firebaseError)):null,ve=null===(C=null===(v=null==Z?void 0:Z.code)||void 0===v?void 0:v.split("auth/"))||void 0===C?void 0:C[1],Ve=ve?Ee(ve):null;return Ve?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:k,postBody:null}}return null}(yi,mt.url)),v.onEvent(Er||Kn())});return function(yi){return wt.apply(this,arguments)}}();void 0!==C&&"function"==typeof C.subscribe&&C.subscribe(null,ve);const Ve=k,it=`${F.packageName.toLowerCase()}://`;$s().handleOpenURL=function(){var wt=(0,l.Z)(function*(mt){if(mt.toLowerCase().startsWith(it)&&ve({url:mt}),"function"==typeof Ve)try{Ve(mt)}catch(yi){console.error(yi)}});return function(mt){return wt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=pt,this._completeRedirectFn=Mn}_initialize(m){var v=this;return(0,l.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(m)})()}_openPopup(m,v,C,k){var F=this;return(0,l.Z)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._openPopup(m,v,C,k)})()}_openRedirect(m,v,C,k){var F=this;return(0,l.Z)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._openRedirect(m,v,C,k)})()}_isIframeWebStorageSupported(m,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(m,v)}_originValidation(m){return this.assertedUnderlyingResolver._originValidation(m)}get _shouldInitProactively(){return _p()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return wy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var m=this;return(0,l.Z)(function*(){if(m.underlyingResolver)return;const v=yield function n_(){return Vi.apply(this,arguments)}();m.underlyingResolver=v?m.cordovaResolver:m.browserResolver})()}}function Th(y){return y.unwrap()}function sd(y){return r_(y)}function r_(y){const{_tokenResponse:m}=y instanceof U.ZR?y.customData:y;if(!m)return null;if(!(y instanceof U.ZR)&&"temporaryProof"in m&&"phoneNumber"in m)return Ro.credentialFromResult(y);const v=m.providerId;if(!v||"password"===v)return null;let C;switch(v){case"google.com":C=Fl;break;case"facebook.com":C=oa;break;case"github.com":C=Xd;break;case"twitter.com":C=Cc;break;default:const{oauthIdToken:k,oauthAccessToken:F,oauthTokenSecret:Z,pendingToken:ve,nonce:Ve}=m;return F||Z||k||ve?ve?v.startsWith("saml.")?kn._create(v,ve):Xo._fromParams({providerId:v,signInMethod:v,pendingToken:ve,idToken:k,accessToken:F}):new Xa(v).credential({idToken:k,accessToken:F,rawNonce:Ve}):null}return y instanceof U.ZR?C.credentialFromError(y):C.credentialFromResult(y)}function Pr(y,m){return m.catch(v=>{throw v instanceof U.ZR&&function bp(y,m){var v;const C=null===(v=m.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===m.code)m.resolver=new Ey(y,function Bc(y,m){var v;const C=(0,U.m9)(y),k=m;return se(m.customData.operationType,C,"argument-error"),se(null===(v=k.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,C,"argument-error"),Gl._fromError(C,k)}(y,m));else if(C){const k=r_(m),F=m;k&&(F.credential=k,F.tenantId=C.tenantId||void 0,F.email=C.email||void 0,F.phoneNumber=C.phoneNumber||void 0)}}(y,v),v}).then(v=>{const k=v.user;return{operationType:v.operationType,credential:sd(v),additionalUserInfo:tp(v),user:Da.getOrCreate(k)}})}function su(y,m){return yp.apply(this,arguments)}function yp(){return(yp=(0,l.Z)(function*(y,m){const v=yield m;return{verificationId:v.verificationId,confirm:C=>Pr(y,v.confirm(C))}})).apply(this,arguments)}class Ey{constructor(m,v){this.resolver=v,this.auth=function Cy(y){return y.wrapped()}(m)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(m){return Pr(Th(this.auth),this.resolver.resolveSignIn(m))}}class Da{constructor(m){this._delegate=m,this.multiFactor=function il(y){const m=(0,U.m9)(y);return ts.has(m)||ts.set(m,sh._fromUser(m)),ts.get(m)}(m)}static getOrCreate(m){return Da.USER_MAP.has(m)||Da.USER_MAP.set(m,new Da(m)),Da.USER_MAP.get(m)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(m){return this._delegate.getIdTokenResult(m)}getIdToken(m){return this._delegate.getIdToken(m)}linkAndRetrieveDataWithCredential(m){return this.linkWithCredential(m)}linkWithCredential(m){var v=this;return(0,l.Z)(function*(){return Pr(v.auth,Yr(v._delegate,m))})()}linkWithPhoneNumber(m,v){var C=this;return(0,l.Z)(function*(){return su(C.auth,function ai(y,m,v){return Gc.apply(this,arguments)}(C._delegate,m,v))})()}linkWithPopup(m){var v=this;return(0,l.Z)(function*(){return Pr(v.auth,function Oo(y,m,v){return zc.apply(this,arguments)}(v._delegate,m,Lo))})()}linkWithRedirect(m){var v=this;return(0,l.Z)(function*(){return yield ru(Le(v.auth)),function Dt(y,m,v){return function at(y,m,v){return Ft.apply(this,arguments)}(y,m,v)}(v._delegate,m,Lo)})()}reauthenticateAndRetrieveDataWithCredential(m){return this.reauthenticateWithCredential(m)}reauthenticateWithCredential(m){var v=this;return(0,l.Z)(function*(){return Pr(v.auth,ks(v._delegate,m))})()}reauthenticateWithPhoneNumber(m,v){return su(this.auth,function zl(y,m,v){return lh.apply(this,arguments)}(this._delegate,m,v))}reauthenticateWithPopup(m){return Pr(this.auth,function Zl(y,m,v){return Kl.apply(this,arguments)}(this._delegate,m,Lo))}reauthenticateWithRedirect(m){var v=this;return(0,l.Z)(function*(){return yield ru(Le(v.auth)),function oe(y,m,v){return function ke(y,m,v){return Oe.apply(this,arguments)}(y,m,v)}(v._delegate,m,Lo)})()}sendEmailVerification(m){return function Ns(y,m){return Kr.apply(this,arguments)}(this._delegate,m)}unlink(m){var v=this;return(0,l.Z)(function*(){return yield function Ll(y,m){return Ru.apply(this,arguments)}(v._delegate,m),v})()}updateEmail(m){return function nh(y,m){return ih((0,U.m9)(y),m,null)}(this._delegate,m)}updatePassword(m){return function Nc(y,m){return ih((0,U.m9)(y),null,m)}(this._delegate,m)}updatePhoneNumber(m){return function to(y,m){return _a.apply(this,arguments)}(this._delegate,m)}updateProfile(m){return function tl(y,m){return Pc.apply(this,arguments)}(this._delegate,m)}verifyBeforeUpdateEmail(m,v){return function Lu(y,m,v){return jl.apply(this,arguments)}(this._delegate,m,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Da.USER_MAP=new WeakMap;const ad=se;let o_=(()=>{class y{constructor(v,C){if(this.app=v,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:k}=v.options;ad(k,"invalid-api-key",{appName:v.name}),ad(k,"invalid-api-key",{appName:v.name});const F="undefined"!=typeof window?Lo:void 0;this._delegate=C.initialize({options:{persistence:xy(k,v.name),popupRedirectResolver:F}}),this._delegate._updateErrorMap(Fe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Da.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,C){!function xn(y,m,v){const C=Le(y);se(C._canInitEmulator,C,"emulator-config-failed"),se(/^https?:\/\//.test(m),C,"invalid-emulator-scheme");const k=!!(null==v?void 0:v.disableWarnings),F=Fi(m),{host:Z,port:ve}=function Es(y){const m=Fi(y),v=/(\/\/)?([^?#/]+)/.exec(y.substr(m.length));if(!v)return{host:"",port:null};const C=v[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(C);if(k){const F=k[1];return{host:F,port:oi(C.substr(F.length+1))}}{const[F,Z]=C.split(":");return{host:F,port:oi(Z)}}}(m);C.config.emulator={url:`${F}//${Z}${null===ve?"":`:${ve}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:Z,port:ve,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function So(){function y(){const m=document.createElement("p"),v=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,v,C)}applyActionCode(v){return function Pu(y,m){return la.apply(this,arguments)}(this._delegate,v)}checkActionCode(v){return Te(this._delegate,v)}confirmPasswordReset(v,C){return function Ou(y,m,v){return kc.apply(this,arguments)}(this._delegate,v,C)}createUserWithEmailAndPassword(v,C){var k=this;return(0,l.Z)(function*(){return Pr(k._delegate,function Nu(y,m,v){return Ps.apply(this,arguments)}(k._delegate,v,C))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return function Zr(y,m){return Oc.apply(this,arguments)}(this._delegate,v)}isSignInWithEmailLink(v){return function th(y,m){const v=ra.parseLink(m);return"EMAIL_SIGNIN"===(null==v?void 0:v.operation)}(0,v)}getRedirectResult(){var v=this;return(0,l.Z)(function*(){ad(iu(),v._delegate,"operation-not-supported-in-this-environment");const C=yield function Rt(y,m){return Mi.apply(this,arguments)}(v._delegate,Lo);return C?Pr(v._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function Xg(y,m){Le(y)._logFramework(m)}(this._delegate,v)}onAuthStateChanged(v,C,k){const{next:F,error:Z,complete:ve}=Mh(v,C,k);return this._delegate.onAuthStateChanged(F,Z,ve)}onIdTokenChanged(v,C,k){const{next:F,error:Z,complete:ve}=Mh(v,C,k);return this._delegate.onIdTokenChanged(F,Z,ve)}sendSignInLinkToEmail(v,C){return function Fu(y,m,v){return Vl.apply(this,arguments)}(this._delegate,v,C)}sendPasswordResetEmail(v,C){return function Mc(y,m,v){return Ac.apply(this,arguments)}(this._delegate,v,C||void 0)}setPersistence(v){var C=this;return(0,l.Z)(function*(){let k;switch(function vp(y,m){ec(Object.values(Cr).includes(m),y,"invalid-persistence-type"),(0,U.b$)()?ec(m!==Cr.SESSION,y,"unsupported-persistence-type"):(0,U.UG)()?ec(m===Cr.NONE,y,"unsupported-persistence-type"):li()?ec(m===Cr.NONE||m===Cr.LOCAL&&(0,U.hl)(),y,"unsupported-persistence-type"):ec(m===Cr.NONE||Jl(),y,"unsupported-persistence-type")}(C._delegate,v),v){case Cr.SESSION:k=pt;break;case Cr.LOCAL:k=(yield le(Or)._isAvailable())?Or:qn;break;case Cr.NONE:k=Y;break;default:return Me("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence(k)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return Pr(this._delegate,function xc(y){return Jd.apply(this,arguments)}(this._delegate))}signInWithCredential(v){return Pr(this._delegate,ni(this._delegate,v))}signInWithCustomToken(v){return Pr(this._delegate,function Rs(y,m){return Os.apply(this,arguments)}(this._delegate,v))}signInWithEmailAndPassword(v,C){return Pr(this._delegate,function To(y,m,v){return ni((0,U.m9)(y),ku.credential(m,v))}(this._delegate,v,C))}signInWithEmailLink(v,C){return Pr(this._delegate,function ep(y,m,v){return Rc.apply(this,arguments)}(this._delegate,v,C))}signInWithPhoneNumber(v,C){return su(this._delegate,function ns(y,m,v){return zu.apply(this,arguments)}(this._delegate,v,C))}signInWithPopup(v){var C=this;return(0,l.Z)(function*(){return ad(iu(),C._delegate,"operation-not-supported-in-this-environment"),Pr(C._delegate,function Yl(y,m,v){return js.apply(this,arguments)}(C._delegate,v,Lo))})()}signInWithRedirect(v){var C=this;return(0,l.Z)(function*(){return ad(iu(),C._delegate,"operation-not-supported-in-this-environment"),yield ru(C._delegate),function P(y,m,v){return function H(y,m,v){return Q.apply(this,arguments)}(y,m,v)}(C._delegate,v,Lo)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return function ca(y,m){return Rn.apply(this,arguments)}(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Cr,y})();function Mh(y,m,v){let C=y;"function"!=typeof y&&({next:C,error:m,complete:v}=y);const k=C;return{next:Z=>k(Z&&Da.getOrCreate(Z)),error:m,complete:v}}function xy(y,m){const v=function yy(y,m){const v=ou();if(!v)return[];const C=pe(i_,y,m);switch(v.getItem(C)){case Cr.NONE:return[Y];case Cr.LOCAL:return[Or,pt];case Cr.SESSION:return[pt];default:return[]}}(y,m);if("undefined"!=typeof self&&!v.includes(Or)&&v.push(Or),"undefined"!=typeof window)for(const C of[qn,pt])v.includes(C)||v.push(C);return v.includes(Y)||v.push(Y),v}class wp{constructor(){this.providerId="phone",this._delegate=new Ro(Th(ee.Z.auth()))}static credential(m,v){return Ro.credential(m,v)}verifyPhoneNumber(m,v){return this._delegate.verifyPhoneNumber(m,v)}unwrap(){return this._delegate}}wp.PHONE_SIGN_IN_METHOD=Ro.PHONE_SIGN_IN_METHOD,wp.PROVIDER_ID=Ro.PROVIDER_ID;const Dy=se;class Iy{constructor(m,v,C=ee.Z.app()){var k;Dy(null===(k=C.options)||void 0===k?void 0:k.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new cl(m,v,C.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Cp(y){y.INTERNAL.registerComponent(new ie.wA("auth-compat",m=>{const v=m.getProvider("app-compat").getImmediate(),C=m.getProvider("auth");return new o_(v,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ku,FacebookAuthProvider:oa,GithubAuthProvider:Xd,GoogleAuthProvider:Fl,OAuthProvider:Xa,SAMLAuthProvider:kr,PhoneAuthProvider:wp,PhoneMultiFactorGenerator:Gg,RecaptchaVerifier:Iy,TwitterAuthProvider:Cc,Auth:o_,AuthCredential:hn,Error:U.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.12")}(ee.Z)},8306:(dt,Ie,V)=>{V.d(Ie,{y:()=>W});var l=V(930),ee=V(727),U=V(8822),ue=V(4671);var ie=V(2416),ge=V(576),he=V(2806);let W=(()=>{class Re{constructor(je){je&&(this._subscribe=je)}lift(je){const _e=new Re;return _e.source=this,_e.operator=je,_e}subscribe(je,_e,De){const ot=function Qe(Re){return Re&&Re instanceof l.Lv||function ne(Re){return Re&&(0,ge.m)(Re.next)&&(0,ge.m)(Re.error)&&(0,ge.m)(Re.complete)}(Re)&&(0,ee.Nn)(Re)}(je)?je:new l.Hp(je,_e,De);return(0,he.x)(()=>{const{operator:Je,source:Me}=this;ot.add(Je?Je.call(ot,Me):Me?this._subscribe(ot):this._trySubscribe(ot))}),ot}_trySubscribe(je){try{return this._subscribe(je)}catch(_e){je.error(_e)}}forEach(je,_e){return new(_e=z(_e))((De,ot)=>{const Je=new l.Hp({next:Me=>{try{je(Me)}catch(Ee){ot(Ee),Je.unsubscribe()}},error:ot,complete:De});this.subscribe(Je)})}_subscribe(je){var _e;return null===(_e=this.source)||void 0===_e?void 0:_e.subscribe(je)}[U.L](){return this}pipe(...je){return function ye(Re){return 0===Re.length?ue.y:1===Re.length?Re[0]:function(je){return Re.reduce((_e,De)=>De(_e),je)}}(je)(this)}toPromise(je){return new(je=z(je))((_e,De)=>{let ot;this.subscribe(Je=>ot=Je,Je=>De(Je),()=>_e(ot))})}}return Re.create=Fe=>new Re(Fe),Re})();function z(Re){var Fe;return null!==(Fe=null!=Re?Re:ie.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(dt,Ie,V)=>{V.d(Ie,{x:()=>ie});var l=V(8306),ee=V(727);const ue=(0,V(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=V(8737),ye=V(2806);let ie=(()=>{class he extends l.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const ne=new ge(this,this);return ne.operator=z,ne}_throwIfClosed(){if(this.closed)throw new ue}next(z){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ne of this.currentObservers)ne.next(z)}})}error(z){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:ne}=this;for(;ne.length;)ne.shift().error(z)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:ne,isStopped:Qe,observers:Re}=this;return ne||Qe?ee.Lc:(this.currentObservers=null,Re.push(z),new ee.w0(()=>{this.currentObservers=null,(0,re.P)(Re,z)}))}_checkFinalizedStatuses(z){const{hasError:ne,thrownError:Qe,isStopped:Re}=this;ne?z.error(Qe):Re&&z.complete()}asObservable(){const z=new l.y;return z.source=this,z}}return he.create=(W,z)=>new ge(W,z),he})();class ge extends ie{constructor(W,z){super(),this.destination=W,this.source=z}next(W){var z,ne;null===(ne=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===ne||ne.call(z,W)}error(W){var z,ne;null===(ne=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===ne||ne.call(z,W)}complete(){var W,z;null===(z=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===z||z.call(W)}_subscribe(W){var z,ne;return null!==(ne=null===(z=this.source)||void 0===z?void 0:z.subscribe(W))&&void 0!==ne?ne:ee.Lc}}},930:(dt,Ie,V)=>{V.d(Ie,{Hp:()=>je,Lv:()=>ne});var l=V(576),ee=V(727),U=V(2416),ue=V(7849),re=V(5032);const ye=he("C",void 0,void 0);function he(Me,Ee,xe){return{kind:Me,value:Ee,error:xe}}var W=V(3410),z=V(2806);class ne extends ee.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,ee.Nn)(Ee)&&Ee.add(this)):this.destination=Je}static create(Ee,xe,Ze){return new je(Ee,xe,Ze)}next(Ee){this.isStopped?ot(function ge(Me){return he("N",Me,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?ot(function ie(Me){return he("E",void 0,Me)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?ot(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Qe=Function.prototype.bind;function Re(Me,Ee){return Qe.call(Me,Ee)}class Fe{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:xe}=this;if(xe.next)try{xe.next(Ee)}catch(Ze){_e(Ze)}}error(Ee){const{partialObserver:xe}=this;if(xe.error)try{xe.error(Ee)}catch(Ze){_e(Ze)}else _e(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(xe){_e(xe)}}}class je extends ne{constructor(Ee,xe,Ze){let qe;if(super(),(0,l.m)(Ee)||!Ee)qe={next:null!=Ee?Ee:void 0,error:null!=xe?xe:void 0,complete:null!=Ze?Ze:void 0};else{let se;this&&U.v.useDeprecatedNextContext?(se=Object.create(Ee),se.unsubscribe=()=>this.unsubscribe(),qe={next:Ee.next&&Re(Ee.next,se),error:Ee.error&&Re(Ee.error,se),complete:Ee.complete&&Re(Ee.complete,se)}):qe=Ee}this.destination=new Fe(qe)}}function _e(Me){U.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Me):(0,ue.h)(Me)}function ot(Me,Ee){const{onStoppedNotification:xe}=U.v;xe&&W.z.setTimeout(()=>xe(Me,Ee))}const Je={closed:!0,next:re.Z,error:function De(Me){throw Me},complete:re.Z}},727:(dt,Ie,V)=>{V.d(Ie,{Lc:()=>ye,w0:()=>re,Nn:()=>ie});var l=V(576);const U=(0,V(3888).d)(he=>function(z){he(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((ne,Qe)=>`${Qe+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var ue=V(8737);class re{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Re of z)Re.remove(this);else z.remove(this);const{initialTeardown:ne}=this;if((0,l.m)(ne))try{ne()}catch(Re){W=Re instanceof U?Re.errors:[Re]}const{_finalizers:Qe}=this;if(Qe){this._finalizers=null;for(const Re of Qe)try{ge(Re)}catch(Fe){W=null!=W?W:[],Fe instanceof U?W=[...W,...Fe.errors]:W.push(Fe)}}if(W)throw new U(W)}}add(W){var z;if(W&&W!==this)if(this.closed)ge(W);else{if(W instanceof re){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(W)}}_hasParent(W){const{_parentage:z}=this;return z===W||Array.isArray(z)&&z.includes(W)}_addParent(W){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(W),z):z?[z,W]:W}_removeParent(W){const{_parentage:z}=this;z===W?this._parentage=null:Array.isArray(z)&&(0,ue.P)(z,W)}remove(W){const{_finalizers:z}=this;z&&(0,ue.P)(z,W),W instanceof re&&W._removeParent(this)}}re.EMPTY=(()=>{const he=new re;return he.closed=!0,he})();const ye=re.EMPTY;function ie(he){return he instanceof re||he&&"closed"in he&&(0,l.m)(he.remove)&&(0,l.m)(he.add)&&(0,l.m)(he.unsubscribe)}function ge(he){(0,l.m)(he)?he():he.unsubscribe()}},2416:(dt,Ie,V)=>{V.d(Ie,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(dt,Ie,V)=>{V.d(Ie,{E:()=>ee});const ee=new(V(8306).y)(re=>re.complete())},8996:(dt,Ie,V)=>{V.d(Ie,{D:()=>Ee});var l=V(8421),ee=V(5363),U=V(9468),ye=V(8306),ge=V(2202),he=V(576),W=V(9672);function ne(xe,Ze){if(!xe)throw new Error("Iterable cannot be null");return new ye.y(qe=>{(0,W.f)(qe,Ze,()=>{const se=xe[Symbol.asyncIterator]();(0,W.f)(qe,Ze,()=>{se.next().then(X=>{X.done?qe.complete():qe.next(X.value)})},0,!0)})})}var Qe=V(3670),Re=V(8239),Fe=V(1144),je=V(6495),_e=V(2206),De=V(4532),ot=V(3260);function Ee(xe,Ze){return Ze?function Me(xe,Ze){if(null!=xe){if((0,Qe.c)(xe))return function ue(xe,Ze){return(0,l.Xf)(xe).pipe((0,U.R)(Ze),(0,ee.Q)(Ze))}(xe,Ze);if((0,Fe.z)(xe))return function ie(xe,Ze){return new ye.y(qe=>{let se=0;return Ze.schedule(function(){se===xe.length?qe.complete():(qe.next(xe[se++]),qe.closed||this.schedule())})})}(xe,Ze);if((0,Re.t)(xe))return function re(xe,Ze){return(0,l.Xf)(xe).pipe((0,U.R)(Ze),(0,ee.Q)(Ze))}(xe,Ze);if((0,_e.D)(xe))return ne(xe,Ze);if((0,je.T)(xe))return function z(xe,Ze){return new ye.y(qe=>{let se;return(0,W.f)(qe,Ze,()=>{se=xe[ge.h](),(0,W.f)(qe,Ze,()=>{let X,ae;try{({value:X,done:ae}=se.next())}catch(we){return void qe.error(we)}ae?qe.complete():qe.next(X)},0,!0)}),()=>(0,he.m)(null==se?void 0:se.return)&&se.return()})}(xe,Ze);if((0,ot.L)(xe))return function Je(xe,Ze){return ne((0,ot.Q)(xe),Ze)}(xe,Ze)}throw(0,De.z)(xe)}(xe,Ze):(0,l.Xf)(xe)}},8421:(dt,Ie,V)=>{V.d(Ie,{Xf:()=>Qe});var l=V(655),ee=V(1144),U=V(8239),ue=V(8306),re=V(3670),ye=V(2206),ie=V(4532),ge=V(6495),he=V(3260),W=V(576),z=V(7849),ne=V(8822);function Qe(Me){if(Me instanceof ue.y)return Me;if(null!=Me){if((0,re.c)(Me))return function Re(Me){return new ue.y(Ee=>{const xe=Me[ne.L]();if((0,W.m)(xe.subscribe))return xe.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,ee.z)(Me))return function Fe(Me){return new ue.y(Ee=>{for(let xe=0;xe<Me.length&&!Ee.closed;xe++)Ee.next(Me[xe]);Ee.complete()})}(Me);if((0,U.t)(Me))return function je(Me){return new ue.y(Ee=>{Me.then(xe=>{Ee.closed||(Ee.next(xe),Ee.complete())},xe=>Ee.error(xe)).then(null,z.h)})}(Me);if((0,ye.D)(Me))return De(Me);if((0,ge.T)(Me))return function _e(Me){return new ue.y(Ee=>{for(const xe of Me)if(Ee.next(xe),Ee.closed)return;Ee.complete()})}(Me);if((0,he.L)(Me))return function ot(Me){return De((0,he.Q)(Me))}(Me)}throw(0,ie.z)(Me)}function De(Me){return new ue.y(Ee=>{(function Je(Me,Ee){var xe,Ze,qe,se;return(0,l.mG)(this,void 0,void 0,function*(){try{for(xe=(0,l.KL)(Me);!(Ze=yield xe.next()).done;)if(Ee.next(Ze.value),Ee.closed)return}catch(X){qe={error:X}}finally{try{Ze&&!Ze.done&&(se=xe.return)&&(yield se.call(xe))}finally{if(qe)throw qe.error}}Ee.complete()})})(Me,Ee).catch(xe=>Ee.error(xe))})}},6451:(dt,Ie,V)=>{V.d(Ie,{T:()=>ye});var l=V(8189),ee=V(8421),U=V(515),ue=V(3269),re=V(8996);function ye(...ie){const ge=(0,ue.yG)(ie),he=(0,ue._6)(ie,1/0),W=ie;return W.length?1===W.length?(0,ee.Xf)(W[0]):(0,l.J)(he)((0,re.D)(W,ge)):U.E}},5403:(dt,Ie,V)=>{V.d(Ie,{x:()=>ee});var l=V(930);function ee(ue,re,ye,ie,ge){return new U(ue,re,ye,ie,ge)}class U extends l.Lv{constructor(re,ye,ie,ge,he,W){super(re),this.onFinalize=he,this.shouldUnsubscribe=W,this._next=ye?function(z){try{ye(z)}catch(ne){re.error(ne)}}:super._next,this._error=ge?function(z){try{ge(z)}catch(ne){re.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=ie?function(){try{ie()}catch(z){re.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(dt,Ie,V)=>{V.d(Ie,{U:()=>U});var l=V(4482),ee=V(5403);function U(ue,re){return(0,l.e)((ye,ie)=>{let ge=0;ye.subscribe((0,ee.x)(ie,he=>{ie.next(ue.call(re,he,ge++))}))})}},8189:(dt,Ie,V)=>{V.d(Ie,{J:()=>U});var l=V(5577),ee=V(4671);function U(ue=1/0){return(0,l.z)(ee.y,ue)}},5577:(dt,Ie,V)=>{V.d(Ie,{z:()=>ge});var l=V(4004),ee=V(8421),U=V(4482),ue=V(9672),re=V(5403),ie=V(576);function ge(he,W,z=1/0){return(0,ie.m)(W)?ge((ne,Qe)=>(0,l.U)((Re,Fe)=>W(ne,Re,Qe,Fe))((0,ee.Xf)(he(ne,Qe))),z):("number"==typeof W&&(z=W),(0,U.e)((ne,Qe)=>function ye(he,W,z,ne,Qe,Re,Fe,je){const _e=[];let De=0,ot=0,Je=!1;const Me=()=>{Je&&!_e.length&&!De&&W.complete()},Ee=Ze=>De<ne?xe(Ze):_e.push(Ze),xe=Ze=>{Re&&W.next(Ze),De++;let qe=!1;(0,ee.Xf)(z(Ze,ot++)).subscribe((0,re.x)(W,se=>{null==Qe||Qe(se),Re?Ee(se):W.next(se)},()=>{qe=!0},void 0,()=>{if(qe)try{for(De--;_e.length&&De<ne;){const se=_e.shift();Fe?(0,ue.f)(W,Fe,()=>xe(se)):xe(se)}Me()}catch(se){W.error(se)}}))};return he.subscribe((0,re.x)(W,Ee,()=>{Je=!0,Me()})),()=>{null==je||je()}}(ne,Qe,he,z)))}},5363:(dt,Ie,V)=>{V.d(Ie,{Q:()=>ue});var l=V(9672),ee=V(4482),U=V(5403);function ue(re,ye=0){return(0,ee.e)((ie,ge)=>{ie.subscribe((0,U.x)(ge,he=>(0,l.f)(ge,re,()=>ge.next(he),ye),()=>(0,l.f)(ge,re,()=>ge.complete(),ye),he=>(0,l.f)(ge,re,()=>ge.error(he),ye)))})}},3099:(dt,Ie,V)=>{V.d(Ie,{B:()=>ye});var l=V(8996),ee=V(5698),U=V(7579),ue=V(930),re=V(4482);function ye(ge={}){const{connector:he=(()=>new U.x),resetOnError:W=!0,resetOnComplete:z=!0,resetOnRefCountZero:ne=!0}=ge;return Qe=>{let Re=null,Fe=null,je=null,_e=0,De=!1,ot=!1;const Je=()=>{null==Fe||Fe.unsubscribe(),Fe=null},Me=()=>{Je(),Re=je=null,De=ot=!1},Ee=()=>{const xe=Re;Me(),null==xe||xe.unsubscribe()};return(0,re.e)((xe,Ze)=>{_e++,!ot&&!De&&Je();const qe=je=null!=je?je:he();Ze.add(()=>{_e--,0===_e&&!ot&&!De&&(Fe=ie(Ee,ne))}),qe.subscribe(Ze),Re||(Re=new ue.Hp({next:se=>qe.next(se),error:se=>{ot=!0,Je(),Fe=ie(Me,W,se),qe.error(se)},complete:()=>{De=!0,Je(),Fe=ie(Me,z),qe.complete()}}),(0,l.D)(xe).subscribe(Re))})(Qe)}}function ie(ge,he,...W){return!0===he?(ge(),null):!1===he?null:he(...W).pipe((0,ee.q)(1)).subscribe(()=>ge())}},9468:(dt,Ie,V)=>{V.d(Ie,{R:()=>ee});var l=V(4482);function ee(U,ue=0){return(0,l.e)((re,ye)=>{ye.add(U.schedule(()=>re.subscribe(ye),ue))})}},5698:(dt,Ie,V)=>{V.d(Ie,{q:()=>ue});var l=V(515),ee=V(4482),U=V(5403);function ue(re){return re<=0?()=>l.E:(0,ee.e)((ye,ie)=>{let ge=0;ye.subscribe((0,U.x)(ie,he=>{++ge<=re&&(ie.next(he),re<=ge&&ie.complete())}))})}},8505:(dt,Ie,V)=>{V.d(Ie,{b:()=>re});var l=V(576),ee=V(4482),U=V(5403),ue=V(4671);function re(ye,ie,ge){const he=(0,l.m)(ye)||ie||ge?{next:ye,error:ie,complete:ge}:ye;return he?(0,ee.e)((W,z)=>{var ne;null===(ne=he.subscribe)||void 0===ne||ne.call(he);let Qe=!0;W.subscribe((0,U.x)(z,Re=>{var Fe;null===(Fe=he.next)||void 0===Fe||Fe.call(he,Re),z.next(Re)},()=>{var Re;Qe=!1,null===(Re=he.complete)||void 0===Re||Re.call(he),z.complete()},Re=>{var Fe;Qe=!1,null===(Fe=he.error)||void 0===Fe||Fe.call(he,Re),z.error(Re)},()=>{var Re,Fe;Qe&&(null===(Re=he.unsubscribe)||void 0===Re||Re.call(he)),null===(Fe=he.finalize)||void 0===Fe||Fe.call(he)}))}):ue.y}},4408:(dt,Ie,V)=>{V.d(Ie,{o:()=>re});var l=V(727);class ee extends l.w0{constructor(ie,ge){super()}schedule(ie,ge=0){return this}}const U={setInterval(ye,ie,...ge){const{delegate:he}=U;return(null==he?void 0:he.setInterval)?he.setInterval(ye,ie,...ge):setInterval(ye,ie,...ge)},clearInterval(ye){const{delegate:ie}=U;return((null==ie?void 0:ie.clearInterval)||clearInterval)(ye)},delegate:void 0};var ue=V(8737);class re extends ee{constructor(ie,ge){super(ie,ge),this.scheduler=ie,this.work=ge,this.pending=!1}schedule(ie,ge=0){if(this.closed)return this;this.state=ie;const he=this.id,W=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(W,he,ge)),this.pending=!0,this.delay=ge,this.id=this.id||this.requestAsyncId(W,this.id,ge),this}requestAsyncId(ie,ge,he=0){return U.setInterval(ie.flush.bind(ie,this),he)}recycleAsyncId(ie,ge,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return ge;U.clearInterval(ge)}execute(ie,ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ie,ge);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,ge){let W,he=!1;try{this.work(ie)}catch(z){he=!0,W=z||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:ie,scheduler:ge}=this,{actions:he}=ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(he,this),null!=ie&&(this.id=this.recycleAsyncId(ge,ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(dt,Ie,V)=>{V.d(Ie,{v:()=>U});var l=V(6063);class ee{constructor(re,ye=ee.now){this.schedulerActionCtor=re,this.now=ye}schedule(re,ye=0,ie){return new this.schedulerActionCtor(this,re).schedule(ie,ye)}}ee.now=l.l.now;class U extends ee{constructor(re,ye=ee.now){super(re,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:ye}=this;if(this._active)return void ye.push(re);let ie;this._active=!0;do{if(ie=re.execute(re.state,re.delay))break}while(re=ye.shift());if(this._active=!1,ie){for(;re=ye.shift();)re.unsubscribe();throw ie}}}},4986:(dt,Ie,V)=>{V.d(Ie,{P:()=>ue,z:()=>U});var l=V(4408);const U=new(V(7565).v)(l.o),ue=U},6063:(dt,Ie,V)=>{V.d(Ie,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3410:(dt,Ie,V)=>{V.d(Ie,{z:()=>l});const l={setTimeout(ee,U,...ue){const{delegate:re}=l;return(null==re?void 0:re.setTimeout)?re.setTimeout(ee,U,...ue):setTimeout(ee,U,...ue)},clearTimeout(ee){const{delegate:U}=l;return((null==U?void 0:U.clearTimeout)||clearTimeout)(ee)},delegate:void 0}},2202:(dt,Ie,V)=>{V.d(Ie,{h:()=>ee});const ee=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(dt,Ie,V)=>{V.d(Ie,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(dt,Ie,V)=>{V.d(Ie,{_6:()=>ye,jO:()=>ue,yG:()=>re});var l=V(576),ee=V(3532);function U(ie){return ie[ie.length-1]}function ue(ie){return(0,l.m)(U(ie))?ie.pop():void 0}function re(ie){return(0,ee.K)(U(ie))?ie.pop():void 0}function ye(ie,ge){return"number"==typeof U(ie)?ie.pop():ge}},8737:(dt,Ie,V)=>{function l(ee,U){if(ee){const ue=ee.indexOf(U);0<=ue&&ee.splice(ue,1)}}V.d(Ie,{P:()=>l})},3888:(dt,Ie,V)=>{function l(ee){const ue=ee(re=>{Error.call(re),re.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}V.d(Ie,{d:()=>l})},2806:(dt,Ie,V)=>{V.d(Ie,{O:()=>ue,x:()=>U});var l=V(2416);let ee=null;function U(re){if(l.v.useDeprecatedSynchronousErrorHandling){const ye=!ee;if(ye&&(ee={errorThrown:!1,error:null}),re(),ye){const{errorThrown:ie,error:ge}=ee;if(ee=null,ie)throw ge}}else re()}function ue(re){l.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=re)}},9672:(dt,Ie,V)=>{function l(ee,U,ue,re=0,ye=!1){const ie=U.schedule(function(){ue(),ye?ee.add(this.schedule(null,re)):this.unsubscribe()},re);if(ee.add(ie),!ye)return ie}V.d(Ie,{f:()=>l})},4671:(dt,Ie,V)=>{function l(ee){return ee}V.d(Ie,{y:()=>l})},1144:(dt,Ie,V)=>{V.d(Ie,{z:()=>l});const l=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(dt,Ie,V)=>{V.d(Ie,{D:()=>ee});var l=V(576);function ee(U){return Symbol.asyncIterator&&(0,l.m)(null==U?void 0:U[Symbol.asyncIterator])}},576:(dt,Ie,V)=>{function l(ee){return"function"==typeof ee}V.d(Ie,{m:()=>l})},3670:(dt,Ie,V)=>{V.d(Ie,{c:()=>U});var l=V(8822),ee=V(576);function U(ue){return(0,ee.m)(ue[l.L])}},6495:(dt,Ie,V)=>{V.d(Ie,{T:()=>U});var l=V(2202),ee=V(576);function U(ue){return(0,ee.m)(null==ue?void 0:ue[l.h])}},8239:(dt,Ie,V)=>{V.d(Ie,{t:()=>ee});var l=V(576);function ee(U){return(0,l.m)(null==U?void 0:U.then)}},3260:(dt,Ie,V)=>{V.d(Ie,{L:()=>ue,Q:()=>U});var l=V(655),ee=V(576);function U(re){return(0,l.FC)(this,arguments,function*(){const ie=re.getReader();try{for(;;){const{value:ge,done:he}=yield(0,l.qq)(ie.read());if(he)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(ge)}}finally{ie.releaseLock()}})}function ue(re){return(0,ee.m)(null==re?void 0:re.getReader)}},3532:(dt,Ie,V)=>{V.d(Ie,{K:()=>ee});var l=V(576);function ee(U){return U&&(0,l.m)(U.schedule)}},4482:(dt,Ie,V)=>{V.d(Ie,{A:()=>ee,e:()=>U});var l=V(576);function ee(ue){return(0,l.m)(null==ue?void 0:ue.lift)}function U(ue){return re=>{if(ee(re))return re.lift(function(ye){try{return ue(ye,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(dt,Ie,V)=>{function l(){}V.d(Ie,{Z:()=>l})},7849:(dt,Ie,V)=>{V.d(Ie,{h:()=>U});var l=V(2416),ee=V(3410);function U(ue){ee.z.setTimeout(()=>{const{onUnhandledError:re}=l.v;if(!re)throw ue;re(ue)})}},4532:(dt,Ie,V)=>{function l(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Ie,{z:()=>l})},655:(dt,Ie,V)=>{function ue(X,ae){var we={};for(var le in X)Object.prototype.hasOwnProperty.call(X,le)&&ae.indexOf(le)<0&&(we[le]=X[le]);if(null!=X&&"function"==typeof Object.getOwnPropertySymbols){var Ne=0;for(le=Object.getOwnPropertySymbols(X);Ne<le.length;Ne++)ae.indexOf(le[Ne])<0&&Object.prototype.propertyIsEnumerable.call(X,le[Ne])&&(we[le[Ne]]=X[le[Ne]])}return we}function ge(X,ae,we,le){return new(we||(we=Promise))(function(de,At){function on(vt){try{ht(le.next(vt))}catch(bn){At(bn)}}function Jn(vt){try{ht(le.throw(vt))}catch(bn){At(bn)}}function ht(vt){vt.done?de(vt.value):function Ne(de){return de instanceof we?de:new we(function(At){At(de)})}(vt.value).then(on,Jn)}ht((le=le.apply(X,ae||[])).next())})}function _e(X){return this instanceof _e?(this.v=X,this):new _e(X)}function De(X,ae,we){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,le=we.apply(X,ae||[]),de=[];return Ne={},At("next"),At("throw"),At("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function At(yn){le[yn]&&(Ne[yn]=function(Wr){return new Promise(function(un,Eo){de.push([yn,Wr,un,Eo])>1||on(yn,Wr)})})}function on(yn,Wr){try{!function Jn(yn){yn.value instanceof _e?Promise.resolve(yn.value.v).then(ht,vt):bn(de[0][2],yn)}(le[yn](Wr))}catch(un){bn(de[0][3],un)}}function ht(yn){on("next",yn)}function vt(yn){on("throw",yn)}function bn(yn,Wr){yn(Wr),de.shift(),de.length&&on(de[0][0],de[0][1])}}function Je(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var we,ae=X[Symbol.asyncIterator];return ae?ae.call(X):(X=function ne(X){var ae="function"==typeof Symbol&&Symbol.iterator,we=ae&&X[ae],le=0;if(we)return we.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&le>=X.length&&(X=void 0),{value:X&&X[le++],done:!X}}};throw new TypeError(ae?"Object is not iterable.":"Symbol.iterator is not defined.")}(X),we={},le("next"),le("throw"),le("return"),we[Symbol.asyncIterator]=function(){return this},we);function le(de){we[de]=X[de]&&function(At){return new Promise(function(on,Jn){!function Ne(de,At,on,Jn){Promise.resolve(Jn).then(function(ht){de({value:ht,done:on})},At)}(on,Jn,(At=X[de](At)).done,At.value)})}}}V.d(Ie,{FC:()=>De,KL:()=>Je,_T:()=>ue,mG:()=>ge,qq:()=>_e})},5e3:(dt,Ie,V)=>{V.d(Ie,{$8M:()=>Bi,$Z:()=>Ux,AFp:()=>DI,ALo:()=>iI,AaK:()=>ge,AsE:()=>O0,CHM:()=>ca,CRH:()=>pI,CZH:()=>Wv,CqO:()=>C0,EJc:()=>JF,EiD:()=>Qg,EpF:()=>w0,F$t:()=>qx,F4k:()=>Hx,FYo:()=>tw,FiY:()=>nr,G48:()=>h1,Gf:()=>hI,GfV:()=>fk,Gpc:()=>z,Hsn:()=>D0,Ikx:()=>j0,JOm:()=>Ve,JVY:()=>yh,Jf7:()=>Cp,L6k:()=>Gg,LAX:()=>wh,LFG:()=>at,LSH:()=>nu,Lbi:()=>Gk,MAs:()=>d0,NdJ:()=>Qh,O4$:()=>cy,OlP:()=>Zn,Oqu:()=>Id,PXZ:()=>s1,Q6J:()=>Q_,QGY:()=>tv,Qsj:()=>nw,R0b:()=>Va,RDi:()=>Jo,Rgc:()=>uf,SBq:()=>dm,Sil:()=>Zk,Suo:()=>fI,TTD:()=>oa,TgZ:()=>X_,Tol:()=>iD,Udp:()=>Xp,VKq:()=>KD,VLi:()=>mf,X6Q:()=>d1,XFs:()=>gt,Xpm:()=>$t,Y36:()=>Kh,YKP:()=>zD,YNc:()=>Yh,Yjl:()=>$i,Yz7:()=>un,ZZ4:()=>ib,_Bn:()=>jD,_UZ:()=>b0,_Vd:()=>Ev,_c5:()=>jI,_uU:()=>aD,aQg:()=>Nw,c2e:()=>qk,cJS:()=>sn,cg1:()=>H0,dDg:()=>Dw,deG:()=>op,dqk:()=>Zt,dwT:()=>IA,eBb:()=>qg,eFA:()=>kI,ekj:()=>Jp,evT:()=>y,f3M:()=>Rt,g9A:()=>SI,h0i:()=>Ad,hGG:()=>rb,hij:()=>Jh,iGM:()=>dI,ifc:()=>Yt,ip1:()=>ww,kEZ:()=>QD,kL8:()=>hv,kcU:()=>Lc,l5B:()=>Lr,lG2:()=>rn,lnq:()=>P0,mCW:()=>Jc,n5z:()=>mn,n_E:()=>cf,oAB:()=>te,oxw:()=>x0,pB0:()=>py,q3G:()=>Kn,q4F:()=>$D,qLn:()=>su,qOj:()=>Vp,qZA:()=>J_,qbA:()=>fm,qzn:()=>rs,s9C:()=>bl,sBO:()=>cs,sIi:()=>wd,s_b:()=>kv,soG:()=>pf,tBr:()=>ro,tb:()=>Cw,tp0:()=>hl,uIk:()=>Hp,vHH:()=>Fe,vpe:()=>ea,wAp:()=>_t,xi3:()=>mm,xp6:()=>p_,yhl:()=>bh,z2F:()=>Iw,z3N:()=>No,zSh:()=>Vh,zs3:()=>Zs});var l=V(7579),ee=V(727),U=V(8306),ue=V(6451),re=V(3099);function ye(s){for(let a in s)if(s[a]===ye)return a;throw Error("Could not find renamed property on target object.")}function ie(s,a){for(const u in a)a.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=a[u])}function ge(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ge).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function he(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const W=ye({__forward_ref__:ye});function z(s){return s.__forward_ref__=z,s.toString=function(){return ge(this())},s}function ne(s){return Qe(s)?s():s}function Qe(s){return"function"==typeof s&&s.hasOwnProperty(W)&&s.__forward_ref__===z}class Fe extends Error{constructor(a,u){super(function je(s,a){return`NG0${Math.abs(s)}${a?": "+a:""}`}(a,u)),this.code=a}}function _e(s){return"string"==typeof s?s:null==s?"":String(s)}function De(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():_e(s)}function Ee(s,a){const u=a?` in ${a}`:"";throw new Fe(-201,`No provider for ${De(s)} found${u}`)}function ht(s,a){null==s&&function vt(s,a,u,h){throw new Error(`ASSERTION ERROR: ${s}`+(null==h?"":` [Expected=> ${u} ${h} ${a} <=Actual]`))}(a,s,null,"!=")}function un(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function sn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Wt(s){return Oi(s,xo)||Oi(s,Wo)}function Oi(s,a){return s.hasOwnProperty(a)?s[a]:null}function Xi(s){return s&&(s.hasOwnProperty(Ji)||s.hasOwnProperty(Do))?s[Ji]:null}const xo=ye({\u0275prov:ye}),Ji=ye({\u0275inj:ye}),Wo=ye({ngInjectableDef:ye}),Do=ye({ngInjectorDef:ye});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let mr;function pi(s){const a=mr;return mr=s,a}function Sr(s,a,u){const h=Wt(s);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&gt.Optional?null:void 0!==a?a:void Ee(ge(s),"Injector")}function Sn(s){return{toString:s}.toString()}var xi=(()=>((xi=xi||{})[xi.OnPush=0]="OnPush",xi[xi.Default=1]="Default",xi))(),Yt=(()=>{return(s=Yt||(Yt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Yt;var s})();const ct="undefined"!=typeof globalThis&&globalThis,It="undefined"!=typeof window&&window,Pi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Zt=ct||"undefined"!=typeof global&&global||It||Pi,Ni={},bt=[],Hi=ye({\u0275cmp:ye}),Gt=ye({\u0275dir:ye}),tt=ye({\u0275pipe:ye}),Ae=ye({\u0275mod:ye}),nt=ye({\u0275fac:ye}),yt=ye({__NG_ELEMENT_ID__:ye});let qt=0;function $t(s){return Sn(()=>{const u={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===xi.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||bt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Yt.Emulated,id:"c",styles:s.styles||bt,_:null,setInput:null,schemas:s.schemas||null,tView:null},f=s.directives,g=s.features,w=s.pipes;return h.id+=qt++,h.inputs=xt(s.inputs,u),h.outputs=xt(s.outputs),g&&g.forEach(x=>x(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map($):null,h.pipeDefs=w?()=>("function"==typeof w?w():w).map(Y):null,h})}function $(s){return en(s)||function Gn(s){return s[Gt]||null}(s)}function Y(s){return function Bt(s){return s[tt]||null}(s)}const pe={};function te(s){return Sn(()=>{const a={type:s.type,bootstrap:s.bootstrap||bt,declarations:s.declarations||bt,imports:s.imports||bt,exports:s.exports||bt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(pe[s.id]=s.type),a})}function xt(s,a){if(null==s)return Ni;const u={};for(const h in s)if(s.hasOwnProperty(h)){let f=s[h],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),u[f]=h,a&&(a[f]=g)}return u}const rn=$t;function $i(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function en(s){return s[Hi]||null}function En(s,a){const u=s[Ae]||null;if(!u&&!0===a)throw new Error(`Type ${ge(s)} does not have '\u0275mod' property.`);return u}function Ar(s){return Array.isArray(s)&&"object"==typeof s[1]}function gr(s){return Array.isArray(s)&&!0===s[1]}function zd(s){return 0!=(8&s.flags)}function Is(s){return 2==(2&s.flags)}function bc(s){return 1==(1&s.flags)}function _r(s){return null!==s.template}function Pl(s){return 0!=(512&s[2])}function vr(s,a){return s.hasOwnProperty(nt)?s[nt]:null}class Xa{constructor(a,u,h){this.previousValue=a,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function oa(){return Fl}function Fl(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ng),Xd}function Xd(){const s=Ms(this),a=null==s?void 0:s.current;if(a){const u=s.previous;if(u===Ni)s.previous=a;else for(let h in a)u[h]=a[h];s.current=null,this.ngOnChanges(a)}}function Ng(s,a,u,h){const f=Ms(s)||function kr(s,a){return s[kn]=a}(s,{previous:Ni,current:null}),g=f.current||(f.current={}),w=f.previous,x=this.declaredInputs[u],I=w[x];g[x]=new Xa(I&&I.currentValue,a,w===Ni),s[h]=a}oa.ngInherit=!0;const kn="__ngSimpleChanges__";function Ms(s){return s[kn]||null}let Ic;function Jo(s){Ic=s}function Tn(s){return!!s.listen}const Ja={createRenderer:(s,a)=>function Ll(){return void 0!==Ic?Ic:"undefined"!=typeof document?document:void 0}()};function pn(s){for(;Array.isArray(s);)s=s[0];return s}function aa(s,a){return pn(a[s])}function Gi(s,a){return pn(a[s.index])}function Bl(s,a){return s.data[a]}function Yr(s,a){return s[a]}function qi(s,a){const u=a[s];return Ar(u)?u:u[0]}function ks(s){return 4==(4&s[2])}function es(s){return 128==(128&s[2])}function br(s,a){return null==a?null:s[a]}function Rs(s){s[18]=0}function Os(s,a){s[5]+=a;let u=s,h=s[3];for(;null!==h&&(1===a&&1===u[5]||-1===a&&0===u[5]);)h[5]+=a,u=h,h=h[3]}const Et={lFrame:rh(null),bindingsEnabled:!0};function kc(){return Et.bindingsEnabled}function Te(){return Et.lFrame.lView}function Kt(){return Et.lFrame.tView}function ca(s){return Et.lFrame.contextLView=s,s[8]}function Rn(){let s=Nu();for(;null!==s&&64===s.type;)s=s.parent;return s}function Nu(){return Et.lFrame.currentTNode}function To(s,a){const u=Et.lFrame;u.currentTNode=s,u.isParent=a}function Fu(){return Et.lFrame.isParent}function Vl(){Et.lFrame.isParent=!1}function _i(){const s=Et.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function Zr(){return Et.lFrame.bindingIndex}function Ns(){return Et.lFrame.bindingIndex++}function Kr(s){const a=Et.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,u}function Bu(s,a){const u=Et.lFrame;u.bindingIndex=u.bindingRootIndex=s,tl(a)}function tl(s){Et.lFrame.currentDirectiveIndex=s}function nh(){return Et.lFrame.currentQueryIndex}function Nc(s){Et.lFrame.currentQueryIndex=s}function ih(s){const a=s[1];return 2===a.type?a.declTNode:1===a.type?s[6]:null}function Hl(s,a,u){if(u&gt.SkipSelf){let f=a,g=s;for(;!(f=f.parent,null!==f||u&gt.Host||(f=ih(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;a=f,s=g}const h=Et.lFrame=ua();return h.currentTNode=a,h.lView=s,!0}function Fc(s){const a=ua(),u=s[1];Et.lFrame=a,a.currentTNode=u.firstChild,a.lView=s,a.tView=u,a.contextLView=s,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function ua(){const s=Et.lFrame,a=null===s?null:s.child;return null===a?rh(s):a}function rh(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function oh(){const s=Et.lFrame;return Et.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const $l=oh;function Qr(){const s=oh();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function zi(){return Et.lFrame.selectedIndex}function da(s){Et.lFrame.selectedIndex=s}function Fn(){const s=Et.lFrame;return Bl(s.tView,s.selectedIndex)}function cy(){Et.lFrame.currentNamespace="svg"}function Lc(){!function uy(){Et.lFrame.currentNamespace=null}()}function Gl(s,a){for(let u=a.directiveStart,h=a.directiveEnd;u<h;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:x,ngAfterViewInit:I,ngAfterViewChecked:M,ngOnDestroy:O}=g;w&&(s.contentHooks||(s.contentHooks=[])).push(-u,w),x&&((s.contentHooks||(s.contentHooks=[])).push(u,x),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,x)),I&&(s.viewHooks||(s.viewHooks=[])).push(-u,I),M&&((s.viewHooks||(s.viewHooks=[])).push(u,M),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,M)),null!=O&&(s.destroyHooks||(s.destroyHooks=[])).push(u,O)}}function Bc(s,a,u){np(s,a,3,u)}function ii(s,a,u,h){(3&s[2])===u&&np(s,a,u,h)}function Hu(s,a){let u=s[2];(3&u)===a&&(u&=2047,u+=1,s[2]=u)}function np(s,a,u,h){const g=null!=h?h:-1,w=a.length-1;let x=0;for(let I=void 0!==h?65535&s[18]:0;I<w;I++)if("number"==typeof a[I+1]){if(x=a[I],null!=h&&x>=h)break}else a[I]<0&&(s[18]+=65536),(x<g||-1==g)&&(sh(s,u,a,I),s[18]=(4294901760&s[18])+I+2),I++}function sh(s,a,u,h){const f=u[h]<0,g=u[h+1],x=s[f?-u[h]:u[h]];if(f){if(s[2]>>11<s[18]>>16&&(3&s[2])===a){s[2]+=2048;try{g.call(x)}finally{}}}else try{g.call(x)}finally{}}class il{constructor(a,u,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function pt(s,a,u){const h=Tn(s);let f=0;for(;f<u.length;){const g=u[f];if("number"==typeof g){if(0!==g)break;f++;const w=u[f++],x=u[f++],I=u[f++];h?s.setAttribute(a,x,I,w):a.setAttributeNS(w,x,I)}else{const w=g,x=u[++f];zn(w)?h&&s.setProperty(a,w,x):h?s.setAttribute(a,w,x):a.setAttribute(w,x),f++}}return f}function er(s){return 3===s||4===s||6===s}function zn(s){return 64===s.charCodeAt(0)}function Fs(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let u=-1;for(let h=0;h<a.length;h++){const f=a[h];"number"==typeof f?u=f:0===u||ah(s,u,f,null,-1===u||2===u?a[++h]:null)}}return s}function ah(s,a,u,h,f){let g=0,w=s.length;if(-1===a)w=-1;else for(;g<s.length;){const x=s[g++];if("number"==typeof x){if(x===a){w=-1;break}if(x>a){w=g-1;break}}}for(;g<s.length;){const x=s[g];if("number"==typeof x)break;if(x===u){if(null===h)return void(null!==f&&(s[g+1]=f));if(h===s[g+1])return void(s[g+2]=f)}g++,null!==h&&g++,null!==f&&g++}-1!==w&&(s.splice(w,0,a),g=w+1),s.splice(g++,0,u),null!==h&&s.splice(g++,0,h),null!==f&&s.splice(g++,0,f)}function Ln(s){return-1!==s}function ol(s){return 32767&s}function ha(s,a){let u=function sl(s){return s>>16}(s),h=a;for(;u>0;)h=h[15],u--;return h}let Rr=!0;function et(s){const a=Rr;return Rr=s,a}let fa=0;function Xr(s,a){const u=Jr(s,a);if(-1!==u)return u;const h=a[1];h.firstCreatePass&&(s.injectorIndex=a.length,al(h.data,s),al(a,null),al(h.blueprint,null));const f=Ls(s,a),g=s.injectorIndex;if(Ln(f)){const w=ol(f),x=ha(f,a),I=x[1].data;for(let M=0;M<8;M++)a[g+M]=x[w+M]|I[w+M]}return a[g+8]=f,g}function al(s,a){s.push(0,0,0,0,0,0,0,0,a)}function Jr(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function Ls(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,h=null,f=a;for(;null!==f;){const g=f[1],w=g.type;if(h=2===w?g.declTNode:1===w?f[6]:null,null===h)return-1;if(u++,f=f[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function Si(s,a,u){!function On(s,a,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(yt)&&(h=u[yt]),null==h&&(h=u[yt]=fa++);const f=255&h;a.data[s+(f>>5)]|=1<<f}(s,a,u)}function qu(s,a,u){if(u&gt.Optional)return s;Ee(a,"NodeInjector")}function Bs(s,a,u,h){if(u&gt.Optional&&void 0===h&&(h=null),0==(u&(gt.Self|gt.Host))){const f=s[9],g=pi(void 0);try{return f?f.get(a,h,u&gt.Optional):Sr(a,h,u&gt.Optional)}finally{pi(g)}}return qu(h,a,u)}function Mo(s,a,u,h=gt.Default,f){if(null!==s){const g=function Wn(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(yt)?s[yt]:void 0;return"number"==typeof a?a>=0?255&a:Hc:a}(u);if("function"==typeof g){if(!Hl(a,s,h))return h&gt.Host?qu(f,u,h):Bs(a,u,h,f);try{const w=g(h);if(null!=w||h&gt.Optional)return w;Ee(u)}finally{$l()}}else if("number"==typeof g){let w=null,x=Jr(s,a),I=-1,M=h&gt.Host?a[16][6]:null;for((-1===x||h&gt.SkipSelf)&&(I=-1===x?Ls(s,a):a[x+8],-1!==I&&ma(h,!1)?(w=a[1],x=ol(I),a=ha(I,a)):x=-1);-1!==x;){const O=a[1];if(Yn(g,x,O.data)){const j=pa(x,a,u,w,h,M);if(j!==jc)return j}I=a[x+8],-1!==I&&ma(h,a[1].data[x+8]===M)&&Yn(g,x,a)?(w=O,x=ol(I),a=ha(I,a)):x=-1}}}return Bs(a,u,h,f)}const jc={};function Hc(){return new ga(Rn(),Te())}function pa(s,a,u,h,f,g){const w=a[1],x=w.data[s+8],O=Or(x,w,u,null==h?Is(x)&&Rr:h!=w&&0!=(3&x.type),f&gt.Host&&g===x);return null!==O?Ao(a,w,O,x):jc}function Or(s,a,u,h,f){const g=s.providerIndexes,w=a.data,x=1048575&g,I=s.directiveStart,O=g>>20,G=f?x+O:s.directiveEnd;for(let J=h?x:x+O;J<G;J++){const Ce=w[J];if(J<I&&u===Ce||J>=I&&Ce.type===u)return J}if(f){const J=w[I];if(J&&_r(J)&&J.type===u)return I}return null}function Ao(s,a,u,h){let f=s[u];const g=a.data;if(function $u(s){return s instanceof il}(f)){const w=f;w.resolving&&function ot(s,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new Fe(-200,`Circular dependency in DI detected for ${s}${u}`)}(De(g[u]));const x=et(w.canSeeViewProviders);w.resolving=!0;const I=w.injectImpl?pi(w.injectImpl):null;Hl(s,h,gt.Default);try{f=s[u]=w.factory(void 0,g,s,h),a.firstCreatePass&&u>=h.directiveStart&&function nl(s,a,u){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(h){const w=Fl(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,w),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,w)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,f),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,g))}(u,g[u],a)}finally{null!==I&&pi(I),et(x),w.resolving=!1,$l()}}return f}function Yn(s,a,u){return!!(u[a+(s>>5)]&1<<s)}function ma(s,a){return!(s&gt.Self||s&gt.Host&&a)}class ga{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,h){return Mo(this._tNode,this._lView,a,h,u)}}function mn(s){return Sn(()=>{const a=s.prototype.constructor,u=a[nt]||Bn(a),h=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==h;){const g=f[nt]||Bn(f);if(g&&g!==u)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function Bn(s){return Qe(s)?()=>{const a=Bn(ne(s));return a&&a()}:vr(s)}function Bi(s){return function eo(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const u=s.attrs;if(u){const h=u.length;let f=0;for(;f<h;){const g=u[f];if(er(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<h&&"string"==typeof u[f];)f++;else{if(g===a)return u[f+1];f+=2}}}return null}(Rn(),s)}const Ti="__parameters__";function Wi(s,a,u){return Sn(()=>{const h=function ri(s){return function(...u){if(s){const h=s(...u);for(const f in h)this[f]=h[f]}}}(a);function f(...g){if(this instanceof f)return h.apply(this,g),this;const w=new f(...g);return x.annotation=w,x;function x(I,M,O){const j=I.hasOwnProperty(Ti)?I[Ti]:Object.defineProperty(I,Ti,{value:[]})[Ti];for(;j.length<=O;)j.push(null);return(j[O]=j[O]||[]).push(w),I}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}class Zn{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=un({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const op=new Zn("AnalyzeForEntryComponents");function tr(s,a){void 0===a&&(a=s);for(let u=0;u<s.length;u++){let h=s[u];Array.isArray(h)?(a===s&&(a=s.slice(0,u)),tr(h,a)):a!==s&&a.push(h)}return a}function to(s,a){s.forEach(u=>Array.isArray(u)?to(u,a):a(u))}function _a(s,a,u){a>=s.length?s.push(u):s.splice(a,0,u)}function Ro(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function yr(s,a){const u=[];for(let h=0;h<s;h++)u.push(a);return u}function wr(s,a,u){let h=js(s,a);return h>=0?s[1|h]=u:(h=~h,function qc(s,a,u,h){let f=s.length;if(f==a)s.push(u,h);else if(1===f)s.push(h,s[0]),s[0]=u;else{for(f--,s.push(s[f-1],s[f]);f>a;)s[f]=s[f-2],f--;s[a]=u,s[a+1]=h}}(s,h,a,u)),h}function Yl(s,a){const u=js(s,a);if(u>=0)return s[1|u]}function js(s,a){return function Kl(s,a,u){let h=0,f=s.length>>u;for(;f!==h;){const g=h+(f-h>>1),w=s[g<<u];if(a===w)return g<<u;w>a?f=g:h=g+1}return~(f<<u)}(s,a,1)}const Hs={},Yu="__NG_DI_FLAG__",S="ngTempTokenPath",P=/\n/gm,Q="__source",oe=ye({provide:String,useValue:ye});let ke;function Oe(s){const a=ke;return ke=s,a}function Dt(s,a=gt.Default){if(void 0===ke)throw new Fe(203,"");return null===ke?Sr(s,void 0,a):ke.get(s,a&gt.Optional?null:void 0,a)}function at(s,a=gt.Default){return(function Ei(){return mr}()||Dt)(ne(s),a)}const Rt=at;function Mi(s){const a=[];for(let u=0;u<s.length;u++){const h=ne(s[u]);if(Array.isArray(h)){if(0===h.length)throw new Fe(900,"");let f,g=gt.Default;for(let w=0;w<h.length;w++){const x=h[w],I=dl(x);"number"==typeof I?-1===I?f=x.token:g|=I:f=x}a.push(at(f,g))}else a.push(at(h))}return a}function Mn(s,a){return s[Yu]=a,s.prototype[Yu]=a,s}function dl(s){return s[Yu]}const ro=Mn(Wi("Inject",s=>({token:s})),-1),nr=Mn(Wi("Optional"),8),hl=Mn(Wi("SkipSelf"),4);let Qu;function Xc(s){var a;return(null===(a=function ph(){if(void 0===Qu&&(Qu=null,Zt.trustedTypes))try{Qu=Zt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return Qu}())||void 0===a?void 0:a.createHTML(s))||s}class Ea{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class hy extends Ea{getTypeName(){return"HTML"}}class Xu extends Ea{getTypeName(){return"Style"}}class lp extends Ea{getTypeName(){return"Script"}}class fy extends Ea{getTypeName(){return"URL"}}class cp extends Ea{getTypeName(){return"ResourceURL"}}function No(s){return s instanceof Ea?s.changingThisBreaksApplicationSecurity:s}function rs(s,a){const u=bh(s);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}function bh(s){return s instanceof Ea&&s.getTypeName()||null}function yh(s){return new hy(s)}function Gg(s){return new Xu(s)}function qg(s){return new lp(s)}function wh(s){return new fy(s)}function py(s){return new cp(s)}class my{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(Xc(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class gy{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const h=this.inertDocument.createElement("body");u.appendChild(h)}}getInertBodyElement(a){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Xc(a),u;const h=this.inertDocument.createElement("body");return h.innerHTML=Xc(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(a){const u=a.attributes;for(let f=u.length-1;0<f;f--){const w=u.item(f).name;("xmlns:ns1"===w||0===w.indexOf("ns1:"))&&a.removeAttribute(w)}let h=a.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const _y=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,up=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Jc(s){return(s=String(s)).match(_y)||s.match(up)?s:"unsafe:"+s}function Gs(s){const a={};for(const u of s.split(","))a[u]=!0;return a}function ed(...s){const a={};for(const u of s)for(const h in u)u.hasOwnProperty(h)&&(a[h]=!0);return a}const Ch=Gs("area,br,col,hr,img,wbr"),Eh=Gs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),xa=Gs("rp,rt"),dp=ed(Ch,ed(Eh,Gs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ed(xa,Gs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ed(xa,Eh)),hp=Gs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),fp=Gs("srcset"),Zg=ed(hp,fp,Gs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Gs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),nd=Gs("script,style,template");class id{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!dp.hasOwnProperty(u))return this.sanitizedSomething=!0,!nd.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=a.attributes;for(let f=0;f<h.length;f++){const g=h.item(f),w=g.name,x=w.toLowerCase();if(!Zg.hasOwnProperty(x)){this.sanitizedSomething=!0;continue}let I=g.value;hp[x]&&(I=Jc(I)),fp[x]&&(s=I,I=(s=String(s)).split(",").map(a=>Jc(a.trim())).join(", ")),this.buf.push(" ",w,'="',mp(I),'"')}var s;return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();dp.hasOwnProperty(u)&&!Ch.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(mp(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const pp=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Kg=/([^\#-~ |!])/g;function mp(s){return s.replace(/&/g,"&amp;").replace(pp,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Kg,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Xl;function Qg(s,a){let u=null;try{Xl=Xl||function zg(s){const a=new gy(s);return function $s(){try{return!!(new window.DOMParser).parseFromString(Xc(""),"text/html")}catch(s){return!1}}()?new my(a):a}(s);let h=a?String(a):"";u=Xl.getInertBodyElement(h);let f=5,g=h;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,h=g,g=u.innerHTML,u=Xl.getInertBodyElement(h)}while(h!==g);return Xc((new id).sanitizeChildren(rd(u)||u))}finally{if(u){const h=rd(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function rd(s){return"content"in s&&function Fo(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Kn=(()=>((Kn=Kn||{})[Kn.NONE=0]="NONE",Kn[Kn.HTML=1]="HTML",Kn[Kn.STYLE=2]="STYLE",Kn[Kn.SCRIPT=3]="SCRIPT",Kn[Kn.URL=4]="URL",Kn[Kn.RESOURCE_URL=5]="RESOURCE_URL",Kn))();function nu(s){const a=function Jl(){const s=Te();return s&&s[12]}();return a?a.sanitize(Kn.URL,s)||"":rs(s,"URL")?No(s):Jc(_e(s))}const n_="__ngContext__";function Vi(s,a){s[n_]=a}function Cr(s){const a=function od(s){return s[n_]||null}(s);return a?Array.isArray(a)?a:a.lView:null}function bp(s){return s.ngOriginalError}function Pr(s,...a){s.error(...a)}class su{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a),h=function r_(s){return s&&s.ngErrorLogger||Pr}(a);h(this._console,"ERROR",a),u&&h(this._console,"ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&bp(a);for(;u&&bp(u);)u=bp(u);return u||null}}const Sy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Zt))();function Cp(s){return s.ownerDocument.defaultView}function y(s){return s.ownerDocument}function C(s){return s instanceof Function?s():s}var Ve=(()=>((Ve=Ve||{})[Ve.Important=1]="Important",Ve[Ve.DashCase=2]="DashCase",Ve))();function wt(s,a){return undefined(s,a)}function Er(s){const a=s[3];return gr(a)?a[3]:a}function au(s){return Ep(s[13])}function Ah(s){return Ep(s[4])}function Ep(s){for(;null!==s&&!gr(s);)s=s[4];return s}function tc(s,a,u,h,f){if(null!=h){let g,w=!1;gr(h)?g=h:Ar(h)&&(w=!0,h=h[0]);const x=pn(h);0===s&&null!==u?null==f?ME(a,u,x):cu(a,u,x,f||null,!0):1===s&&null!==u?cu(a,u,x,f||null,!0):2===s?function FE(s,a,u){const h=d_(s,a);h&&function kE(s,a,u,h){Tn(s)?s.removeChild(a,u,h):a.removeChild(u)}(s,h,a,u)}(a,x,w):3===s&&a.destroyNode(x),null!=g&&function Ry(s,a,u,h,f){const g=u[7];g!==pn(u)&&tc(a,s,h,g,f);for(let x=10;x<u.length;x++){const I=u[x];oo(I[1],I,s,a,h,g)}}(a,s,g,u,f)}}function Vn(s,a,u){if(Tn(s))return s.createElement(a,u);{const h=null!==u?function Dc(s){const a=s.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(u):null;return null===h?s.createElement(a):s.createElementNS(h,a)}}function IE(s,a){const u=s[9],h=u.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,Os(f,-1)),u.splice(h,1)}function c_(s,a){if(s.length<=10)return;const u=10+a,h=s[u];if(h){const f=h[17];null!==f&&f!==s&&IE(f,h),a>0&&(s[u-1][4]=h[4]);const g=Ro(s,10+a);!function xp(s,a){oo(s,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const w=g[19];null!==w&&w.detachView(g[1]),h[3]=null,h[4]=null,h[2]&=-129}return h}function SE(s,a){if(!(256&a[2])){const u=a[11];Tn(u)&&u.destroyNode&&oo(s,a,u,3,null,null),function Ty(s){let a=s[13];if(!a)return u_(s[1],s);for(;a;){let u=null;if(Ar(a))u=a[13];else{const h=a[10];h&&(u=h)}if(!u){for(;a&&!a[4]&&a!==s;)Ar(a)&&u_(a[1],a),a=a[3];null===a&&(a=s),Ar(a)&&u_(a[1],a),u=a&&a[4]}a=u}}(a)}}function u_(s,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function My(s,a){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let h=0;h<u.length;h+=2){const f=a[u[h]];if(!(f instanceof il)){const g=u[h+1];if(Array.isArray(g))for(let w=0;w<g.length;w+=2){const x=f[g[w]],I=g[w+1];try{I.call(x)}finally{}}else try{g.call(f)}finally{}}}}(s,a),function TE(s,a){const u=s.cleanup,h=a[7];let f=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const w=u[g+1],x="function"==typeof w?w(a):pn(a[w]),I=h[f=u[g+2]],M=u[g+3];"boolean"==typeof M?x.removeEventListener(u[g],I,M):M>=0?h[f=M]():h[f=-M].unsubscribe(),g+=2}else{const w=h[f=u[g+1]];u[g].call(w)}if(null!==h){for(let g=f+1;g<h.length;g++)h[g]();a[7]=null}}(s,a),1===a[1].type&&Tn(a[11])&&a[11].destroy();const u=a[17];if(null!==u&&gr(a[3])){u!==a[3]&&IE(u,a);const h=a[19];null!==h&&h.detachView(s)}}}function bM(s,a,u){return function lu(s,a,u){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return u[0];if(2&h.flags){const f=s.data[h.directiveStart].encapsulation;if(f===Yt.None||f===Yt.Emulated)return null}return Gi(h,u)}(s,a.parent,u)}function cu(s,a,u,h,f){Tn(s)?s.insertBefore(a,u,h,f):a.insertBefore(u,h,f)}function ME(s,a,u){Tn(s)?s.appendChild(a,u):a.appendChild(u)}function AE(s,a,u,h,f){null!==h?cu(s,a,u,h,f):ME(s,a,u)}function d_(s,a){return Tn(s)?s.parentNode(a):a.parentNode}function RE(s,a,u){return OE(s,a,u)}let OE=function Ay(s,a,u){return 40&s.type?Gi(s,u):null};function Oh(s,a,u,h){const f=bM(s,h,a),g=a[11],x=RE(h.parent||a[6],h,a);if(null!=f)if(Array.isArray(u))for(let I=0;I<u.length;I++)AE(g,f,u[I],x,!1);else AE(g,f,u,x,!1)}function h_(s,a){if(null!==a){const u=a.type;if(3&u)return Gi(a,s);if(4&u)return f_(-1,s[a.index]);if(8&u){const h=a.child;if(null!==h)return h_(s,h);{const f=s[a.index];return gr(f)?f_(-1,f):pn(f)}}if(32&u)return wt(a,s)()||pn(s[a.index]);{const h=NE(s,a);return null!==h?Array.isArray(h)?h[0]:h_(Er(s[16]),h):h_(s,a.next)}}return null}function NE(s,a){return null!==a?s[16][6].projection[a.projection]:null}function f_(s,a){const u=10+s+1;if(u<a.length){const h=a[u],f=h[1].firstChild;if(null!==f)return h_(h,f)}return a[7]}function LE(s,a,u,h,f,g,w){for(;null!=u;){const x=h[u.index],I=u.type;if(w&&0===a&&(x&&Vi(pn(x),h),u.flags|=4),64!=(64&u.flags))if(8&I)LE(s,a,u.child,h,f,g,!1),tc(a,s,f,x,g);else if(32&I){const M=wt(u,h);let O;for(;O=M();)tc(a,s,f,O,g);tc(a,s,f,x,g)}else 16&I?Ia(s,a,h,u,f,g):tc(a,s,f,x,g);u=w?u.projectionNext:u.next}}function oo(s,a,u,h,f,g){LE(u,h,s.firstChild,a,f,g,!1)}function Ia(s,a,u,h,f,g){const w=u[16],I=w[6].projection[h.projection];if(Array.isArray(I))for(let M=0;M<I.length;M++)tc(a,s,f,I[M],g);else LE(s,a,I,w[3],f,g,!0)}function BE(s,a,u){Tn(s)?s.setAttribute(a,"style",u):a.style.cssText=u}function Nh(s,a,u){Tn(s)?""===u?s.removeAttribute(a,"class"):s.setAttribute(a,"class",u):a.className=u}function VE(s,a,u){let h=s.length;for(;;){const f=s.indexOf(a,u);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const g=a.length;if(f+g===h||s.charCodeAt(f+g)<=32)return f}u=f+1}}const wn="ng-template";function Yi(s,a,u){let h=0;for(;h<s.length;){let f=s[h++];if(u&&"class"===f){if(f=s[h],-1!==VE(f.toLowerCase(),a,0))return!0}else if(1===f){for(;h<s.length&&"string"==typeof(f=s[h++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function wM(s){return 4===s.type&&s.value!==wn}function Py(s,a,u){return a===(4!==s.type||u?s.value:wn)}function Sa(s,a,u){let h=4;const f=s.attrs||[],g=function UE(s){for(let a=0;a<s.length;a++)if(er(s[a]))return a;return s.length}(f);let w=!1;for(let x=0;x<a.length;x++){const I=a[x];if("number"!=typeof I){if(!w)if(4&h){if(h=2|1&h,""!==I&&!Py(s,I,u)||""===I&&1===a.length){if(fe(h))return!1;w=!0}}else{const M=8&h?I:a[++x];if(8&h&&null!==s.attrs){if(!Yi(s.attrs,M,u)){if(fe(h))return!1;w=!0}continue}const j=so(8&h?"class":I,f,wM(s),u);if(-1===j){if(fe(h))return!1;w=!0;continue}if(""!==M){let G;G=j>g?"":f[j+1].toLowerCase();const J=8&h?G:null;if(J&&-1!==VE(J,M,0)||2&h&&M!==G){if(fe(h))return!1;w=!0}}}}else{if(!w&&!fe(h)&&!fe(I))return!1;if(w&&fe(I))continue;w=!1,h=I|1&h}}return fe(h)||w}function fe(s){return 0==(1&s)}function so(s,a,u,h){if(null===a)return-1;let f=0;if(h||!u){let g=!1;for(;f<a.length;){const w=a[f];if(w===s)return f;if(3===w||6===w)g=!0;else{if(1===w||2===w){let x=a[++f];for(;"string"==typeof x;)x=a[++f];continue}if(4===w)break;if(0===w){f+=4;continue}}f+=g?1:2}return-1}return function jE(s,a){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const h=s[u];if("number"==typeof h)return-1;if(h===a)return u;u++}return-1}(a,s)}function L(s,a,u=!1){for(let h=0;h<a.length;h++)if(Sa(s,a[h],u))return!0;return!1}function Ny(s,a){e:for(let u=0;u<a.length;u++){const h=a[u];if(s.length===h.length){for(let f=0;f<s.length;f++)if(s[f]!==h[f])continue e;return!0}}return!1}function Fy(s,a){return s?":not("+a.trim()+")":a}function CM(s){let a=s[0],u=1,h=2,f="",g=!1;for(;u<s.length;){let w=s[u];if("string"==typeof w)if(2&h){const x=s[++u];f+="["+w+(x.length>0?'="'+x+'"':"")+"]"}else 8&h?f+="."+w:4&h&&(f+=" "+w);else""!==f&&!fe(w)&&(a+=Fy(g,f),f=""),h=w,g=g||!fe(h);u++}return""!==f&&(a+=Fy(g,f)),a}const Tt={};function p_(s){dd(Kt(),Te(),zi()+s,!1)}function dd(s,a,u,h){if(!h)if(3==(3&a[2])){const g=s.preOrderCheckHooks;null!==g&&Bc(a,g,u)}else{const g=s.preOrderHooks;null!==g&&ii(a,g,0,u)}da(u)}function Ip(s,a){return s<<17|a<<2}function ao(s){return s>>17&32767}function m_(s){return 2|s}function Un(s){return(131068&s)>>2}function hd(s,a){return-131069&s|a<<2}function qs(s){return 1|s}function ZE(s,a){const u=s.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const f=u[h],g=u[h+1];if(-1!==g){const w=s.data[g];Nc(f),w.contentQueries(2,a[g],g)}}}function Mp(s,a,u,h,f,g,w,x,I,M){const O=a.blueprint.slice();return O[0]=f,O[2]=140|h,Rs(O),O[3]=O[15]=s,O[8]=u,O[10]=w||s&&s[10],O[11]=x||s&&s[11],O[12]=I||s&&s[12]||null,O[9]=M||s&&s[9]||null,O[6]=g,O[16]=2==a.type?s[16]:O,O}function Fh(s,a,u,h,f){let g=s.data[a];if(null===g)g=function zy(s,a,u,h,f){const g=Nu(),w=Fu(),I=s.data[a]=function PM(s,a,u,h,f,g){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?g:g&&g.parent,u,a,h,f);return null===s.firstChild&&(s.firstChild=I),null!==g&&(w?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(s,a,u,h,f),function Lu(){return Et.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=u,g.value=h,g.attrs=f;const w=function Ps(){const s=Et.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();g.injectorIndex=null===w?-1:w.injectorIndex}return To(g,!0),g}function fd(s,a,u,h){if(0===u)return-1;const f=a.length;for(let g=0;g<u;g++)a.push(h),s.blueprint.push(h),s.data.push(null);return f}function Lh(s,a,u){Fc(a);try{const h=s.viewQuery;null!==h&&Fp(1,h,u);const f=s.template;null!==f&&QE(s,a,f,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&ZE(s,a),s.staticViewQueries&&Fp(2,s.viewQuery,u);const g=s.components;null!==g&&function KE(s,a){for(let u=0;u<a.length;u++)Jt(s,a[u])}(a,g)}catch(h){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),h}finally{a[2]&=-5,Qr()}}function pd(s,a,u,h){const f=a[2];if(256!=(256&f)){Fc(a);try{Rs(a),function Oc(s){return Et.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&QE(s,a,u,2,h);const w=3==(3&f);if(w){const M=s.preOrderCheckHooks;null!==M&&Bc(a,M,null)}else{const M=s.preOrderHooks;null!==M&&ii(a,M,0,null),Hu(a,0)}if(function Pp(s){for(let a=au(s);null!==a;a=Ah(a)){if(!a[2])continue;const u=a[9];for(let h=0;h<u.length;h++){const f=u[h],g=f[3];0==(1024&f[2])&&Os(g,1),f[2]|=1024}}}(a),function UM(s){for(let a=au(s);null!==a;a=Ah(a))for(let u=10;u<a.length;u++){const h=a[u],f=h[1];es(h)&&pd(f,h,f.template,h[8])}}(a),null!==s.contentQueries&&ZE(s,a),w){const M=s.contentCheckHooks;null!==M&&Bc(a,M)}else{const M=s.contentHooks;null!==M&&ii(a,M,1),Hu(a,1)}!function qy(s,a){const u=s.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const f=u[h];if(f<0)da(~f);else{const g=f,w=u[++h],x=u[++h];Bu(w,g),x(2,a[g])}}}finally{da(-1)}}(s,a);const x=s.components;null!==x&&function kM(s,a){for(let u=0;u<a.length;u++)lx(s,a[u])}(a,x);const I=s.viewQuery;if(null!==I&&Fp(2,I,h),w){const M=s.viewCheckHooks;null!==M&&Bc(a,M)}else{const M=s.viewHooks;null!==M&&ii(a,M,2),Hu(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[2]&=-73,1024&a[2]&&(a[2]&=-1025,Os(a[3],-1))}finally{Qr()}}}function RM(s,a,u,h){const f=a[10],w=ks(a);try{!w&&f.begin&&f.begin(),w&&Lh(s,a,h),pd(s,a,u,h)}finally{!w&&f.end&&f.end()}}function QE(s,a,u,h,f){const g=zi(),w=2&h;try{da(-1),w&&a.length>20&&dd(s,a,20,!1),u(h,f)}finally{da(g)}}function Wy(s,a,u){!kc()||(function ix(s,a,u,h){const f=u.directiveStart,g=u.directiveEnd;s.firstCreatePass||Xr(u,a),Vi(h,a);const w=u.initialInputs;for(let x=f;x<g;x++){const I=s.data[x],M=_r(I);M&&ax(a,u,I);const O=Ao(a,s,x,u);Vi(O,a),null!==w&&Xt(0,x-f,O,I,0,w),M&&(qi(u.index,a)[8]=O)}}(s,a,u,Gi(u,a)),128==(128&u.flags)&&function rx(s,a,u){const h=u.directiveStart,f=u.directiveEnd,w=u.index,x=function Vu(){return Et.lFrame.currentDirectiveIndex}();try{da(w);for(let I=h;I<f;I++){const M=s.data[I],O=a[I];tl(I),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&Ky(M,O)}}finally{da(-1),tl(x)}}(s,a,u))}function Yy(s,a,u=Gi){const h=a.localNames;if(null!==h){let f=a.index+1;for(let g=0;g<h.length;g+=2){const w=h[g+1],x=-1===w?u(a,s):s[w];s[f++]=x}}}function Zy(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=Ap(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function Ap(s,a,u,h,f,g,w,x,I,M){const O=20+h,j=O+f,G=function OM(s,a){const u=[];for(let h=0;h<a;h++)u.push(h<s?null:Tt);return u}(O,j),J="function"==typeof M?M():M;return G[1]={type:s,blueprint:G,template:u,queries:null,viewQuery:x,declTNode:a,data:G.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:j,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:I,consts:J,incompleteFirstPass:!1}}function I_(s,a,u,h){const f=ux(a);null===u?f.push(h):(f.push(u),s.firstCreatePass&&t0(s).push(h,f.length-1))}function ex(s,a,u){for(let h in s)if(s.hasOwnProperty(h)){const f=s[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(a,f):u[h]=[a,f]}return u}function lo(s,a,u,h,f,g,w,x){const I=Gi(a,u);let O,M=a.inputs;!x&&null!=M&&(O=M[h])?(fx(s,u,O,h,f),Is(a)&&function NM(s,a){const u=qi(a,s);16&u[2]||(u[2]|=64)}(u,a.index)):3&a.type&&(h=function Rp(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(h),f=null!=w?w(f,a.value||"",h):f,Tn(g)?g.setProperty(I,h,f):zn(h)||(I.setProperty?I.setProperty(h,f):I[h]=f))}function T_(s,a,u,h){let f=!1;if(kc()){const g=function VM(s,a,u){const h=s.directiveRegistry;let f=null;if(h)for(let g=0;g<h.length;g++){const w=h[g];L(u,w.selectors,!1)&&(f||(f=[]),Si(Xr(u,a),s,w.type),_r(w)?(Qy(s,u),f.unshift(w)):f.push(w))}return f}(s,a,u),w=null===h?null:{"":-1};if(null!==g){f=!0,Op(u,s.data.length,g.length);for(let O=0;O<g.length;O++){const j=g[O];j.providersResolver&&j.providersResolver(j)}let x=!1,I=!1,M=fd(s,a,g.length,null);for(let O=0;O<g.length;O++){const j=g[O];u.mergedAttrs=Fs(u.mergedAttrs,j.hostAttrs),Xy(s,u,a,M,j),sx(M,j,w),null!==j.contentQueries&&(u.flags|=8),(null!==j.hostBindings||null!==j.hostAttrs||0!==j.hostVars)&&(u.flags|=128);const G=j.type.prototype;!x&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),x=!0),!I&&(G.ngOnChanges||G.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),M++}!function kp(s,a){const h=a.directiveEnd,f=s.data,g=a.attrs,w=[];let x=null,I=null;for(let M=a.directiveStart;M<h;M++){const O=f[M],j=O.inputs,G=null===g||wM(a)?null:hu(j,g);w.push(G),x=ex(j,M,x),I=ex(O.outputs,M,I)}null!==x&&(x.hasOwnProperty("class")&&(a.flags|=16),x.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=w,a.inputs=x,a.outputs=I}(s,u)}w&&function ox(s,a,u){if(a){const h=s.localNames=[];for(let f=0;f<a.length;f+=2){const g=u[a[f+1]];if(null==g)throw new Fe(-301,!1);h.push(a[f],g)}}}(u,h,w)}return u.mergedAttrs=Fs(u.mergedAttrs,u.attrs),f}function tx(s,a,u,h,f,g){const w=g.hostBindings;if(w){let x=s.hostBindingOpCodes;null===x&&(x=s.hostBindingOpCodes=[]);const I=~a.index;(function nx(s){let a=s.length;for(;a>0;){const u=s[--a];if("number"==typeof u&&u<0)return u}return 0})(x)!=I&&x.push(I),x.push(h,f,w)}}function Ky(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function Qy(s,a){a.flags|=2,(s.components||(s.components=[])).push(a.index)}function sx(s,a,u){if(u){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)u[a.exportAs[h]]=s;_r(a)&&(u[""]=s)}}function Op(s,a,u){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+u,s.providerIndexes=a}function Xy(s,a,u,h,f){s.data[h]=f;const g=f.factory||(f.factory=vr(f.type)),w=new il(g,_r(f),null);s.blueprint[h]=w,u[h]=w,tx(s,a,0,h,fd(s,u,f.hostVars,Tt),f)}function ax(s,a,u){const h=Gi(a,s),f=Zy(u),g=s[10],w=A_(s,Mp(s,f,null,u.onPush?64:16,h,a,g,g.createRenderer(h,u),null,null));s[a.index]=w}function Qt(s,a,u,h,f,g){const w=Gi(s,a);!function an(s,a,u,h,f,g,w){if(null==g)Tn(s)?s.removeAttribute(a,f,u):a.removeAttribute(f);else{const x=null==w?_e(g):w(g,h||"",f);Tn(s)?s.setAttribute(a,f,x,u):u?a.setAttributeNS(u,f,x):a.setAttribute(f,x)}}(a[11],w,g,s.value,u,h,f)}function Xt(s,a,u,h,f,g){const w=g[a];if(null!==w){const x=h.setInput;for(let I=0;I<w.length;){const M=w[I++],O=w[I++],j=w[I++];null!==x?h.setInput(u,j,M,O):u[O]=j}}}function hu(s,a){let u=null,h=0;for(;h<a.length;){const f=a[h];if(0!==f)if(5!==f){if("number"==typeof f)break;s.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,s[f],a[h+1])),h+=2}else h+=2;else h+=4}return u}function M_(s,a,u,h){return new Array(s,!0,!1,a,null,0,h,u,null,null)}function lx(s,a){const u=qi(a,s);if(es(u)){const h=u[1];80&u[2]?pd(h,u,h.template,u[8]):u[5]>0&&Hn(u)}}function Hn(s){for(let h=au(s);null!==h;h=Ah(h))for(let f=10;f<h.length;f++){const g=h[f];if(1024&g[2]){const w=g[1];pd(w,g,w.template,g[8])}else g[5]>0&&Hn(g)}const u=s[1].components;if(null!==u)for(let h=0;h<u.length;h++){const f=qi(u[h],s);es(f)&&f[5]>0&&Hn(f)}}function Jt(s,a){const u=qi(a,s),h=u[1];(function co(s,a){for(let u=a.length;u<s.blueprint.length;u++)a.push(s.blueprint[u])})(h,u),Lh(h,u,u[8])}function A_(s,a){return s[13]?s[14][4]=a:s[13]=a,s[14]=a,a}function Np(s){for(;s;){s[2]|=64;const a=Er(s);if(Pl(s)&&!a)return s;s=a}return null}function cx(s){!function Jy(s){for(let a=0;a<s.components.length;a++){const u=s.components[a],h=Cr(u),f=h[1];RM(f,h,f.template,u)}}(s[8])}function Fp(s,a,u){Nc(0),a(s,u)}const HM=(()=>Promise.resolve(null))();function ux(s){return s[7]||(s[7]=[])}function t0(s){return s.cleanup||(s.cleanup=[])}function hx(s,a){const u=s[9],h=u?u.get(su,null):null;h&&h.handleError(a)}function fx(s,a,u,h,f){for(let g=0;g<u.length;){const w=u[g++],x=u[g++],I=a[w],M=s.data[w];null!==M.setInput?M.setInput(I,f,h,x):I[x]=f}}function fl(s,a,u){const h=aa(a,s);!function kh(s,a,u){Tn(s)?s.setValue(a,u):a.textContent=u}(s[11],h,u)}function pl(s,a,u){let h=u?s.styles:null,f=u?s.classes:null,g=0;if(null!==a)for(let w=0;w<a.length;w++){const x=a[w];"number"==typeof x?g=x:1==g?f=he(f,x):2==g&&(h=he(h,x+": "+a[++w]+";"))}u?s.styles=h:s.stylesWithoutHost=h,u?s.classes=f:s.classesWithoutHost=f}const O_=new Zn("INJECTOR",-1);class Ma{get(a,u=Hs){if(u===Hs){const h=new Error(`NullInjectorError: No provider for ${ge(a)}!`);throw h.name="NullInjectorError",h}return u}}const Vh=new Zn("Set Injector scope."),uo={},$M={};let Nr;function px(){return void 0===Nr&&(Nr=new Ma),Nr}function P_(s,a=null,u=null,h){const f=N_(s,a,u,h);return f._resolveInjectorDefTypes(),f}function N_(s,a=null,u=null,h){return new GM(s,u,a||px(),h)}class GM{constructor(a,u,h,f=null){this.parent=h,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];u&&to(u,x=>this.processProvider(x,a,u)),to([a],x=>this.processInjectorType(x,[],g)),this.records.set(O_,_d(void 0,this));const w=this.records.get(Vh);this.scope=null!=w?w.value:null,this.source=f||("object"==typeof a?null:ge(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,u=Hs,h=gt.Default){this.assertNotDestroyed();const f=Oe(this),g=pi(void 0);try{if(!(h&gt.SkipSelf)){let x=this.records.get(a);if(void 0===x){const I=function L_(s){return"function"==typeof s||"object"==typeof s&&s instanceof Zn}(a)&&Wt(a);x=I&&this.injectableDefInScope(I)?_d(F_(a),uo):null,this.records.set(a,x)}if(null!=x)return this.hydrate(a,x)}return(h&gt.Self?px():this.parent).get(a,u=h&gt.Optional&&u===Hs?null:u)}catch(w){if("NullInjectorError"===w.name){if((w[S]=w[S]||[]).unshift(ge(a)),f)throw w;return function ya(s,a,u,h){const f=s[S];throw a[Q]&&f.unshift(a[Q]),s.message=function io(s,a,u,h=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let f=ge(a);if(Array.isArray(a))f=a.map(ge).join(" -> ");else if("object"==typeof a){let g=[];for(let w in a)if(a.hasOwnProperty(w)){let x=a[w];g.push(w+":"+("string"==typeof x?JSON.stringify(x):ge(x)))}f=`{${g.join(", ")}}`}return`${u}${h?"("+h+")":""}[${f}]: ${s.replace(P,"\n  ")}`}("\n"+s.message,f,u,h),s.ngTokenPath=f,s[S]=null,s}(w,a,"R3InjectorError",this.source)}throw w}finally{pi(g),Oe(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((h,f)=>a.push(ge(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Fe(205,!1)}processInjectorType(a,u,h){if(!(a=ne(a)))return!1;let f=Xi(a);const g=null==f&&a.ngModule||void 0,w=void 0===g?a:g,x=-1!==h.indexOf(w);if(void 0!==g&&(f=Xi(g)),null==f)return!1;if(null!=f.imports&&!x){let O;h.push(w);try{to(f.imports,j=>{this.processInjectorType(j,u,h)&&(void 0===O&&(O=[]),O.push(j))})}finally{}if(void 0!==O)for(let j=0;j<O.length;j++){const{ngModule:G,providers:J}=O[j];to(J,Ce=>this.processProvider(Ce,G,J||bt))}}this.injectorDefTypes.add(w);const I=vr(w)||(()=>new w);this.records.set(w,_d(I,uo));const M=f.providers;if(null!=M&&!x){const O=a;to(M,j=>this.processProvider(j,O,M))}return void 0!==g&&void 0!==a.providers}processProvider(a,u,h){let f=Uh(a=ne(a))?a:ne(a&&a.provide);const g=function gx(s,a,u){return r0(s)?_d(void 0,s.useValue):_d(gd(s),uo)}(a);if(Uh(a)||!0!==a.multi)this.records.get(f);else{let w=this.records.get(f);w||(w=_d(void 0,uo,!0),w.factory=()=>Mi(w.multi),this.records.set(f,w)),f=a,w.multi.push(a)}this.records.set(f,g)}hydrate(a,u){return u.value===uo&&(u.value=$M,u.value=u.factory()),"object"==typeof u.value&&u.value&&function YM(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=ne(a.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function F_(s){const a=Wt(s),u=null!==a?a.factory:vr(s);if(null!==u)return u;if(s instanceof Zn)throw new Fe(204,!1);if(s instanceof Function)return function mx(s){const a=s.length;if(a>0)throw yr(a,"?"),new Fe(204,!1);const u=function pr(s){const a=s&&(s[xo]||s[Wo]);if(a){const u=function ws(s){if(s.hasOwnProperty("name"))return s.name;const a=(""+s).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Fe(204,!1)}function gd(s,a,u){let h;if(Uh(s)){const f=ne(s);return vr(f)||F_(f)}if(r0(s))h=()=>ne(s.useValue);else if(function zM(s){return!(!s||!s.useFactory)}(s))h=()=>s.useFactory(...Mi(s.deps||[]));else if(function qM(s){return!(!s||!s.useExisting)}(s))h=()=>at(ne(s.useExisting));else{const f=ne(s&&(s.useClass||s.provide));if(!function WM(s){return!!s.deps}(s))return vr(f)||F_(f);h=()=>new f(...Mi(s.deps))}return h}function _d(s,a,u=!1){return{factory:s,value:a,multi:u?[]:void 0}}function r0(s){return null!==s&&"object"==typeof s&&oe in s}function Uh(s){return"function"==typeof s}let Zs=(()=>{class s{static create(u,h){var f;if(Array.isArray(u))return P_({name:""},h,u,"");{const g=null!==(f=u.name)&&void 0!==f?f:"";return P_({name:g},u.parent,u.providers,g)}}}return s.THROW_IF_NOT_FOUND=Hs,s.NULL=new Ma,s.\u0275prov=un({token:s,providedIn:"any",factory:()=>at(O_)}),s.__NG_ELEMENT_ID__=-1,s})();function QM(s,a){Gl(Cr(s)[1],Rn())}function Vp(s){let a=function xx(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const h=[s];for(;a;){let f;if(_r(s))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Fe(903,"");f=a.\u0275dir}if(f){if(u){h.push(f);const w=s;w.inputs=Up(s.inputs),w.declaredInputs=Up(s.declaredInputs),w.outputs=Up(s.outputs);const x=f.hostBindings;x&&Dx(s,x);const I=f.viewQuery,M=f.contentQueries;if(I&&JM(s,I),M&&U_(s,M),ie(s.inputs,f.inputs),ie(s.declaredInputs,f.declaredInputs),ie(s.outputs,f.outputs),_r(f)&&f.data.animation){const O=s.data;O.animation=(O.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let w=0;w<g.length;w++){const x=g[w];x&&x.ngInherit&&x(s),x===Vp&&(u=!1)}}a=Object.getPrototypeOf(a)}!function XM(s){let a=0,u=null;for(let h=s.length-1;h>=0;h--){const f=s[h];f.hostVars=a+=f.hostVars,f.hostAttrs=Fs(f.hostAttrs,u=Fs(u,f.hostAttrs))}}(h)}function Up(s){return s===Ni?{}:s===bt?[]:s}function JM(s,a){const u=s.viewQuery;s.viewQuery=u?(h,f)=>{a(h,f),u(h,f)}:a}function U_(s,a){const u=s.contentQueries;s.contentQueries=u?(h,f,g)=>{a(h,f,g),u(h,f,g)}:a}function Dx(s,a){const u=s.hostBindings;s.hostBindings=u?(h,f)=>{a(h,f),u(h,f)}:a}let yd=null;function Aa(){if(!yd){const s=Zt.Symbol;if(s&&s.iterator)yd=s.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const h=a[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(yd=h)}}}return yd}function wd(s){return!!H_(s)&&(Array.isArray(s)||!(s instanceof Map)&&Aa()in s)}function H_(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function gl(s,a,u){return s[a]=u}function Fr(s,a,u){return!Object.is(s[a],u)&&(s[a]=u,!0)}function rr(s,a,u,h){const f=Fr(s,a,u);return Fr(s,a+1,h)||f}function $h(s,a,u,h,f){const g=rr(s,a,u,h);return Fr(s,a+2,f)||g}function Vo(s,a,u,h,f,g){const w=rr(s,a,u,h);return rr(s,a+2,f,g)||w}function Hp(s,a,u,h){const f=Te();return Fr(f,Ns(),a)&&(Kt(),Qt(Fn(),f,s,a,u,h)),Hp}function _l(s,a,u,h){return Fr(s,Ns(),u)?a+_e(u)+h:Tt}function Yh(s,a,u,h,f,g,w,x){const I=Te(),M=Kt(),O=s+20,j=M.firstCreatePass?function Ra(s,a,u,h,f,g,w,x,I){const M=a.consts,O=Fh(a,s,4,w||null,br(M,x));T_(a,u,O,br(M,I)),Gl(a,O);const j=O.tViews=Ap(2,O,h,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,M);return null!==a.queries&&(a.queries.template(a,O),j.queries=a.queries.embeddedTView(O)),O}(O,M,I,a,u,h,f,g,w):M.data[O];To(j,!1);const G=I[11].createComment("");Oh(M,I,G,j),Vi(G,I),A_(I,I[O]=M_(G,I,G,j)),bc(j)&&Wy(M,I,j),null!=w&&Yy(I,j,x)}function d0(s){return Yr(function ep(){return Et.lFrame.contextLView}(),20+s)}function Kh(s,a=gt.Default){const u=Te();return null===u?at(s,a):Mo(Rn(),u,ne(s),a)}function Ux(){throw new Error("invalid")}function Q_(s,a,u){const h=Te();return Fr(h,Ns(),a)&&lo(Kt(),Fn(),h,s,a,h[11],u,!1),Q_}function zp(s,a,u,h,f){const w=f?"class":"style";fx(s,u,a.inputs[w],w,h)}function X_(s,a,u,h){const f=Te(),g=Kt(),w=20+s,x=f[11],I=f[w]=Vn(x,a,function ju(){return Et.lFrame.currentNamespace}()),M=g.firstCreatePass?function uA(s,a,u,h,f,g,w){const x=a.consts,M=Fh(a,s,2,f,br(x,g));return T_(a,u,M,br(x,w)),null!==M.attrs&&pl(M,M.attrs,!1),null!==M.mergedAttrs&&pl(M,M.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,M),M}(w,g,f,0,a,u,h):g.data[w];To(M,!0);const O=M.mergedAttrs;null!==O&&pt(x,I,O);const j=M.classes;null!==j&&Nh(x,I,j);const G=M.styles;return null!==G&&BE(x,I,G),64!=(64&M.flags)&&Oh(g,f,I,M),0===function Mc(){return Et.lFrame.elementDepthCount}()&&Vi(I,f),function Ac(){Et.lFrame.elementDepthCount++}(),bc(M)&&(Wy(g,f,M),function XE(s,a,u){if(zd(a)){const f=a.directiveEnd;for(let g=a.directiveStart;g<f;g++){const w=s.data[g];w.contentQueries&&w.contentQueries(1,u[g],g)}}}(g,M,f)),null!==h&&Yy(f,M),X_}function J_(){let s=Rn();Fu()?Vl():(s=s.parent,To(s,!1));const a=s;!function Ou(){Et.lFrame.elementDepthCount--}();const u=Kt();return u.firstCreatePass&&(Gl(u,s),zd(s)&&u.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Fg(s){return 0!=(16&s.flags)}(a)&&zp(u,a,Te(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Dn(s){return 0!=(32&s.flags)}(a)&&zp(u,a,Te(),a.stylesWithoutHost,!1),J_}function b0(s,a,u,h){return X_(s,a,u,h),J_(),b0}function w0(){return Te()}function tv(s){return!!s&&"function"==typeof s.then}function Hx(s){return!!s&&"function"==typeof s.subscribe}const C0=Hx;function Qh(s,a,u,h){const f=Te(),g=Kt(),w=Rn();return function $x(s,a,u,h,f,g,w,x){const I=bc(h),O=s.firstCreatePass&&t0(s),j=a[8],G=ux(a);let J=!0;if(3&h.type||x){const ze=Gi(h,a),rt=x?x(ze):ze,Se=G.length,Ct=x?nn=>x(pn(nn[h.index])):h.index;if(Tn(u)){let nn=null;if(!x&&I&&(nn=function hA(s,a,u,h){const f=s.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const w=f[g];if(w===u&&f[g+1]===h){const x=a[7],I=f[g+2];return x.length>I?x[I]:null}"string"==typeof w&&(g+=2)}return null}(s,a,f,h.index)),null!==nn)(nn.__ngLastListenerFn__||nn).__ngNextListenerFn__=g,nn.__ngLastListenerFn__=g,J=!1;else{g=Wp(h,a,j,g,!1);const In=u.listen(rt,f,g);G.push(g,In),O&&O.push(f,Ct,Se,Se+1)}}else g=Wp(h,a,j,g,!0),rt.addEventListener(f,g,w),G.push(g),O&&O.push(f,Ct,Se,w)}else g=Wp(h,a,j,g,!1);const Ce=h.outputs;let Be;if(J&&null!==Ce&&(Be=Ce[f])){const ze=Be.length;if(ze)for(let rt=0;rt<ze;rt+=2){const us=a[Be[rt]][Be[rt+1]].subscribe(g),yu=G.length;G.push(g,us),O&&O.push(f,h.index,yu,-(yu+1))}}}(g,f,f[11],w,s,a,!!u,h),Qh}function Gx(s,a,u,h){try{return!1!==u(h)}catch(f){return hx(s,f),!1}}function Wp(s,a,u,h,f){return function g(w){if(w===Function)return h;const x=2&s.flags?qi(s.index,a):a;0==(32&a[2])&&Np(x);let I=Gx(a,0,h,w),M=g.__ngNextListenerFn__;for(;M;)I=Gx(a,0,M,w)&&I,M=M.__ngNextListenerFn__;return f&&!1===I&&(w.preventDefault(),w.returnValue=!1),I}}function x0(s=1){return function Uu(s){return(Et.lFrame.contextLView=function tp(s,a){for(;s>0;)a=a[15],s--;return a}(s,Et.lFrame.contextLView))[8]}(s)}function fA(s,a){let u=null;const h=function Ta(s){const a=s.attrs;if(null!=a){const u=a.indexOf(5);if(0==(1&u))return a[u+1]}return null}(s);for(let f=0;f<a.length;f++){const g=a[f];if("*"!==g){if(null===h?L(s,g,!0):Ny(h,g))return f}else u=f}return u}function qx(s){const a=Te()[16][6];if(!a.projection){const h=a.projection=yr(s?s.length:1,null),f=h.slice();let g=a.child;for(;null!==g;){const w=s?fA(g,s):0;null!==w&&(f[w]?f[w].projectionNext=g:h[w]=g,f[w]=g),g=g.next}}}function D0(s,a=0,u){const h=Te(),f=Kt(),g=Fh(f,20+s,16,null,u||null);null===g.projection&&(g.projection=a),Vl(),64!=(64&g.flags)&&function Ph(s,a,u){Ia(a[11],0,a,u,bM(s,u,a),RE(u.parent||a[6],u,a))}(f,h,g)}function bl(s,a,u){return nv(s,"",a,"",u),bl}function nv(s,a,u,h,f){const g=Te(),w=_l(g,a,u,h);return w!==Tt&&lo(Kt(),Fn(),g,s,w,g[11],f,!1),nv}function Xh(s,a,u,h,f){const g=s[u+1],w=null===a;let x=h?ao(g):Un(g),I=!1;for(;0!==x&&(!1===I||w);){const O=s[x+1];mA(s[x],a)&&(I=!0,s[x+1]=h?qs(O):m_(O)),x=h?ao(O):Un(O)}I&&(s[u+1]=h?m_(g):qs(g))}function mA(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&js(s,a)>=0}const Zi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Kx(s){return s.substring(Zi.key,Zi.keyEnd)}function Qx(s,a){const u=Zi.textEnd;return u===a?-1:(a=Zi.keyEnd=function eD(s,a,u){for(;a<u&&s.charCodeAt(a)>32;)a++;return a}(s,Zi.key=a,u),Oa(s,a,u))}function Oa(s,a,u){for(;a<u&&s.charCodeAt(a)<=32;)a++;return a}function Xp(s,a,u){return Pa(s,a,u,!1),Xp}function Jp(s,a){return Pa(s,a,null,!0),Jp}function iD(s){!function ss(s,a,u,h){const f=Kt(),g=Kr(2);f.firstUpdatePass&&rD(f,null,g,h);const w=Te();if(u!==Tt&&Fr(w,g,u)){const x=f.data[zi()];if(R0(x,h)&&!rv(f,g)){let I=h?x.classesWithoutHost:x.stylesWithoutHost;null!==I&&(u=he(I,u||"")),zp(f,x,w,u,h)}else!function Dd(s,a,u,h,f,g,w,x){f===Tt&&(f=bt);let I=0,M=0,O=0<f.length?f[0]:null,j=0<g.length?g[0]:null;for(;null!==O||null!==j;){const G=I<f.length?f[I+1]:void 0,J=M<g.length?g[M+1]:void 0;let Be,Ce=null;O===j?(I+=2,M+=2,G!==J&&(Ce=j,Be=J)):null===j||null!==O&&O<j?(I+=2,Ce=O):(M+=2,Ce=j,Be=J),null!==Ce&&ov(s,a,u,h,Ce,Be,w,x),O=I<f.length?f[I]:null,j=M<g.length?g[M]:null}}(f,x,w,w[11],w[g+1],w[g+1]=function A0(s,a,u){if(null==u||""===u)return bt;const h=[],f=No(u);if(Array.isArray(f))for(let g=0;g<f.length;g++)s(h,f[g],!0);else if("object"==typeof f)for(const g in f)f.hasOwnProperty(g)&&s(h,g,f[g]);else"string"==typeof f&&a(h,f);return h}(s,a,u),h,g)}}(wr,wl,s,!0)}function wl(s,a){for(let u=function gA(s){return function Jx(s){Zi.key=0,Zi.keyEnd=0,Zi.value=0,Zi.valueEnd=0,Zi.textEnd=s.length}(s),Qx(s,Oa(s,0,Zi.textEnd))}(a);u>=0;u=Qx(a,u))wr(s,Kx(a),!0)}function Pa(s,a,u,h){const f=Te(),g=Kt(),w=Kr(2);g.firstUpdatePass&&rD(g,s,w,h),a!==Tt&&Fr(f,w,a)&&ov(g,g.data[zi()],f,f[11],s,f[w+1]=function av(s,a){return null==s||("string"==typeof a?s+=a:"object"==typeof s&&(s=ge(No(s)))),s}(a,u),h,w)}function rv(s,a){return a>=s.expandoStartIndex}function rD(s,a,u,h){const f=s.data;if(null===f[u+1]){const g=f[zi()],w=rv(s,u);R0(g,h)&&null===a&&!w&&(a=!1),a=function oD(s,a,u,h){const f=function Pc(s){const a=Et.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let g=h?a.residualClasses:a.residualStyles;if(null===f)0===(h?a.classBindings:a.styleBindings)&&(u=xd(u=tm(null,s,a,u,h),a.attrs,h),g=null);else{const w=a.directiveStylingLast;if(-1===w||s[w]!==f)if(u=tm(f,s,a,u,h),null===g){let I=function _A(s,a,u){const h=u?a.classBindings:a.styleBindings;if(0!==Un(h))return s[ao(h)]}(s,a,h);void 0!==I&&Array.isArray(I)&&(I=tm(null,s,a,I[1],h),I=xd(I,a.attrs,h),function vA(s,a,u,h){s[ao(u?a.classBindings:a.styleBindings)]=h}(s,a,h,I))}else g=function sD(s,a,u){let h;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)h=xd(h,s[g].hostAttrs,u);return xd(h,a.attrs,u)}(s,a,h)}return void 0!==g&&(h?a.residualClasses=g:a.residualStyles=g),u}(f,g,a,h),function pA(s,a,u,h,f,g){let w=g?a.classBindings:a.styleBindings,x=ao(w),I=Un(w);s[h]=u;let O,M=!1;if(Array.isArray(u)){const j=u;O=j[1],(null===O||js(j,O)>0)&&(M=!0)}else O=u;if(f)if(0!==I){const G=ao(s[x+1]);s[h+1]=Ip(G,x),0!==G&&(s[G+1]=hd(s[G+1],h)),s[x+1]=function $E(s,a){return 131071&s|a<<17}(s[x+1],h)}else s[h+1]=Ip(x,0),0!==x&&(s[x+1]=hd(s[x+1],h)),x=h;else s[h+1]=Ip(I,0),0===x?x=h:s[I+1]=hd(s[I+1],h),I=h;M&&(s[h+1]=m_(s[h+1])),Xh(s,O,h,!0),Xh(s,O,h,!1),function mu(s,a,u,h,f){const g=f?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof a&&js(g,a)>=0&&(u[h+1]=qs(u[h+1]))}(a,O,s,h,g),w=Ip(x,I),g?a.classBindings=w:a.styleBindings=w}(f,g,a,u,w,h)}}function tm(s,a,u,h,f){let g=null;const w=u.directiveEnd;let x=u.directiveStylingLast;for(-1===x?x=u.directiveStart:x++;x<w&&(g=a[x],h=xd(h,g.hostAttrs,f),g!==s);)x++;return null!==s&&(u.directiveStylingLast=x),h}function xd(s,a,u){const h=u?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const w=a[g];"number"==typeof w?f=w:f===h&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),wr(s,w,!!u||a[++g]))}return void 0===s?null:s}function ov(s,a,u,h,f,g,w,x){if(!(3&a.type))return;const I=s.data,M=I[x+1];sv(function g_(s){return 1==(1&s)}(M)?k0(I,a,u,f,Un(M),w):void 0)||(sv(g)||function uu(s){return 2==(2&s)}(M)&&(g=k0(I,null,u,f,x,w)),function Oy(s,a,u,h,f){const g=Tn(s);if(a)f?g?s.addClass(u,h):u.classList.add(h):g?s.removeClass(u,h):u.classList.remove(h);else{let w=-1===h.indexOf("-")?void 0:Ve.DashCase;if(null==f)g?s.removeStyle(u,h,w):u.style.removeProperty(h);else{const x="string"==typeof f&&f.endsWith("!important");x&&(f=f.slice(0,-10),w|=Ve.Important),g?s.setStyle(u,h,f,w):u.style.setProperty(h,f,x?"important":"")}}}(h,w,aa(zi(),u),f,g))}function k0(s,a,u,h,f,g){const w=null===a;let x;for(;f>0;){const I=s[f],M=Array.isArray(I),O=M?I[1]:I,j=null===O;let G=u[f+1];G===Tt&&(G=j?bt:void 0);let J=j?Yl(G,h):O===h?G:void 0;if(M&&!sv(J)&&(J=Yl(I,h)),sv(J)&&(x=J,w))return x;const Ce=s[f+1];f=w?ao(Ce):Un(Ce)}if(null!==a){let I=g?a.residualClasses:a.residualStyles;null!=I&&(x=Yl(I,h))}return x}function sv(s){return void 0!==s}function R0(s,a){return 0!=(s.flags&(a?16:32))}function aD(s,a=""){const u=Te(),h=Kt(),f=s+20,g=h.firstCreatePass?Fh(h,f,1,a,null):h.data[f],w=u[f]=function ud(s,a){return Tn(s)?s.createText(a):s.createTextNode(a)}(u[11],a);Oh(h,u,w,g),To(g,!1)}function Id(s){return Jh("",s,""),Id}function Jh(s,a,u){const h=Te(),f=_l(h,s,a,u);return f!==Tt&&fl(h,zi(),f),Jh}function O0(s,a,u,h,f){const g=Te(),w=function Ks(s,a,u,h,f,g){const x=rr(s,Zr(),u,f);return Kr(2),x?a+_e(u)+h+_e(f)+g:Tt}(g,s,a,u,h,f);return w!==Tt&&fl(g,zi(),w),O0}function P0(s,a,u,h,f,g,w){const x=Te(),I=function ka(s,a,u,h,f,g,w,x){const M=$h(s,Zr(),u,f,w);return Kr(3),M?a+_e(u)+h+_e(f)+g+_e(w)+x:Tt}(x,s,a,u,h,f,g,w);return I!==Tt&&fl(x,zi(),I),P0}function j0(s,a,u){const h=Te();return Fr(h,Ns(),a)&&lo(Kt(),Fn(),h,s,a,h[11],u,!0),j0}const Sd=void 0;var DA=["en",[["a","p"],["AM","PM"],Sd],[["AM","PM"],Sd,Sd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Sd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Sd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Sd,"{1} 'at' {0}",Sd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function xA(s){const u=Math.floor(Math.abs(s)),h=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let Td={};function IA(s,a,u){"string"!=typeof a&&(u=a,a=s[_t.LocaleId]),a=a.toLowerCase().replace(/_/g,"-"),Td[a]=s,u&&(Td[a][_t.ExtraData]=u)}function H0(s){const a=function gu(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=$0(a);if(u)return u;const h=a.split("-")[0];if(u=$0(h),u)return u;if("en"===h)return DA;throw new Error(`Missing locale data for the locale "${s}".`)}function hv(s){return H0(s)[_t.PluralCase]}function $0(s){return s in Td||(Td[s]=Zt.ng&&Zt.ng.common&&Zt.ng.common.locales&&Zt.ng.common.locales[s]),Td[s]}var _t=(()=>((_t=_t||{})[_t.LocaleId=0]="LocaleId",_t[_t.DayPeriodsFormat=1]="DayPeriodsFormat",_t[_t.DayPeriodsStandalone=2]="DayPeriodsStandalone",_t[_t.DaysFormat=3]="DaysFormat",_t[_t.DaysStandalone=4]="DaysStandalone",_t[_t.MonthsFormat=5]="MonthsFormat",_t[_t.MonthsStandalone=6]="MonthsStandalone",_t[_t.Eras=7]="Eras",_t[_t.FirstDayOfWeek=8]="FirstDayOfWeek",_t[_t.WeekendRange=9]="WeekendRange",_t[_t.DateFormat=10]="DateFormat",_t[_t.TimeFormat=11]="TimeFormat",_t[_t.DateTimeFormat=12]="DateTimeFormat",_t[_t.NumberSymbols=13]="NumberSymbols",_t[_t.NumberFormats=14]="NumberFormats",_t[_t.CurrencyCode=15]="CurrencyCode",_t[_t.CurrencySymbol=16]="CurrencySymbol",_t[_t.CurrencyName=17]="CurrencyName",_t[_t.Currencies=18]="Currencies",_t[_t.Directionality=19]="Directionality",_t[_t.PluralCase=20]="PluralCase",_t[_t.ExtraData=21]="ExtraData",_t))();const Md="en-US";let q0=Md;function BD(s,a,u,h,f){if(s=ne(s),Array.isArray(s))for(let g=0;g<s.length;g++)BD(s[g],a,u,h,f);else{const g=Kt(),w=Te();let x=Uh(s)?s:ne(s.provide),I=gd(s);const M=Rn(),O=1048575&M.providerIndexes,j=M.directiveStart,G=M.providerIndexes>>20;if(Uh(s)||!s.multi){const J=new il(I,f,Kh),Ce=J0(x,a,f?O:O+G,j);-1===Ce?(Si(Xr(M,w),g,x),X0(g,s,a.length),a.push(x),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),u.push(J),w.push(J)):(u[Ce]=J,w[Ce]=J)}else{const J=J0(x,a,O+G,j),Ce=J0(x,a,O,O+G),Be=J>=0&&u[J],ze=Ce>=0&&u[Ce];if(f&&!ze||!f&&!Be){Si(Xr(M,w),g,x);const rt=function ak(s,a,u,h,f){const g=new il(s,u,Kh);return g.multi=[],g.index=a,g.componentProviders=0,VD(g,f,h&&!u),g}(f?sk:UD,u.length,f,h,I);!f&&ze&&(u[Ce].providerFactory=rt),X0(g,s,a.length,0),a.push(x),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),u.push(rt),w.push(rt)}else X0(g,s,J>-1?J:Ce,VD(u[f?Ce:J],I,!f&&h));!f&&h&&ze&&u[Ce].componentProviders++}}}function X0(s,a,u,h){const f=Uh(a),g=function $n(s){return!!s.useClass}(a);if(f||g){const I=(g?ne(a.useClass):a).prototype.ngOnDestroy;if(I){const M=s.destroyHooks||(s.destroyHooks=[]);if(!f&&a.multi){const O=M.indexOf(u);-1===O?M.push(u,[h,I]):M[O+1].push(h,I)}else M.push(u,I)}}}function VD(s,a,u){return u&&s.componentProviders++,s.multi.push(a)-1}function J0(s,a,u,h){for(let f=u;f<h;f++)if(a[f]===s)return f;return-1}function UD(s,a,u,h){return ew(this.multi,[])}function sk(s,a,u,h){const f=this.multi;let g;if(this.providerFactory){const w=this.providerFactory.componentProviders,x=Ao(u,u[1],this.providerFactory.index,h);g=x.slice(0,w),ew(f,g);for(let I=w;I<x.length;I++)g.push(x[I])}else g=[],ew(f,g);return g}function ew(s,a){for(let u=0;u<s.length;u++)a.push((0,s[u])());return a}function jD(s,a=[]){return u=>{u.providersResolver=(h,f)=>function PF(s,a,u){const h=Kt();if(h.firstCreatePass){const f=_r(s);BD(u,h.data,h.blueprint,f,!0),BD(a,h.data,h.blueprint,f,!1)}}(h,f?f(s):s,a)}}class or{}class lk{resolveComponentFactory(a){throw function ls(s){const a=Error(`No component factory found for ${ge(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let Ev=(()=>{class s{}return s.NULL=new lk,s})();function ck(){return cc(Rn(),Te())}function cc(s,a){return new dm(Gi(s,a))}let dm=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=ck,s})();function uk(s){return s instanceof dm?s.nativeElement:s}class tw{}let nw=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function xv(){const s=Te(),u=qi(Rn().index,s);return function HD(s){return s[11]}(Ar(u)?u:s)}(),s})(),hk=(()=>{class s{}return s.\u0275prov=un({token:s,providedIn:"root",factory:()=>null}),s})();class fk{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const $D=new fk("13.3.8"),hm={};function iw(s,a,u,h,f=!1){for(;null!==u;){const g=a[u.index];if(null!==g&&h.push(pn(g)),gr(g))for(let x=10;x<g.length;x++){const I=g[x],M=I[1].firstChild;null!==M&&iw(I[1],I,M,h)}const w=u.type;if(8&w)iw(s,a,u.child,h);else if(32&w){const x=wt(u,a);let I;for(;I=x();)h.push(I)}else if(16&w){const x=NE(a,u);if(Array.isArray(x))h.push(...x);else{const I=Er(a[16]);iw(I[1],I,x,h,!0)}}u=f?u.projectionNext:u.next}return h}class Dv{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return iw(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(gr(a)){const u=a[8],h=u?u.indexOf(this):-1;h>-1&&(c_(a,h),Ro(u,h))}this._attachedToViewContainer=!1}SE(this._lView[1],this._lView)}onDestroy(a){I_(this._lView[1],this._lView,null,a)}markForCheck(){Np(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function e0(s,a,u){const h=a[10];h.begin&&h.begin();try{pd(s,a,s.template,u)}catch(f){throw hx(a,f),f}finally{h.end&&h.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Fe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Dp(s,a){oo(s,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Fe(902,"");this._appRef=a}}class pk extends Dv{constructor(a){super(a),this._view=a}detectChanges(){cx(this._view)}checkNoChanges(){}get context(){return null}}class GD extends Ev{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=en(a);return new qD(u,this.ngModule)}}function mk(s){const a=[];for(let u in s)s.hasOwnProperty(u)&&a.push({propName:s[u],templateName:u});return a}class qD extends or{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function EM(s){return s.map(CM).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return mk(this.componentDef.inputs)}get outputs(){return mk(this.componentDef.outputs)}create(a,u,h,f){const g=(f=f||this.ngModule)?function LF(s,a){return{get:(u,h,f)=>{const g=s.get(u,hm,f);return g!==hm||h===hm?g:a.get(u,h,f)}}}(a,f.injector):a,w=g.get(tw,Ja),x=g.get(hk,null),I=w.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",O=h?function md(s,a,u){if(Tn(s))return s.selectRootElement(a,u===Yt.ShadowDom);let h="string"==typeof a?s.querySelector(a):a;return h.textContent="",h}(I,h,this.componentDef.encapsulation):Vn(w.createRenderer(null,this.componentDef),M,function FF(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(M)),j=this.componentDef.onPush?576:528,G=function Bp(s,a){return{components:[],scheduler:s||Sy,clean:HM,playerHandler:a||null,flags:0}}(),J=Ap(0,null,null,1,0,null,null,null,null,null),Ce=Mp(null,J,G,j,null,null,w,I,x,g);let Be,ze;Fc(Ce);try{const rt=function Hh(s,a,u,h,f,g){const w=u[1];u[20]=s;const I=Fh(w,20,2,"#host",null),M=I.mergedAttrs=a.hostAttrs;null!==M&&(pl(I,M,!0),null!==s&&(pt(f,s,M),null!==I.classes&&Nh(f,s,I.classes),null!==I.styles&&BE(f,s,I.styles)));const O=h.createRenderer(s,a),j=Mp(u,Zy(a),null,a.onPush?64:16,u[20],I,h,O,g||null,null);return w.firstCreatePass&&(Si(Xr(I,u),w,a.type),Qy(w,I),Op(I,u.length,1)),A_(u,j),u[20]=j}(O,this.componentDef,Ce,w,I);if(O)if(h)pt(I,O,["ng-version",$D.full]);else{const{attrs:Se,classes:Ct}=function HE(s){const a=[],u=[];let h=1,f=2;for(;h<s.length;){let g=s[h];if("string"==typeof g)2===f?""!==g&&a.push(g,s[++h]):8===f&&u.push(g);else{if(!fe(f))break;f=g}h++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);Se&&pt(I,O,Se),Ct&&Ct.length>0&&Nh(I,O,Ct.join(" "))}if(ze=Bl(J,20),void 0!==u){const Se=ze.projection=[];for(let Ct=0;Ct<this.ngContentSelectors.length;Ct++){const nn=u[Ct];Se.push(null!=nn?Array.from(nn):null)}}Be=function Ex(s,a,u,h,f){const g=u[1],w=function BM(s,a,u){const h=Rn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Xy(s,h,a,fd(s,a,1,null),u));const f=Ao(a,s,h.directiveStart,h);Vi(f,a);const g=Gi(h,a);return g&&Vi(g,a),f}(g,u,a);if(h.components.push(w),s[8]=w,f&&f.forEach(I=>I(w,a)),a.contentQueries){const I=Rn();a.contentQueries(1,w,I.directiveStart)}const x=Rn();return!g.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(da(x.index),tx(u[1],x,0,x.directiveStart,x.directiveEnd,a),Ky(a,w)),w}(rt,this.componentDef,Ce,G,[QM]),Lh(J,Ce,null)}finally{Qr()}return new VF(this.componentType,Be,cc(ze,Ce),Ce,ze)}}class VF extends class vu{}{constructor(a,u,h,f,g){super(),this.location=h,this._rootLView=f,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new pk(f),this.componentType=a}get injector(){return new ga(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class Ad{}class zD{}const lf=new Map;class ZD extends Ad{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new GD(this);const h=En(a);this._bootstrapComponents=C(h.bootstrap),this._r3Injector=N_(a,u,[{provide:Ad,useValue:this},{provide:Ev,useValue:this.componentFactoryResolver}],ge(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,u=Zs.THROW_IF_NOT_FOUND,h=gt.Default){return a===Zs||a===Ad||a===O_?this:this._r3Injector.get(a,u,h)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Sv extends zD{constructor(a){super(),this.moduleType=a,null!==En(a)&&function Iv(s){const a=new Set;!function u(h){const f=En(h,!0),g=f.id;null!==g&&(function Js(s,a,u){if(a&&a!==u)throw new Error(`Duplicate module registered for ${s} - ${ge(a)} vs ${ge(a.name)}`)}(g,lf.get(g),h),lf.set(g,h));const w=C(f.imports);for(const x of w)a.has(x)||(a.add(x),u(x))}(s)}(a)}create(a){return new ZD(this.moduleType,a)}}function KD(s,a,u,h){return function Mv(s,a,u,h,f,g){const w=a+u;return Fr(s,w,f)?gl(s,w+1,g?h.call(g,f):h(f)):kd(s,w+1)}(Te(),_i(),s,a,u,h)}function QD(s,a,u,h,f,g){return function eI(s,a,u,h,f,g,w,x){const I=a+u;return $h(s,I,f,g,w)?gl(s,I+3,x?h.call(x,f,g,w):h(f,g,w)):kd(s,I+3)}(Te(),_i(),s,a,u,h,f,g)}function Lr(s,a,u,h,f,g,w){return function tI(s,a,u,h,f,g,w,x,I){const M=a+u;return Vo(s,M,f,g,w,x)?gl(s,M+4,I?h.call(I,f,g,w,x):h(f,g,w,x)):kd(s,M+4)}(Te(),_i(),s,a,u,h,f,g,w)}function fm(s,a,u,h,f,g,w,x){const I=_i()+s,M=Te(),O=Vo(M,I,u,h,f,g);return Fr(M,I+4,w)||O?gl(M,I+5,x?a.call(x,u,h,f,g,w):a(u,h,f,g,w)):function jp(s,a){return s[a]}(M,I+5)}function kd(s,a){const u=s[a];return u===Tt?void 0:u}function iI(s,a){const u=Kt();let h;const f=s+20;u.firstCreatePass?(h=function pm(s,a){if(a)for(let u=a.length-1;u>=0;u--){const h=a[u];if(s===h.name)return h}}(a,u.pipeRegistry),u.data[f]=h,h.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(f,h.onDestroy)):h=u.data[f];const g=h.factory||(h.factory=vr(h.type)),w=pi(Kh);try{const x=et(!1),I=g();return et(x),function u0(s,a,u,h){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),a[u]=h}(u,Te(),f,I),I}finally{pi(w)}}function mm(s,a,u,h){const f=s+20,g=Te(),w=Yr(g,f);return function gm(s,a){return s[1].data[a].pure}(g,f)?function JD(s,a,u,h,f,g,w){const x=a+u;return rr(s,x,f,g)?gl(s,x+2,w?h.call(w,f,g):h(f,g)):kd(s,x+2)}(g,_i(),a,w.transform,u,h,w):w.transform(u,h)}function Av(s){return a=>{setTimeout(s,void 0,a)}}const ea=class wk extends l.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,h){var f,g,w;let x=a,I=u||(()=>null),M=h;if(a&&"object"==typeof a){const j=a;x=null===(f=j.next)||void 0===f?void 0:f.bind(j),I=null===(g=j.error)||void 0===g?void 0:g.bind(j),M=null===(w=j.complete)||void 0===w?void 0:w.bind(j)}this.__isAsync&&(I=Av(I),x&&(x=Av(x)),M&&(M=Av(M)));const O=super.subscribe({next:x,error:I,complete:M});return a instanceof ee.w0&&a.add(O),O}};function sI(){return this._results[Aa()]()}class cf{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Aa(),h=cf.prototype;h[u]||(h[u]=sI)}get changes(){return this._changes||(this._changes=new ea)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const h=this;h.dirty=!1;const f=tr(a);(this._changesDetected=!function Wl(s,a,u){if(s.length!==a.length)return!1;for(let h=0;h<s.length;h++){let f=s[h],g=a[h];if(u&&(f=u(f),g=u(g)),g!==f)return!1}return!0}(h._results,f,u))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let uf=(()=>{class s{}return s.__NG_ELEMENT_ID__=ow,s})();const _m=uf,Ck=class extends _m{constructor(a,u,h){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(a){const u=this._declarationTContainer.tViews,h=Mp(this._declarationLView,u,a,16,null,u.declTNode,null,null,null,null);h[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(h[19]=g.createEmbeddedView(u)),Lh(u,h,a),new Dv(h)}};function ow(){return vm(Rn(),Te())}function vm(s,a){return 4&s.type?new Ck(a,s,cc(s,a)):null}let kv=(()=>{class s{}return s.__NG_ELEMENT_ID__=sw,s})();function sw(){return lI(Rn(),Te())}const aI=kv,aw=class extends aI{constructor(a,u,h){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=h}get element(){return cc(this._hostTNode,this._hostLView)}get injector(){return new ga(this._hostTNode,this._hostLView)}get parentInjector(){const a=Ls(this._hostTNode,this._hostLView);if(Ln(a)){const u=ha(a,this._hostLView),h=ol(a);return new ga(u[1].data[h+8],u)}return new ga(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=Rv(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,h){const f=a.createEmbeddedView(u||{});return this.insert(f,h),f}createComponent(a,u,h,f,g){const w=a&&!function zl(s){return"function"==typeof s}(a);let x;if(w)x=u;else{const j=u||{};x=j.index,h=j.injector,f=j.projectableNodes,g=j.ngModuleRef}const I=w?a:new qD(en(a)),M=h||this.parentInjector;if(!g&&null==I.ngModule){const G=(w?M:this.parentInjector).get(Ad,null);G&&(g=G)}const O=I.create(M,f,void 0,g);return this.insert(O.hostView,x),O}insert(a,u){const h=a._lView,f=h[1];if(function Sc(s){return gr(s[3])}(h)){const O=this.indexOf(a);if(-1!==O)this.detach(O);else{const j=h[3],G=new aw(j,j[6],j[3]);G.detach(G.indexOf(a))}}const g=this._adjustIndex(u),w=this._lContainer;!function Rh(s,a,u,h){const f=10+h,g=u.length;h>0&&(u[f-1][4]=a),h<g-10?(a[4]=u[f],_a(u,10+h,a)):(u.push(a),a[4]=null),a[3]=u;const w=a[17];null!==w&&u!==w&&function vM(s,a){const u=s[9];a[16]!==a[3][3][16]&&(s[2]=!0),null===u?s[9]=[a]:u.push(a)}(w,a);const x=a[19];null!==x&&x.insertView(s),a[2]|=128}(f,h,w,g);const x=f_(g,w),I=h[11],M=d_(I,w[7]);return null!==M&&function l_(s,a,u,h,f,g){h[0]=f,h[6]=a,oo(s,h,u,1,f,g)}(f,w[6],I,h,M,x),a.attachToViewContainerRef(),_a(lw(w),g,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=Rv(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),h=c_(this._lContainer,u);h&&(Ro(lw(this._lContainer),u),SE(h[1],h))}detach(a){const u=this._adjustIndex(a,-1),h=c_(this._lContainer,u);return h&&null!=Ro(lw(this._lContainer),u)?new Dv(h):null}_adjustIndex(a,u=0){return null==a?this.length+u:a}};function Rv(s){return s[8]}function lw(s){return s[8]||(s[8]=[])}function lI(s,a){let u;const h=a[s.index];if(gr(h))u=h;else{let f;if(8&s.type)f=pn(h);else{const g=a[11];f=g.createComment("");const w=Gi(s,a);cu(g,d_(g,w),f,function yM(s,a){return Tn(s)?s.nextSibling(a):a.nextSibling}(g,w),!1)}a[s.index]=u=M_(h,a,f,s),A_(a,u)}return new aw(u,s,a)}class bm{constructor(a){this.queryList=a,this.matches=null}clone(){return new bm(this.queryList)}setDirty(){this.queryList.setDirty()}}class ym{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const h=null!==a.contentQueries?a.contentQueries[0]:u.length,f=[];for(let g=0;g<h;g++){const w=u.getByIndex(g);f.push(this.queries[w.indexInDeclarationView].clone())}return new ym(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==Fv(a,u).matches&&this.queries[u].setDirty()}}class cw{constructor(a,u,h=null){this.predicate=a,this.flags=u,this.read=h}}class uw{constructor(a=[]){this.queries=a}elementStart(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let h=0;h<this.length;h++){const f=null!==u?u.length:0,g=this.getByIndex(h).embeddedTView(a,f);g&&(g.indexInDeclarationView=h,null!==u?u.push(g):u=[g])}return null!==u?new uw(u):null}template(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Pv{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new Pv(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const g=h[f];this.matchTNodeWithReadOption(a,u,Nv(u,g)),this.matchTNodeWithReadOption(a,u,Or(u,a,g,!1,!1))}else h===uf?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,Or(u,a,h,!1,!1))}matchTNodeWithReadOption(a,u,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===dm||f===kv||f===uf&&4&u.type)this.addMatch(u.index,-2);else{const g=Or(u,a,f,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,h)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function Nv(s,a){const u=s.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===a)return u[h+1];return null}function Dk(s,a,u,h){return-1===u?function xk(s,a){return 11&s.type?cc(s,a):4&s.type?vm(s,a):null}(a,s):-2===u?function Ik(s,a,u){return u===dm?cc(a,s):u===uf?vm(a,s):u===kv?lI(a,s):void 0}(s,a,h):Ao(s,s[1],u,a)}function uI(s,a,u,h){const f=a[19].queries[h];if(null===f.matches){const g=s.data,w=u.matches,x=[];for(let I=0;I<w.length;I+=2){const M=w[I];x.push(M<0?null:Dk(a,g[M],w[I+1],u.metadata.read))}f.matches=x}return f.matches}function dw(s,a,u,h){const f=s.queries.getByIndex(u),g=f.matches;if(null!==g){const w=uI(s,a,f,u);for(let x=0;x<g.length;x+=2){const I=g[x];if(I>0)h.push(w[x/2]);else{const M=g[x+1],O=a[-I];for(let j=10;j<O.length;j++){const G=O[j];G[17]===G[3]&&dw(G[1],G,M,h)}if(null!==O[9]){const j=O[9];for(let G=0;G<j.length;G++){const J=j[G];dw(J[1],J,M,h)}}}}}return h}function dI(s){const a=Te(),u=Kt(),h=nh();Nc(h+1);const f=Fv(u,h);if(s.dirty&&ks(a)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const g=f.crossesNgTemplate?dw(u,a,h,[]):uI(u,a,f,h);s.reset(g,uk),s.notifyOnChanges()}return!0}return!1}function hI(s,a,u){const h=Kt();h.firstCreatePass&&(hw(h,new cw(s,a,u),-1),2==(2&a)&&(h.staticViewQueries=!0)),wm(h,Te(),a)}function fI(s,a,u,h){const f=Kt();if(f.firstCreatePass){const g=Rn();hw(f,new cw(a,u,h),g.index),function mI(s,a){const u=s.contentQueries||(s.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,a)}(f,s),2==(2&u)&&(f.staticContentQueries=!0)}wm(f,Te(),u)}function pI(){return function Sk(s,a){return s[19].queries[a].queryList}(Te(),nh())}function wm(s,a,u){const h=new cf(4==(4&u));I_(s,a,h,h.destroy),null===a[19]&&(a[19]=new ym),a[19].queries.push(new bm(h))}function hw(s,a,u){null===s.queries&&(s.queries=new uw),s.queries.track(new Pv(a,u))}function Fv(s,a){return s.queries.getByIndex(a)}function zv(...s){}const ww=new Zn("Application Initializer");let Wv=(()=>{class s{constructor(u){this.appInits=u,this.resolve=zv,this.reject=zv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,f)=>{this.resolve=h,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(tv(g))u.push(g);else if(C0(g)){const w=new Promise((x,I)=>{g.subscribe({complete:x,error:I})});u.push(w)}}Promise.all(u).then(()=>{h()}).catch(f=>{this.reject(f)}),0===u.length&&h(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(at(ww,8))},s.\u0275prov=un({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const DI=new Zn("AppId",{providedIn:"root",factory:function II(){return`${Yv()}${Yv()}${Yv()}`}});function Yv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const SI=new Zn("Platform Initializer"),Gk=new Zn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Cw=new Zn("appBootstrapListener");let qk=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=un({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const pf=new Zn("LocaleId",{providedIn:"root",factory:()=>Rt(pf,gt.Optional|gt.SkipSelf)||function zk(){return"undefined"!=typeof $localize&&$localize.locale||Md}()}),JF=new Zn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class TI{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let Zk=(()=>{class s{compileModuleSync(u){return new Sv(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),g=C(En(u).declarations).reduce((w,x)=>{const I=en(x);return I&&w.push(new qD(I)),w},[]);return new TI(h,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=un({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Ew=(()=>Promise.resolve(0))();function Cm(s){"undefined"==typeof Zone?Ew.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Va{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ea(!1),this.onMicrotaskEmpty=new ea(!1),this.onStable=new ea(!1),this.onError=new ea(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&u,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Qk(){let s=Zt.requestAnimationFrame,a=Zt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&a){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function e1(s){const a=()=>{!function Jk(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Zt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Kv(s),s.isCheckStableRunning=!0,xw(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Kv(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,f,g,w,x)=>{try{return MI(s),u.invokeTask(f,g,w,x)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&a(),AI(s)}},onInvoke:(u,h,f,g,w,x,I)=>{try{return MI(s),u.invoke(f,g,w,x,I)}finally{s.shouldCoalesceRunChangeDetection&&a(),AI(s)}},onHasTask:(u,h,f,g)=>{u.hasTask(f,g),h===f&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,Kv(s),xw(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,h,f,g)=>(u.handleError(f,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Va.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Va.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,u,h){return this._inner.run(a,u,h)}runTask(a,u,h,f){const g=this._inner,w=g.scheduleEventTask("NgZoneEvent: "+f,a,Xk,zv,zv);try{return g.runTask(w,u,h)}finally{g.cancelTask(w)}}runGuarded(a,u,h){return this._inner.runGuarded(a,u,h)}runOutsideAngular(a){return this._outer.run(a)}}const Xk={};function xw(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Kv(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function MI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function AI(s){s._nesting--,xw(s)}class t1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ea,this.onMicrotaskEmpty=new ea,this.onStable=new ea,this.onError=new ea}run(a,u,h){return a.apply(u,h)}runGuarded(a,u,h){return a.apply(u,h)}runOutsideAngular(a){return a()}runTask(a,u,h,f){return a.apply(u,h)}}let Dw=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Va.assertNotInAngularZone(),Cm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Cm(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,f){let g=-1;h&&h>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==g),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:f})}whenStable(u,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,h,f){return[]}}return s.\u0275fac=function(u){return new(u||s)(at(Va))},s.\u0275prov=un({token:s,factory:s.\u0275fac}),s})(),n1=(()=>{class s{constructor(){this._applications=new Map,Qv.addToWindow(this)}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return Qv.findTestabilityInTree(this,u,h)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=un({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class r1{addToWindow(a){}findTestabilityInTree(a,u,h){return null}}function mf(s){Qv=s}let Qv=new r1,bu=null;const gf=new Zn("AllowMultipleToken"),_f=new Zn("PlatformOnDestroy");class s1{constructor(a,u){this.name=a,this.token=u}}function kI(s,a,u=[]){const h=`Platform: ${a}`,f=new Zn(h);return(g=[])=>{let w=Em();if(!w||w.injector.get(gf,!1)){const x=[...u,...g,{provide:f,useValue:!0}];s?s(x):function a1(s){if(bu&&!bu.get(gf,!1))throw new Fe(400,"");bu=s;const a=s.get(Jv),u=s.get(SI,null);u&&u.forEach(h=>h())}(function Xv(s=[],a){return Zs.create({name:a,providers:[{provide:Vh,useValue:"platform"},{provide:_f,useValue:()=>bu=null},...s]})}(x,h))}return function l1(s){const a=Em();if(!a)throw new Fe(401,"");return a}()}}function Em(){var s;return null!==(s=null==bu?void 0:bu.get(Jv))&&void 0!==s?s:null}let Jv=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const x=function uc(s,a){let u;return u="noop"===s?new t1:("zone.js"===s?void 0:s)||new Va({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),u}(h?h.ngZone:void 0,{ngZoneEventCoalescing:h&&h.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:h&&h.ngZoneRunCoalescing||!1}),I=[{provide:Va,useValue:x}];return x.run(()=>{const M=Zs.create({providers:I,parent:this.injector,name:u.moduleType.name}),O=u.create(M),j=O.injector.get(su,null);if(!j)throw new Fe(402,"");return x.runOutsideAngular(()=>{const G=x.onError.subscribe({next:J=>{j.handleError(J)}});O.onDestroy(()=>{vf(this._modules,O),G.unsubscribe()})}),function RI(s,a,u){try{const h=u();return tv(h)?h.catch(f=>{throw a.runOutsideAngular(()=>s.handleError(f)),f}):h}catch(h){throw a.runOutsideAngular(()=>s.handleError(h)),h}}(j,x,()=>{const G=O.injector.get(Wv);return G.runInitializers(),G.donePromise.then(()=>(function pv(s){ht(s,"Expected localeId to be defined"),"string"==typeof s&&(q0=s.toLowerCase().replace(/_/g,"-"))}(O.injector.get(pf,Md)||Md),this._moduleDoBootstrap(O),O))})})}bootstrapModule(u,h=[]){const f=dc({},h);return function Br(s,a,u){const h=new Sv(u);return Promise.resolve(h)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(u){const h=u.injector.get(Iw);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Fe(403,"");u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Fe(404,"");this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(_f,null);null==u||u(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(at(Zs))},s.\u0275prov=un({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function dc(s,a){return Array.isArray(a)?a.reduce(dc,s):Object.assign(Object.assign({},s),a)}let Iw=(()=>{class s{constructor(u,h,f,g){this._zone=u,this._injector=h,this._exceptionHandler=f,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new U.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),x=new U.y(I=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{Va.assertNotInAngularZone(),Cm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const O=this._zone.onUnstable.subscribe(()=>{Va.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{M.unsubscribe(),O.unsubscribe()}});this.isStable=(0,ue.T)(w,x.pipe((0,re.B)()))}bootstrap(u,h){if(!this._initStatus.done)throw new Fe(405,"");let f;f=u instanceof or?u:this._injector.get(Ev).resolveComponentFactory(u),this.componentTypes.push(f.componentType);const g=function o1(s){return s.isBoundToModule}(f)?void 0:this._injector.get(Ad),x=f.create(Zs.NULL,[],h||f.selector,g),I=x.location.nativeElement,M=x.injector.get(Dw,null),O=M&&x.injector.get(n1);return M&&O&&O.registerApplication(I,M),x.onDestroy(()=>{this.detachView(x.hostView),vf(this.components,x),O&&O.unregisterApplication(I)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new Fe(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;vf(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(Cw,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(at(Va),at(Zs),at(su),at(Wv))},s.\u0275prov=un({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function vf(s,a){const u=s.indexOf(a);u>-1&&s.splice(u,1)}let PI=!0,NI=!1;function d1(){return NI=!0,PI}function h1(){if(NI)throw new Error("Cannot enable prod mode after platform setup.");PI=!1}let cs=(()=>{class s{}return s.__NG_ELEMENT_ID__=Sw,s})();function Sw(s){return function Tw(s,a,u){if(Is(s)&&!u){const h=qi(s.index,a);return new Dv(h,h)}return 47&s.type?new Dv(a[16],a):null}(Rn(),Te(),16==(16&s))}class Ow{constructor(){}supports(a){return wd(a)}create(a){return new v1(a)}}const VI=(s,a)=>a;class v1{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||VI}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,h=this._removalsHead,f=0,g=null;for(;u||h;){const w=!h||u&&u.currentIndex<xm(h,f,g)?u:h,x=xm(w,f,g),I=w.currentIndex;if(w===h)f--,h=h._nextRemoved;else if(u=u._next,null==w.previousIndex)f++;else{g||(g=[]);const M=x-f,O=I-f;if(M!=O){for(let G=0;G<M;G++){const J=G<g.length?g[G]:g[G]=0,Ce=J+G;O<=Ce&&Ce<M&&(g[G]=J+1)}g[w.previousIndex]=O-M}}x!==I&&a(w,x,I)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!wd(a))throw new Fe(900,"");return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,w,u=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let x=0;x<this.length;x++)g=a[x],w=this._trackByFn(x,g),null!==u&&Object.is(u.trackById,w)?(h&&(u=this._verifyReinsertion(u,g,w,x)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,w,x),h=!0),u=u._next}else f=0,function nA(s,a){if(Array.isArray(s))for(let u=0;u<s.length;u++)a(s[u]);else{const u=s[Aa()]();let h;for(;!(h=u.next()).done;)a(h.value)}}(a,x=>{w=this._trackByFn(f,x),null!==u&&Object.is(u.trackById,w)?(h&&(u=this._verifyReinsertion(u,x,w,f)),Object.is(u.item,x)||this._addIdentityChange(u,x)):(u=this._mismatch(u,x,w,f),h=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,h,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,g,f)):a=this._addAfter(new b1(u,h),g,f),a}_verifyReinsertion(a,u,h,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,u,h),this._addToMoves(a,h),a}_moveAfter(a,u,h){return this._unlink(a),this._insertAfter(a,u,h),this._addToMoves(a,h),a}_addAfter(a,u,h){return this._insertAfter(a,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,h){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new Ua),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,h=a._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ua),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class b1{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class xl{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const u=a._prevDup,h=a._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class Ua{constructor(){this.map=new Map}put(a){const u=a.trackById;let h=this.map.get(u);h||(h=new xl,this.map.set(u,h)),h.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xm(s,a,u){const h=s.previousIndex;if(null===h)return h;let f=0;return u&&h<u.length&&(f=u[h]),h+a+f}class UI{constructor(){}supports(a){return a instanceof Map||H_(a)}create(){return new y1}}class y1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||H_(a)))throw new Fe(900,"")}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(f,h);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const h=a._prev;return u._next=a,u._prev=h,a._prev=u,h&&(h._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const g=f._prev,w=f._next;return g&&(g._next=w),w&&(w._prev=g),f._next=null,f._prev=null,f}const h=new bf(a);return this._records.set(a,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(h=>u(a[h],h))}}class bf{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function yf(){return new ib([new Ow])}let ib=(()=>{class s{constructor(u){this.factories=u}static create(u,h){if(null!=h){const f=h.factories.slice();u=u.concat(f)}return new s(u)}static extend(u){return{provide:s,useFactory:h=>s.create(u,h||yf()),deps:[[s,new hl,new nr]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(null!=h)return h;throw new Fe(901,"")}}return s.\u0275prov=un({token:s,providedIn:"root",factory:yf}),s})();function Pw(){return new Nw([new UI])}let Nw=(()=>{class s{constructor(u){this.factories=u}static create(u,h){if(h){const f=h.factories.slice();u=u.concat(f)}return new s(u)}static extend(u){return{provide:s,useFactory:h=>s.create(u,h||Pw()),deps:[[s,new hl,new nr]]}}find(u){const h=this.factories.find(g=>g.supports(u));if(h)return h;throw new Fe(901,"")}}return s.\u0275prov=un({token:s,providedIn:"root",factory:Pw}),s})();const jI=kI(null,"core",[]);let rb=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(at(Iw))},s.\u0275mod=te({type:s}),s.\u0275inj=sn({}),s})()},3942:(dt,Ie,V)=>{V.d(Ie,{Z:()=>Fe});var l=V(2090),ee=V(4859),U=V(9681),ue=V(1877);class re{constructor(_e,De){this._delegate=_e,this.firebase=De,(0,U._addComponent)(_e,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,U.deleteApp)(this._delegate)))}_getService(_e,De=U._DEFAULT_ENTRY_NAME){var ot;this._delegate.checkDestroyed();const Je=this._delegate.container.getProvider(_e);return!Je.isInitialized()&&"EXPLICIT"===(null===(ot=Je.getComponent())||void 0===ot?void 0:ot.instantiationMode)&&Je.initialize(),Je.getImmediate({identifier:De})}_removeServiceInstance(_e,De=U._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(De)}_addComponent(_e){(0,U._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,U._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function he(){const je=function ge(je){const _e={},De={__esModule:!0,initializeApp:function Me(qe,se={}){const X=U.initializeApp(qe,se);if((0,l.r3)(_e,X.name))return _e[X.name];const ae=new je(X,De);return _e[X.name]=ae,ae},app:Je,registerVersion:U.registerVersion,setLogLevel:U.setLogLevel,onLog:U.onLog,apps:null,SDK_VERSION:U.SDK_VERSION,INTERNAL:{registerComponent:function xe(qe){const se=qe.name,X=se.replace("-compat","");if(U._registerComponent(qe)&&"PUBLIC"===qe.type){const ae=(we=Je())=>{if("function"!=typeof we[X])throw ie.create("invalid-app-argument",{appName:se});return we[X]()};void 0!==qe.serviceProps&&(0,l.ZB)(ae,qe.serviceProps),De[X]=ae,je.prototype[X]=function(...we){return this._getService.bind(this,se).apply(this,qe.multipleInstances?we:[])}}return"PUBLIC"===qe.type?De[X]:null},removeApp:function ot(qe){delete _e[qe]},useAsService:function Ze(qe,se){return"serverAuth"===se?null:se},modularAPIs:U}};function Je(qe){if(!(0,l.r3)(_e,qe=qe||U._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:qe});return _e[qe]}return De.default=De,Object.defineProperty(De,"apps",{get:function Ee(){return Object.keys(_e).map(qe=>_e[qe])}}),Je.App=je,De}(re);return je.INTERNAL=Object.assign(Object.assign({},je.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function _e(De){(0,l.ZB)(je,De)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),je}(),z=new ue.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const je=self.firebase.SDK_VERSION;je&&je.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Fe=W;!function Re(je){(0,U.registerVersion)("@firebase/app-compat","0.1.22",je)}()},9681:(dt,Ie,V)=>{V.r(Ie),V.d(Ie,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>Xi,_DEFAULT_ENTRY_NAME:()=>Jn,_addComponent:()=>yn,_addOrOverwriteComponent:()=>Wr,_apps:()=>vt,_clearComponents:()=>Wt,_components:()=>bn,_getProvider:()=>Eo,_registerComponent:()=>un,_removeServiceInstance:()=>sn,deleteApp:()=>Do,getApp:()=>Ji,getApps:()=>Wo,initializeApp:()=>xo,onLog:()=>Ei,registerVersion:()=>mr,setLogLevel:()=>pi});var l=V(5861),ee=V(4859),U=V(1877),ue=V(2090);class re{constructor(Ae){this.container=Ae}getPlatformInfoString(){return this.container.getProviders().map(nt=>{if(function ye(tt){const Ae=tt.getComponent();return"VERSION"===(null==Ae?void 0:Ae.type)}(nt)){const yt=nt.getImmediate();return`${yt.library}/${yt.version}`}return null}).filter(nt=>nt).join(" ")}}const ie="@firebase/app",he=new U.Yd("@firebase/app"),Jn="[DEFAULT]",ht={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vt=new Map,bn=new Map;function yn(tt,Ae){try{tt.container.addComponent(Ae)}catch(nt){he.debug(`Component ${Ae.name} failed to register with FirebaseApp ${tt.name}`,nt)}}function Wr(tt,Ae){tt.container.addOrOverwriteComponent(Ae)}function un(tt){const Ae=tt.name;if(bn.has(Ae))return he.debug(`There were multiple attempts to register component ${Ae}.`),!1;bn.set(Ae,tt);for(const nt of vt.values())yn(nt,tt);return!0}function Eo(tt,Ae){const nt=tt.container.getProvider("heartbeat").getImmediate({optional:!0});return nt&&nt.triggerHeartbeat(),tt.container.getProvider(Ae)}function sn(tt,Ae,nt=Jn){Eo(tt,Ae).clearInstance(nt)}function Wt(){bn.clear()}const pr=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ws{constructor(Ae,nt,yt){this._isDeleted=!1,this._options=Object.assign({},Ae),this._config=Object.assign({},nt),this._name=nt.name,this._automaticDataCollectionEnabled=nt.automaticDataCollectionEnabled,this._container=yt,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ae}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ae){this._isDeleted=Ae}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}const Xi="9.6.11";function xo(tt,Ae={}){"object"!=typeof Ae&&(Ae={name:Ae});const nt=Object.assign({name:Jn,automaticDataCollectionEnabled:!1},Ae),yt=nt.name;if("string"!=typeof yt||!yt)throw pr.create("bad-app-name",{appName:String(yt)});const qt=vt.get(yt);if(qt){if((0,ue.vZ)(tt,qt.options)&&(0,ue.vZ)(nt,qt.config))return qt;throw pr.create("duplicate-app",{appName:yt})}const $t=new ee.H0(yt);for(const $ of bn.values())$t.addComponent($);const q=new ws(tt,nt,$t);return vt.set(yt,q),q}function Ji(tt=Jn){const Ae=vt.get(tt);if(!Ae)throw pr.create("no-app",{appName:tt});return Ae}function Wo(){return Array.from(vt.values())}function Do(tt){return gt.apply(this,arguments)}function gt(){return(gt=(0,l.Z)(function*(tt){const Ae=tt.name;vt.has(Ae)&&(vt.delete(Ae),yield Promise.all(tt.container.getProviders().map(nt=>nt.delete())),tt.isDeleted=!0)})).apply(this,arguments)}function mr(tt,Ae,nt){var yt;let qt=null!==(yt=ht[tt])&&void 0!==yt?yt:tt;nt&&(qt+=`-${nt}`);const $t=qt.match(/\s|\//),q=Ae.match(/\s|\//);if($t||q){const $=[`Unable to register library "${qt}" with version "${Ae}":`];return $t&&$.push(`library name "${qt}" contains illegal characters (whitespace or "/")`),$t&&q&&$.push("and"),q&&$.push(`version name "${Ae}" contains illegal characters (whitespace or "/")`),void he.warn($.join(" "))}un(new ee.wA(`${qt}-version`,()=>({library:qt,version:Ae}),"VERSION"))}function Ei(tt,Ae){if(null!==tt&&"function"!=typeof tt)throw pr.create("invalid-log-argument");(0,U.Am)(tt,Ae)}function pi(tt){(0,U.Ub)(tt)}const Sn="firebase-heartbeat-store";let xi=null;function Yo(){return xi||(xi=(0,ue.X3)("firebase-heartbeat-database",1,(tt,Ae)=>{0===Ae&&tt.createObjectStore(Sn)}).catch(tt=>{throw pr.create("storage-open",{originalErrorMessage:tt.message})})),xi}function Yt(){return(Yt=(0,l.Z)(function*(tt){try{return(yield Yo()).transaction(Sn).objectStore(Sn).get(Pi(tt))}catch(Ae){throw pr.create("storage-get",{originalErrorMessage:Ae.message})}})).apply(this,arguments)}function ct(tt,Ae){return It.apply(this,arguments)}function It(){return(It=(0,l.Z)(function*(tt,Ae){try{const yt=(yield Yo()).transaction(Sn,"readwrite");return yield yt.objectStore(Sn).put(Ae,Pi(tt)),yt.complete}catch(nt){throw pr.create("storage-set",{originalErrorMessage:nt.message})}})).apply(this,arguments)}function Pi(tt){return`${tt.name}!${tt.options.appId}`}class na{constructor(Ae){this.container=Ae,this._heartbeatsCache=null;const nt=this.container.getProvider("app").getImmediate();this._storage=new bt(nt),this._heartbeatsCachePromise=this._storage.read().then(yt=>(this._heartbeatsCache=yt,yt))}triggerHeartbeat(){var Ae=this;return(0,l.Z)(function*(){const yt=Ae.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),qt=ji();if(null===Ae._heartbeatsCache&&(Ae._heartbeatsCache=yield Ae._heartbeatsCachePromise),Ae._heartbeatsCache.lastSentHeartbeatDate!==qt&&!Ae._heartbeatsCache.heartbeats.some($t=>$t.date===qt))return Ae._heartbeatsCache.heartbeats.push({date:qt,agent:yt}),Ae._heartbeatsCache.heartbeats=Ae._heartbeatsCache.heartbeats.filter($t=>{const q=new Date($t.date).valueOf();return Date.now()-q<=2592e6}),Ae._storage.overwrite(Ae._heartbeatsCache)})()}getHeartbeatsHeader(){var Ae=this;return(0,l.Z)(function*(){if(null===Ae._heartbeatsCache&&(yield Ae._heartbeatsCachePromise),null===Ae._heartbeatsCache||0===Ae._heartbeatsCache.heartbeats.length)return"";const nt=ji(),{heartbeatsToSend:yt,unsentEntries:qt}=function Ni(tt,Ae=1024){const nt=[];let yt=tt.slice();for(const qt of tt){const $t=nt.find(q=>q.agent===qt.agent);if($t){if($t.dates.push(qt.date),Hi(nt)>Ae){$t.dates.pop();break}}else if(nt.push({agent:qt.agent,dates:[qt.date]}),Hi(nt)>Ae){nt.pop();break}yt=yt.slice(1)}return{heartbeatsToSend:nt,unsentEntries:yt}}(Ae._heartbeatsCache.heartbeats),$t=(0,ue.L)(JSON.stringify({version:2,heartbeats:yt}));return Ae._heartbeatsCache.lastSentHeartbeatDate=nt,qt.length>0?(Ae._heartbeatsCache.heartbeats=qt,yield Ae._storage.overwrite(Ae._heartbeatsCache)):(Ae._heartbeatsCache.heartbeats=[],Ae._storage.overwrite(Ae._heartbeatsCache)),$t})()}}function ji(){return(new Date).toISOString().substring(0,10)}class bt{constructor(Ae){this.app=Ae,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ae=this;return(0,l.Z)(function*(){return(yield Ae._canUseIndexedDBPromise)&&(yield function Za(tt){return Yt.apply(this,arguments)}(Ae.app))||{heartbeats:[]}})()}overwrite(Ae){var nt=this;return(0,l.Z)(function*(){var yt;if(yield nt._canUseIndexedDBPromise){const $t=yield nt.read();return ct(nt.app,{lastSentHeartbeatDate:null!==(yt=Ae.lastSentHeartbeatDate)&&void 0!==yt?yt:$t.lastSentHeartbeatDate,heartbeats:Ae.heartbeats})}})()}add(Ae){var nt=this;return(0,l.Z)(function*(){var yt;if(yield nt._canUseIndexedDBPromise){const $t=yield nt.read();return ct(nt.app,{lastSentHeartbeatDate:null!==(yt=Ae.lastSentHeartbeatDate)&&void 0!==yt?yt:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...Ae.heartbeats]})}})()}}function Hi(tt){return(0,ue.L)(JSON.stringify({version:2,heartbeats:tt})).length}!function Gt(tt){un(new ee.wA("platform-logger",Ae=>new re(Ae),"PRIVATE")),un(new ee.wA("heartbeat",Ae=>new na(Ae),"PRIVATE")),mr(ie,"0.7.21",tt),mr(ie,"0.7.21","esm2017"),mr("fire-js","")}("")},4859:(dt,Ie,V)=>{V.d(Ie,{H0:()=>ge,wA:()=>U,zt:()=>re});var l=V(5861),ee=V(2090);class U{constructor(W,z,ne){this.name=W,this.instanceFactory=z,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const ue="[DEFAULT]";class re{constructor(W,z){this.name=W,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const z=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(z)){const ne=new ee.BH;if(this.instancesDeferred.set(z,ne),this.isInitialized(z)||this.shouldAutoInitialize())try{const Qe=this.getOrInitializeService({instanceIdentifier:z});Qe&&ne.resolve(Qe)}catch(Qe){}}return this.instancesDeferred.get(z).promise}getImmediate(W){var z;const ne=this.normalizeInstanceIdentifier(null==W?void 0:W.identifier),Qe=null!==(z=null==W?void 0:W.optional)&&void 0!==z&&z;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(Qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Re){if(Qe)return null;throw Re}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function ie(he){return"EAGER"===he.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:ue})}catch(z){}for(const[z,ne]of this.instancesDeferred.entries()){const Qe=this.normalizeInstanceIdentifier(z);try{const Re=this.getOrInitializeService({instanceIdentifier:Qe});ne.resolve(Re)}catch(Re){}}}}clearInstance(W=ue){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,l.Z)(function*(){const z=Array.from(W.instances.values());yield Promise.all([...z.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...z.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=ue){return this.instances.has(W)}getOptions(W=ue){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:z={}}=W,ne=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Qe=this.getOrInitializeService({instanceIdentifier:ne,options:z});for(const[Re,Fe]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(Re)&&Fe.resolve(Qe);return Qe}onInit(W,z){var ne;const Qe=this.normalizeInstanceIdentifier(z),Re=null!==(ne=this.onInitCallbacks.get(Qe))&&void 0!==ne?ne:new Set;Re.add(W),this.onInitCallbacks.set(Qe,Re);const Fe=this.instances.get(Qe);return Fe&&W(Fe,Qe),()=>{Re.delete(W)}}invokeOnInitCallbacks(W,z){const ne=this.onInitCallbacks.get(z);if(ne)for(const Qe of ne)try{Qe(W,z)}catch(Re){}}getOrInitializeService({instanceIdentifier:W,options:z={}}){let ne=this.instances.get(W);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(he=W,he===ue?void 0:he),options:z}),this.instances.set(W,ne),this.instancesOptions.set(W,z),this.invokeOnInitCallbacks(ne,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,ne)}catch(Qe){}var he;return ne||null}normalizeInstanceIdentifier(W=ue){return this.component?this.component.multipleInstances?W:ue:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const z=this.getProvider(W.name);if(z.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);z.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const z=new re(W,this);return this.providers.set(W,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(dt,Ie,V)=>{V.d(Ie,{Am:()=>he,Ub:()=>ge,Yd:()=>ie,in:()=>ee});const l=[];var ee=(()=>{return(W=ee||(ee={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",ee;var W})();const U={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ue=ee.INFO,re={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},ye=(W,z,...ne)=>{if(z<W.logLevel)return;const Qe=(new Date).toISOString(),Re=re[z];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Re](`[${Qe}]  ${W.name}:`,...ne)};class ie{constructor(z){this.name=z,this._logLevel=ue,this._logHandler=ye,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in ee))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?U[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...z),this._logHandler(this,ee.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...z),this._logHandler(this,ee.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...z),this._logHandler(this,ee.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...z),this._logHandler(this,ee.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...z),this._logHandler(this,ee.ERROR,...z)}}function ge(W){l.forEach(z=>{z.setLogLevel(W)})}function he(W,z){for(const ne of l){let Qe=null;z&&z.level&&(Qe=U[z.level]),ne.userLogHandler=null===W?null:(Re,Fe,...je)=>{const _e=je.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch(ot){return null}}).filter(De=>De).join(" ");Fe>=(null!=Qe?Qe:Re.logLevel)&&W({level:ee[Fe].toLowerCase(),message:_e,args:je,type:Re.name})}}}},5861:(dt,Ie,V)=>{function l(U,ue,re,ye,ie,ge,he){try{var W=U[ge](he),z=W.value}catch(ne){return void re(ne)}W.done?ue(z):Promise.resolve(z).then(ye,ie)}function ee(U){return function(){var ue=this,re=arguments;return new Promise(function(ye,ie){var ge=U.apply(ue,re);function he(z){l(ge,ye,ie,he,W,"next",z)}function W(z){l(ge,ye,ie,he,W,"throw",z)}he(void 0)})}}V.d(Ie,{Z:()=>ee})}},dt=>{dt(dt.s=7133)}]);